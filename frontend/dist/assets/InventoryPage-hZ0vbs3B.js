import{r as t,i as Ue,k as Ra,l as _e,m as Se,p as En,n as D,o as wt,q as Sn,u as Ne,t as et,v as ja,w as Rt,x as ue,y as Oa,z as Ea,B as Ma,D as Ct,R as cn,E as xt,F as Na,G as Fa,H as Mn,J as kn,K as dt,L as ft,M as Nn,N as Va,O as _a,Q as dn,U as fn,_ as Pe,V as Fn,W as Pn,X as ct,Y as Aa,Z as Ta,$ as $a,a0 as Vn,a1 as _n,a2 as Ba,a3 as Ha,I as Tt,a4 as Ya,a5 as yt,a6 as An,a7 as Tn,a8 as $n,a9 as Bn,aa as Hn,ab as Yn,ac as qn,ad as Ln,ae as Kn,af as Un,ag as zn,ah as Wn,ai as Gn,aj as Qn,ak as Xn,al as Zn,am as qa,an as ve,j as a,ao as pn,d as Me,f as He,ap as Je,s as ke,aq as Cn,ar as La,as as Ka,at as Ua,au as za,h as Wa,av as Ga,T as Qa,e as Xa}from"./index-CXzfmlPR.js";import{g as pt,a as Za,u as Ja,d as er}from"./addItemToInventory-CZblZqRk.js";import{T as Jn}from"./index-DFFp316Q.js";import{C as tr,T as nr}from"./index-CC7Ff95b.js";import{F as vn}from"./Table-C__1O1gZ.js";import"./PlusOutlined-CG85mdBA.js";import"./addEventListener-CLfSFitR.js";function $t(e,l){return e!==void 0?e:l?"bottomRight":"bottomLeft"}function ea(e,l){var o=$t(e,l),r=o==null?void 0:o.toLowerCase().endsWith("right"),n=r?"insetInlineEnd":"insetInlineStart";return l&&(n=["insetInlineStart","insetInlineEnd"].find(function(i){return i!==n})),n}var ar={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};function ta(e){var l=e.popupElement,o=e.popupStyle,r=e.popupClassName,n=e.popupAlign,i=e.transitionName,s=e.getPopupContainer,c=e.children,d=e.range,v=e.placement,u=e.builtinPlacements,f=u===void 0?ar:u,h=e.direction,m=e.visible,x=e.onClose,g=t.useContext(Ue),y=g.prefixCls,C="".concat(y,"-dropdown"),b=$t(v,h==="rtl");return t.createElement(Ra,{showAction:[],hideAction:["click"],popupPlacement:b,builtinPlacements:f,prefixCls:C,popupTransitionName:i,popup:l,popupAlign:n,popupVisible:m,popupClassName:_e(r,Se(Se({},"".concat(C,"-range"),d),"".concat(C,"-rtl"),h==="rtl")),popupStyle:o,stretch:"minWidth",getPopupContainer:s,onPopupVisibleChange:function(I){I||x()}},c)}function na(e){return En(e,["placement","builtinPlacements","popupAlign","getPopupContainer","transitionName","direction"])}function aa(e,l){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=t.useState([!1,!1]),n=D(r,2),i=n[0],s=n[1],c=function(u,f){s(function(h){return wt(h,f,u)})},d=t.useMemo(function(){return i.map(function(v,u){if(v)return!0;var f=e[u];return f?!!(!o[u]&&!f||f&&l(f,{activeIndex:u})):!1})},[e,i,l,o]);return[d,c]}function rr(e,l,o){if(l===!1)return null;var r=l&&Sn(l)==="object"?l:{};return r.clearIcon||o||t.createElement("span",{className:"".concat(e,"-clear-btn")})}function lr(e,l,o,r,n){var i=Ne(function(s,c){return!!(o&&o(s,c)||r&&e.isAfter(r,s)&&!et(e,l,r,s,c.type)||n&&e.isAfter(s,n)&&!et(e,l,n,s,c.type))});return i}function or(e,l,o){return t.useMemo(function(){var r=ja(e,l,o),n=Rt(r),i=n[0],s=Sn(i)==="object"&&i.type==="mask"?i.format:null;return[n.map(function(c){return typeof c=="string"||typeof c=="function"?c:c.format}),s]},[e,l,o])}function ir(e,l,o){return typeof e[0]=="function"||o?!0:l}function sr(e,l,o,r){var n=Ne(function(i,s){var c=ue({type:l},s);if(delete c.activeIndex,!e.isValidate(i)||o&&o(i,c))return!0;if((l==="date"||l==="time")&&r){var d,v=s&&s.activeIndex===1?"end":"start",u=((d=r.disabledTime)===null||d===void 0?void 0:d.call(r,i,v,{from:c.from}))||{},f=u.disabledHours,h=u.disabledMinutes,m=u.disabledSeconds,x=u.disabledMilliseconds,g=r.disabledHours,y=r.disabledMinutes,C=r.disabledSeconds,b=f||g,R=h||y,I=m||C,j=e.getHour(i),N=e.getMinute(i),X=e.getSecond(i),Y=e.getMillisecond(i);if(b&&b().includes(j)||R&&R(j).includes(N)||I&&I(j,N).includes(X)||x&&x(j,N,X).includes(Y))return!0}return!1});return n}function _t(e){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=t.useMemo(function(){var r=e&&Rt(e);return l&&r&&(r[1]=r[1]||r[0]),r},[e,l]);return o}function ra(e,l){var o=e.generateConfig,r=e.locale,n=e.picker,i=n===void 0?"date":n,s=e.prefixCls,c=s===void 0?"rc-picker":s,d=e.styles,v=d===void 0?{}:d,u=e.classNames,f=u===void 0?{}:u,h=e.order,m=h===void 0?!0:h,x=e.components,g=x===void 0?{}:x,y=e.inputRender,C=e.allowClear,b=e.clearIcon,R=e.needConfirm,I=e.multiple,j=e.format,N=e.inputReadOnly,X=e.disabledDate,Y=e.minDate,U=e.maxDate,k=e.showTime,P=e.value,$=e.defaultValue,Z=e.pickerValue,E=e.defaultPickerValue,O=_t(P),p=_t($),ne=_t(Z),B=_t(E),J=i==="date"&&k?"datetime":i,F=J==="time"||J==="datetime",q=F||I,w=R??F,ae=Oa(e),ee=D(ae,4),oe=ee[0],L=ee[1],M=ee[2],W=ee[3],S=Ea(r,L),G=t.useMemo(function(){return Ma(J,M,W,oe,S)},[J,M,W,oe,S]),re=t.useMemo(function(){return ue(ue({},e),{},{prefixCls:c,locale:S,picker:i,styles:v,classNames:f,order:m,components:ue({input:y},g),clearIcon:rr(c,C,b),showTime:G,value:O,defaultValue:p,pickerValue:ne,defaultPickerValue:B},l==null?void 0:l())},[e]),ce=or(J,S,j),z=D(ce,2),H=z[0],ie=z[1],fe=ir(H,N,I),V=lr(o,r,X,Y,U),Ce=sr(o,i,V,G),me=t.useMemo(function(){return ue(ue({},re),{},{needConfirm:w,inputReadOnly:fe,disabledDate:V})},[re,w,fe,V]);return[me,J,q,H,ie,Ce]}function ur(e,l,o){var r=Ct(l,{value:e}),n=D(r,2),i=n[0],s=n[1],c=cn.useRef(e),d=cn.useRef(),v=function(){xt.cancel(d.current)},u=Ne(function(){s(c.current),o&&i!==c.current&&o(c.current)}),f=Ne(function(h,m){v(),c.current=h,h||m?u():d.current=xt(u)});return cn.useEffect(function(){return v},[]),[i,f]}function la(e,l){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,n=o.every(function(u){return u})?!1:e,i=ur(n,l||!1,r),s=D(i,2),c=s[0],d=s[1];function v(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!f.inherit||c)&&d(u,f.force)}return[c,v]}function oa(e){var l=t.useRef();return t.useImperativeHandle(e,function(){var o;return{nativeElement:(o=l.current)===null||o===void 0?void 0:o.nativeElement,focus:function(n){var i;(i=l.current)===null||i===void 0||i.focus(n)},blur:function(){var n;(n=l.current)===null||n===void 0||n.blur()}}}),l}function ia(e,l){return t.useMemo(function(){return e||(l?(Na(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.entries(l).map(function(o){var r=D(o,2),n=r[0],i=r[1];return{label:n,value:i}})):[])},[e,l])}function bn(e,l){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=t.useRef(l);r.current=l,Fa(function(){if(e)r.current(e);else{var n=xt(function(){r.current(e)},o);return function(){xt.cancel(n)}}},[e])}function sa(e){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=t.useState(0),n=D(r,2),i=n[0],s=n[1],c=t.useState(!1),d=D(c,2),v=d[0],u=d[1],f=t.useRef([]),h=t.useRef(null),m=function(C){u(C)},x=function(C){return C&&(h.current=C),h.current},g=function(C){var b=f.current,R=new Set(b.filter(function(j){return C[j]||l[j]})),I=b[b.length-1]===0?1:0;return R.size>=2||e[I]?null:I};return bn(v||o,function(){v||(f.current=[])}),t.useEffect(function(){v&&f.current.push(i)},[v,i]),[v,m,x,i,s,g,f.current]}function cr(e,l,o,r,n,i){var s=o[o.length-1],c=function(v,u){var f=D(e,2),h=f[0],m=f[1],x=ue(ue({},u),{},{from:Mn(e,o)});return s===1&&l[0]&&h&&!et(r,n,h,v,x.type)&&r.isAfter(h,v)||s===0&&l[1]&&m&&!et(r,n,m,v,x.type)&&r.isAfter(v,m)?!0:i==null?void 0:i(v,x)};return c}function Dt(e,l,o,r){switch(l){case"date":case"week":return e.addMonth(o,r);case"month":case"quarter":return e.addYear(o,r);case"year":return e.addYear(o,r*10);case"decade":return e.addYear(o,r*100);default:return o}}var mn=[];function ua(e,l,o,r,n,i,s,c){var d=arguments.length>8&&arguments[8]!==void 0?arguments[8]:mn,v=arguments.length>9&&arguments[9]!==void 0?arguments[9]:mn,u=arguments.length>10&&arguments[10]!==void 0?arguments[10]:mn,f=arguments.length>11?arguments[11]:void 0,h=arguments.length>12?arguments[12]:void 0,m=arguments.length>13?arguments[13]:void 0,x=s==="time",g=i||0,y=function(ne){var B=e.getNow();return x&&(B=kn(e,B)),d[ne]||o[ne]||B},C=D(v,2),b=C[0],R=C[1],I=Ct(function(){return y(0)},{value:b}),j=D(I,2),N=j[0],X=j[1],Y=Ct(function(){return y(1)},{value:R}),U=D(Y,2),k=U[0],P=U[1],$=t.useMemo(function(){var p=[N,k][g];return x?p:kn(e,p,u[g])},[x,N,k,g,e,u]),Z=function(ne){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"panel",J=[X,P][g];J(ne);var F=[N,k];F[g]=ne,f&&(!et(e,l,N,F[0],s)||!et(e,l,k,F[1],s))&&f(F,{source:B,range:g===1?"end":"start",mode:r})},E=function(ne,B){if(c){var J={date:"month",week:"month",month:"year",quarter:"year"},F=J[s];if(F&&!et(e,l,ne,B,F))return Dt(e,s,B,-1);if(s==="year"&&ne){var q=Math.floor(e.getYear(ne)/10),w=Math.floor(e.getYear(B)/10);if(q!==w)return Dt(e,s,B,-1)}}return B},O=t.useRef(null);return dt(function(){if(n&&!d[g]){var p=x?null:e.getNow();if(O.current!==null&&O.current!==g?p=[N,k][g^1]:o[g]?p=g===0?o[0]:E(o[0],o[1]):o[g^1]&&(p=o[g^1]),p){h&&e.isAfter(h,p)&&(p=h);var ne=c?Dt(e,s,p,1):p;m&&e.isAfter(ne,m)&&(p=c?Dt(e,s,m,-1):m),Z(p,"reset")}}},[n,g,o[g]]),t.useEffect(function(){n?O.current=g:O.current=null},[n,g]),dt(function(){n&&d&&d[g]&&Z(d[g],"reset")},[n,g]),[$,Z]}function ca(e,l){var o=t.useRef(e),r=t.useState({}),n=D(r,2),i=n[1],s=function(v){return v&&l!==void 0?l:o.current},c=function(v){o.current=v,i({})};return[s,c,s(!0)]}var dr=[];function da(e,l,o){var r=function(s){return s.map(function(c){return Nn(c,{generateConfig:e,locale:l,format:o[0]})})},n=function(s,c){for(var d=Math.max(s.length,c.length),v=-1,u=0;u<d;u+=1){var f=s[u]||null,h=c[u]||null;if(f!==h&&!Va(e,f,h)){v=u;break}}return[v<0,v!==0]};return[r,n]}function fa(e,l){return ft(e).sort(function(o,r){return l.isAfter(o,r)?1:-1})}function fr(e){var l=ca(e),o=D(l,2),r=o[0],n=o[1],i=Ne(function(){n(e)});return t.useEffect(function(){i()},[e]),[r,n]}function va(e,l,o,r,n,i,s,c,d){var v=Ct(i,{value:s}),u=D(v,2),f=u[0],h=u[1],m=f||dr,x=fr(m),g=D(x,2),y=g[0],C=g[1],b=da(e,l,o),R=D(b,2),I=R[0],j=R[1],N=Ne(function(Y){var U=ft(Y);if(r)for(var k=0;k<2;k+=1)U[k]=U[k]||null;else n&&(U=fa(U.filter(function(p){return p}),e));var P=j(y(),U),$=D(P,2),Z=$[0],E=$[1];if(!Z&&(C(U),c)){var O=I(U);c(U,O,{range:E?"end":"start"})}}),X=function(){d&&d(y())};return[m,h,y,N,X]}function ma(e,l,o,r,n,i,s,c,d,v){var u=e.generateConfig,f=e.locale,h=e.picker,m=e.onChange,x=e.allowEmpty,g=e.order,y=i.some(function(E){return E})?!1:g,C=da(u,f,s),b=D(C,2),R=b[0],I=b[1],j=ca(l),N=D(j,2),X=N[0],Y=N[1],U=Ne(function(){Y(l)});t.useEffect(function(){U()},[l]);var k=Ne(function(E){var O=E===null,p=ft(E||X());if(O)for(var ne=Math.max(i.length,p.length),B=0;B<ne;B+=1)i[B]||(p[B]=null);y&&p[0]&&p[1]&&(p=fa(p,u)),n(p);var J=p,F=D(J,2),q=F[0],w=F[1],ae=!q,ee=!w,oe=x?(!ae||x[0])&&(!ee||x[1]):!0,L=!g||ae||ee||et(u,f,q,w,h)||u.isAfter(w,q),M=(i[0]||!q||!v(q,{activeIndex:0}))&&(i[1]||!w||!v(w,{from:q,activeIndex:1})),W=O||oe&&L&&M;if(W){o(p);var S=I(p,l),G=D(S,1),re=G[0];m&&!re&&m(O&&p.every(function(ce){return!ce})?null:p,R(p))}return W}),P=Ne(function(E,O){var p=wt(X(),E,r()[E]);Y(p),O&&k()}),$=!c&&!d;bn(!$,function(){$&&(k(),n(l),U())},2);function Z(E){return!!X()[E]}return[P,k,Z]}function ha(e,l,o,r,n){return l!=="date"&&l!=="time"?!1:o!==void 0?o:r!==void 0?r:!n&&(e==="date"||e==="time")}function vr(e){var l=e.mode,o=e.internalMode,r=e.renderExtraFooter,n=e.showNow,i=e.showTime,s=e.onSubmit,c=e.onNow,d=e.invalid,v=e.needConfirm,u=e.generateConfig,f=e.disabledDate,h=t.useContext(Ue),m=h.prefixCls,x=h.locale,g=h.button,y=g===void 0?"button":g,C=u.getNow(),b=_a(u,i,C),R=D(b,1),I=R[0],j=r==null?void 0:r(l),N=f(C,{type:l}),X=function(){if(!N){var E=I(C);c(E)}},Y="".concat(m,"-now"),U="".concat(Y,"-btn"),k=n&&t.createElement("li",{className:Y},t.createElement("a",{className:_e(U,N&&"".concat(U,"-disabled")),"aria-disabled":N,onClick:X},o==="date"?x.today:x.now)),P=v&&t.createElement("li",{className:"".concat(m,"-ok")},t.createElement(y,{disabled:d,onClick:s},x.ok)),$=(k||P)&&t.createElement("ul",{className:"".concat(m,"-ranges")},k,P);return!j&&!$?null:t.createElement("div",{className:"".concat(m,"-footer")},j&&t.createElement("div",{className:"".concat(m,"-footer-extra")},j),$)}function mr(e){var l=e.picker,o=e.multiplePanel,r=e.pickerValue,n=e.onPickerValueChange,i=e.needConfirm,s=e.onSubmit,c=e.range,d=e.hoverValue,v=t.useContext(Ue),u=v.prefixCls,f=v.generateConfig,h=t.useCallback(function(b,R){return Dt(f,l,b,R)},[f,l]),m=t.useMemo(function(){return h(r,1)},[r,h]),x=function(R){n(h(R,-1))},g={onCellDblClick:function(){i&&s()}},y=l==="time",C=ue(ue({},e),{},{hoverValue:null,hoverRangeValue:null,hideHeader:y});return c?C.hoverRangeValue=d:C.hoverValue=d,o?t.createElement("div",{className:"".concat(u,"-panels")},t.createElement(dn.Provider,{value:ue(ue({},g),{},{hideNext:!0})},t.createElement(fn,C)),t.createElement(dn.Provider,{value:ue(ue({},g),{},{hidePrev:!0})},t.createElement(fn,Pe({},C,{pickerValue:m,onPickerValueChange:x})))):t.createElement(dn.Provider,{value:ue({},g)},t.createElement(fn,C))}function Dn(e){return typeof e=="function"?e():e}function hr(e){var l=e.prefixCls,o=e.presets,r=e.onClick,n=e.onHover;return o.length?t.createElement("div",{className:"".concat(l,"-presets")},t.createElement("ul",null,o.map(function(i,s){var c=i.label,d=i.value;return t.createElement("li",{key:s,onClick:function(){r(Dn(d))},onMouseEnter:function(){n(Dn(d))},onMouseLeave:function(){n(null)}},c)}))):null}function ga(e){var l=e.panelRender,o=e.internalMode,r=e.picker,n=e.showNow,i=e.range,s=e.multiple,c=e.activeOffset,d=c===void 0?0:c,v=e.placement,u=e.presets,f=e.onPresetHover,h=e.onPresetSubmit,m=e.onFocus,x=e.onBlur,g=e.onPanelMouseDown,y=e.direction,C=e.value,b=e.onSelect,R=e.isInvalid,I=e.defaultOpenValue,j=e.onOk,N=e.onSubmit,X=t.useContext(Ue),Y=X.prefixCls,U="".concat(Y,"-panel"),k=y==="rtl",P=t.useRef(null),$=t.useRef(null),Z=t.useState(0),E=D(Z,2),O=E[0],p=E[1],ne=t.useState(0),B=D(ne,2),J=B[0],F=B[1],q=function(V){V.offsetWidth&&p(V.offsetWidth)};t.useEffect(function(){if(i){var fe,V=((fe=P.current)===null||fe===void 0?void 0:fe.offsetWidth)||0,Ce=O-V;d<=Ce?F(0):F(d+V-O)}},[O,d,i]);function w(fe){return fe.filter(function(V){return V})}var ae=t.useMemo(function(){return w(Rt(C))},[C]),ee=r==="time"&&!ae.length,oe=t.useMemo(function(){return ee?w([I]):ae},[ee,ae,I]),L=ee?I:ae,M=t.useMemo(function(){return oe.length?oe.some(function(fe){return R(fe)}):!0},[oe,R]),W=function(){ee&&b(I),j(),N()},S=t.createElement("div",{className:"".concat(Y,"-panel-layout")},t.createElement(hr,{prefixCls:Y,presets:u,onClick:h,onHover:f}),t.createElement("div",null,t.createElement(mr,Pe({},e,{value:L})),t.createElement(vr,Pe({},e,{showNow:s?!1:n,invalid:M,onSubmit:W}))));l&&(S=l(S));var G="".concat(U,"-container"),re="marginLeft",ce="marginRight",z=t.createElement("div",{onMouseDown:g,tabIndex:-1,className:_e(G,"".concat(Y,"-").concat(o,"-panel-container")),style:Se(Se({},k?ce:re,J),k?re:ce,"auto"),onFocus:m,onBlur:x},S);if(i){var H=$t(v,k),ie=ea(H,k);z=t.createElement("div",{onMouseDown:g,ref:$,className:_e("".concat(Y,"-range-wrapper"),"".concat(Y,"-").concat(r,"-range-wrapper"))},t.createElement("div",{ref:P,className:"".concat(Y,"-range-arrow"),style:Se({},ie,d)}),t.createElement(Fn,{onResize:q},z))}return z}function pa(e,l){var o=e.format,r=e.maskFormat,n=e.generateConfig,i=e.locale,s=e.preserveInvalidOnBlur,c=e.inputReadOnly,d=e.required,v=e["aria-required"],u=e.onSubmit,f=e.onFocus,h=e.onBlur,m=e.onInputChange,x=e.onInvalid,g=e.open,y=e.onOpenChange,C=e.onKeyDown,b=e.onChange,R=e.activeHelp,I=e.name,j=e.autoComplete,N=e.id,X=e.value,Y=e.invalid,U=e.placeholder,k=e.disabled,P=e.activeIndex,$=e.allHelp,Z=e.picker,E=function(w,ae){var ee=n.locale.parse(i.locale,w,[ae]);return ee&&n.isValidate(ee)?ee:null},O=o[0],p=t.useCallback(function(q){return Nn(q,{locale:i,format:O,generateConfig:n})},[i,n,O]),ne=t.useMemo(function(){return X.map(p)},[X,p]),B=t.useMemo(function(){var q=Z==="time"?8:10,w=typeof O=="function"?O(n.getNow()).length:O.length;return Math.max(q,w)+2},[O,Z,n]),J=function(w){for(var ae=0;ae<o.length;ae+=1){var ee=o[ae];if(typeof ee=="string"){var oe=E(w,ee);if(oe)return oe}}return!1},F=function(w){function ae(L){return w!==void 0?L[w]:L}var ee=Pn(e,{aria:!0,data:!0}),oe=ue(ue({},ee),{},{format:r,validateFormat:function(M){return!!J(M)},preserveInvalidOnBlur:s,readOnly:c,required:d,"aria-required":v,name:I,autoComplete:j,size:B,id:ae(N),value:ae(ne)||"",invalid:ae(Y),placeholder:ae(U),active:P===w,helped:$||R&&P===w,disabled:ae(k),onFocus:function(M){f(M,w)},onBlur:function(M){h(M,w)},onSubmit:u,onChange:function(M){m();var W=J(M);if(W){x(!1,w),b(W,w);return}x(!!M,w)},onHelp:function(){y(!0,{index:w})},onKeyDown:function(M){var W=!1;if(C==null||C(M,function(){W=!0}),!M.defaultPrevented&&!W)switch(M.key){case"Escape":y(!1,{index:w});break;case"Enter":g||y(!0);break}}},l==null?void 0:l({valueTexts:ne}));return Object.keys(oe).forEach(function(L){oe[L]===void 0&&delete oe[L]}),oe};return[F,p]}var gr=["onMouseEnter","onMouseLeave"];function Ca(e){return t.useMemo(function(){return En(e,gr)},[e])}var pr=["icon","type"],Cr=["onClear"];function Bt(e){var l=e.icon,o=e.type,r=ct(e,pr),n=t.useContext(Ue),i=n.prefixCls;return l?t.createElement("span",Pe({className:"".concat(i,"-").concat(o)},r),l):null}function xn(e){var l=e.onClear,o=ct(e,Cr);return t.createElement(Bt,Pe({},o,{type:"clear",role:"button",onMouseDown:function(n){n.preventDefault()},onClick:function(n){n.stopPropagation(),l()}}))}var hn=["YYYY","MM","DD","HH","mm","ss","SSS"],wn="顧",xr=function(){function e(l){Ta(this,e),Se(this,"format",void 0),Se(this,"maskFormat",void 0),Se(this,"cells",void 0),Se(this,"maskCells",void 0),this.format=l;var o=hn.map(function(c){return"(".concat(c,")")}).join("|"),r=new RegExp(o,"g");this.maskFormat=l.replace(r,function(c){return wn.repeat(c.length)});var n=new RegExp("(".concat(hn.join("|"),")")),i=(l.split(n)||[]).filter(function(c){return c}),s=0;this.cells=i.map(function(c){var d=hn.includes(c),v=s,u=s+c.length;return s=u,{text:c,mask:d,start:v,end:u}}),this.maskCells=this.cells.filter(function(c){return c.mask})}return Aa(e,[{key:"getSelection",value:function(o){var r=this.maskCells[o]||{},n=r.start,i=r.end;return[n||0,i||0]}},{key:"match",value:function(o){for(var r=0;r<this.maskFormat.length;r+=1){var n=this.maskFormat[r],i=o[r];if(!i||n!==wn&&n!==i)return!1}return!0}},{key:"size",value:function(){return this.maskCells.length}},{key:"getMaskCellIndex",value:function(o){for(var r=Number.MAX_SAFE_INTEGER,n=0,i=0;i<this.maskCells.length;i+=1){var s=this.maskCells[i],c=s.start,d=s.end;if(o>=c&&o<=d)return i;var v=Math.min(Math.abs(o-c),Math.abs(o-d));v<r&&(r=v,n=i)}return n}}]),e}();function yr(e){var l={YYYY:[0,9999,new Date().getFullYear()],MM:[1,12],DD:[1,31],HH:[0,23],mm:[0,59],ss:[0,59],SSS:[0,999]};return l[e]}var Sr=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"],yn=t.forwardRef(function(e,l){var o=e.active,r=e.showActiveCls,n=r===void 0?!0:r,i=e.suffixIcon,s=e.format,c=e.validateFormat,d=e.onChange;e.onInput;var v=e.helped,u=e.onHelp,f=e.onSubmit,h=e.onKeyDown,m=e.preserveInvalidOnBlur,x=m===void 0?!1:m,g=e.invalid,y=e.clearIcon,C=ct(e,Sr),b=e.value,R=e.onFocus,I=e.onBlur,j=e.onMouseUp,N=t.useContext(Ue),X=N.prefixCls,Y=N.input,U=Y===void 0?"input":Y,k="".concat(X,"-input"),P=t.useState(!1),$=D(P,2),Z=$[0],E=$[1],O=t.useState(b),p=D(O,2),ne=p[0],B=p[1],J=t.useState(""),F=D(J,2),q=F[0],w=F[1],ae=t.useState(null),ee=D(ae,2),oe=ee[0],L=ee[1],M=t.useState(null),W=D(M,2),S=W[0],G=W[1],re=ne||"";t.useEffect(function(){B(b)},[b]);var ce=t.useRef(),z=t.useRef();t.useImperativeHandle(l,function(){return{nativeElement:ce.current,inputElement:z.current,focus:function(de){z.current.focus(de)},blur:function(){z.current.blur()}}});var H=t.useMemo(function(){return new xr(s||"")},[s]),ie=t.useMemo(function(){return v?[0,0]:H.getSelection(oe)},[H,oe,v]),fe=D(ie,2),V=fe[0],Ce=fe[1],me=function(de){de&&de!==s&&de!==b&&u()},be=Ne(function(Q){c(Q)&&d(Q),B(Q),me(Q)}),he=function(de){if(!s){var De=de.target.value;me(De),B(De),d(De)}},we=function(de){var De=de.clipboardData.getData("text");c(De)&&be(De)},ze=t.useRef(!1),We=function(){ze.current=!0},Ye=function(de){var De=de.target,ye=De.selectionStart,je=H.getMaskCellIndex(ye);L(je),G({}),j==null||j(de),ze.current=!1},Ae=function(de){E(!0),L(0),w(""),R(de)},xe=function(de){I(de)},ot=function(de){E(!1),xe(de)};bn(o,function(){!o&&!x&&B(b)});var Ie=function(de){de.key==="Enter"&&c(re)&&f(),h==null||h(de)},Te=function(de){Ie(de);var De=de.key,ye=null,je=null,Ge=Ce-V,$e=s.slice(V,Ce),nt=function(Be){L(function(Ve){var Oe=Ve+Be;return Oe=Math.max(Oe,0),Oe=Math.min(Oe,H.size()-1),Oe})},it=function(Be){var Ve=yr($e),Oe=D(Ve,3),at=Oe[0],vt=Oe[1],rt=Oe[2],lt=re.slice(V,Ce),st=Number(lt);if(isNaN(st))return String(rt||(Be>0?at:vt));var mt=st+Be,ut=vt-at+1;return String(at+(ut+mt-at)%ut)};switch(De){case"Backspace":case"Delete":ye="",je=$e;break;case"ArrowLeft":ye="",nt(-1);break;case"ArrowRight":ye="",nt(1);break;case"ArrowUp":ye="",je=it(1);break;case"ArrowDown":ye="",je=it(-1);break;default:isNaN(Number(De))||(ye=q+De,je=ye);break}if(ye!==null&&(w(ye),ye.length>=Ge&&(nt(1),w(""))),je!==null){var qe=re.slice(0,V)+$a(je,Ge)+re.slice(Ce);be(qe.slice(0,s.length))}G({})},Fe=t.useRef();dt(function(){if(!(!Z||!s||ze.current)){if(!H.match(re)){be(s);return}return z.current.setSelectionRange(V,Ce),Fe.current=xt(function(){z.current.setSelectionRange(V,Ce)}),function(){xt.cancel(Fe.current)}}},[H,s,Z,re,oe,V,Ce,S,be]);var ge=s?{onFocus:Ae,onBlur:ot,onKeyDown:Te,onMouseDown:We,onMouseUp:Ye,onPaste:we}:{};return t.createElement("div",{ref:ce,className:_e(k,Se(Se({},"".concat(k,"-active"),o&&n),"".concat(k,"-placeholder"),v))},t.createElement(U,Pe({ref:z,"aria-invalid":g,autoComplete:"off"},C,{onKeyDown:Ie,onBlur:xe},ge,{value:re,onChange:he})),t.createElement(Bt,{type:"suffix",icon:i}),y)}),Pr=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveOffset","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],br=["index"],Ir=["insetInlineStart","insetInlineEnd"];function kr(e,l){var o=e.id,r=e.prefix,n=e.clearIcon,i=e.suffixIcon,s=e.separator,c=s===void 0?"~":s,d=e.activeIndex;e.activeHelp,e.allHelp;var v=e.focused;e.onFocus,e.onBlur,e.onKeyDown,e.locale,e.generateConfig;var u=e.placeholder,f=e.className,h=e.style,m=e.onClick,x=e.onClear,g=e.value;e.onChange,e.onSubmit,e.onInputChange,e.format,e.maskFormat,e.preserveInvalidOnBlur,e.onInvalid;var y=e.disabled,C=e.invalid;e.inputReadOnly;var b=e.direction;e.onOpenChange;var R=e.onActiveOffset,I=e.placement,j=e.onMouseDown;e.required,e["aria-required"];var N=e.autoFocus,X=e.tabIndex,Y=ct(e,Pr),U=b==="rtl",k=t.useContext(Ue),P=k.prefixCls,$=t.useMemo(function(){if(typeof o=="string")return[o];var z=o||{};return[z.start,z.end]},[o]),Z=t.useRef(),E=t.useRef(),O=t.useRef(),p=function(H){var ie;return(ie=[E,O][H])===null||ie===void 0?void 0:ie.current};t.useImperativeHandle(l,function(){return{nativeElement:Z.current,focus:function(H){if(Sn(H)==="object"){var ie,fe=H||{},V=fe.index,Ce=V===void 0?0:V,me=ct(fe,br);(ie=p(Ce))===null||ie===void 0||ie.focus(me)}else{var be;(be=p(H??0))===null||be===void 0||be.focus()}},blur:function(){var H,ie;(H=p(0))===null||H===void 0||H.blur(),(ie=p(1))===null||ie===void 0||ie.blur()}}});var ne=Ca(Y),B=t.useMemo(function(){return Array.isArray(u)?u:[u,u]},[u]),J=pa(ue(ue({},e),{},{id:$,placeholder:B})),F=D(J,1),q=F[0],w=$t(I,U),ae=ea(w,U),ee=w==null?void 0:w.toLowerCase().endsWith("right"),oe=t.useState({position:"absolute",width:0}),L=D(oe,2),M=L[0],W=L[1],S=Ne(function(){var z=p(d);if(z){var H=z.nativeElement,ie=H.offsetWidth,fe=H.offsetLeft,V=H.offsetParent,Ce=(V==null?void 0:V.offsetWidth)||0,me=ee?Ce-ie-fe:fe;W(function(be){be.insetInlineStart,be.insetInlineEnd;var he=ct(be,Ir);return ue(ue({},he),{},Se({width:ie},ae,me))}),R(me)}});t.useEffect(function(){S()},[d]);var G=n&&(g[0]&&!y[0]||g[1]&&!y[1]),re=N&&!y[0],ce=N&&!re&&!y[1];return t.createElement(Fn,{onResize:S},t.createElement("div",Pe({},ne,{className:_e(P,"".concat(P,"-range"),Se(Se(Se(Se({},"".concat(P,"-focused"),v),"".concat(P,"-disabled"),y.every(function(z){return z})),"".concat(P,"-invalid"),C.some(function(z){return z})),"".concat(P,"-rtl"),U),f),style:h,ref:Z,onClick:m,onMouseDown:function(H){var ie=H.target;ie!==E.current.inputElement&&ie!==O.current.inputElement&&H.preventDefault(),j==null||j(H)}}),r&&t.createElement("div",{className:"".concat(P,"-prefix")},r),t.createElement(yn,Pe({ref:E},q(0),{autoFocus:re,tabIndex:X,"date-range":"start"})),t.createElement("div",{className:"".concat(P,"-range-separator")},c),t.createElement(yn,Pe({ref:O},q(1),{autoFocus:ce,tabIndex:X,"date-range":"end"})),t.createElement("div",{className:"".concat(P,"-active-bar"),style:M}),t.createElement(Bt,{type:"suffix",icon:i}),G&&t.createElement(xn,{icon:n,onClear:x})))}var Dr=t.forwardRef(kr);function Rn(e,l){var o=e??l;return Array.isArray(o)?o:[o,o]}function At(e){return e===1?"end":"start"}function wr(e,l){var o=ra(e,function(){var se=e.disabled,K=e.allowEmpty,le=Rn(se,!1),pe=Rn(K,!1);return{disabled:le,allowEmpty:pe}}),r=D(o,6),n=r[0],i=r[1],s=r[2],c=r[3],d=r[4],v=r[5],u=n.prefixCls,f=n.styles,h=n.classNames,m=n.placement,x=n.defaultValue,g=n.value,y=n.needConfirm,C=n.onKeyDown,b=n.disabled,R=n.allowEmpty,I=n.disabledDate,j=n.minDate,N=n.maxDate,X=n.defaultOpen,Y=n.open,U=n.onOpenChange,k=n.locale,P=n.generateConfig,$=n.picker,Z=n.showNow,E=n.showToday,O=n.showTime,p=n.mode,ne=n.onPanelChange,B=n.onCalendarChange,J=n.onOk,F=n.defaultPickerValue,q=n.pickerValue,w=n.onPickerValueChange,ae=n.inputReadOnly,ee=n.suffixIcon,oe=n.onFocus,L=n.onBlur,M=n.presets,W=n.ranges,S=n.components,G=n.cellRender,re=n.dateRender,ce=n.monthCellRender,z=n.onClick,H=oa(l),ie=la(Y,X,b,U),fe=D(ie,2),V=fe[0],Ce=fe[1],me=function(K,le){(b.some(function(pe){return!pe})||!K)&&Ce(K,le)},be=va(P,k,c,!0,!1,x,g,B,J),he=D(be,5),we=he[0],ze=he[1],We=he[2],Ye=he[3],Ae=he[4],xe=We(),ot=sa(b,R,V),Ie=D(ot,7),Te=Ie[0],Fe=Ie[1],ge=Ie[2],Q=Ie[3],de=Ie[4],De=Ie[5],ye=Ie[6],je=function(K,le){Fe(!0),oe==null||oe(K,{range:At(le??Q)})},Ge=function(K,le){Fe(!1),L==null||L(K,{range:At(le??Q)})},$e=t.useMemo(function(){if(!O)return null;var se=O.disabledTime,K=se?function(le){var pe=At(Q),Re=Mn(xe,ye,Q);return se(le,pe,{from:Re})}:void 0;return ue(ue({},O),{},{disabledTime:K})},[O,Q,xe,ye]),nt=Ct([$,$],{value:p}),it=D(nt,2),qe=it[0],Qe=it[1],Be=qe[Q]||$,Ve=Be==="date"&&$e?"datetime":Be,Oe=Ve===$&&Ve!=="time",at=ha($,Be,Z,E,!0),vt=ma(n,we,ze,We,Ye,b,c,Te,V,v),rt=D(vt,3),lt=rt[0],st=rt[1],mt=rt[2],ut=cr(xe,b,ye,P,k,I),Ht=aa(xe,v,R),jt=D(Ht,2),Yt=jt[0],qt=jt[1],Ot=ua(P,k,xe,qe,V,Q,i,Oe,F,q,$e==null?void 0:$e.defaultOpenValue,w,j,N),Et=D(Ot,2),Lt=Et[0],Mt=Et[1],Xe=Ne(function(se,K,le){var pe=wt(qe,Q,K);if((pe[0]!==qe[0]||pe[1]!==qe[1])&&Qe(pe),ne&&le!==!1){var Re=ft(xe);se&&(Re[Q]=se),ne(Re,pe)}}),St=function(K,le){return wt(xe,le,K)},Le=function(K,le){var pe=xe;K&&(pe=St(K,Q));var Re=De(pe);Ye(pe),lt(Q,Re===null),Re===null?me(!1,{force:!0}):le||H.current.focus({index:Re})},Kt=function(K){var le,pe=K.target.getRootNode();if(!H.current.nativeElement.contains((le=pe.activeElement)!==null&&le!==void 0?le:document.activeElement)){var Re=b.findIndex(function(wa){return!wa});Re>=0&&H.current.focus({index:Re})}me(!0),z==null||z(K)},Nt=function(){st(null),me(!1,{force:!0})},Ut=t.useState(null),Pt=D(Ut,2),zt=Pt[0],bt=Pt[1],Ze=t.useState(null),ht=D(Ze,2),gt=ht[0],It=ht[1],Ft=t.useMemo(function(){return gt||xe},[xe,gt]);t.useEffect(function(){V||It(null)},[V]);var Wt=t.useState(0),kt=D(Wt,2),Gt=kt[0],Qt=kt[1],Xt=ia(M,W),Zt=function(K){It(K),bt("preset")},Jt=function(K){var le=st(K);le&&me(!1,{force:!0})},en=function(K){Le(K)},tn=function(K){It(K?St(K,Q):null),bt("cell")},nn=function(K){me(!0),je(K)},an=function(){ge("panel")},rn=function(K){var le=wt(xe,Q,K);Ye(le),!y&&!s&&i===Ve&&Le(K)},ln=function(){me(!1)},on=Vn(G,re,ce,At(Q)),sn=xe[Q]||null,un=Ne(function(se){return v(se,{activeIndex:Q})}),te=t.useMemo(function(){var se=Pn(n,!1),K=_n(n,[].concat(ft(Object.keys(se)),["onChange","onCalendarChange","style","className","onPanelChange","disabledTime"]));return K},[n]),_=t.createElement(ga,Pe({},te,{showNow:at,showTime:$e,range:!0,multiplePanel:Oe,activeOffset:Gt,placement:m,disabledDate:ut,onFocus:nn,onBlur:Ge,onPanelMouseDown:an,picker:$,mode:Be,internalMode:Ve,onPanelChange:Xe,format:d,value:sn,isInvalid:un,onChange:null,onSelect:rn,pickerValue:Lt,defaultOpenValue:Rt(O==null?void 0:O.defaultOpenValue)[Q],onPickerValueChange:Mt,hoverValue:Ft,onHover:tn,needConfirm:y,onSubmit:Le,onOk:Ae,presets:Xt,onPresetHover:Zt,onPresetSubmit:Jt,onNow:en,cellRender:on})),Ee=function(K,le){var pe=St(K,le);Ye(pe)},Ke=function(){ge("input")},Vt=function(K,le){var pe=ye.length,Re=ye[pe-1];if(pe&&Re!==le&&y&&!R[Re]&&!mt(Re)&&xe[Re]){H.current.focus({index:Re});return}ge("input"),me(!0,{inherit:!0}),Q!==le&&V&&!y&&s&&Le(null,!0),de(le),je(K,le)},Ia=function(K,le){if(me(!1),!y&&ge()==="input"){var pe=De(xe);lt(Q,pe===null)}Ge(K,le)},ka=function(K,le){K.key==="Tab"&&Le(null,!0),C==null||C(K,le)},Da=t.useMemo(function(){return{prefixCls:u,locale:k,generateConfig:P,button:S.button,input:S.input}},[u,k,P,S.button,S.input]);return dt(function(){V&&Q!==void 0&&Xe(null,$,!1)},[V,Q,$]),dt(function(){var se=ge();!V&&se==="input"&&(me(!1),Le(null,!0)),!V&&s&&!y&&se==="panel"&&(me(!0),Le())},[V]),t.createElement(Ue.Provider,{value:Da},t.createElement(ta,Pe({},na(n),{popupElement:_,popupStyle:f.popup,popupClassName:h.popup,visible:V,onClose:ln,range:!0}),t.createElement(Dr,Pe({},n,{ref:H,suffixIcon:ee,activeIndex:Te||V?Q:null,activeHelp:!!gt,allHelp:!!gt&&zt==="preset",focused:Te,onFocus:Vt,onBlur:Ia,onKeyDown:ka,onSubmit:Le,value:Ft,maskFormat:d,onChange:Ee,onInputChange:Ke,format:c,inputReadOnly:ae,disabled:b,open:V,onOpenChange:me,onClick:Kt,onClear:Nt,invalid:Yt,onInvalid:qt,onActiveOffset:Qt}))))}var Rr=t.forwardRef(wr);function jr(e){var l=e.prefixCls,o=e.value,r=e.onRemove,n=e.removeIcon,i=n===void 0?"×":n,s=e.formatDate,c=e.disabled,d=e.maxTagCount,v=e.placeholder,u="".concat(l,"-selector"),f="".concat(l,"-selection"),h="".concat(f,"-overflow");function m(y,C){return t.createElement("span",{className:_e("".concat(f,"-item")),title:typeof y=="string"?y:null},t.createElement("span",{className:"".concat(f,"-item-content")},y),!c&&C&&t.createElement("span",{onMouseDown:function(R){R.preventDefault()},onClick:C,className:"".concat(f,"-item-remove")},i))}function x(y){var C=s(y),b=function(I){I&&I.stopPropagation(),r(y)};return m(C,b)}function g(y){var C="+ ".concat(y.length," ...");return m(C)}return t.createElement("div",{className:u},t.createElement(Ba,{prefixCls:h,data:o,renderItem:x,renderRest:g,itemKey:function(C){return s(C)},maxCount:d}),!o.length&&t.createElement("span",{className:"".concat(l,"-selection-placeholder")},v))}var Or=["id","open","prefix","clearIcon","suffixIcon","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","internalPicker","value","onChange","onSubmit","onInputChange","multiple","maxTagCount","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onMouseDown","required","aria-required","autoFocus","tabIndex","removeIcon"];function Er(e,l){e.id;var o=e.open,r=e.prefix,n=e.clearIcon,i=e.suffixIcon;e.activeHelp,e.allHelp;var s=e.focused;e.onFocus,e.onBlur,e.onKeyDown;var c=e.locale,d=e.generateConfig,v=e.placeholder,u=e.className,f=e.style,h=e.onClick,m=e.onClear,x=e.internalPicker,g=e.value,y=e.onChange,C=e.onSubmit;e.onInputChange;var b=e.multiple,R=e.maxTagCount;e.format,e.maskFormat,e.preserveInvalidOnBlur,e.onInvalid;var I=e.disabled,j=e.invalid;e.inputReadOnly;var N=e.direction;e.onOpenChange;var X=e.onMouseDown;e.required,e["aria-required"];var Y=e.autoFocus,U=e.tabIndex,k=e.removeIcon,P=ct(e,Or),$=N==="rtl",Z=t.useContext(Ue),E=Z.prefixCls,O=t.useRef(),p=t.useRef();t.useImperativeHandle(l,function(){return{nativeElement:O.current,focus:function(M){var W;(W=p.current)===null||W===void 0||W.focus(M)},blur:function(){var M;(M=p.current)===null||M===void 0||M.blur()}}});var ne=Ca(P),B=function(M){y([M])},J=function(M){var W=g.filter(function(S){return S&&!et(d,c,S,M,x)});y(W),o||C()},F=pa(ue(ue({},e),{},{onChange:B}),function(L){var M=L.valueTexts;return{value:M[0]||"",active:s}}),q=D(F,2),w=q[0],ae=q[1],ee=!!(n&&g.length&&!I),oe=b?t.createElement(t.Fragment,null,t.createElement(jr,{prefixCls:E,value:g,onRemove:J,formatDate:ae,maxTagCount:R,disabled:I,removeIcon:k,placeholder:v}),t.createElement("input",{className:"".concat(E,"-multiple-input"),value:g.map(ae).join(","),ref:p,readOnly:!0,autoFocus:Y,tabIndex:U}),t.createElement(Bt,{type:"suffix",icon:i}),ee&&t.createElement(xn,{icon:n,onClear:m})):t.createElement(yn,Pe({ref:p},w(),{autoFocus:Y,tabIndex:U,suffixIcon:i,clearIcon:ee&&t.createElement(xn,{icon:n,onClear:m}),showActiveCls:!1}));return t.createElement("div",Pe({},ne,{className:_e(E,Se(Se(Se(Se(Se({},"".concat(E,"-multiple"),b),"".concat(E,"-focused"),s),"".concat(E,"-disabled"),I),"".concat(E,"-invalid"),j),"".concat(E,"-rtl"),$),u),style:f,ref:O,onClick:h,onMouseDown:function(M){var W,S=M.target;S!==((W=p.current)===null||W===void 0?void 0:W.inputElement)&&M.preventDefault(),X==null||X(M)}}),r&&t.createElement("div",{className:"".concat(E,"-prefix")},r),oe)}var Mr=t.forwardRef(Er);function Nr(e,l){var o=ra(e),r=D(o,6),n=r[0],i=r[1],s=r[2],c=r[3],d=r[4],v=r[5],u=n,f=u.prefixCls,h=u.styles,m=u.classNames,x=u.order,g=u.defaultValue,y=u.value,C=u.needConfirm,b=u.onChange,R=u.onKeyDown,I=u.disabled,j=u.disabledDate,N=u.minDate,X=u.maxDate,Y=u.defaultOpen,U=u.open,k=u.onOpenChange,P=u.locale,$=u.generateConfig,Z=u.picker,E=u.showNow,O=u.showToday,p=u.showTime,ne=u.mode,B=u.onPanelChange,J=u.onCalendarChange,F=u.onOk,q=u.multiple,w=u.defaultPickerValue,ae=u.pickerValue,ee=u.onPickerValueChange,oe=u.inputReadOnly,L=u.suffixIcon,M=u.removeIcon,W=u.onFocus,S=u.onBlur,G=u.presets,re=u.components,ce=u.cellRender,z=u.dateRender,H=u.monthCellRender,ie=u.onClick,fe=oa(l);function V(te){return te===null?null:q?te:te[0]}var Ce=Ha($,P,i),me=la(U,Y,[I],k),be=D(me,2),he=be[0],we=be[1],ze=function(_,Ee,Ke){if(J){var Vt=ue({},Ke);delete Vt.range,J(V(_),V(Ee),Vt)}},We=function(_){F==null||F(V(_))},Ye=va($,P,c,!1,x,g,y,ze,We),Ae=D(Ye,5),xe=Ae[0],ot=Ae[1],Ie=Ae[2],Te=Ae[3],Fe=Ae[4],ge=Ie(),Q=sa([I]),de=D(Q,4),De=de[0],ye=de[1],je=de[2],Ge=de[3],$e=function(_){ye(!0),W==null||W(_,{})},nt=function(_){ye(!1),S==null||S(_,{})},it=Ct(Z,{value:ne}),qe=D(it,2),Qe=qe[0],Be=qe[1],Ve=Qe==="date"&&p?"datetime":Qe,Oe=ha(Z,Qe,E,O),at=b&&function(te,_){b(V(te),V(_))},vt=ma(ue(ue({},n),{},{onChange:at}),xe,ot,Ie,Te,[],c,De,he,v),rt=D(vt,2),lt=rt[1],st=aa(ge,v),mt=D(st,2),ut=mt[0],Ht=mt[1],jt=t.useMemo(function(){return ut.some(function(te){return te})},[ut]),Yt=function(_,Ee){if(ee){var Ke=ue(ue({},Ee),{},{mode:Ee.mode[0]});delete Ke.range,ee(_[0],Ke)}},qt=ua($,P,ge,[Qe],he,Ge,i,!1,w,ae,Rt(p==null?void 0:p.defaultOpenValue),Yt,N,X),Ot=D(qt,2),Et=Ot[0],Lt=Ot[1],Mt=Ne(function(te,_,Ee){if(Be(_),B&&Ee!==!1){var Ke=te||ge[ge.length-1];B(Ke,_)}}),Xe=function(){lt(Ie()),we(!1,{force:!0})},St=function(_){!I&&!fe.current.nativeElement.contains(document.activeElement)&&fe.current.focus(),we(!0),ie==null||ie(_)},Le=function(){lt(null),we(!1,{force:!0})},Kt=t.useState(null),Nt=D(Kt,2),Ut=Nt[0],Pt=Nt[1],zt=t.useState(null),bt=D(zt,2),Ze=bt[0],ht=bt[1],gt=t.useMemo(function(){var te=[Ze].concat(ft(ge)).filter(function(_){return _});return q?te:te.slice(0,1)},[ge,Ze,q]),It=t.useMemo(function(){return!q&&Ze?[Ze]:ge.filter(function(te){return te})},[ge,Ze,q]);t.useEffect(function(){he||ht(null)},[he]);var Ft=ia(G),Wt=function(_){ht(_),Pt("preset")},kt=function(_){var Ee=q?Ce(Ie(),_):[_],Ke=lt(Ee);Ke&&!q&&we(!1,{force:!0})},Gt=function(_){kt(_)},Qt=function(_){ht(_),Pt("cell")},Xt=function(_){we(!0),$e(_)},Zt=function(_){if(je("panel"),!(q&&Ve!==Z)){var Ee=q?Ce(Ie(),_):[_];Te(Ee),!C&&!s&&i===Ve&&Xe()}},Jt=function(){we(!1)},en=Vn(ce,z,H),tn=t.useMemo(function(){var te=Pn(n,!1),_=_n(n,[].concat(ft(Object.keys(te)),["onChange","onCalendarChange","style","className","onPanelChange"]));return ue(ue({},_),{},{multiple:n.multiple})},[n]),nn=t.createElement(ga,Pe({},tn,{showNow:Oe,showTime:p,disabledDate:j,onFocus:Xt,onBlur:nt,picker:Z,mode:Qe,internalMode:Ve,onPanelChange:Mt,format:d,value:ge,isInvalid:v,onChange:null,onSelect:Zt,pickerValue:Et,defaultOpenValue:p==null?void 0:p.defaultOpenValue,onPickerValueChange:Lt,hoverValue:gt,onHover:Qt,needConfirm:C,onSubmit:Xe,onOk:Fe,presets:Ft,onPresetHover:Wt,onPresetSubmit:kt,onNow:Gt,cellRender:en})),an=function(_){Te(_)},rn=function(){je("input")},ln=function(_){je("input"),we(!0,{inherit:!0}),$e(_)},on=function(_){we(!1),nt(_)},sn=function(_,Ee){_.key==="Tab"&&Xe(),R==null||R(_,Ee)},un=t.useMemo(function(){return{prefixCls:f,locale:P,generateConfig:$,button:re.button,input:re.input}},[f,P,$,re.button,re.input]);return dt(function(){he&&Ge!==void 0&&Mt(null,Z,!1)},[he,Ge,Z]),dt(function(){var te=je();!he&&te==="input"&&(we(!1),Xe()),!he&&s&&!C&&te==="panel"&&(we(!0),Xe())},[he]),t.createElement(Ue.Provider,{value:un},t.createElement(ta,Pe({},na(n),{popupElement:nn,popupStyle:h.popup,popupClassName:m.popup,visible:he,onClose:Jt}),t.createElement(Mr,Pe({},n,{ref:fe,suffixIcon:L,removeIcon:M,activeHelp:!!Ze,allHelp:!!Ze&&Ut==="preset",focused:De,onFocus:ln,onBlur:on,onKeyDown:sn,onSubmit:Xe,value:It,maskFormat:d,onChange:an,onInputChange:rn,internalPicker:i,format:c,inputReadOnly:oe,disabled:I,open:he,onOpenChange:we,onClick:St,onClear:Le,invalid:jt,onInvalid:function(_){Ht(_,0)}}))))}var Fr=t.forwardRef(Nr),Vr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},_r=function(l,o){return t.createElement(Tt,Pe({},l,{ref:o,icon:Vr}))},xa=t.forwardRef(_r),Ar={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"},Tr=function(l,o){return t.createElement(Tt,Pe({},l,{ref:o,icon:Ar}))},$r=t.forwardRef(Tr);function Br(e,l,o){return o!==void 0?o:l==="year"&&e.lang.yearPlaceholder?e.lang.yearPlaceholder:l==="quarter"&&e.lang.quarterPlaceholder?e.lang.quarterPlaceholder:l==="month"&&e.lang.monthPlaceholder?e.lang.monthPlaceholder:l==="week"&&e.lang.weekPlaceholder?e.lang.weekPlaceholder:l==="time"&&e.timePickerLocale.placeholder?e.timePickerLocale.placeholder:e.lang.placeholder}function Hr(e,l,o){return o!==void 0?o:l==="year"&&e.lang.yearPlaceholder?e.lang.rangeYearPlaceholder:l==="quarter"&&e.lang.quarterPlaceholder?e.lang.rangeQuarterPlaceholder:l==="month"&&e.lang.monthPlaceholder?e.lang.rangeMonthPlaceholder:l==="week"&&e.lang.weekPlaceholder?e.lang.rangeWeekPlaceholder:l==="time"&&e.timePickerLocale.placeholder?e.timePickerLocale.rangePlaceholder:e.lang.rangePlaceholder}function ya(e,l){const{allowClear:o=!0}=e,{clearIcon:r,removeIcon:n}=Ya(Object.assign(Object.assign({},e),{prefixCls:l,componentName:"DatePicker"}));return[t.useMemo(()=>o===!1?!1:Object.assign({clearIcon:r},o===!0?{}:o),[o,r]),n]}const[Yr,qr]=["week","WeekPicker"],[Lr,Kr]=["month","MonthPicker"],[Ur,zr]=["year","YearPicker"],[Wr,Gr]=["quarter","QuarterPicker"],[Sa,jn]=["time","TimePicker"],Qr=e=>t.createElement(yt,Object.assign({size:"small",type:"primary"},e));function Pa(e){return t.useMemo(()=>Object.assign({button:Qr},e),[e])}var Xr=function(e,l){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&l.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)l.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]]);return o};const Zr=e=>t.forwardRef((o,r)=>{var n;const{prefixCls:i,getPopupContainer:s,components:c,className:d,style:v,placement:u,size:f,disabled:h,bordered:m=!0,placeholder:x,popupClassName:g,dropdownClassName:y,status:C,rootClassName:b,variant:R,picker:I}=o,j=Xr(o,["prefixCls","getPopupContainer","components","className","style","placement","size","disabled","bordered","placeholder","popupClassName","dropdownClassName","status","rootClassName","variant","picker"]),N=t.useRef(null),{getPrefixCls:X,direction:Y,getPopupContainer:U,rangePicker:k}=t.useContext(An),P=X("picker",i),{compactSize:$,compactItemClassnames:Z}=Tn(P,Y),E=X(),[O,p]=$n("rangePicker",R,m),ne=Bn(P),[B,J,F]=Hn(P,ne),[q]=ya(o,P),w=Pa(c),ae=Yn(H=>{var ie;return(ie=f??$)!==null&&ie!==void 0?ie:H}),ee=t.useContext(qn),oe=h??ee,L=t.useContext(Ln),{hasFeedback:M,status:W,feedbackIcon:S}=L,G=t.createElement(t.Fragment,null,I===Sa?t.createElement(xa,null):t.createElement(Xn,null),M&&S);t.useImperativeHandle(r,()=>N.current);const[re]=Kn("Calendar",Un),ce=Object.assign(Object.assign({},re),o.locale),[z]=zn("DatePicker",(n=o.popupStyle)===null||n===void 0?void 0:n.zIndex);return B(t.createElement(Wn,{space:!0},t.createElement(Rr,Object.assign({separator:t.createElement("span",{"aria-label":"to",className:`${P}-separator`},t.createElement($r,null)),disabled:oe,ref:N,placement:u,placeholder:Hr(ce,I,x),suffixIcon:G,prevIcon:t.createElement("span",{className:`${P}-prev-icon`}),nextIcon:t.createElement("span",{className:`${P}-next-icon`}),superPrevIcon:t.createElement("span",{className:`${P}-super-prev-icon`}),superNextIcon:t.createElement("span",{className:`${P}-super-next-icon`}),transitionName:`${E}-slide-up`,picker:I},j,{className:_e({[`${P}-${ae}`]:ae,[`${P}-${O}`]:p},Gn(P,Qn(W,C),M),J,Z,d,k==null?void 0:k.className,F,ne,b),style:Object.assign(Object.assign({},k==null?void 0:k.style),v),locale:ce.lang,prefixCls:P,getPopupContainer:s||U,generateConfig:e,components:w,direction:Y,classNames:{popup:_e(J,g||y,F,ne,b)},styles:{popup:Object.assign(Object.assign({},o.popupStyle),{zIndex:z})},allowClear:q}))))});var Jr=function(e,l){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&l.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)l.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]]);return o};const el=e=>{const l=(d,v)=>{const u=v===jn?"timePicker":"datePicker";return t.forwardRef((h,m)=>{var x;const{prefixCls:g,getPopupContainer:y,components:C,style:b,className:R,rootClassName:I,size:j,bordered:N,placement:X,placeholder:Y,popupClassName:U,dropdownClassName:k,disabled:P,status:$,variant:Z,onCalendarChange:E}=h,O=Jr(h,["prefixCls","getPopupContainer","components","style","className","rootClassName","size","bordered","placement","placeholder","popupClassName","dropdownClassName","disabled","status","variant","onCalendarChange"]),{getPrefixCls:p,direction:ne,getPopupContainer:B,[u]:J}=t.useContext(An),F=p("picker",g),{compactSize:q,compactItemClassnames:w}=Tn(F,ne),ae=t.useRef(null),[ee,oe]=$n("datePicker",Z,N),L=Bn(F),[M,W,S]=Hn(F,L);t.useImperativeHandle(m,()=>ae.current);const G={showToday:!0},re=d||h.picker,ce=p(),{onSelect:z,multiple:H}=O,ie=z&&d==="time"&&!H,fe=(Fe,ge,Q)=>{E==null||E(Fe,ge,Q),ie&&z(Fe)},[V,Ce]=ya(h,F),me=Pa(C),be=Yn(Fe=>{var ge;return(ge=j??q)!==null&&ge!==void 0?ge:Fe}),he=t.useContext(qn),we=P??he,ze=t.useContext(Ln),{hasFeedback:We,status:Ye,feedbackIcon:Ae}=ze,xe=t.createElement(t.Fragment,null,re==="time"?t.createElement(xa,null):t.createElement(Xn,null),We&&Ae),[ot]=Kn("DatePicker",Un),Ie=Object.assign(Object.assign({},ot),h.locale),[Te]=zn("DatePicker",(x=h.popupStyle)===null||x===void 0?void 0:x.zIndex);return M(t.createElement(Wn,{space:!0},t.createElement(Fr,Object.assign({ref:ae,placeholder:Br(Ie,re,Y),suffixIcon:xe,placement:X,prevIcon:t.createElement("span",{className:`${F}-prev-icon`}),nextIcon:t.createElement("span",{className:`${F}-next-icon`}),superPrevIcon:t.createElement("span",{className:`${F}-super-prev-icon`}),superNextIcon:t.createElement("span",{className:`${F}-super-next-icon`}),transitionName:`${ce}-slide-up`,picker:d,onCalendarChange:fe},G,O,{locale:Ie.lang,className:_e({[`${F}-${be}`]:be,[`${F}-${ee}`]:oe},Gn(F,Qn(Ye,$),We),W,w,J==null?void 0:J.className,R,S,L,I),style:Object.assign(Object.assign({},J==null?void 0:J.style),b),prefixCls:F,getPopupContainer:y||B,generateConfig:e,components:me,direction:ne,disabled:we,classNames:{popup:_e(W,S,L,I,U||k)},styles:{popup:Object.assign(Object.assign({},h.popupStyle),{zIndex:Te})},allowClear:V,removeIcon:Ce}))))})},o=l(),r=l(Yr,qr),n=l(Lr,Kr),i=l(Ur,zr),s=l(Wr,Gr),c=l(Sa,jn);return{DatePicker:o,WeekPicker:r,MonthPicker:n,YearPicker:i,TimePicker:c,QuarterPicker:s}},ba=e=>{const{DatePicker:l,WeekPicker:o,MonthPicker:r,YearPicker:n,TimePicker:i,QuarterPicker:s}=el(e),c=Zr(e),d=l;return d.WeekPicker=o,d.MonthPicker=r,d.YearPicker=n,d.RangePicker=c,d.TimePicker=i,d.QuarterPicker=s,d},tt=ba(qa),tl=Zn(tt,"picker",null);tt._InternalPanelDoNotUseOrYouWillBeFired=tl;const nl=Zn(tt.RangePicker,"picker",null);tt._InternalRangePanelDoNotUseOrYouWillBeFired=nl;tt.generatePicker=ba;var al={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"},rl=function(l,o){return t.createElement(Tt,Pe({},l,{ref:o,icon:al}))},ll=t.forwardRef(rl),ol={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},il=function(l,o){return t.createElement(Tt,Pe({},l,{ref:o,icon:ol}))},In=t.forwardRef(il);const{Option:A}=Me,sl=({visible:e,onClose:l,onAdd:o})=>{const[r]=ve.useForm(),[n,i]=t.useState(!1),[s,c]=t.useState(!1),d=async f=>{try{if(f.purchaseDate&&f.purchaseDate.isAfter(Je())){ke.error("Purchase date cannot be in the future.");return}const h=await pt();if(f.serialNumber&&h.some(y=>y.serialNumber===f.serialNumber)){ke.error("Serial number already exists. Please use a unique serial number.");return}const m=n?`Head Office - ${f.department}`:f.location,x={type:f.type,brand:f.brand,quantity:s?1:Math.max(1,f.quantity||1),serialNumber:f.serialNumber,issuedDate:f.issuedDate?f.issuedDate.format("YYYY-MM-DD"):"NO DATE",purchaseDate:f.purchaseDate.format("YYYY-MM-DD"),condition:f.condition,location:m,status:f.status,remarks:f.remarks||null};o(x),r.resetFields(),l()}catch(h){console.error(h)}},v=()=>{r.resetFields(),c(!1),l()},u=f=>{const h=f.target.value.trim();c(h!==""),h!==""?r.setFieldsValue({quantity:1}):r.setFieldsValue({quantity:1})};return a.jsx(pn,{title:"Add New Item",open:e,onCancel:v,footer:null,width:900,children:a.jsx(ve,{form:r,onFinish:d,layout:"vertical",initialValues:{type:"Radio",condition:"Brand New",status:"On Stock",quantity:1},children:a.jsxs("div",{style:{display:"flex",gap:"20px"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsx(ve.Item,{label:"Type",name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:a.jsxs(Me,{children:[a.jsx(A,{value:"AVR",children:"AVR"}),a.jsx(A,{value:"Battery",children:"Battery"}),a.jsx(A,{value:"Biometrics",children:"Biometrics"}),a.jsx(A,{value:"Camera",children:"Camera"}),a.jsx(A,{value:"CCTV",children:"CCTV"}),a.jsx(A,{value:"Charger",children:"Charger"}),a.jsx(A,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),a.jsx(A,{value:"Guard Tour System",children:"Guard Tour System"}),a.jsx(A,{value:"Headset",children:"Headset"}),a.jsx(A,{value:"Keyboard",children:"Keyboard"}),a.jsx(A,{value:"Laptop",children:"Laptop"}),a.jsx(A,{value:"Megaphone",children:"Megaphone"}),a.jsx(A,{value:"Mesh",children:"WIFI-Mesh"}),a.jsx(A,{value:"Metal Detector",children:"Metal Detector"}),a.jsx(A,{value:"Microphone",children:"Microphone"}),a.jsx(A,{value:"Modem",children:"Modem"}),a.jsx(A,{value:"Monitor",children:"Monitor"}),a.jsx(A,{value:"Mouse",children:"Mouse"}),a.jsx(A,{value:"Others",children:"Others"}),a.jsx(A,{value:"Pedestal",children:"Pedestal"}),a.jsx(A,{value:"Podium",children:"Podium"}),a.jsx(A,{value:"Printer",children:"Printer"}),a.jsx(A,{value:"Radio",children:"Radio"}),a.jsx(A,{value:"Router",children:"Router"}),a.jsx(A,{value:"Search Stick",children:"Search Stick"}),a.jsx(A,{value:"Searchlight",children:"Searchlight"}),a.jsx(A,{value:"Smartphone",children:"Smartphone"}),a.jsx(A,{value:"Speaker",children:"Speaker"}),a.jsx(A,{value:"Switch",children:"Switch"}),a.jsx(A,{value:"System Unit",children:"System Unit"}),a.jsx(A,{value:"Under Chassis",children:"Under Chassis"}),a.jsx(A,{value:"UPS",children:"UPS"})]})}),a.jsx(ve.Item,{label:"Brand",name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:a.jsx(He,{})}),a.jsx(ve.Item,{label:"Remarks",name:"remarks",children:a.jsx(He.TextArea,{})}),a.jsx(ve.Item,{label:"Serial Number",name:"serialNumber",children:a.jsx(He,{onChange:u})}),!s&&a.jsx(ve.Item,{label:"Quantity",name:"quantity",rules:[{required:!0,message:"Please input the quantity!"}],children:a.jsx(He,{type:"number",min:1})}),a.jsx(ve.Item,{label:"Issued Date",name:"issuedDate",children:a.jsx(tt,{format:"YYYY-MM-DD",style:{width:"100%"}})})]}),a.jsxs("div",{style:{flex:1},children:[a.jsx(ve.Item,{label:"Purchased Date",name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:a.jsx(tt,{format:"YYYY-MM-DD",style:{width:"100%"}})}),a.jsx(ve.Item,{label:"Condition",name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:a.jsxs(Me,{children:[a.jsx(A,{value:"Brand New",children:"Brand New"}),a.jsx(A,{value:"Good Condition",children:"Good Condition"}),a.jsx(A,{value:"Defective",children:"Defective"})]})}),a.jsx(ve.Item,{label:"Detachment/Office",name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:a.jsxs(Me,{onChange:f=>i(f==="Head Office"),children:[a.jsx(A,{value:"Head Office",children:"Head Office"}),a.jsx(A,{value:"Other",children:"Other (Specify Below)"})]})}),n&&a.jsx(ve.Item,{label:"Department (Head Office)",name:"department",rules:[{required:!0,message:"Please select a department!"}],children:a.jsxs(Me,{children:[a.jsx(A,{value:"SOD",children:"SOD"}),a.jsx(A,{value:"CID",children:"CID"}),a.jsx(A,{value:"GAD",children:"GAD"}),a.jsx(A,{value:"HRD",children:"HRD"}),a.jsx(A,{value:"AFD",children:"AFD"}),a.jsx(A,{value:"EOD",children:"EOD"}),a.jsx(A,{value:"BDO",children:"BDO"})]})}),!n&&a.jsx(ve.Item,{label:"Specific Location",name:"location",rules:[{required:!0,message:"Please input a location!"}],children:a.jsx(He,{})}),a.jsx(ve.Item,{label:"Status",name:"status",rules:[{required:!0,message:"Please select the status!"}],children:a.jsxs(Me,{children:[a.jsx(A,{value:"On Stock",children:"On Stock"}),a.jsx(A,{value:"Deployed",children:"Deployed"}),a.jsx(A,{value:"For Repair",children:"For Repair"})]})}),a.jsx(ve.Item,{children:a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:a.jsx(yt,{type:"primary",htmlType:"submit",icon:a.jsx(In,{}),children:"Add Item"})})})]})]})})})},{Option:T}=Me,ul=({visible:e,onClose:l,onEdit:o,item:r,isLoading:n})=>{const[i]=ve.useForm(),[s,c]=t.useState(!1),[d,v]=t.useState(!1);t.useEffect(()=>{var m;if(r){const x=(m=r.location)==null?void 0:m.startsWith("Head Office -"),g=x?r.location.split(" - ")[1]:"";c(x),v(!!r.serialNumber),i.setFieldsValue({type:r.type,brand:r.brand,serialNumber:r.serialNumber,issuedDate:r.issuedDate&&Je(r.issuedDate,"YYYY-MM-DD").isValid()?Je(r.issuedDate,"YYYY-MM-DD"):null,purchaseDate:r.purchaseDate&&Je(r.purchaseDate,"YYYY-MM-DD").isValid()?Je(r.purchaseDate,"YYYY-MM-DD"):null,condition:r.condition,locationType:x?"Head Office":"Other",department:x?g:null,location:x?"":r.location,status:r.status,remarks:r.remarks,quantity:r.quantity||1})}},[r,i,e]);const u=async m=>{try{if(m.purchaseDate&&m.purchaseDate.isAfter(Je())){ke.error("Purchase date cannot be in the future.");return}const x=await pt(),g=m.serialNumber?m.serialNumber.trim().toUpperCase():null;if(g&&x.some(N=>{var X;return((X=N.serialNumber)==null?void 0:X.trim().toUpperCase())===g&&N.id!==(r==null?void 0:r.id)&&N.id.toString().startsWith("20")})){ke.error("Serial number already exists. Please use a unique serial number.");return}const y=s?`Head Office - ${m.department}`:m.location,C=Je(m.purchaseDate).format("YYYY-MM-DD"),b=m.issuedDate?Je(m.issuedDate).format("YYYY-MM-DD"):null,R={id:r.id,...m,location:y,purchaseDate:C,issuedDate:b,serialNumber:g,quantity:d?1:Math.max(1,m.quantity||1),remarks:m.remarks};Je(r.purchaseDate).format("YYYY-MM-DD")!==C?pn.confirm({title:"Changing the purchase date will regenerate the item ID.",content:"Are you sure you want to continue?",onOk:async()=>{await o(R),l()}}):(await o(R),l())}catch(x){console.error(x),ke.error("Failed to submit form. Please try again.")}},f=()=>{i.resetFields(),v(!1),l()},h=m=>{const x=m.target.value.trim();v(x!==""),x!==""?i.setFieldsValue({quantity:null}):i.setFieldsValue({quantity:1})};return a.jsx(pn,{title:"Edit Item",open:e,onCancel:f,footer:null,width:900,children:a.jsxs(ve,{form:i,onFinish:u,layout:"vertical",initialValues:{type:"Radio",condition:"Brand New",status:"On Stock",quantity:1},children:[a.jsxs("div",{style:{display:"flex",gap:"20px"},children:[a.jsxs("div",{style:{flex:1},children:[a.jsx(ve.Item,{label:"Type",name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:a.jsxs(Me,{children:[a.jsx(T,{value:"AVR",children:"AVR"}),a.jsx(T,{value:"Battery",children:"Battery"}),a.jsx(T,{value:"Biometrics",children:"Biometrics"}),a.jsx(T,{value:"Camera",children:"Camera"}),a.jsx(T,{value:"CCTV",children:"CCTV"}),a.jsx(T,{value:"Charger",children:"Charger"}),a.jsx(T,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),a.jsx(T,{value:"Guard Tour System",children:"Guard Tour System"}),a.jsx(T,{value:"Headset",children:"Headset"}),a.jsx(T,{value:"Keyboard",children:"Keyboard"}),a.jsx(T,{value:"Laptop",children:"Laptop"}),a.jsx(T,{value:"Megaphone",children:"Megaphone"}),a.jsx(T,{value:"Mesh",children:"WIFI-Mesh"}),a.jsx(T,{value:"Metal Detector",children:"Metal Detector"}),a.jsx(T,{value:"Microphone",children:"Microphone"}),a.jsx(T,{value:"Modem",children:"Modem"}),a.jsx(T,{value:"Monitor",children:"Monitor"}),a.jsx(T,{value:"Mouse",children:"Mouse"}),a.jsx(T,{value:"Others",children:"Others"}),a.jsx(T,{value:"Pedestal",children:"Pedestal"}),a.jsx(T,{value:"Podium",children:"Podium"}),a.jsx(T,{value:"Printer",children:"Printer"}),a.jsx(T,{value:"Radio",children:"Radio"}),a.jsx(T,{value:"Router",children:"Router"}),a.jsx(T,{value:"Search Stick",children:"Search Stick"}),a.jsx(T,{value:"Searchlight",children:"Searchlight"}),a.jsx(T,{value:"Smartphone",children:"Smartphone"}),a.jsx(T,{value:"Speaker",children:"Speaker"}),a.jsx(T,{value:"Switch",children:"Switch"}),a.jsx(T,{value:"System Unit",children:"System Unit"}),a.jsx(T,{value:"Under Chassis",children:"Under Chassis"}),a.jsx(T,{value:"UPS",children:"UPS"})]})}),a.jsx(ve.Item,{label:"Brand",name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:a.jsx(He,{})}),a.jsx(ve.Item,{label:"Remarks",name:"remarks",children:a.jsx(He.TextArea,{})}),a.jsx(ve.Item,{label:"Serial Number",name:"serialNumber",children:a.jsx(He,{onChange:h})}),!d&&a.jsx(ve.Item,{label:"Quantity",name:"quantity",rules:[{required:!0,message:"Please input the quantity!"}],children:a.jsx(He,{type:"number",min:1})}),a.jsx(ve.Item,{label:"Issued Date",name:"issuedDate",children:a.jsx(tt,{format:"YYYY-MM-DD",style:{width:"100%"}})})]}),a.jsxs("div",{style:{flex:1},children:[a.jsx(ve.Item,{label:"Purchased Date",name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:a.jsx(tt,{format:"YYYY-MM-DD",style:{width:"100%"}})}),a.jsx(ve.Item,{label:"Condition",name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:a.jsxs(Me,{children:[a.jsx(T,{value:"Brand New",children:"Brand New"}),a.jsx(T,{value:"Good Condition",children:"Good Condition"}),a.jsx(T,{value:"Defective",children:"Defective"})]})}),a.jsx(ve.Item,{label:"Detachment/Office",name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:a.jsxs(Me,{onChange:m=>c(m==="Head Office"),children:[a.jsx(T,{value:"Head Office",children:"Head Office"}),a.jsx(T,{value:"Other",children:"Other (Specify Below)"})]})}),s&&a.jsx(ve.Item,{label:"Department (Head Office)",name:"department",rules:[{required:!0,message:"Please select a department!"}],children:a.jsxs(Me,{children:[a.jsx(T,{value:"SOD",children:"SOD"}),a.jsx(T,{value:"CID",children:"CID"}),a.jsx(T,{value:"GAD",children:"GAD"}),a.jsx(T,{value:"HRD",children:"HRD"}),a.jsx(T,{value:"AFD",children:"AFD"}),a.jsx(T,{value:"EOD",children:"EOD"}),a.jsx(T,{value:"BDO",children:"BDO"})]})}),!s&&a.jsx(ve.Item,{label:"Specific Location",name:"location",rules:[{required:!0,message:"Please input a location!"}],children:a.jsx(He,{})}),a.jsx(ve.Item,{label:"Status",name:"status",rules:[{required:!0,message:"Please select the status!"}],children:a.jsxs(Me,{children:[a.jsx(T,{value:"On Stock",children:"On Stock"}),a.jsx(T,{value:"Deployed",children:"Deployed"}),a.jsx(T,{value:"For Repair",children:"For Repair"})]})})]})]}),a.jsx(ve.Item,{children:a.jsx(yt,{type:"primary",htmlType:"submit",icon:a.jsx(In,{}),style:{width:"100%"},loading:n,children:"Save Changes"})})]})})},cl=e=>{let l;switch(e){case"Brand New":l="gold";break;case"Good Condition":l="green";break;case"Defective":l="red";break;default:l="gray"}return a.jsx(Jn,{color:l,children:e})},dl=e=>{let l;switch(e){case"On Stock":l="green";break;case"For Repair":l="volcano";break;case"Deployed":l="blue";break;default:l="gray"}return a.jsx(Jn,{color:l,children:e})},gn=(e,l,o,r)=>{const n=[{title:"ID",dataIndex:"id",key:"id",fixed:"left",align:"center",width:120,sorter:(i,s)=>i.id.localeCompare(s.id)},{title:"Type",dataIndex:"type",fixed:"left",key:"type",align:"center",width:120,sorter:(i,s)=>i.type.localeCompare(s.type)},{title:"Brand",dataIndex:"brand",fixed:"left",key:"brand",align:"center",width:150,sorter:(i,s)=>i.brand.localeCompare(s.brand)},{title:"Qty",dataIndex:"quantity",key:"quantity",align:"center",width:100,sorter:(i,s)=>i.quantity-s.quantity},{title:"Remarks",dataIndex:"remarks",key:"remarks",align:"center",width:200,render:i=>i&&i.trim()!==""?i:"-"},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",align:"center",width:200,sorter:(i,s)=>i.serialNumber.localeCompare(s.serialNumber),render:i=>i&&i.trim()!==""?i:"-"},...r==="default"?[{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",width:150,sorter:(i,s)=>{const c=new Date(i.issuedDate),d=new Date(s.issuedDate);return l==="newest"?d-c:c-d},render:i=>!i||i==="0000-00-00"?"NO DATE":i},{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",width:150,sorter:(i,s)=>{const c=new Date(i.purchaseDate),d=new Date(s.purchaseDate);return l==="newest"?d-c:c-d}}]:r==="issuedDate"?[{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",width:150,sorter:(i,s)=>{const c=new Date(i.issuedDate),d=new Date(s.issuedDate);return l==="newest"?d-c:c-d},render:i=>!i||i==="0000-00-00"?"NO DATE":i}]:[{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",width:150,sorter:(i,s)=>{const c=new Date(i.purchaseDate),d=new Date(s.purchaseDate);return l==="newest"?d-c:c-d}}],{title:"Condition",dataIndex:"condition",key:"condition",align:"center",width:120,render:i=>cl(i),filters:[{text:"Brand New",value:"Brand New"},{text:"Good Condition",value:"Good Condition"},{text:"Defective",value:"Defective"}],onFilter:(i,s)=>s.condition.includes(i)},{title:"Detachment/Office",dataIndex:"location",key:"location",align:"center",width:120},{title:"Status",dataIndex:"status",key:"status",align:"center",width:120,render:i=>dl(i),filters:[{text:"On Stock",value:"On Stock"},{text:"For Repair",value:"For Repair"},{text:"Deployed",value:"Deployed"}],onFilter:(i,s)=>s.status.includes(i)}];return o!=="guest"&&n.push({title:"Action",key:"action",align:"center",width:80,render:i=>a.jsx(Cn,{title:"Edit",children:a.jsx(yt,{type:"text",icon:a.jsx(ll,{}),onClick:()=>e(i)})})}),n},{Option:On}=Me,fl=()=>{const[e,l]=t.useState(""),[o,r]=t.useState("newest"),[n,i]=t.useState({field:"id",order:"descend"}),[s,c]=t.useState(1),[d,v]=t.useState(10),[u,f]=t.useState([]),[h,m]=t.useState([]),[x,g]=t.useState(!1),[y,C]=t.useState(!1),[b,R]=t.useState(null),[I,j]=t.useState(!1),[N,X]=t.useState("default"),{logUserActivity:Y}=La(),{logUserNotification:U}=Ka(),{userData:k}=Ua(),{userData:P}=za(),$=(k==null?void 0:k.username)||(P==null?void 0:P.username)||"Unknown User",Z=!!k,O=Z?"admin":!!P?"user":"guest";t.useEffect(()=>{(async()=>{j(!0);try{const G=await pt();Array.isArray(G)?m(G):(console.error("Received invalid data:",G),ke.error("Failed to load inventory data."))}catch{ke.error("Failed to load inventory data.")}finally{j(!1)}})()},[]);const ne=[...Array.isArray(h)?h.filter(S=>Object.values(S).join(" ").toLowerCase().includes(e.toLowerCase())):[]].sort((S,G)=>{if(n.field&&n.order){const{field:re,order:ce}=n;if(ce==="ascend")return S[re]>G[re]?1:-1;if(ce==="descend")return S[re]<G[re]?1:-1}return 0}),B=ne.length,J=ne.slice((s-1)*d,s*d),F=(S,G)=>{c(S),v(G)},q=S=>{r(S.toLowerCase());const G=S.toLowerCase()==="newest"?"desce     nd":"ascend";i({field:"id",order:G}),c(1)},w=S=>{S.field&&i({field:S.field,order:S.order})},ae=async S=>{try{j(!0);const G=await Za(S);if(G&&G.id){ke.success(`Item added successfully! ID: ${G.id}`),await Y($,"Inventory",`Added item with ID: ${G.id}`),await U("Inventory Update",`You added an item with ID: ${G.id}`);const re=await pt();m(re)}else ke.error("Failed to retrieve item ID.")}catch(G){console.error("Error adding item:",G),ke.error("Failed to add item.")}finally{j(!1)}},ee=S=>{R(S),C(!0)},oe=async S=>{const G=b;if(!Object.keys(S).some(ce=>{const z=S[ce],H=G[ce];return typeof z=="string"?z.trim()!==(H||"").trim():z!==H})){ke.info("No changes detected.");return}j(!0);try{const ce=await Ja({...S,id:b==null?void 0:b.id});if(ce.message==="Item updated successfully"){const z=await pt();m(z),ke.success(`Item with ID ${S.id} updated successfully!`),await Y($,"Inventory",`Updated item with ID: ${S.id}`),await U("Inventory Update",`You edited an item with ID: ${S.id}`),C(!1)}else ke.error(ce.message||"Failed to update item.")}catch(ce){console.error("Error updating item:",ce),ke.error("Failed to update item. Please try again.")}finally{j(!1)}},L=async()=>{if(!Z){ke.error("You do not have permission to delete items.");return}if(u.length===0){ke.warning("Please select items to delete.");return}try{if((await er(u)).message==="Items deleted successfully"){const G=await pt();m(G),f([]),ke.success("Items deleted successfully!"),await Y($,"Inventory",`Deleted item(s) with ID(s): ${u.join(", ")}`),await U("Inventory Update",`You deleted item(s) with ID(s): ${u.join(", ")}`)}else ke.error("Error deleting items.")}catch(S){console.error("Error deleting items:",S),ke.error("Failed to delete items. Please try again.")}finally{j(!1)}},M=S=>{X(S)},W=Z?{selectedRowKeys:u,onChange:f}:null;return a.jsxs(tr,{title:a.jsx("span",{className:"text-5xl-6 font-bold flex justify-center",children:"INVENTORY"}),className:"flex flex-col w-full mx-auto bg-[#A8E1C5] rounded-xl shadow border-none",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 space-x-2 w-full",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(He,{placeholder:"Search",prefix:a.jsx(Wa,{}),value:e,onChange:S=>l(S.target.value),className:"w-80 bg-[#a7f3d0] border border-black custom-search"}),a.jsx(Cn,{title:"Add Item",children:(Z||P)&&a.jsx(yt,{type:"text",icon:a.jsx(In,{}),onClick:()=>g(!0),style:{width:"32px",height:"32px",border:"none",cursor:"pointer"}})}),Z&&a.jsx(Cn,{title:"Delete",children:a.jsx(yt,{type:"text",icon:a.jsx(Ga,{}),onClick:L})})]}),a.jsx("div",{className:"ml-auto",children:a.jsxs(Me,{defaultValue:"Newest",className:"w-32 transparent-select",onChange:q,children:[a.jsx(On,{value:"Newest",children:"Newest"}),a.jsx(On,{value:"Oldest",children:"Oldest"})]})})]}),a.jsx(nr,{defaultActiveKey:"default",onChange:M,type:"card",items:[{key:"default",label:"Default",children:a.jsx("div",{style:{height:"680px"},children:a.jsx(vn,{rowSelection:W,rowKey:"id",dataSource:J,columns:gn(ee,o,O,N),pagination:!1,bordered:!0,onChange:w,scroll:{x:"max-content",y:620},loading:I})})},{key:"issuedDate",label:"Issued Date",children:a.jsx("div",{style:{height:"680px"},children:a.jsx(vn,{rowSelection:W,rowKey:"id",dataSource:J,columns:gn(ee,o,O,N),pagination:!1,bordered:!0,onChange:w,scroll:{x:"max-content",y:620},loading:I})})},{key:"purchaseDate",label:"Purchased Date",children:a.jsx("div",{style:{height:"680px"},children:a.jsx(vn,{rowSelection:W,rowKey:"id",dataSource:J,columns:gn(ee,o,O,N),pagination:!1,bordered:!0,onChange:w,scroll:{x:"max-content",y:620},loading:I})})}]}),a.jsxs("div",{className:"flex items-center justify-between mt-10",children:[a.jsxs(Qa.Text,{style:{color:"#072C1C"},children:["Showing data of ",B>0?(s-1)*d+1:0," to ",Math.min(s*d,B)," of ",B," entries"]}),a.jsx(Xa,{current:s,pageSize:d,total:B,showSizeChanger:!0,pageSizeOptions:["10","20","30"],onChange:F})]}),a.jsx(sl,{visible:x,onClose:()=>g(!1),onAdd:ae,loading:I}),a.jsx(ul,{visible:y,onClose:()=>C(!1),onEdit:oe,item:b,loading:I})]})},yl=()=>a.jsx("div",{className:"flex flex-col w-full h-auto p-8",children:a.jsx("div",{children:a.jsx(fl,{})})});export{yl as default};
