import{r,R as D,j as y,a as b}from"./index-CvNWCSBk.js";import{g as x}from"./addItemToInventory-BizEI-By.js";import{B as E}from"./index-zU6AFh6e.js";import"./lodash-875DS118.js";import"./callSuper-DSIyKpBK.js";import"./createForOfIteratorHelper-AgibUOrS.js";import"./tslib.es6-DBPwE56R.js";var g=function(){return g=Object.assign||function(n){for(var e,o=1,h=arguments.length;o<h;o++){e=arguments[o];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},g.apply(this,arguments)},S=r.forwardRef(function(n,e){return D.createElement(E,g({},n,{chartType:"Column",ref:e}))});const O=()=>{const[n,e]=r.useState([]),[o,h]=r.useState(!0),[a,m]=r.useState(window.innerWidth<640);r.useEffect(()=>{const s=()=>m(window.innerWidth<640);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),r.useEffect(()=>{(async()=>{try{const f=await x(),l={},u={};f.forEach(t=>{const d=parseInt(t.quantity)||0;if(t.purchaseDate){const i=new Date(t.purchaseDate),c=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`;l[c]=(l[c]||0)+d}if(t.issuedDate){const i=new Date(t.issuedDate),c=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`;u[c]=(u[c]||0)+d}});const v=Array.from(new Set([...Object.keys(l),...Object.keys(u)])).sort((t,d)=>new Date(t+"-01")-new Date(d+"-01")),p=[];v.forEach(t=>{p.push({month:t,type:"Purchased",value:l[t]||0}),p.push({month:t,type:"Issued",value:u[t]||0})}),e(p)}catch(f){console.error("Error fetching inventory data",f)}finally{h(!1)}})()},[]);const w={data:n,isGroup:!0,xField:"month",yField:"value",seriesField:"type",columnWidthRatio:.4,colorField:"type",color:["#34d399","#60a5fa"],legend:{color:{position:"top",layout:{justifyContent:"center"}}},axis:{x:{label:{autoRotate:!1},labelFontSize:a?7:10},y:{minInterval:1,label:{formatter:s=>`${s}`},labelFontSize:a?7:10}}};return y.jsx("div",{className:"w-auto h-full rounded-xl bg-[#A8E1C5] shadow-md",style:{height:a?270:420,width:"100%"},children:o?y.jsx(b,{size:"large"}):y.jsx(S,{...w})})};export{O as default};
