import{r,R as D,u as j,j as m,a as S}from"./index-CoTjVTXu.js";import{g as E}from"./addItemToInventory-UNG0Q4vs.js";import{B as C}from"./index-CeXz7WWx.js";import"./lodash-c2diFTiz.js";import"./callSuper-Ck0Stqhk.js";import"./createForOfIteratorHelper-_GrxZFqs.js";import"./tslib.es6-DBPwE56R.js";var y=function(){return y=Object.assign||function(n){for(var e,o=1,f=arguments.length;o<f;o++){e=arguments[o];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},y.apply(this,arguments)},F=r.forwardRef(function(n,e){return D.createElement(C,y({},n,{chartType:"Column",ref:e}))});const L=()=>{const[n,e]=r.useState([]),[o,f]=r.useState(!0),[a,w]=r.useState(window.innerWidth<640),{theme:u,currentTheme:v}=j();r.useEffect(()=>{const s=()=>w(window.innerWidth<640);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),r.useEffect(()=>{(async()=>{try{const p=await E(),l={},d={};p.forEach(t=>{const h=parseInt(t.quantity)||0;if(t.purchaseDate){const i=new Date(t.purchaseDate),c=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`;l[c]=(l[c]||0)+h}if(t.issuedDate){const i=new Date(t.issuedDate),c=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`;d[c]=(d[c]||0)+h}});const b=Array.from(new Set([...Object.keys(l),...Object.keys(d)])).sort((t,h)=>new Date(t+"-01")-new Date(h+"-01")),g=[];b.forEach(t=>{g.push({month:t,type:"Purchased",value:l[t]||0}),g.push({month:t,type:"Issued",value:d[t]||0})}),e(g)}catch(p){console.error("Error fetching inventory data",p)}finally{f(!1)}})()},[]);const x={data:n,isGroup:!0,xField:"month",yField:"value",seriesField:"type",columnWidthRatio:.4,colorField:"type",color:["#34d399","#60a5fa"],legend:{color:{position:"top",layout:{justifyContent:"center"}}},axis:{x:{label:{autoRotate:!1},labelFontSize:a?7:10},y:{minInterval:1,label:{formatter:s=>`${s}`},labelFontSize:a?7:10}}};return m.jsx("div",{className:"w-auto h-full rounded-xl bg-[#a7f3d0] shadow-md flex justify-center items-center graph-container",style:v!=="default"?{height:a?270:420,width:"100%",background:u.componentBackground,color:u.text,"--tooltip-bg":u.header,"--tooltip-text":u.textLight}:{height:a?270:420,width:"100%"},children:o?m.jsx(S,{size:"large"}):m.jsx(F,{...x})})};export{L as default};
