import{r as n,R as x,j as c,a as C}from"./index-CvNWCSBk.js";import{g as w}from"./addItemToInventory-BizEI-By.js";import{B as F}from"./index-zU6AFh6e.js";import"./lodash-875DS118.js";import"./callSuper-DSIyKpBK.js";import"./createForOfIteratorHelper-AgibUOrS.js";import"./tslib.es6-DBPwE56R.js";var u=function(){return u=Object.assign||function(r){for(var t,o=1,b=arguments.length;o<b;o++){t=arguments[o];for(var f in t)Object.prototype.hasOwnProperty.call(t,f)&&(r[f]=t[f])}return r},u.apply(this,arguments)},N=n.forwardRef(function(r,t){return x.createElement(F,u({},r,{chartType:"Bar",ref:t}))});const m=["#f4664a","#faad14","#a0d911","#52c41a","#13c2c2","#1890ff","#2f54eb","#722ed1","#eb2f96","#fa541c","#fa8c16","#fadb14","#b7eb8f","#87e8de","#91d5ff","#adc6ff","#d3adf7","#ffadd2","#ffd6e7","#ffe7ba","#fff566","#d9f7be","#e6fffb","#bae7ff","#d6e4ff","#efdbff","#ffccc7","#ffe58f","#fff1b8","#f4ffb8","#d9f7be","#e6fffb","#b5f5ec","#adc6ff"],E=({searchText:r})=>{const[t,o]=n.useState([]),[b,f]=n.useState(!0),[a,p]=n.useState(window.innerWidth<640);n.useEffect(()=>{const e=()=>p(window.innerWidth<640);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),n.useEffect(()=>{(async()=>{try{const h=(await w()).filter(l=>Object.values(l).join(" ").toLowerCase().includes(r.toLowerCase())).reduce((l,s)=>{const{type:d,quantity:v}=s;return d&&(l[d]||(l[d]=0),l[d]+=parseInt(v)||0),l},{}),g=Object.entries(h).map(([l,s])=>({labelName:l,value:s})).sort((l,s)=>l.labelName.localeCompare(s.labelName));o(g)}catch(i){console.error("Failed to fetch inventory data:",i)}finally{f(!1)}})()},[r]);const y={data:t,xField:"labelName",yField:"value",colorField:"labelName",paddingRight:a?20:75,style:{maxWidth:a?7:18},markBackground:{label:{text:({originData:e})=>`${e.value/1e3*100}% | ${e.value}`,position:"bottom",dx:a?40:80,style:{fill:"#072C1C",fillOpacity:1,fontSize:a?7:9}},style:{fill:"#eee"}},legend:{color:{itemLabelFontSize:a?7:10,title:!1,position:"top",maxCols:t.length,maxRows:1,itemName:{style:{fill:"#072C1C"}},layout:{justifyContent:"center"},items:t.slice().sort((e,i)=>e.labelName.localeCompare(i.labelName)).map(e=>({name:e.labelName,value:e.labelName,marker:{symbol:"square",style:{fill:m[t.findIndex(i=>i.labelName===e.labelName)%m.length],r:5}}}))}},scale:{y:{domain:[0,Math.max(...t.map(e=>e.value||0),1e3)]},color:{range:m}},axis:{x:{tick:!0,label:!0,labelFontSize:a?5:9,labelFontStyle:"bold",labelFill:"#072C1C",labelFillOpacity:2},y:{grid:!0,gridStrokeOpacity:5,gridLineDash:[5,5],tick:!1,label:!0,title:"Inventory Types Quantity",titleFontSize:a?10:12,titleFontStyle:"bold",scrollY:!a,labelFontSize:a?8:12,labelFill:"#072C1C",labelFillOpacity:2}},interaction:{elementHighlight:!0},autoFit:!0,height:a?270:420};return c.jsx("div",{className:"history-bar-graph-container",style:{height:a?270:420,width:"100%",minWidth:320,padding:a?"2px":"10px"},children:b?c.jsx("div",{className:"loading-spinner",children:c.jsx(C,{size:"large"})}):c.jsx(N,{...y})})};export{E as default};
