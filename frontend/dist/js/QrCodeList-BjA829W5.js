import{bh as U,r as t,d as W,e as F,C as G,j as e,S as I,q as J,I as Z,R as _,B as H,i as C,a as K}from"./index-D_DjqwU6.js";import{g as k,c as V,Q as X,b as Y}from"./qrCodeUtils-DyUbhdI5.js";import{C as N}from"./index-DG92omOn.js";import{R as ee}from"./PrinterOutlined-D-ModBVM.js";import{P as se}from"./Pagination-B3MLnmFW.js";import"./createForOfIteratorHelper-BG_wcgzh.js";import"./useBubbleLock-BNMpLRc-.js";const{Option:o}=C,re=({inventoryData:u=[],selectedIds:l,setSelectedIds:m})=>{const{message:S}=U.useApp(),[p,R]=t.useState(!1),j=t.useRef({}),[d,b]=t.useState(1),[x,P]=t.useState(12),[h,L]=t.useState(""),[g,A]=t.useState(6),[r,E]=t.useState("SMALL"),{logUserActivity:z}=W(),{logUserNotification:y}=F(),f=t.useMemo(()=>u.filter(s=>Object.values(s).some(a=>a&&String(a).toLowerCase().includes(h.toLowerCase()))),[u,h]),i=t.useMemo(()=>f.slice((d-1)*x,d*x),[f,d,x]);t.useEffect(()=>{const s=i.map(a=>a.id);R(s.length>0&&s.every(a=>l.includes(a)))},[i,l]);const M=t.useCallback(s=>{const a=i.map(n=>n.id);s.target.checked?m(n=>Array.from(new Set([...n,...a]))):m(n=>n.filter(c=>!a.includes(c)))},[i,m]),v=t.useCallback(s=>{m(a=>a.includes(s)?a.filter(n=>n!==s):[...a,s])},[m]),Q=t.useCallback(async()=>{if(l.length===0){S.warning("Please select at least one QR code to print.");return}const a=l.map(c=>u.find(q=>q.id===c)).filter(Boolean).map(k),n=Y[r];await V(j,l,n,a);try{await z("Batch Print",`Printed ${l.length} QR code(s) (${r.toLowerCase()})`),await y("Batch Print",`Printed ${l.length} QR code(s) (${r.toLowerCase()})`)}catch(c){console.error("Error logging batch print activity:",c)}},[l,u,r,S,z,y]),w=t.useCallback(()=>{const s={2:{xs:24,sm:12,md:12,lg:12,xl:12},3:{xs:24,sm:12,md:8,lg:8,xl:8},4:{xs:24,sm:12,md:6,lg:6,xl:6},6:{xs:24,sm:12,md:8,lg:6,xl:4},8:{xs:24,sm:12,md:6,lg:4,xl:3},12:{xs:24,sm:12,md:6,lg:4,xl:2}};return s[g]||s[6]},[g]),B=t.useCallback(s=>{L(s.target.value),b(1)},[]),D=t.useCallback(s=>{E(s)},[]),$=t.useCallback(s=>{A(s)},[]),O=t.useCallback((s,a)=>{b(s),P(a)},[]),T=t.useMemo(()=>i.map(s=>{const a=k(s),n=w();return t.createElement(G,{...n,key:s.id},e.jsx("div",{ref:c=>j.current[s.id]=c,style:{marginBottom:12},children:e.jsx(X,{value:JSON.stringify(a),size:140,icon:I,iconSize:35,color:"#000000",style:{margin:"0 auto",background:"#fff",borderRadius:8}})}),e.jsx(N,{checked:l.includes(s.id),onChange:()=>v(s.id),className:"mb-2",children:"Select"}),e.jsx("div",{style:{marginTop:8,width:"100%"},children:e.jsxs("span",{style:{fontSize:14,fontWeight:"bold"},children:["ID: ",s.id]})}))}),[i,w,l,v]);return e.jsx(J,{title:e.jsx("span",{className:"text-lgi sm:text-sm md:text-base lg:text-lgi xl:text-xl font-bold flex justify-center",children:"ITEMS"}),className:"flex flex-col w-full mx-auto bg-[#A8E1C5] rounded-xl shadow border-none",children:e.jsxs("div",{style:{padding:16},children:[e.jsxs("div",{className:"flex items-center mb-4 gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{placeholder:"Search QR codes...",prefix:e.jsx(_,{}),value:h,size:"medium",onChange:B,className:"w-auto text-xs border border-black",allowClear:!0}),e.jsxs(H,{type:"primary",size:"small",icon:e.jsx(ee,{}),onClick:Q,disabled:l.length===0,className:"custom-button text-xs w-auto",children:["Print (",r.toLowerCase(),")"]}),e.jsxs(C,{value:r,onChange:D,placeholder:"Size",size:"small",className:"text-xs w-auto",children:[e.jsx(o,{value:"SMALL",style:{fontSize:12},children:"Small"}),e.jsx(o,{value:"MEDIUM",style:{fontSize:12},children:"Medium"}),e.jsx(o,{value:"LARGE",style:{fontSize:12},children:"Large"})]}),e.jsxs(C,{value:g,onChange:$,placeholder:"Columns",size:"small",className:"text-xs hidden sm:block w-auto",children:[e.jsx(o,{value:2,style:{fontSize:12},children:"2 Columns (Wide)"}),e.jsx(o,{value:3,style:{fontSize:12},children:"3 Columns"}),e.jsx(o,{value:4,style:{fontSize:12},children:"4 Columns"}),e.jsx(o,{value:6,style:{fontSize:12},children:"6 Columns (Default)"}),e.jsx(o,{value:8,style:{fontSize:12},children:"8 Columns"}),e.jsx(o,{value:12,style:{fontSize:12},children:"12 Columns (Compact)"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(N,{checked:p,indeterminate:i.some(s=>l.includes(s.id))&&!p,onChange:M,className:"text-xs",children:"Select All (Page)"})})]}),e.jsxs(e.Fragment,{children:[e.jsx(K,{gutter:[16,16],children:T}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(se,{current:d,pageSize:x,total:f.length,onChange:O,showSizeChanger:!0,pageSizeOptions:["12","24","36","48","60","72","84","96"],className:"text-xs"})})]})]})})};export{re as default};
