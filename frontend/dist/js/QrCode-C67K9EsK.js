const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/QrCodeGenerator-LHedMxGX.js","js/index-Cq9w5H2m.js","css/index-Dqee62uv.css","js/index-CVya9Qnf.js","js/qrCodeUtils-DEq3Bs4U.js","js/createForOfIteratorHelper-ZMyofER8.js","js/QrCodeTable-D6eNBa1g.js","js/QrCodeModal-C35tkzz5.js","js/cacheUtils-rgXBj3X0.js","js/FilterOutlined-CqFZr8Fa.js"])))=>i.map(i=>d[i]);
import{A as W,r as s,d as J,e as K,C as Z,j as e,S as Q,f as P,h as H,I as X,R as Y,B as ee,k as L,a as se,P as te,g as ae,p as le,b as _,T as ne,_ as M,u as B}from"./index-Cq9w5H2m.js";import{g as E,b as oe,Q as re,a as ce}from"./qrCodeUtils-DEq3Bs4U.js";import{R as ie}from"./PrinterOutlined-D6fI5T9P.js";import"./createForOfIteratorHelper-ZMyofER8.js";const{Option:u}=L,de=({inventoryData:r=[],selectedIds:a,setSelectedIds:l})=>{const{message:m}=W.useApp(),[x,R]=s.useState(!1),h=s.useRef({}),[f,b]=s.useState(1),[g,y]=s.useState(12),[S,N]=s.useState(""),[j,C]=s.useState(6),[c,w]=s.useState("SMALL"),{logUserActivity:z}=J(),{logUserNotification:k}=K(),v=s.useMemo(()=>r.filter(t=>Object.values(t).some(n=>n&&String(n).toLowerCase().includes(S.toLowerCase()))),[r,S]),d=s.useMemo(()=>v.slice((f-1)*g,f*g),[v,f,g]);s.useEffect(()=>{const t=d.map(n=>n.id);R(t.length>0&&t.every(n=>a.includes(n)))},[d,a]);const o=s.useCallback(t=>{const n=d.map(i=>i.id);t.target.checked?l(i=>Array.from(new Set([...i,...n]))):l(i=>i.filter(p=>!n.includes(p)))},[d,l]),T=s.useCallback(t=>{l(n=>n.includes(t)?n.filter(i=>i!==t):[...n,t])},[l]),O=s.useCallback(async()=>{if(a.length===0){m.warning("Please select at least one QR code to print.");return}const n=a.map(p=>r.find(F=>F.id===p)).filter(Boolean).map(E),i=ce[c];await oe(h,a,i,n);try{await z("Batch Print",`Printed ${a.length} QR code(s) (${c.toLowerCase()})`),await k("Batch Print",`Printed ${a.length} QR code(s) (${c.toLowerCase()})`)}catch(p){console.error("Error logging batch print activity:",p)}},[a,r,c,m,z,k]),A=s.useCallback(()=>{const t={2:{xs:24,sm:12,md:12,lg:12,xl:12},3:{xs:24,sm:12,md:8,lg:8,xl:8},4:{xs:24,sm:12,md:6,lg:6,xl:6},6:{xs:24,sm:12,md:8,lg:6,xl:4},8:{xs:24,sm:12,md:6,lg:4,xl:3},12:{xs:24,sm:12,md:6,lg:4,xl:2}};return t[j]||t[6]},[j]),$=s.useCallback(t=>{N(t.target.value),b(1)},[]),G=s.useCallback(t=>{w(t)},[]),U=s.useCallback(t=>{C(t)},[]),V=s.useCallback((t,n)=>{b(t),y(n)},[]),q=s.useMemo(()=>d.map(t=>{const n=E(t),i=A();return s.createElement(Z,{...i,key:t.id},e.jsx("div",{ref:p=>h.current[t.id]=p,style:{marginBottom:12},children:e.jsx(re,{value:JSON.stringify(n),size:140,icon:Q,iconSize:35,color:"#000000",style:{margin:"0 auto",background:"#fff",borderRadius:8}})}),e.jsx(P,{checked:a.includes(t.id),onChange:()=>T(t.id),className:"mb-2",children:"Select"}),e.jsx("div",{style:{marginTop:8,width:"100%"},children:e.jsxs("span",{style:{fontSize:14,fontWeight:"bold"},children:["ID: ",t.id]})}))}),[d,A,a,T]);return e.jsx(H,{title:e.jsx("span",{className:"text-lgi sm:text-sm md:text-base lg:text-lgi xl:text-xl font-bold flex justify-center",children:"ITEMS"}),className:"flex flex-col w-full mx-auto bg-[#A8E1C5] rounded-xl shadow border-none",children:e.jsxs("div",{style:{padding:16},children:[e.jsxs("div",{className:"flex items-center mb-4 gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{placeholder:"Search QR codes...",prefix:e.jsx(Y,{}),value:S,size:"medium",onChange:$,className:"w-auto text-xs border border-black",allowClear:!0}),e.jsxs(ee,{type:"primary",size:"small",icon:e.jsx(ie,{}),onClick:O,disabled:a.length===0,className:"custom-button text-xs w-auto",children:["Print (",c.toLowerCase(),")"]}),e.jsxs(L,{value:c,onChange:G,placeholder:"Size",size:"small",className:"text-xs w-auto",children:[e.jsx(u,{value:"SMALL",style:{fontSize:12},children:"Small"}),e.jsx(u,{value:"MEDIUM",style:{fontSize:12},children:"Medium"}),e.jsx(u,{value:"LARGE",style:{fontSize:12},children:"Large"})]}),e.jsxs(L,{value:j,onChange:U,placeholder:"Columns",size:"small",className:"text-xs hidden sm:block w-auto",children:[e.jsx(u,{value:2,style:{fontSize:12},children:"2 Columns (Wide)"}),e.jsx(u,{value:3,style:{fontSize:12},children:"3 Columns"}),e.jsx(u,{value:4,style:{fontSize:12},children:"4 Columns"}),e.jsx(u,{value:6,style:{fontSize:12},children:"6 Columns (Default)"}),e.jsx(u,{value:8,style:{fontSize:12},children:"8 Columns"}),e.jsx(u,{value:12,style:{fontSize:12},children:"12 Columns (Compact)"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(P,{checked:x,indeterminate:d.some(t=>a.includes(t.id))&&!x,onChange:o,className:"text-xs",children:"Select All (Page)"})})]}),e.jsxs(e.Fragment,{children:[e.jsx(se,{gutter:[16,16],children:q}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(te,{current:f,pageSize:g,total:v.length,onChange:V,showSizeChanger:!0,pageSizeOptions:["12","24","36","48","60","72","84","96"],className:"text-xs"})})]})]})})},I=_.lazy(()=>M(()=>import("./QrCodeGenerator-LHedMxGX.js"),__vite__mapDeps([0,1,2,3,4,5]))),ue=_.lazy(()=>M(()=>import("./QrCodeTable-D6eNBa1g.js"),__vite__mapDeps([6,1,2,7,4,5,3,8,9]))),D=()=>{const{theme:r,currentTheme:a}=B(),l=a!=="default"&&r.border||"#d1d5db",m=a!=="default"&&r.componentBackground||"#a7f3d0";return e.jsxs("div",{className:"rounded-xl shadow border-none p-6 skeleton-container",style:{backgroundColor:m},children:[e.jsx("div",{className:"h-8 rounded mb-4 animate-pulse",style:{backgroundColor:l}}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-10 rounded animate-pulse",style:{backgroundColor:l}}),e.jsx("div",{className:"h-64 rounded animate-pulse",style:{backgroundColor:l}}),e.jsx("div",{className:"h-8 rounded animate-pulse",style:{backgroundColor:l}})]})]})},me=()=>{const{theme:r,currentTheme:a}=B(),l=a!=="default"&&r.border||"#d1d5db",m=a!=="default"&&r.componentBackground||"#a7f3d0";return e.jsxs("div",{className:"rounded-xl shadow border-none p-6 skeleton-container",style:{backgroundColor:m},children:[e.jsx("div",{className:"h-8 rounded mb-4 animate-pulse",style:{backgroundColor:l}}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-10 rounded animate-pulse",style:{backgroundColor:l}}),e.jsx("div",{className:"h-96 rounded animate-pulse",style:{backgroundColor:l}}),e.jsx("div",{className:"h-8 rounded animate-pulse",style:{backgroundColor:l}})]})]})},fe=()=>{const[r,a]=s.useState(null),[l,m]=s.useState("table"),[x,R]=s.useState([]),[h,f]=s.useState(!0),[b,g]=s.useState(null),[y,S]=s.useState([]),[N,j]=s.useState(null),C=s.useCallback(async()=>{try{f(!0),g(null);const o=await ae();Array.isArray(o)?(R(o),o.length>0&&!r&&a(o[0]),j(Date.now())):(console.error("Received invalid data:",o),g("Invalid data received"))}catch(o){console.error("Failed to load inventory data:",o),g(o.message)}finally{f(!1)}},[]);s.useEffect(()=>{le([Q]),C()},[C]);const c=s.useCallback(()=>{C(),j(Date.now())},[C]),w=s.useCallback(o=>{a(o)},[]),z=s.useCallback(o=>{m(o),o==="list"&&C()},[C]),k=s.useMemo(()=>e.jsx(ue,{inventoryData:x,loading:h,error:b,onRefresh:c,onItemSelect:w,lastSyncTime:N}),[x,h,b,c,w,N]),v=s.useMemo(()=>h&&l==="list"?e.jsx(me,{}):e.jsx(de,{inventoryData:x,error:b,onRefresh:c,selectedIds:y,setSelectedIds:S}),[x,b,c,h,l,y,S]),d=s.useMemo(()=>[{key:"table",label:e.jsx("span",{className:"text-xs",children:"Table View"}),children:k},{key:"list",label:e.jsx("span",{className:"text-xs",children:"QR Code List"}),children:v}],[k,v]);return e.jsxs("div",{className:"container max-w-full",children:[e.jsx("div",{className:"mt-5",children:h?e.jsx(D,{}):e.jsx(s.Suspense,{fallback:e.jsx(D,{}),children:l==="list"?e.jsx(I,{previewItems:x.filter(o=>y.includes(o.id))}):e.jsx(I,{itemDetails:r})})}),e.jsx("div",{className:"mt-5",children:e.jsx(ne,{className:"custom-tabs",activeKey:l,onChange:z,type:"card",items:d})})]})};export{fe as default};
