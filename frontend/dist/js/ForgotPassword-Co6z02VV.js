import{A as b,r as o,p as v,S as l,h as P,j as e,B as x,L as I,a as k,s as a}from"./index-Bfv_RYKM.js";import{v as A}from"./vectors-D4bo22xO.js";import{T as L}from"./index-mXndb-Dc.js";import{F as c}from"./index-v5vGacUn.js";import{I as i}from"./index-eFG5XlKP.js";import"./TextArea-Bk2TBN4c.js";import"./CheckOutlined-nId50N2-.js";import"./row-DVtG68eM.js";import"./responsiveObserver-DpdOGnt2.js";import"./EyeOutlined-ChXYwmpH.js";import"./SearchOutlined-DVBhVuGZ.js";const d=async n=>{try{return(await b.post("/forgot_password.php",n)).data}catch(r){throw console.error("Forgot Password API Error:",r),r}},q="data:image/svg+xml,%3csvg%20width='10'%20height='10'%20viewBox='0%200%2010%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.11576%207.62114L3.49463%205.00001L6.11576%202.37888'%20stroke='%23072C1C'%20stroke-width='0.582474'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",{Title:B,Text:m}=L,$=({className:n=""})=>{o.useEffect(()=>{v([l])},[]);const[r,p]=o.useState(1),[h,w]=o.useState(""),[g,y]=o.useState(""),u=P(),f=async t=>{try{const s=await d({username:t.username});s.success?(y(t.username),w(s.security_question),p(2)):a.error(s.message)}catch(s){console.error("Error fetching security question:",s),a.error("An error occurred. Please try again.")}},j=async t=>{try{const s=await d({username:g,security_answer:t.securityAnswer,newPassword:t.newPassword});s.success?(a.success(s.message),u("/login",{replace:!0})):a.error(s.message)}catch(s){console.error("Error during password reset:",s),a.error("An error occurred. Please try again.")}},N=t=>{r===1?f(t):j(t)},S=()=>{u("/login",{replace:!0})};return e.jsx(o.Suspense,{fallback:e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-honeydew",children:[e.jsx(I,{className:"h-[183px] w-[171px] object-cover mb-4 logo-bounce",src:l,alt:"SINSSI Logo",width:171,height:183}),e.jsx(k,{size:"large"}),e.jsx("p",{className:"mt-4 text-darkslategray-200",children:"Loading..."})]}),children:e.jsxs("div",{className:`relative flex flex-col items-center justify-center h-screen bg-honeydew overflow-hidden ${n}`,children:[e.jsx("img",{className:"absolute bottom-0 left-0 w-full h-auto object-cover z-0",style:{maxHeight:"100vh"},src:A,alt:"vector bg"}),e.jsxs("section",{className:`w-auto sm:w-full max-w-sm sm:max-w-md bg-honeydew p-6 
      rounded-lg shadow-lg z-10 flex flex-col items-center`,children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx("img",{className:"w-auto h-auto sm:h-[133px] sm:w-[121px] object-cover",loading:"lazy",src:l,alt:"SINSSI Logo"})}),e.jsxs("div",{className:"w-auto sm:w-full sm:max-w-[400px]",children:[e.jsxs(x,{type:"link",onClick:S,className:"mb-4 flex justify-start text-xs sm:text-sm",style:{color:"#072c1c"},children:[e.jsx("img",{className:"w-auto h-auto sm:w-[9.3px] sm:h-[9.3px]",loading:"lazy",alt:"Back",src:q}),"Back to login"]}),e.jsx(B,{level:1,className:"text-center",style:{color:"#072c1c"},children:e.jsx("span",{className:"text-xl sm:text-5xl-6",children:r===1?"Forgot Password":"Answer Security Question"})}),r===1?e.jsx(m,{className:"text-center text-xs sm:text-sm justify-center",style:{color:"#072c1c",lineHeight:"1.5"},children:"Enter your username to retrieve your security question."}):e.jsx(m,{className:"text-center text-xs sm:text-sm flex justify-center",style:{color:"#072c1c",lineHeight:"1.5"},children:"Please answer your security question to reset your password."}),e.jsxs(c,{onFinish:N,className:"mt-5 w-auto",children:[r===1?e.jsx(c.Item,{name:"username",rules:[{required:!0,message:"Please input your username"}],children:e.jsx(i,{placeholder:"Username",className:"h-auto custom-input justify-self-center flex"})}):e.jsxs(e.Fragment,{children:[e.jsx(m,{style:{display:"block",marginBottom:"1rem",color:"#072c1c"},className:"text-sm",children:h}),e.jsx(c.Item,{name:"securityAnswer",rules:[{required:!0,message:"Please input your answer"}],children:e.jsx(i,{placeholder:"Security Answer",className:"h-[38px] custom-input"})}),e.jsx(c.Item,{name:"newPassword",rules:[{required:!0,message:"Please input your new password"}],children:e.jsx(i.Password,{placeholder:"New Password",className:"h-[38px] custom-password-input"})})]}),e.jsx(c.Item,{children:e.jsx(x,{type:"primary",htmlType:"submit",className:`w-1/3 flex justify-self-center bg-palegoldenrod
                 text-darkslategray-100 py-5 rounded-3xs shadow-md`,children:r===1?"Next":"Submit"})})]})]})]})]})})};export{$ as default};
