import{r as n,a as w,u as F,j as c,c as S}from"./index-D2rseGsh.js";import{g as N}from"./addItemToInventory-DwGBCkXs.js";import{B as j}from"./index-DmunMFhd.js";import"./lodash-D9TiIPaw.js";import"./callSuper-CxiNFlS4.js";import"./createForOfIteratorHelper-CdqatU5H.js";var p=function(){return p=Object.assign||function(r){for(var a,o=1,u=arguments.length;o<u;o++){a=arguments[o];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},p.apply(this,arguments)},O=n.forwardRef(function(r,a){return w.createElement(j,p({},r,{chartType:"Bar",ref:a}))});const m=["#f4664a","#faad14","#a0d911","#52c41a","#13c2c2","#1890ff","#2f54eb","#722ed1","#eb2f96","#fa541c","#fa8c16","#fadb14","#b7eb8f","#87e8de","#91d5ff","#adc6ff","#d3adf7","#ffadd2","#ffd6e7","#ffe7ba","#fff566","#d9f7be","#e6fffb","#bae7ff","#d6e4ff","#efdbff","#ffccc7","#ffe58f","#fff1b8","#f4ffb8","#d9f7be","#e6fffb","#b5f5ec","#adc6ff"],R=({searchText:r})=>{const[a,o]=n.useState([]),[u,s]=n.useState(!0),[e,y]=n.useState(window.innerWidth<640),{theme:b,currentTheme:g}=F();n.useEffect(()=>{const t=()=>y(window.innerWidth<640);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n.useEffect(()=>{(async()=>{try{const x=(await N()).filter(l=>Object.values(l).join(" ").toLowerCase().includes(r.toLowerCase())).reduce((l,f)=>{const{type:d,quantity:C}=f;return d&&(l[d]||(l[d]=0),l[d]+=parseInt(C)||0),l},{}),v=Object.entries(x).map(([l,f])=>({labelName:l,value:f})).sort((l,f)=>l.labelName.localeCompare(f.labelName));o(v)}catch(i){console.error("Failed to fetch inventory data:",i)}finally{s(!1)}})()},[r]);const h={data:a,xField:"labelName",yField:"value",colorField:"labelName",paddingRight:e?20:75,style:{maxWidth:e?7:18},markBackground:{label:{text:({originData:t})=>`${t.value/1e3*100}% | ${t.value}`,position:"bottom",dx:e?40:80,style:{fill:"#072C1C",fillOpacity:1,fontSize:e?7:9}},style:{fill:"#eee"}},legend:{color:{itemLabelFontSize:e?7:10,title:!1,position:"top",maxCols:a.length,maxRows:1,itemName:{style:{fill:"#072C1C"}},layout:{justifyContent:"center"},items:a.slice().sort((t,i)=>t.labelName.localeCompare(i.labelName)).map(t=>({name:t.labelName,value:t.labelName,marker:{symbol:"square",style:{fill:m[a.findIndex(i=>i.labelName===t.labelName)%m.length],r:5}}}))}},scale:{y:{nice:!0},color:{range:m}},axis:{x:{grid:!0,gridStrokeOpacity:20,gridLineDash:[1],tick:!0,label:!0,labelFontSize:e?5:9,labelFontStyle:"bold",labelFill:"#072C1C",labelFillOpacity:2},y:{grid:!0,gridStrokeOpacity:20,gridLineDash:[1],tick:!0,label:!0,title:"Inventory Types Quantity",titleFontSize:e?10:12,titleFontStyle:"bold",scrollY:!e,labelFontSize:e?8:12,labelFill:"#072C1C",labelFillOpacity:2}},interaction:{elementHighlight:!0},autoFit:!0,height:e?270:420};return c.jsx("div",{className:"history-bar-graph-container",style:{height:e?270:420,width:"100%",minWidth:320,padding:e?"2px":"10px",...g!=="default"&&{"--tooltip-bg":b.header,"--tooltip-text":b.textLight,background:b.componentBackground}},children:u?c.jsx("div",{className:"loading-spinner",children:c.jsx(S,{size:"large"})}):c.jsx(O,{...h})})};export{R as default};
