import{r as n,R as D,j as y,a as x}from"./index-1bUjThPI.js";import{g as j}from"./addItemToInventory-Dg-l0Y_f.js";import{B as E}from"./index-BfXno2TE.js";import"./lodash-Dx-4AeC4.js";import"./createForOfIteratorHelper-CS5FNHVX.js";import"./tslib.es6-DBPwE56R.js";var m=function(){return m=Object.assign||function(a){for(var e,r=1,f=arguments.length;r<f;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s])}return a},m.apply(this,arguments)},b=n.forwardRef(function(a,e){return D.createElement(E,m({},a,{chartType:"Column",ref:e}))});const M=()=>{const[a,e]=n.useState([]),[r,f]=n.useState(!0),[s,g]=n.useState(window.innerWidth<640);n.useEffect(()=>{const o=()=>g(window.innerWidth<640);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),n.useEffect(()=>{(async()=>{try{const h=await j(),u={},c={};h.forEach(t=>{const d=parseInt(t.quantity)||0;if(t.purchaseDate){const i=new Date(t.purchaseDate),l=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`;u[l]=(u[l]||0)+d}if(t.issuedDate){const i=new Date(t.issuedDate),l=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`;c[l]=(c[l]||0)+d}});const w=Array.from(new Set([...Object.keys(u),...Object.keys(c)])).sort((t,d)=>new Date(t+"-01")-new Date(d+"-01")),p=[];w.forEach(t=>{p.push({month:t,type:"Purchased",value:u[t]||0}),p.push({month:t,type:"Issued",value:c[t]||0})}),e(p)}catch(h){console.error("Error fetching inventory data",h)}finally{f(!1)}})()},[]);const v={data:a,isGroup:!0,xField:"month",yField:"value",seriesField:"type",columnWidthRatio:.4,colorField:"type",color:["#34d399","#60a5fa"],xAxis:{label:{autoRotate:!1,style:{fontSize:s?6:8}}},yAxis:{minInterval:1,label:{formatter:o=>`${o}`}},label:{position:"middle",layout:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"}]}};return y.jsx("div",{className:"w-auto h-full rounded-xl bg-[#A8E1C5] shadow-md",children:r?y.jsx(x,{size:"large"}):y.jsx(b,{...v})})};export{M as default};
