import{n as ur,t as dr,v as ln,r as n,C as Wa,x as He,ag as ca,z as mr,F as fr,ah as hr,ai as pr,aj as vr,ak as xr,al as gr,am as br,a7 as yr,a8 as on,aa as cn,an as jr,ac as Re,ab as B,ao as Qa,ap as ze,a9 as je,W as It,R as Va,aq as Pt,ar as Cr,as as Dr,at as yt,a2 as jt,g as we,J as un,ae as bt,au as dn,av as Sr,I as Ct,B as be,aw as mn,H as fn,G as hn,ax as pn,$ as vn,a0 as xn,a1 as gn,ay as bn,az as yn,aA as jn,E as ua,b as zt,c as Yt,e as Rt,d as Et,A as da,j as e,T as Ue,M as Lt,D as ft,a4 as ia,s as ta}from"./index-D5m7brAQ.js";import{g as lt,d as wr,u as Nr,a as kr,r as Ir}from"./addItemToInventory-C5OFQb4e.js";import{P as at,p as Cn,f as _t,e as ot,h as Pr,t as Ut,j as Or,u as Rr,k as Er,l as Dn,m as en,n as Sn,o as Mr,q as Tr,s as $a,R as Ha,v as Fr,w as wn,x as Ar,y as Nn,c as Vr,d as $e}from"./index-6vJYtfpc.js";import{F as P}from"./index-CFeAJxR5.js";import{S as kt,D as qa}from"./index-CbcxBX5s.js";import{_ as $r}from"./callSuper-C3LUd-JC.js";import{R as Ot,C as We}from"./row-DMTX2L-Q.js";import{u as Hr,S as he,R as _a}from"./index-DfjrVpKX.js";import{R as Xa,T as Mt}from"./index-BPHHOxml.js";import{R as la}from"./DeleteOutlined-CbjJdnfi.js";import{D as qr}from"./index-DisltTFr.js";import{I as ye}from"./index-DLyYD9CR.js";import{R as kn}from"./CalendarOutlined-nPCl_P9C.js";import{u as In,g as Pn,a as On}from"./TextArea-D-DXIv-d.js";import{C as Gt,T as Rn}from"./index-ON6h34Ee.js";import{R as Bt}from"./SearchOutlined-l8LOIuY9.js";import{F as Ht,u as _r}from"./index-u6_rc1eU.js";import{T as Ja}from"./index-C-aXWOWo.js";import{H as Le}from"./HighlightText-C7CE-DRw.js";import{d as Br}from"./debounce-rCJIJBfa.js";import{R as Ba,h as zr}from"./printUtils-Bk8W4iEz.js";import{R as za}from"./FilterOutlined-CVBjpxIi.js";import{P as Yr}from"./Pagination-Dz9KGlxF.js";import"./move-DlPCvRIF.js";import"./Dropdown-CFoEwfhM.js";import"./responsiveObserver-DoXGIqhg.js";import"./CheckOutlined-BfY46oHH.js";import"./EyeOutlined-DKNTmCKm.js";import"./PlusOutlined-CVr93bVs.js";import"./addEventListener-CGrztH6Z.js";import"./index-DX2UjZVA.js";import"./useBreakpoint-ChVOYjk2.js";import"./useForceUpdate-BMu-K6_i.js";const aa=(t,r,a,s,i)=>({background:t,border:`${ln(s.lineWidth)} ${s.lineType} ${r}`,[`${i}-icon`]:{color:a}}),Lr=t=>{const{componentCls:r,motionDurationSlow:a,marginXS:s,marginSM:i,fontSize:o,fontSizeLG:m,lineHeight:l,borderRadiusLG:c,motionEaseInOutCirc:d,withDescriptionIconSize:u,colorText:b,colorTextHeading:y,withDescriptionPadding:k,defaultPadding:D}=t;return{[r]:Object.assign(Object.assign({},dr(t)),{position:"relative",display:"flex",alignItems:"center",padding:D,wordWrap:"break-word",borderRadius:c,[`&${r}-rtl`]:{direction:"rtl"},[`${r}-content`]:{flex:1,minWidth:0},[`${r}-icon`]:{marginInlineEnd:s,lineHeight:0},"&-description":{display:"none",fontSize:o,lineHeight:l},"&-message":{color:y},[`&${r}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${a} ${d}, opacity ${a} ${d},
        padding-top ${a} ${d}, padding-bottom ${a} ${d},
        margin-bottom ${a} ${d}`},[`&${r}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${r}-with-description`]:{alignItems:"flex-start",padding:k,[`${r}-icon`]:{marginInlineEnd:i,fontSize:u,lineHeight:0},[`${r}-message`]:{display:"block",marginBottom:s,color:y,fontSize:m},[`${r}-description`]:{display:"block",color:b}},[`${r}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Ur=t=>{const{componentCls:r,colorSuccess:a,colorSuccessBorder:s,colorSuccessBg:i,colorWarning:o,colorWarningBorder:m,colorWarningBg:l,colorError:c,colorErrorBorder:d,colorErrorBg:u,colorInfo:b,colorInfoBorder:y,colorInfoBg:k}=t;return{[r]:{"&-success":aa(i,s,a,t,r),"&-info":aa(k,y,b,t,r),"&-warning":aa(l,m,o,t,r),"&-error":Object.assign(Object.assign({},aa(u,d,c,t,r)),{[`${r}-description > pre`]:{margin:0,padding:0}})}}},Gr=t=>{const{componentCls:r,iconCls:a,motionDurationMid:s,marginXS:i,fontSizeIcon:o,colorIcon:m,colorIconHover:l}=t;return{[r]:{"&-action":{marginInlineStart:i},[`${r}-close-icon`]:{marginInlineStart:i,padding:0,overflow:"hidden",fontSize:o,lineHeight:ln(o),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${a}-close`]:{color:m,transition:`color ${s}`,"&:hover":{color:l}}},"&-close-text":{color:m,transition:`color ${s}`,"&:hover":{color:l}}}}},Kr=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`}),Wr=ur("Alert",t=>[Lr(t),Ur(t),Gr(t)],Kr);var tn=function(t,r){var a={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)r.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(a[s[i]]=t[s[i]]);return a};const Qr={success:gr,info:xr,error:vr,warning:pr},Xr=t=>{const{icon:r,prefixCls:a,type:s}=t,i=Qr[s]||null;return r?hr(r,n.createElement("span",{className:`${a}-icon`},r),()=>({className:He(`${a}-icon`,{[r.props.className]:r.props.className})})):n.createElement(i,{className:`${a}-icon`})},Jr=t=>{const{isClosable:r,prefixCls:a,closeIcon:s,handleClose:i,ariaProps:o}=t,m=s===!0||s===void 0?n.createElement(br,null):s;return r?n.createElement("button",Object.assign({type:"button",onClick:i,className:`${a}-close-icon`,tabIndex:0},o),m):null},En=n.forwardRef((t,r)=>{const{description:a,prefixCls:s,message:i,banner:o,className:m,rootClassName:l,style:c,onMouseEnter:d,onMouseLeave:u,onClick:b,afterClose:y,showIcon:k,closable:D,closeText:g,closeIcon:S,action:j,id:v}=t,p=tn(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[w,E]=n.useState(!1),V=n.useRef(null);n.useImperativeHandle(r,()=>({nativeElement:V.current}));const{getPrefixCls:G,direction:L,alert:N}=n.useContext(Wa),h=G("alert",s),[C,M,q]=Wr(h),T=O=>{var _;E(!0),(_=t.onClose)===null||_===void 0||_.call(t,O)},$=n.useMemo(()=>t.type!==void 0?t.type:o?"warning":"info",[t.type,o]),I=n.useMemo(()=>typeof D=="object"&&D.closeIcon||g?!0:typeof D=="boolean"?D:S!==!1&&S!==null&&S!==void 0?!0:!!(N!=null&&N.closable),[g,S,D,N==null?void 0:N.closable]),W=o&&k===void 0?!0:k,U=He(h,`${h}-${$}`,{[`${h}-with-description`]:!!a,[`${h}-no-icon`]:!W,[`${h}-banner`]:!!o,[`${h}-rtl`]:L==="rtl"},N==null?void 0:N.className,m,l,q,M),Q=ca(p,{aria:!0,data:!0}),z=n.useMemo(()=>{var O,_;return typeof D=="object"&&D.closeIcon?D.closeIcon:g||(S!==void 0?S:typeof(N==null?void 0:N.closable)=="object"&&(!((O=N==null?void 0:N.closable)===null||O===void 0)&&O.closeIcon)?(_=N==null?void 0:N.closable)===null||_===void 0?void 0:_.closeIcon:N==null?void 0:N.closeIcon)},[S,D,g,N==null?void 0:N.closeIcon]),Y=n.useMemo(()=>{const O=D??(N==null?void 0:N.closable);if(typeof O=="object"){const{closeIcon:_}=O;return tn(O,["closeIcon"])}return{}},[D,N==null?void 0:N.closable]);return C(n.createElement(mr,{visible:!w,motionName:`${h}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:O=>({maxHeight:O.offsetHeight}),onLeaveEnd:y},(O,_)=>{let{className:f,style:F}=O;return n.createElement("div",Object.assign({id:v,ref:fr(V,_),"data-show":!w,className:He(U,f),style:Object.assign(Object.assign(Object.assign({},N==null?void 0:N.style),c),F),onMouseEnter:d,onMouseLeave:u,onClick:b,role:"alert"},Q),W?n.createElement(Xr,{description:a,icon:t.icon,prefixCls:h,type:$}):null,n.createElement("div",{className:`${h}-content`},i?n.createElement("div",{className:`${h}-message`},i):null,a?n.createElement("div",{className:`${h}-description`},a):null),j?n.createElement("div",{className:`${h}-action`},j):null,n.createElement(Jr,{isClosable:I,prefixCls:h,closeIcon:z,handleClose:T,ariaProps:Y}))}))});let Zr=function(t){function r(){var a;return cn(this,r),a=$r(this,r,arguments),a.state={error:void 0,info:{componentStack:""}},a}return yr(r,t),on(r,[{key:"componentDidCatch",value:function(s,i){this.setState({error:s,info:i})}},{key:"render",value:function(){const{message:s,description:i,id:o,children:m}=this.props,{error:l,info:c}=this.state,d=(c==null?void 0:c.componentStack)||null,u=typeof s>"u"?(l||"").toString():s,b=typeof i>"u"?d:i;return l?n.createElement(En,{id:o,type:"error",message:u,description:n.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},b)}):m}}])}(n.Component);const Mn=En;Mn.ErrorBoundary=Zr;function ma(t,r){return t!==void 0?t:r?"bottomRight":"bottomLeft"}function Tn(t,r){var a=ma(t,r),s=a==null?void 0:a.toLowerCase().endsWith("right"),i=s?"insetInlineEnd":"insetInlineStart";return r&&(i=["insetInlineStart","insetInlineEnd"].find(function(o){return o!==i})),i}var es={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};function Fn(t){var r=t.popupElement,a=t.popupStyle,s=t.popupClassName,i=t.popupAlign,o=t.transitionName,m=t.getPopupContainer,l=t.children,c=t.range,d=t.placement,u=t.builtinPlacements,b=u===void 0?es:u,y=t.direction,k=t.visible,D=t.onClose,g=n.useContext(at),S=g.prefixCls,j="".concat(S,"-dropdown"),v=ma(d,y==="rtl");return n.createElement(jr,{showAction:[],hideAction:["click"],popupPlacement:v,builtinPlacements:b,prefixCls:j,popupTransitionName:o,popup:r,popupAlign:i,popupVisible:k,popupClassName:He(s,Re(Re({},"".concat(j,"-range"),c),"".concat(j,"-rtl"),y==="rtl")),popupStyle:a,stretch:"minWidth",getPopupContainer:m,onPopupVisibleChange:function(w){w||D()}},l)}function An(t){return Cn(t,["placement","builtinPlacements","popupAlign","getPopupContainer","transitionName","direction"])}function Vn(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=n.useState([!1,!1]),i=B(s,2),o=i[0],m=i[1],l=function(u,b){m(function(y){return _t(y,b,u)})},c=n.useMemo(function(){return o.map(function(d,u){if(d)return!0;var b=t[u];return b?!!(!a[u]&&!b||b&&r(b,{activeIndex:u})):!1})},[t,o,r,a]);return[c,l]}function ts(t,r,a){if(r===!1)return null;var s=r&&Qa(r)==="object"?r:{};return s.clearIcon||a||n.createElement("span",{className:"".concat(t,"-clear-btn")})}function as(t,r,a,s,i){var o=ze(function(m,l){return!!(a&&a(m,l)||s&&t.isAfter(s,m)&&!ot(t,r,s,m,l.type)||i&&t.isAfter(m,i)&&!ot(t,r,i,m,l.type))});return o}function ns(t,r,a){return n.useMemo(function(){var s=Pr(t,r,a),i=Ut(s),o=i[0],m=Qa(o)==="object"&&o.type==="mask"?o.format:null;return[i.map(function(l){return typeof l=="string"||typeof l=="function"?l:l.format}),m]},[t,r,a])}function rs(t,r,a){return typeof t[0]=="function"||a?!0:r}function ss(t,r,a,s){var i=ze(function(o,m){var l=je({type:r},m);if(delete l.activeIndex,!t.isValidate(o)||a&&a(o,l))return!0;if((r==="date"||r==="time")&&s){var c,d=m&&m.activeIndex===1?"end":"start",u=((c=s.disabledTime)===null||c===void 0?void 0:c.call(s,o,d,{from:l.from}))||{},b=u.disabledHours,y=u.disabledMinutes,k=u.disabledSeconds,D=u.disabledMilliseconds,g=s.disabledHours,S=s.disabledMinutes,j=s.disabledSeconds,v=b||g,p=y||S,w=k||j,E=t.getHour(o),V=t.getMinute(o),G=t.getSecond(o),L=t.getMillisecond(o);if(v&&v().includes(E)||p&&p(E).includes(V)||w&&w(E,V).includes(G)||D&&D(E,V,G).includes(L))return!0}return!1});return i}function na(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=n.useMemo(function(){var s=t&&Ut(t);return r&&s&&(s[1]=s[1]||s[0]),s},[t,r]);return a}function $n(t,r){var a=t.generateConfig,s=t.locale,i=t.picker,o=i===void 0?"date":i,m=t.prefixCls,l=m===void 0?"rc-picker":m,c=t.styles,d=c===void 0?{}:c,u=t.classNames,b=u===void 0?{}:u,y=t.order,k=y===void 0?!0:y,D=t.components,g=D===void 0?{}:D,S=t.inputRender,j=t.allowClear,v=t.clearIcon,p=t.needConfirm,w=t.multiple,E=t.format,V=t.inputReadOnly,G=t.disabledDate,L=t.minDate,N=t.maxDate,h=t.showTime,C=t.value,M=t.defaultValue,q=t.pickerValue,T=t.defaultPickerValue,$=na(C),I=na(M),W=na(q),U=na(T),Q=o==="date"&&h?"datetime":o,z=Q==="time"||Q==="datetime",Y=z||w,O=p??z,_=Or(t),f=B(_,4),F=f[0],H=f[1],R=f[2],J=f[3],le=Rr(s,H),pe=n.useMemo(function(){return Er(Q,R,J,F,le)},[Q,R,J,F,le]),ue=n.useMemo(function(){return je(je({},t),{},{prefixCls:l,locale:le,picker:o,styles:d,classNames:b,order:k,components:je({input:S},g),clearIcon:ts(l,j,v),showTime:pe,value:$,defaultValue:I,pickerValue:W,defaultPickerValue:U},r==null?void 0:r())},[t]),Se=ns(Q,le,E),ee=B(Se,2),Z=ee[0],de=ee[1],xe=rs(Z,V,w),K=as(a,s,G,L,N),A=ss(a,o,K,pe),X=n.useMemo(function(){return je(je({},ue),{},{needConfirm:O,inputReadOnly:xe,disabledDate:K})},[ue,O,xe,K]);return[X,Q,Y,Z,de,A]}function is(t,r,a){var s=It(r,{value:t}),i=B(s,2),o=i[0],m=i[1],l=Va.useRef(t),c=Va.useRef(),d=function(){Pt.cancel(c.current)},u=ze(function(){m(l.current),a&&o!==l.current&&a(l.current)}),b=ze(function(y,k){d(),l.current=y,y||k?u():c.current=Pt(u)});return Va.useEffect(function(){return d},[]),[o,b]}function Hn(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0,i=a.every(function(u){return u})?!1:t,o=is(i,r||!1,s),m=B(o,2),l=m[0],c=m[1];function d(u){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!b.inherit||l)&&c(u,b.force)}return[l,d]}function qn(t){var r=n.useRef();return n.useImperativeHandle(t,function(){var a;return{nativeElement:(a=r.current)===null||a===void 0?void 0:a.nativeElement,focus:function(i){var o;(o=r.current)===null||o===void 0||o.focus(i)},blur:function(){var i;(i=r.current)===null||i===void 0||i.blur()}}}),r}function _n(t,r){return n.useMemo(function(){return t||(r?(Cr(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.entries(r).map(function(a){var s=B(a,2),i=s[0],o=s[1];return{label:i,value:o}})):[])},[t,r])}function Za(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=n.useRef(r);s.current=r,Dr(function(){if(t)s.current(t);else{var i=Pt(function(){s.current(t)},a);return function(){Pt.cancel(i)}}},[t])}function Bn(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n.useState(0),i=B(s,2),o=i[0],m=i[1],l=n.useState(!1),c=B(l,2),d=c[0],u=c[1],b=n.useRef([]),y=n.useRef(null),k=function(j){u(j)},D=function(j){return j&&(y.current=j),y.current},g=function(j){var v=b.current,p=new Set(v.filter(function(E){return j[E]||r[E]})),w=v[v.length-1]===0?1:0;return p.size>=2||t[w]?null:w};return Za(d||a,function(){d||(b.current=[])}),n.useEffect(function(){d&&b.current.push(o)},[d,o]),[d,k,D,o,m,g,b.current]}function ls(t,r,a,s,i,o){var m=a[a.length-1],l=function(d,u){var b=B(t,2),y=b[0],k=b[1],D=je(je({},u),{},{from:Dn(t,a)});return m===1&&r[0]&&y&&!ot(s,i,y,d,D.type)&&s.isAfter(y,d)||m===0&&r[1]&&k&&!ot(s,i,k,d,D.type)&&s.isAfter(d,k)?!0:o==null?void 0:o(d,D)};return l}function qt(t,r,a,s){switch(r){case"date":case"week":return t.addMonth(a,s);case"month":case"quarter":return t.addYear(a,s);case"year":return t.addYear(a,s*10);case"decade":return t.addYear(a,s*100);default:return a}}var Ya=[];function zn(t,r,a,s,i,o,m,l){var c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:Ya,d=arguments.length>9&&arguments[9]!==void 0?arguments[9]:Ya,u=arguments.length>10&&arguments[10]!==void 0?arguments[10]:Ya,b=arguments.length>11?arguments[11]:void 0,y=arguments.length>12?arguments[12]:void 0,k=arguments.length>13?arguments[13]:void 0,D=m==="time",g=o||0,S=function(W){var U=t.getNow();return D&&(U=en(t,U)),c[W]||a[W]||U},j=B(d,2),v=j[0],p=j[1],w=It(function(){return S(0)},{value:v}),E=B(w,2),V=E[0],G=E[1],L=It(function(){return S(1)},{value:p}),N=B(L,2),h=N[0],C=N[1],M=n.useMemo(function(){var I=[V,h][g];return D?I:en(t,I,u[g])},[D,V,h,g,t,u]),q=function(W){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"panel",Q=[G,C][g];Q(W);var z=[V,h];z[g]=W,b&&(!ot(t,r,V,z[0],m)||!ot(t,r,h,z[1],m))&&b(z,{source:U,range:g===1?"end":"start",mode:s})},T=function(W,U){if(l){var Q={date:"month",week:"month",month:"year",quarter:"year"},z=Q[m];if(z&&!ot(t,r,W,U,z))return qt(t,m,U,-1);if(m==="year"&&W){var Y=Math.floor(t.getYear(W)/10),O=Math.floor(t.getYear(U)/10);if(Y!==O)return qt(t,m,U,-1)}}return U},$=n.useRef(null);return yt(function(){if(i&&!c[g]){var I=D?null:t.getNow();if($.current!==null&&$.current!==g?I=[V,h][g^1]:a[g]?I=g===0?a[0]:T(a[0],a[1]):a[g^1]&&(I=a[g^1]),I){y&&t.isAfter(y,I)&&(I=y);var W=l?qt(t,m,I,1):I;k&&t.isAfter(W,k)&&(I=l?qt(t,m,k,-1):k),q(I,"reset")}}},[i,g,a[g]]),n.useEffect(function(){i?$.current=g:$.current=null},[i,g]),yt(function(){i&&c&&c[g]&&q(c[g],"reset")},[i,g]),[M,q]}function Yn(t,r){var a=n.useRef(t),s=n.useState({}),i=B(s,2),o=i[1],m=function(d){return d&&r!==void 0?r:a.current},l=function(d){a.current=d,o({})};return[m,l,m(!0)]}var os=[];function Ln(t,r,a){var s=function(m){return m.map(function(l){return Sn(l,{generateConfig:t,locale:r,format:a[0]})})},i=function(m,l){for(var c=Math.max(m.length,l.length),d=-1,u=0;u<c;u+=1){var b=m[u]||null,y=l[u]||null;if(b!==y&&!Mr(t,b,y)){d=u;break}}return[d<0,d!==0]};return[s,i]}function Un(t,r){return jt(t).sort(function(a,s){return r.isAfter(a,s)?1:-1})}function cs(t){var r=Yn(t),a=B(r,2),s=a[0],i=a[1],o=ze(function(){i(t)});return n.useEffect(function(){o()},[t]),[s,i]}function Gn(t,r,a,s,i,o,m,l,c){var d=It(o,{value:m}),u=B(d,2),b=u[0],y=u[1],k=b||os,D=cs(k),g=B(D,2),S=g[0],j=g[1],v=Ln(t,r,a),p=B(v,2),w=p[0],E=p[1],V=ze(function(L){var N=jt(L);if(s)for(var h=0;h<2;h+=1)N[h]=N[h]||null;else i&&(N=Un(N.filter(function(I){return I}),t));var C=E(S(),N),M=B(C,2),q=M[0],T=M[1];if(!q&&(j(N),l)){var $=w(N);l(N,$,{range:T?"end":"start"})}}),G=function(){c&&c(S())};return[k,y,S,V,G]}function Kn(t,r,a,s,i,o,m,l,c,d){var u=t.generateConfig,b=t.locale,y=t.picker,k=t.onChange,D=t.allowEmpty,g=t.order,S=o.some(function(T){return T})?!1:g,j=Ln(u,b,m),v=B(j,2),p=v[0],w=v[1],E=Yn(r),V=B(E,2),G=V[0],L=V[1],N=ze(function(){L(r)});n.useEffect(function(){N()},[r]);var h=ze(function(T){var $=T===null,I=jt(T||G());if($)for(var W=Math.max(o.length,I.length),U=0;U<W;U+=1)o[U]||(I[U]=null);S&&I[0]&&I[1]&&(I=Un(I,u)),i(I);var Q=I,z=B(Q,2),Y=z[0],O=z[1],_=!Y,f=!O,F=D?(!_||D[0])&&(!f||D[1]):!0,H=!g||_||f||ot(u,b,Y,O,y)||u.isAfter(O,Y),R=(o[0]||!Y||!d(Y,{activeIndex:0}))&&(o[1]||!O||!d(O,{from:Y,activeIndex:1})),J=$||F&&H&&R;if(J){a(I);var le=w(I,r),pe=B(le,1),ue=pe[0];k&&!ue&&k($&&I.every(function(Se){return!Se})?null:I,p(I))}return J}),C=ze(function(T,$){var I=_t(G(),T,s()[T]);L(I),$&&h()}),M=!l&&!c;Za(!M,function(){M&&(h(),i(r),N())},2);function q(T){return!!G()[T]}return[C,h,q]}function Wn(t,r,a,s,i){return r!=="date"&&r!=="time"?!1:a!==void 0?a:s!==void 0?s:!i&&(t==="date"||t==="time")}function us(t){var r=t.mode,a=t.internalMode,s=t.renderExtraFooter,i=t.showNow,o=t.showTime,m=t.onSubmit,l=t.onNow,c=t.invalid,d=t.needConfirm,u=t.generateConfig,b=t.disabledDate,y=n.useContext(at),k=y.prefixCls,D=y.locale,g=y.button,S=g===void 0?"button":g,j=u.getNow(),v=Tr(u,o,j),p=B(v,1),w=p[0],E=s==null?void 0:s(r),V=b(j,{type:r}),G=function(){if(!V){var T=w(j);l(T)}},L="".concat(k,"-now"),N="".concat(L,"-btn"),h=i&&n.createElement("li",{className:L},n.createElement("a",{className:He(N,V&&"".concat(N,"-disabled")),"aria-disabled":V,onClick:G},a==="date"?D.today:D.now)),C=d&&n.createElement("li",{className:"".concat(k,"-ok")},n.createElement(S,{disabled:c,onClick:m},D.ok)),M=(h||C)&&n.createElement("ul",{className:"".concat(k,"-ranges")},h,C);return!E&&!M?null:n.createElement("div",{className:"".concat(k,"-footer")},E&&n.createElement("div",{className:"".concat(k,"-footer-extra")},E),M)}function ds(t){var r=t.picker,a=t.multiplePanel,s=t.pickerValue,i=t.onPickerValueChange,o=t.needConfirm,m=t.onSubmit,l=t.range,c=t.hoverValue,d=n.useContext(at),u=d.prefixCls,b=d.generateConfig,y=n.useCallback(function(v,p){return qt(b,r,v,p)},[b,r]),k=n.useMemo(function(){return y(s,1)},[s,y]),D=function(p){i(y(p,-1))},g={onCellDblClick:function(){o&&m()}},S=r==="time",j=je(je({},t),{},{hoverValue:null,hoverRangeValue:null,hideHeader:S});return l?j.hoverRangeValue=c:j.hoverValue=c,a?n.createElement("div",{className:"".concat(u,"-panels")},n.createElement($a.Provider,{value:je(je({},g),{},{hideNext:!0})},n.createElement(Ha,j)),n.createElement($a.Provider,{value:je(je({},g),{},{hidePrev:!0})},n.createElement(Ha,we({},j,{pickerValue:k,onPickerValueChange:D})))):n.createElement($a.Provider,{value:je({},g)},n.createElement(Ha,j))}function an(t){return typeof t=="function"?t():t}function ms(t){var r=t.prefixCls,a=t.presets,s=t.onClick,i=t.onHover;return a.length?n.createElement("div",{className:"".concat(r,"-presets")},n.createElement("ul",null,a.map(function(o,m){var l=o.label,c=o.value;return n.createElement("li",{key:m,onClick:function(){s(an(c))},onMouseEnter:function(){i(an(c))},onMouseLeave:function(){i(null)}},l)}))):null}function Qn(t){var r=t.panelRender,a=t.internalMode,s=t.picker,i=t.showNow,o=t.range,m=t.multiple,l=t.activeOffset,c=l===void 0?0:l,d=t.placement,u=t.presets,b=t.onPresetHover,y=t.onPresetSubmit,k=t.onFocus,D=t.onBlur,g=t.onPanelMouseDown,S=t.direction,j=t.value,v=t.onSelect,p=t.isInvalid,w=t.defaultOpenValue,E=t.onOk,V=t.onSubmit,G=n.useContext(at),L=G.prefixCls,N="".concat(L,"-panel"),h=S==="rtl",C=n.useRef(null),M=n.useRef(null),q=n.useState(0),T=B(q,2),$=T[0],I=T[1],W=n.useState(0),U=B(W,2),Q=U[0],z=U[1],Y=function(K){K.offsetWidth&&I(K.offsetWidth)};n.useEffect(function(){if(o){var xe,K=((xe=C.current)===null||xe===void 0?void 0:xe.offsetWidth)||0,A=$-K;c<=A?z(0):z(c+K-$)}},[$,c,o]);function O(xe){return xe.filter(function(K){return K})}var _=n.useMemo(function(){return O(Ut(j))},[j]),f=s==="time"&&!_.length,F=n.useMemo(function(){return f?O([w]):_},[f,_,w]),H=f?w:_,R=n.useMemo(function(){return F.length?F.some(function(xe){return p(xe)}):!0},[F,p]),J=function(){f&&v(w),E(),V()},le=n.createElement("div",{className:"".concat(L,"-panel-layout")},n.createElement(ms,{prefixCls:L,presets:u,onClick:y,onHover:b}),n.createElement("div",null,n.createElement(ds,we({},t,{value:H})),n.createElement(us,we({},t,{showNow:m?!1:i,invalid:R,onSubmit:J}))));r&&(le=r(le));var pe="".concat(N,"-container"),ue="marginLeft",Se="marginRight",ee=n.createElement("div",{onMouseDown:g,tabIndex:-1,className:He(pe,"".concat(L,"-").concat(a,"-panel-container")),style:Re(Re({},h?Se:ue,Q),h?ue:Se,"auto"),onFocus:k,onBlur:D},le);if(o){var Z=ma(d,h),de=Tn(Z,h);ee=n.createElement("div",{onMouseDown:g,ref:M,className:He("".concat(L,"-range-wrapper"),"".concat(L,"-").concat(s,"-range-wrapper"))},n.createElement("div",{ref:C,className:"".concat(L,"-range-arrow"),style:Re({},de,c)}),n.createElement(un,{onResize:Y},ee))}return ee}function Xn(t,r){var a=t.format,s=t.maskFormat,i=t.generateConfig,o=t.locale,m=t.preserveInvalidOnBlur,l=t.inputReadOnly,c=t.required,d=t["aria-required"],u=t.onSubmit,b=t.onFocus,y=t.onBlur,k=t.onInputChange,D=t.onInvalid,g=t.open,S=t.onOpenChange,j=t.onKeyDown,v=t.onChange,p=t.activeHelp,w=t.name,E=t.autoComplete,V=t.id,G=t.value,L=t.invalid,N=t.placeholder,h=t.disabled,C=t.activeIndex,M=t.allHelp,q=t.picker,T=function(O,_){var f=i.locale.parse(o.locale,O,[_]);return f&&i.isValidate(f)?f:null},$=a[0],I=n.useCallback(function(Y){return Sn(Y,{locale:o,format:$,generateConfig:i})},[o,i,$]),W=n.useMemo(function(){return G.map(I)},[G,I]),U=n.useMemo(function(){var Y=q==="time"?8:10,O=typeof $=="function"?$(i.getNow()).length:$.length;return Math.max(Y,O)+2},[$,q,i]),Q=function(O){for(var _=0;_<a.length;_+=1){var f=a[_];if(typeof f=="string"){var F=T(O,f);if(F)return F}}return!1},z=function(O){function _(H){return O!==void 0?H[O]:H}var f=ca(t,{aria:!0,data:!0}),F=je(je({},f),{},{format:s,validateFormat:function(R){return!!Q(R)},preserveInvalidOnBlur:m,readOnly:l,required:c,"aria-required":d,name:w,autoComplete:E,size:U,id:_(V),value:_(W)||"",invalid:_(L),placeholder:_(N),active:C===O,helped:M||p&&C===O,disabled:_(h),onFocus:function(R){b(R,O)},onBlur:function(R){y(R,O)},onSubmit:u,onChange:function(R){k();var J=Q(R);if(J){D(!1,O),v(J,O);return}D(!!R,O)},onHelp:function(){S(!0,{index:O})},onKeyDown:function(R){var J=!1;if(j==null||j(R,function(){J=!0}),!R.defaultPrevented&&!J)switch(R.key){case"Escape":S(!1,{index:O});break;case"Enter":g||S(!0);break}}},r==null?void 0:r({valueTexts:W}));return Object.keys(F).forEach(function(H){F[H]===void 0&&delete F[H]}),F};return[z,I]}var fs=["onMouseEnter","onMouseLeave"];function Jn(t){return n.useMemo(function(){return Cn(t,fs)},[t])}var hs=["icon","type"],ps=["onClear"];function fa(t){var r=t.icon,a=t.type,s=bt(t,hs),i=n.useContext(at),o=i.prefixCls;return r?n.createElement("span",we({className:"".concat(o,"-").concat(a)},s),r):null}function Ga(t){var r=t.onClear,a=bt(t,ps);return n.createElement(fa,we({},a,{type:"clear",role:"button",onMouseDown:function(i){i.preventDefault()},onClick:function(i){i.stopPropagation(),r()}}))}var La=["YYYY","MM","DD","HH","mm","ss","SSS"],nn="顧",vs=function(){function t(r){cn(this,t),Re(this,"format",void 0),Re(this,"maskFormat",void 0),Re(this,"cells",void 0),Re(this,"maskCells",void 0),this.format=r;var a=La.map(function(l){return"(".concat(l,")")}).join("|"),s=new RegExp(a,"g");this.maskFormat=r.replace(s,function(l){return nn.repeat(l.length)});var i=new RegExp("(".concat(La.join("|"),")")),o=(r.split(i)||[]).filter(function(l){return l}),m=0;this.cells=o.map(function(l){var c=La.includes(l),d=m,u=m+l.length;return m=u,{text:l,mask:c,start:d,end:u}}),this.maskCells=this.cells.filter(function(l){return l.mask})}return on(t,[{key:"getSelection",value:function(a){var s=this.maskCells[a]||{},i=s.start,o=s.end;return[i||0,o||0]}},{key:"match",value:function(a){for(var s=0;s<this.maskFormat.length;s+=1){var i=this.maskFormat[s],o=a[s];if(!o||i!==nn&&i!==o)return!1}return!0}},{key:"size",value:function(){return this.maskCells.length}},{key:"getMaskCellIndex",value:function(a){for(var s=Number.MAX_SAFE_INTEGER,i=0,o=0;o<this.maskCells.length;o+=1){var m=this.maskCells[o],l=m.start,c=m.end;if(a>=l&&a<=c)return o;var d=Math.min(Math.abs(a-l),Math.abs(a-c));d<s&&(s=d,i=o)}return i}}]),t}();function xs(t){var r={YYYY:[0,9999,new Date().getFullYear()],MM:[1,12],DD:[1,31],HH:[0,23],mm:[0,59],ss:[0,59],SSS:[0,999]};return r[t]}var gs=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"],Ka=n.forwardRef(function(t,r){var a=t.active,s=t.showActiveCls,i=s===void 0?!0:s,o=t.suffixIcon,m=t.format,l=t.validateFormat,c=t.onChange;t.onInput;var d=t.helped,u=t.onHelp,b=t.onSubmit,y=t.onKeyDown,k=t.preserveInvalidOnBlur,D=k===void 0?!1:k,g=t.invalid,S=t.clearIcon,j=bt(t,gs),v=t.value,p=t.onFocus,w=t.onBlur,E=t.onMouseUp,V=n.useContext(at),G=V.prefixCls,L=V.input,N=L===void 0?"input":L,h="".concat(G,"-input"),C=n.useState(!1),M=B(C,2),q=M[0],T=M[1],$=n.useState(v),I=B($,2),W=I[0],U=I[1],Q=n.useState(""),z=B(Q,2),Y=z[0],O=z[1],_=n.useState(null),f=B(_,2),F=f[0],H=f[1],R=n.useState(null),J=B(R,2),le=J[0],pe=J[1],ue=W||"";n.useEffect(function(){U(v)},[v]);var Se=n.useRef(),ee=n.useRef();n.useImperativeHandle(r,function(){return{nativeElement:Se.current,inputElement:ee.current,focus:function(De){ee.current.focus(De)},blur:function(){ee.current.blur()}}});var Z=n.useMemo(function(){return new vs(m||"")},[m]),de=n.useMemo(function(){return d?[0,0]:Z.getSelection(F)},[Z,F,d]),xe=B(de,2),K=xe[0],A=xe[1],X=function(De){De&&De!==m&&De!==v&&u()},ve=ze(function(oe){l(oe)&&c(oe),U(oe),X(oe)}),me=function(De){if(!m){var Me=De.target.value;X(Me),U(Me),c(Me)}},x=function(De){var Me=De.clipboardData.getData("text");l(Me)&&ve(Me)},Ce=n.useRef(!1),Ie=function(){Ce.current=!0},Te=function(De){var Me=De.target,Oe=Me.selectionStart,Ae=Z.getMaskCellIndex(Oe);H(Ae),pe({}),E==null||E(De),Ce.current=!1},qe=function(De){T(!0),H(0),O(""),p(De)},Pe=function(De){w(De)},ht=function(De){T(!1),Pe(De)};Za(a,function(){!a&&!D&&U(v)});var Ee=function(De){De.key==="Enter"&&l(ue)&&b(),y==null||y(De)},Qe=function(De){Ee(De);var Me=De.key,Oe=null,Ae=null,nt=A-K,Xe=m.slice(K,A),ct=function(Je){H(function(Ke){var _e=Ke+Je;return _e=Math.max(_e,0),_e=Math.min(_e,Z.size()-1),_e})},pt=function(Je){var Ke=xs(Xe),_e=B(Ke,3),ut=_e[0],Dt=_e[1],dt=_e[2],mt=ue.slice(K,A),vt=Number(mt);if(isNaN(vt))return String(dt||(Je>0?ut:Dt));var St=vt+Je,xt=Dt-ut+1;return String(ut+(xt+St-ut)%xt)};switch(Me){case"Backspace":case"Delete":Oe="",Ae=Xe;break;case"ArrowLeft":Oe="",ct(-1);break;case"ArrowRight":Oe="",ct(1);break;case"ArrowUp":Oe="",Ae=pt(1);break;case"ArrowDown":Oe="",Ae=pt(-1);break;default:isNaN(Number(Me))||(Oe=Y+Me,Ae=Oe);break}if(Oe!==null&&(O(Oe),Oe.length>=nt&&(ct(1),O(""))),Ae!==null){var Ze=ue.slice(0,K)+Fr(Ae,nt)+ue.slice(A);ve(Ze.slice(0,m.length))}pe({})},Ge=n.useRef();yt(function(){if(!(!q||!m||Ce.current)){if(!Z.match(ue)){ve(m);return}return ee.current.setSelectionRange(K,A),Ge.current=Pt(function(){ee.current.setSelectionRange(K,A)}),function(){Pt.cancel(Ge.current)}}},[Z,m,q,ue,F,K,A,le,ve]);var Ne=m?{onFocus:qe,onBlur:ht,onKeyDown:Qe,onMouseDown:Ie,onMouseUp:Te,onPaste:x}:{};return n.createElement("div",{ref:Se,className:He(h,Re(Re({},"".concat(h,"-active"),a&&i),"".concat(h,"-placeholder"),d))},n.createElement(N,we({ref:ee,"aria-invalid":g,autoComplete:"off"},j,{onKeyDown:Ee,onBlur:Pe},Ne,{value:ue,onChange:me})),n.createElement(fa,{type:"suffix",icon:o}),S)}),bs=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveOffset","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],ys=["index"],js=["insetInlineStart","insetInlineEnd"];function Cs(t,r){var a=t.id,s=t.prefix,i=t.clearIcon,o=t.suffixIcon,m=t.separator,l=m===void 0?"~":m,c=t.activeIndex;t.activeHelp,t.allHelp;var d=t.focused;t.onFocus,t.onBlur,t.onKeyDown,t.locale,t.generateConfig;var u=t.placeholder,b=t.className,y=t.style,k=t.onClick,D=t.onClear,g=t.value;t.onChange,t.onSubmit,t.onInputChange,t.format,t.maskFormat,t.preserveInvalidOnBlur,t.onInvalid;var S=t.disabled,j=t.invalid;t.inputReadOnly;var v=t.direction;t.onOpenChange;var p=t.onActiveOffset,w=t.placement,E=t.onMouseDown;t.required,t["aria-required"];var V=t.autoFocus,G=t.tabIndex,L=bt(t,bs),N=v==="rtl",h=n.useContext(at),C=h.prefixCls,M=n.useMemo(function(){if(typeof a=="string")return[a];var ee=a||{};return[ee.start,ee.end]},[a]),q=n.useRef(),T=n.useRef(),$=n.useRef(),I=function(Z){var de;return(de=[T,$][Z])===null||de===void 0?void 0:de.current};n.useImperativeHandle(r,function(){return{nativeElement:q.current,focus:function(Z){if(Qa(Z)==="object"){var de,xe=Z||{},K=xe.index,A=K===void 0?0:K,X=bt(xe,ys);(de=I(A))===null||de===void 0||de.focus(X)}else{var ve;(ve=I(Z??0))===null||ve===void 0||ve.focus()}},blur:function(){var Z,de;(Z=I(0))===null||Z===void 0||Z.blur(),(de=I(1))===null||de===void 0||de.blur()}}});var W=Jn(L),U=n.useMemo(function(){return Array.isArray(u)?u:[u,u]},[u]),Q=Xn(je(je({},t),{},{id:M,placeholder:U})),z=B(Q,1),Y=z[0],O=ma(w,N),_=Tn(O,N),f=O==null?void 0:O.toLowerCase().endsWith("right"),F=n.useState({position:"absolute",width:0}),H=B(F,2),R=H[0],J=H[1],le=ze(function(){var ee=I(c);if(ee){var Z=ee.nativeElement,de=Z.offsetWidth,xe=Z.offsetLeft,K=Z.offsetParent,A=(K==null?void 0:K.offsetWidth)||0,X=f?A-de-xe:xe;J(function(ve){ve.insetInlineStart,ve.insetInlineEnd;var me=bt(ve,js);return je(je({},me),{},Re({width:de},_,X))}),p(X)}});n.useEffect(function(){le()},[c]);var pe=i&&(g[0]&&!S[0]||g[1]&&!S[1]),ue=V&&!S[0],Se=V&&!ue&&!S[1];return n.createElement(un,{onResize:le},n.createElement("div",we({},W,{className:He(C,"".concat(C,"-range"),Re(Re(Re(Re({},"".concat(C,"-focused"),d),"".concat(C,"-disabled"),S.every(function(ee){return ee})),"".concat(C,"-invalid"),j.some(function(ee){return ee})),"".concat(C,"-rtl"),N),b),style:y,ref:q,onClick:k,onMouseDown:function(Z){var de=Z.target;de!==T.current.inputElement&&de!==$.current.inputElement&&Z.preventDefault(),E==null||E(Z)}}),s&&n.createElement("div",{className:"".concat(C,"-prefix")},s),n.createElement(Ka,we({ref:T},Y(0),{autoFocus:ue,tabIndex:G,"date-range":"start"})),n.createElement("div",{className:"".concat(C,"-range-separator")},l),n.createElement(Ka,we({ref:$},Y(1),{autoFocus:Se,tabIndex:G,"date-range":"end"})),n.createElement("div",{className:"".concat(C,"-active-bar"),style:R}),n.createElement(fa,{type:"suffix",icon:o}),pe&&n.createElement(Ga,{icon:i,onClear:D})))}var Ds=n.forwardRef(Cs);function rn(t,r){var a=t??r;return Array.isArray(a)?a:[a,a]}function ra(t){return t===1?"end":"start"}function Ss(t,r){var a=$n(t,function(){var ge=t.disabled,ie=t.allowEmpty,fe=rn(ge,!1),ke=rn(ie,!1);return{disabled:fe,allowEmpty:ke}}),s=B(a,6),i=s[0],o=s[1],m=s[2],l=s[3],c=s[4],d=s[5],u=i.prefixCls,b=i.styles,y=i.classNames,k=i.placement,D=i.defaultValue,g=i.value,S=i.needConfirm,j=i.onKeyDown,v=i.disabled,p=i.allowEmpty,w=i.disabledDate,E=i.minDate,V=i.maxDate,G=i.defaultOpen,L=i.open,N=i.onOpenChange,h=i.locale,C=i.generateConfig,M=i.picker,q=i.showNow,T=i.showToday,$=i.showTime,I=i.mode,W=i.onPanelChange,U=i.onCalendarChange,Q=i.onOk,z=i.defaultPickerValue,Y=i.pickerValue,O=i.onPickerValueChange,_=i.inputReadOnly,f=i.suffixIcon,F=i.onFocus,H=i.onBlur,R=i.presets,J=i.ranges,le=i.components,pe=i.cellRender,ue=i.dateRender,Se=i.monthCellRender,ee=i.onClick,Z=qn(r),de=Hn(L,G,v,N),xe=B(de,2),K=xe[0],A=xe[1],X=function(ie,fe){(v.some(function(ke){return!ke})||!ie)&&A(ie,fe)},ve=Gn(C,h,l,!0,!1,D,g,U,Q),me=B(ve,5),x=me[0],Ce=me[1],Ie=me[2],Te=me[3],qe=me[4],Pe=Ie(),ht=Bn(v,p,K),Ee=B(ht,7),Qe=Ee[0],Ge=Ee[1],Ne=Ee[2],oe=Ee[3],De=Ee[4],Me=Ee[5],Oe=Ee[6],Ae=function(ie,fe){Ge(!0),F==null||F(ie,{range:ra(fe??oe)})},nt=function(ie,fe){Ge(!1),H==null||H(ie,{range:ra(fe??oe)})},Xe=n.useMemo(function(){if(!$)return null;var ge=$.disabledTime,ie=ge?function(fe){var ke=ra(oe),Fe=Dn(Pe,Oe,oe);return ge(fe,ke,{from:Fe})}:void 0;return je(je({},$),{},{disabledTime:ie})},[$,oe,Pe,Oe]),ct=It([M,M],{value:I}),pt=B(ct,2),Ze=pt[0],rt=pt[1],Je=Ze[oe]||M,Ke=Je==="date"&&Xe?"datetime":Je,_e=Ke===M&&Ke!=="time",ut=Wn(M,Je,q,T,!0),Dt=Kn(i,x,Ce,Ie,Te,v,l,Qe,K,d),dt=B(Dt,3),mt=dt[0],vt=dt[1],St=dt[2],xt=ls(Pe,v,Oe,C,h,w),pa=Vn(Pe,d,p),Kt=B(pa,2),va=Kt[0],xa=Kt[1],Wt=zn(C,h,Pe,Ze,K,oe,o,_e,z,Y,Xe==null?void 0:Xe.defaultOpenValue,O,E,V),Qt=B(Wt,2),ga=Qt[0],Xt=Qt[1],st=ze(function(ge,ie,fe){var ke=_t(Ze,oe,ie);if((ke[0]!==Ze[0]||ke[1]!==Ze[1])&&rt(ke),W&&fe!==!1){var Fe=jt(Pe);ge&&(Fe[oe]=ge),W(Fe,ke)}}),Tt=function(ie,fe){return _t(Pe,fe,ie)},et=function(ie,fe){var ke=Pe;ie&&(ke=Tt(ie,oe));var Fe=Me(ke);Te(ke),mt(oe,Fe===null),Fe===null?X(!1,{force:!0}):fe||Z.current.focus({index:Fe})},ba=function(ie){var fe,ke=ie.target.getRootNode();if(!Z.current.nativeElement.contains((fe=ke.activeElement)!==null&&fe!==void 0?fe:document.activeElement)){var Fe=v.findIndex(function(cr){return!cr});Fe>=0&&Z.current.focus({index:Fe})}X(!0),ee==null||ee(ie)},Jt=function(){vt(null),X(!1,{force:!0})},ya=n.useState(null),Ft=B(ya,2),ja=Ft[0],At=Ft[1],it=n.useState(null),wt=B(it,2),Nt=wt[0],Vt=wt[1],Zt=n.useMemo(function(){return Nt||Pe},[Pe,Nt]);n.useEffect(function(){K||Vt(null)},[K]);var Ca=n.useState(0),$t=B(Ca,2),Da=$t[0],Sa=$t[1],wa=_n(R,J),Na=function(ie){Vt(ie),At("preset")},ka=function(ie){var fe=vt(ie);fe&&X(!1,{force:!0})},Ia=function(ie){et(ie)},Pa=function(ie){Vt(ie?Tt(ie,oe):null),At("cell")},Oa=function(ie){X(!0),Ae(ie)},Ra=function(){Ne("panel")},Ea=function(ie){var fe=_t(Pe,oe,ie);Te(fe),!S&&!m&&o===Ke&&et(ie)},Ma=function(){X(!1)},Ta=wn(pe,ue,Se,ra(oe)),Fa=Pe[oe]||null,Aa=ze(function(ge){return d(ge,{activeIndex:oe})}),ce=n.useMemo(function(){var ge=ca(i,!1),ie=dn(i,[].concat(jt(Object.keys(ge)),["onChange","onCalendarChange","style","className","onPanelChange","disabledTime"]));return ie},[i]),te=n.createElement(Qn,we({},ce,{showNow:ut,showTime:Xe,range:!0,multiplePanel:_e,activeOffset:Da,placement:k,disabledDate:xt,onFocus:Oa,onBlur:nt,onPanelMouseDown:Ra,picker:M,mode:Je,internalMode:Ke,onPanelChange:st,format:c,value:Fa,isInvalid:Aa,onChange:null,onSelect:Ea,pickerValue:ga,defaultOpenValue:Ut($==null?void 0:$.defaultOpenValue)[oe],onPickerValueChange:Xt,hoverValue:Zt,onHover:Pa,needConfirm:S,onSubmit:et,onOk:qe,presets:wa,onPresetHover:Na,onPresetSubmit:ka,onNow:Ia,cellRender:Ta})),Be=function(ie,fe){var ke=Tt(ie,fe);Te(ke)},tt=function(){Ne("input")},ea=function(ie,fe){var ke=Oe.length,Fe=Oe[ke-1];if(ke&&Fe!==fe&&S&&!p[Fe]&&!St(Fe)&&Pe[Fe]){Z.current.focus({index:Fe});return}Ne("input"),X(!0,{inherit:!0}),oe!==fe&&K&&!S&&m&&et(null,!0),De(fe),Ae(ie,fe)},ir=function(ie,fe){if(X(!1),!S&&Ne()==="input"){var ke=Me(Pe);mt(oe,ke===null)}nt(ie,fe)},lr=function(ie,fe){ie.key==="Tab"&&et(null,!0),j==null||j(ie,fe)},or=n.useMemo(function(){return{prefixCls:u,locale:h,generateConfig:C,button:le.button,input:le.input}},[u,h,C,le.button,le.input]);return yt(function(){K&&oe!==void 0&&st(null,M,!1)},[K,oe,M]),yt(function(){var ge=Ne();!K&&ge==="input"&&(X(!1),et(null,!0)),!K&&m&&!S&&ge==="panel"&&(X(!0),et())},[K]),n.createElement(at.Provider,{value:or},n.createElement(Fn,we({},An(i),{popupElement:te,popupStyle:b.popup,popupClassName:y.popup,visible:K,onClose:Ma,range:!0}),n.createElement(Ds,we({},i,{ref:Z,suffixIcon:f,activeIndex:Qe||K?oe:null,activeHelp:!!Nt,allHelp:!!Nt&&ja==="preset",focused:Qe,onFocus:ea,onBlur:ir,onKeyDown:lr,onSubmit:et,value:Zt,maskFormat:c,onChange:Be,onInputChange:tt,format:l,inputReadOnly:_,disabled:v,open:K,onOpenChange:X,onClick:ba,onClear:Jt,invalid:va,onInvalid:xa,onActiveOffset:Sa}))))}var ws=n.forwardRef(Ss);function Ns(t){var r=t.prefixCls,a=t.value,s=t.onRemove,i=t.removeIcon,o=i===void 0?"×":i,m=t.formatDate,l=t.disabled,c=t.maxTagCount,d=t.placeholder,u="".concat(r,"-selector"),b="".concat(r,"-selection"),y="".concat(b,"-overflow");function k(S,j){return n.createElement("span",{className:He("".concat(b,"-item")),title:typeof S=="string"?S:null},n.createElement("span",{className:"".concat(b,"-item-content")},S),!l&&j&&n.createElement("span",{onMouseDown:function(p){p.preventDefault()},onClick:j,className:"".concat(b,"-item-remove")},o))}function D(S){var j=m(S),v=function(w){w&&w.stopPropagation(),s(S)};return k(j,v)}function g(S){var j="+ ".concat(S.length," ...");return k(j)}return n.createElement("div",{className:u},n.createElement(Sr,{prefixCls:y,data:a,renderItem:D,renderRest:g,itemKey:function(j){return m(j)},maxCount:c}),!a.length&&n.createElement("span",{className:"".concat(r,"-selection-placeholder")},d))}var ks=["id","open","prefix","clearIcon","suffixIcon","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","internalPicker","value","onChange","onSubmit","onInputChange","multiple","maxTagCount","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onMouseDown","required","aria-required","autoFocus","tabIndex","removeIcon"];function Is(t,r){t.id;var a=t.open,s=t.prefix,i=t.clearIcon,o=t.suffixIcon;t.activeHelp,t.allHelp;var m=t.focused;t.onFocus,t.onBlur,t.onKeyDown;var l=t.locale,c=t.generateConfig,d=t.placeholder,u=t.className,b=t.style,y=t.onClick,k=t.onClear,D=t.internalPicker,g=t.value,S=t.onChange,j=t.onSubmit;t.onInputChange;var v=t.multiple,p=t.maxTagCount;t.format,t.maskFormat,t.preserveInvalidOnBlur,t.onInvalid;var w=t.disabled,E=t.invalid;t.inputReadOnly;var V=t.direction;t.onOpenChange;var G=t.onMouseDown;t.required,t["aria-required"];var L=t.autoFocus,N=t.tabIndex,h=t.removeIcon,C=bt(t,ks),M=V==="rtl",q=n.useContext(at),T=q.prefixCls,$=n.useRef(),I=n.useRef();n.useImperativeHandle(r,function(){return{nativeElement:$.current,focus:function(R){var J;(J=I.current)===null||J===void 0||J.focus(R)},blur:function(){var R;(R=I.current)===null||R===void 0||R.blur()}}});var W=Jn(C),U=function(R){S([R])},Q=function(R){var J=g.filter(function(le){return le&&!ot(c,l,le,R,D)});S(J),a||j()},z=Xn(je(je({},t),{},{onChange:U}),function(H){var R=H.valueTexts;return{value:R[0]||"",active:m}}),Y=B(z,2),O=Y[0],_=Y[1],f=!!(i&&g.length&&!w),F=v?n.createElement(n.Fragment,null,n.createElement(Ns,{prefixCls:T,value:g,onRemove:Q,formatDate:_,maxTagCount:p,disabled:w,removeIcon:h,placeholder:d}),n.createElement("input",{className:"".concat(T,"-multiple-input"),value:g.map(_).join(","),ref:I,readOnly:!0,autoFocus:L,tabIndex:N}),n.createElement(fa,{type:"suffix",icon:o}),f&&n.createElement(Ga,{icon:i,onClear:k})):n.createElement(Ka,we({ref:I},O(),{autoFocus:L,tabIndex:N,suffixIcon:o,clearIcon:f&&n.createElement(Ga,{icon:i,onClear:k}),showActiveCls:!1}));return n.createElement("div",we({},W,{className:He(T,Re(Re(Re(Re(Re({},"".concat(T,"-multiple"),v),"".concat(T,"-focused"),m),"".concat(T,"-disabled"),w),"".concat(T,"-invalid"),E),"".concat(T,"-rtl"),M),u),style:b,ref:$,onClick:y,onMouseDown:function(R){var J,le=R.target;le!==((J=I.current)===null||J===void 0?void 0:J.inputElement)&&R.preventDefault(),G==null||G(R)}}),s&&n.createElement("div",{className:"".concat(T,"-prefix")},s),F)}var Ps=n.forwardRef(Is);function Os(t,r){var a=$n(t),s=B(a,6),i=s[0],o=s[1],m=s[2],l=s[3],c=s[4],d=s[5],u=i,b=u.prefixCls,y=u.styles,k=u.classNames,D=u.order,g=u.defaultValue,S=u.value,j=u.needConfirm,v=u.onChange,p=u.onKeyDown,w=u.disabled,E=u.disabledDate,V=u.minDate,G=u.maxDate,L=u.defaultOpen,N=u.open,h=u.onOpenChange,C=u.locale,M=u.generateConfig,q=u.picker,T=u.showNow,$=u.showToday,I=u.showTime,W=u.mode,U=u.onPanelChange,Q=u.onCalendarChange,z=u.onOk,Y=u.multiple,O=u.defaultPickerValue,_=u.pickerValue,f=u.onPickerValueChange,F=u.inputReadOnly,H=u.suffixIcon,R=u.removeIcon,J=u.onFocus,le=u.onBlur,pe=u.presets,ue=u.components,Se=u.cellRender,ee=u.dateRender,Z=u.monthCellRender,de=u.onClick,xe=qn(r);function K(ce){return ce===null?null:Y?ce:ce[0]}var A=Ar(M,C,o),X=Hn(N,L,[w],h),ve=B(X,2),me=ve[0],x=ve[1],Ce=function(te,Be,tt){if(Q){var ea=je({},tt);delete ea.range,Q(K(te),K(Be),ea)}},Ie=function(te){z==null||z(K(te))},Te=Gn(M,C,l,!1,D,g,S,Ce,Ie),qe=B(Te,5),Pe=qe[0],ht=qe[1],Ee=qe[2],Qe=qe[3],Ge=qe[4],Ne=Ee(),oe=Bn([w]),De=B(oe,4),Me=De[0],Oe=De[1],Ae=De[2],nt=De[3],Xe=function(te){Oe(!0),J==null||J(te,{})},ct=function(te){Oe(!1),le==null||le(te,{})},pt=It(q,{value:W}),Ze=B(pt,2),rt=Ze[0],Je=Ze[1],Ke=rt==="date"&&I?"datetime":rt,_e=Wn(q,rt,T,$),ut=v&&function(ce,te){v(K(ce),K(te))},Dt=Kn(je(je({},i),{},{onChange:ut}),Pe,ht,Ee,Qe,[],l,Me,me,d),dt=B(Dt,2),mt=dt[1],vt=Vn(Ne,d),St=B(vt,2),xt=St[0],pa=St[1],Kt=n.useMemo(function(){return xt.some(function(ce){return ce})},[xt]),va=function(te,Be){if(f){var tt=je(je({},Be),{},{mode:Be.mode[0]});delete tt.range,f(te[0],tt)}},xa=zn(M,C,Ne,[rt],me,nt,o,!1,O,_,Ut(I==null?void 0:I.defaultOpenValue),va,V,G),Wt=B(xa,2),Qt=Wt[0],ga=Wt[1],Xt=ze(function(ce,te,Be){if(Je(te),U&&Be!==!1){var tt=ce||Ne[Ne.length-1];U(tt,te)}}),st=function(){mt(Ee()),x(!1,{force:!0})},Tt=function(te){!w&&!xe.current.nativeElement.contains(document.activeElement)&&xe.current.focus(),x(!0),de==null||de(te)},et=function(){mt(null),x(!1,{force:!0})},ba=n.useState(null),Jt=B(ba,2),ya=Jt[0],Ft=Jt[1],ja=n.useState(null),At=B(ja,2),it=At[0],wt=At[1],Nt=n.useMemo(function(){var ce=[it].concat(jt(Ne)).filter(function(te){return te});return Y?ce:ce.slice(0,1)},[Ne,it,Y]),Vt=n.useMemo(function(){return!Y&&it?[it]:Ne.filter(function(ce){return ce})},[Ne,it,Y]);n.useEffect(function(){me||wt(null)},[me]);var Zt=_n(pe),Ca=function(te){wt(te),Ft("preset")},$t=function(te){var Be=Y?A(Ee(),te):[te],tt=mt(Be);tt&&!Y&&x(!1,{force:!0})},Da=function(te){$t(te)},Sa=function(te){wt(te),Ft("cell")},wa=function(te){x(!0),Xe(te)},Na=function(te){if(Ae("panel"),!(Y&&Ke!==q)){var Be=Y?A(Ee(),te):[te];Qe(Be),!j&&!m&&o===Ke&&st()}},ka=function(){x(!1)},Ia=wn(Se,ee,Z),Pa=n.useMemo(function(){var ce=ca(i,!1),te=dn(i,[].concat(jt(Object.keys(ce)),["onChange","onCalendarChange","style","className","onPanelChange"]));return je(je({},te),{},{multiple:i.multiple})},[i]),Oa=n.createElement(Qn,we({},Pa,{showNow:_e,showTime:I,disabledDate:E,onFocus:wa,onBlur:ct,picker:q,mode:rt,internalMode:Ke,onPanelChange:Xt,format:c,value:Ne,isInvalid:d,onChange:null,onSelect:Na,pickerValue:Qt,defaultOpenValue:I==null?void 0:I.defaultOpenValue,onPickerValueChange:ga,hoverValue:Nt,onHover:Sa,needConfirm:j,onSubmit:st,onOk:Ge,presets:Zt,onPresetHover:Ca,onPresetSubmit:$t,onNow:Da,cellRender:Ia})),Ra=function(te){Qe(te)},Ea=function(){Ae("input")},Ma=function(te){Ae("input"),x(!0,{inherit:!0}),Xe(te)},Ta=function(te){x(!1),ct(te)},Fa=function(te,Be){te.key==="Tab"&&st(),p==null||p(te,Be)},Aa=n.useMemo(function(){return{prefixCls:b,locale:C,generateConfig:M,button:ue.button,input:ue.input}},[b,C,M,ue.button,ue.input]);return yt(function(){me&&nt!==void 0&&Xt(null,q,!1)},[me,nt,q]),yt(function(){var ce=Ae();!me&&ce==="input"&&(x(!1),st()),!me&&m&&!j&&ce==="panel"&&(x(!0),st())},[me]),n.createElement(at.Provider,{value:Aa},n.createElement(Fn,we({},An(i),{popupElement:Oa,popupStyle:y.popup,popupClassName:k.popup,visible:me,onClose:ka}),n.createElement(Ps,we({},i,{ref:xe,suffixIcon:H,removeIcon:R,activeHelp:!!it,allHelp:!!it&&ya==="preset",focused:Me,onFocus:Ma,onBlur:Ta,onKeyDown:Fa,onSubmit:st,value:Vt,maskFormat:c,onChange:Ra,onInputChange:Ea,internalPicker:o,format:l,inputReadOnly:F,disabled:w,open:me,onOpenChange:x,onClick:Tt,onClear:et,invalid:Kt,onInvalid:function(te){pa(te,0)}}))))}var Rs=n.forwardRef(Os),Es={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},Ms=function(r,a){return n.createElement(Ct,we({},r,{ref:a,icon:Es}))},Zn=n.forwardRef(Ms),Ts={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"},Fs=function(r,a){return n.createElement(Ct,we({},r,{ref:a,icon:Ts}))},As=n.forwardRef(Fs);function Vs(t,r,a){return a!==void 0?a:r==="year"&&t.lang.yearPlaceholder?t.lang.yearPlaceholder:r==="quarter"&&t.lang.quarterPlaceholder?t.lang.quarterPlaceholder:r==="month"&&t.lang.monthPlaceholder?t.lang.monthPlaceholder:r==="week"&&t.lang.weekPlaceholder?t.lang.weekPlaceholder:r==="time"&&t.timePickerLocale.placeholder?t.timePickerLocale.placeholder:t.lang.placeholder}function $s(t,r,a){return a!==void 0?a:r==="year"&&t.lang.yearPlaceholder?t.lang.rangeYearPlaceholder:r==="quarter"&&t.lang.quarterPlaceholder?t.lang.rangeQuarterPlaceholder:r==="month"&&t.lang.monthPlaceholder?t.lang.rangeMonthPlaceholder:r==="week"&&t.lang.weekPlaceholder?t.lang.rangeWeekPlaceholder:r==="time"&&t.timePickerLocale.placeholder?t.timePickerLocale.rangePlaceholder:t.lang.rangePlaceholder}function er(t,r){const{allowClear:a=!0}=t,{clearIcon:s,removeIcon:i}=Hr(Object.assign(Object.assign({},t),{prefixCls:r,componentName:"DatePicker"}));return[n.useMemo(()=>a===!1?!1:Object.assign({clearIcon:s},a===!0?{}:a),[a,s]),i]}const[Hs,qs]=["week","WeekPicker"],[_s,Bs]=["month","MonthPicker"],[zs,Ys]=["year","YearPicker"],[Ls,Us]=["quarter","QuarterPicker"],[tr,sn]=["time","TimePicker"],Gs=t=>n.createElement(be,Object.assign({size:"small",type:"primary"},t));function ar(t){return n.useMemo(()=>Object.assign({button:Gs},t),[t])}var Ks=function(t,r){var a={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)r.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(a[s[i]]=t[s[i]]);return a};const Ws=t=>n.forwardRef((a,s)=>{var i;const{prefixCls:o,getPopupContainer:m,components:l,className:c,style:d,placement:u,size:b,disabled:y,bordered:k=!0,placeholder:D,popupClassName:g,dropdownClassName:S,status:j,rootClassName:v,variant:p,picker:w}=a,E=Ks(a,["prefixCls","getPopupContainer","components","className","style","placement","size","disabled","bordered","placeholder","popupClassName","dropdownClassName","status","rootClassName","variant","picker"]),V=n.useRef(null),{getPrefixCls:G,direction:L,getPopupContainer:N,rangePicker:h}=n.useContext(Wa),C=G("picker",o),{compactSize:M,compactItemClassnames:q}=mn(C,L),T=G(),[$,I]=In("rangePicker",p,k),W=fn(C),[U,Q,z]=Nn(C,W),[Y]=er(a,C),O=ar(l),_=hn(Z=>{var de;return(de=b??M)!==null&&de!==void 0?de:Z}),f=n.useContext(pn),F=y??f,H=n.useContext(vn),{hasFeedback:R,status:J,feedbackIcon:le}=H,pe=n.createElement(n.Fragment,null,w===tr?n.createElement(Zn,null):n.createElement(kn,null),R&&le);n.useImperativeHandle(s,()=>V.current);const[ue]=xn("Calendar",gn),Se=Object.assign(Object.assign({},ue),a.locale),[ee]=bn("DatePicker",(i=a.popupStyle)===null||i===void 0?void 0:i.zIndex);return U(n.createElement(yn,{space:!0},n.createElement(ws,Object.assign({separator:n.createElement("span",{"aria-label":"to",className:`${C}-separator`},n.createElement(As,null)),disabled:F,ref:V,placement:u,placeholder:$s(Se,w,D),suffixIcon:pe,prevIcon:n.createElement("span",{className:`${C}-prev-icon`}),nextIcon:n.createElement("span",{className:`${C}-next-icon`}),superPrevIcon:n.createElement("span",{className:`${C}-super-prev-icon`}),superNextIcon:n.createElement("span",{className:`${C}-super-next-icon`}),transitionName:`${T}-slide-up`,picker:w},E,{className:He({[`${C}-${_}`]:_,[`${C}-${$}`]:I},Pn(C,On(J,j),R),Q,q,c,h==null?void 0:h.className,z,W,v),style:Object.assign(Object.assign({},h==null?void 0:h.style),d),locale:Se.lang,prefixCls:C,getPopupContainer:m||N,generateConfig:t,components:O,direction:L,classNames:{popup:He(Q,g||S,z,W,v)},styles:{popup:Object.assign(Object.assign({},a.popupStyle),{zIndex:ee})},allowClear:Y}))))});var Qs=function(t,r){var a={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)r.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(a[s[i]]=t[s[i]]);return a};const Xs=t=>{const r=(c,d)=>{const u=d===sn?"timePicker":"datePicker";return n.forwardRef((y,k)=>{var D;const{prefixCls:g,getPopupContainer:S,components:j,style:v,className:p,rootClassName:w,size:E,bordered:V,placement:G,placeholder:L,popupClassName:N,dropdownClassName:h,disabled:C,status:M,variant:q,onCalendarChange:T}=y,$=Qs(y,["prefixCls","getPopupContainer","components","style","className","rootClassName","size","bordered","placement","placeholder","popupClassName","dropdownClassName","disabled","status","variant","onCalendarChange"]),{getPrefixCls:I,direction:W,getPopupContainer:U,[u]:Q}=n.useContext(Wa),z=I("picker",g),{compactSize:Y,compactItemClassnames:O}=mn(z,W),_=n.useRef(null),[f,F]=In("datePicker",q,V),H=fn(z),[R,J,le]=Nn(z,H);n.useImperativeHandle(k,()=>_.current);const pe={showToday:!0},ue=c||y.picker,Se=I(),{onSelect:ee,multiple:Z}=$,de=ee&&c==="time"&&!Z,xe=(Ge,Ne,oe)=>{T==null||T(Ge,Ne,oe),de&&ee(Ge)},[K,A]=er(y,z),X=ar(j),ve=hn(Ge=>{var Ne;return(Ne=E??Y)!==null&&Ne!==void 0?Ne:Ge}),me=n.useContext(pn),x=C??me,Ce=n.useContext(vn),{hasFeedback:Ie,status:Te,feedbackIcon:qe}=Ce,Pe=n.createElement(n.Fragment,null,ue==="time"?n.createElement(Zn,null):n.createElement(kn,null),Ie&&qe),[ht]=xn("DatePicker",gn),Ee=Object.assign(Object.assign({},ht),y.locale),[Qe]=bn("DatePicker",(D=y.popupStyle)===null||D===void 0?void 0:D.zIndex);return R(n.createElement(yn,{space:!0},n.createElement(Rs,Object.assign({ref:_,placeholder:Vs(Ee,ue,L),suffixIcon:Pe,placement:G,prevIcon:n.createElement("span",{className:`${z}-prev-icon`}),nextIcon:n.createElement("span",{className:`${z}-next-icon`}),superPrevIcon:n.createElement("span",{className:`${z}-super-prev-icon`}),superNextIcon:n.createElement("span",{className:`${z}-super-next-icon`}),transitionName:`${Se}-slide-up`,picker:c,onCalendarChange:xe},pe,$,{locale:Ee.lang,className:He({[`${z}-${ve}`]:ve,[`${z}-${f}`]:F},Pn(z,On(Te,M),Ie),J,O,Q==null?void 0:Q.className,p,le,H,w),style:Object.assign(Object.assign({},Q==null?void 0:Q.style),v),prefixCls:z,getPopupContainer:S||U,generateConfig:t,components:X,direction:W,disabled:x,classNames:{popup:He(J,le,H,w,N||h)},styles:{popup:Object.assign(Object.assign({},y.popupStyle),{zIndex:Qe})},allowClear:K,removeIcon:A}))))})},a=r(),s=r(Hs,qs),i=r(_s,Bs),o=r(zs,Ys),m=r(Ls,Us),l=r(tr,sn);return{DatePicker:a,WeekPicker:s,MonthPicker:i,YearPicker:o,TimePicker:l,QuarterPicker:m}},nr=t=>{const{DatePicker:r,WeekPicker:a,MonthPicker:s,YearPicker:i,TimePicker:o,QuarterPicker:m}=Xs(t),l=Ws(t),c=r;return c.WeekPicker=a,c.MonthPicker=s,c.YearPicker=i,c.RangePicker=l,c.TimePicker=o,c.QuarterPicker=m,c},Ye=nr(Vr),Js=jn(Ye,"picker",null);Ye._InternalPanelDoNotUseOrYouWillBeFired=Js;const Zs=jn(Ye.RangePicker,"picker",null);Ye._InternalRangePanelDoNotUseOrYouWillBeFired=Zs;Ye.generatePicker=nr;var ei={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM340 683v77c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-77c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198V264c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v221c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5.3-.5.7-.9 1-1.4.1-.1.2-.3.3-.4.5-.6.9-1.1 1.4-1.6l.3-.3 1.2-1.2.4-.4c.5-.5 1-.9 1.6-1.4.6-.5 1.1-.9 1.7-1.3.2-.1.3-.2.5-.3.5-.3.9-.7 1.4-1 .1-.1.3-.2.4-.3.6-.4 1.2-.7 1.9-1.1.1-.1.3-.1.4-.2.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8.7-.3 1.4-.5 2.1-.7.2-.1.4-.1.6-.2.6-.2 1.1-.3 1.7-.4.2 0 .3-.1.5-.1.7-.2 1.5-.3 2.2-.4.2 0 .3 0 .5-.1.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2.2 0 .3 0 .5.1.7.1 1.5.2 2.2.4.2 0 .3.1.5.1.6.1 1.2.3 1.7.4.2.1.4.1.6.2.7.2 1.4.4 2.1.7.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8.1.1.3.1.4.2.6.3 1.3.7 1.9 1.1.1.1.3.2.4.3.5.3 1 .6 1.4 1 .2.1.3.2.5.3.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4 1.2 1.2.3.3c.5.5 1 1.1 1.4 1.6.1.1.2.3.3.4.4.4.7.9 1 1.4.1.2.2.3.3.5l1.2 1.8s0 .1.1.1a36.18 36.18 0 015.1 18.5c0 6-1.5 11.7-4.1 16.7-.3.6-.7 1.2-1 1.8 0 0 0 .1-.1.1l-1.2 1.8c-.1.2-.2.3-.3.5-.3.5-.7.9-1 1.4-.1.1-.2.3-.3.4-.5.6-.9 1.1-1.4 1.6l-.3.3-1.2 1.2-.4.4c-.5.5-1 .9-1.6 1.4-.6.5-1.1.9-1.7 1.3-.2.1-.3.2-.5.3-.5.3-.9.7-1.4 1-.1.1-.3.2-.4.3-.6.4-1.2.7-1.9 1.1-.1.1-.3.1-.4.2-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8-.7.3-1.4.5-2.1.7-.2.1-.4.1-.6.2-.6.2-1.1.3-1.7.4-.2 0-.3.1-.5.1-.7.2-1.5.3-2.2.4-.2 0-.3 0-.5.1-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2-.2 0-.3 0-.5-.1-.7-.1-1.5-.2-2.2-.4-.2 0-.3-.1-.5-.1-.6-.1-1.2-.3-1.7-.4-.2-.1-.4-.1-.6-.2-.7-.2-1.4-.4-2.1-.7-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8-.1-.1-.3-.1-.4-.2-.6-.3-1.3-.7-1.9-1.1-.1-.1-.3-.2-.4-.3-.5-.3-1-.6-1.4-1-.2-.1-.3-.2-.5-.3-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4-1.2-1.2-.3-.3c-.5-.5-1-1.1-1.4-1.6-.1-.1-.2-.3-.3-.4-.4-.4-.7-.9-1-1.4-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7zM620 539v221c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V539c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198v-77c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v77c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5.3-.5.7-.9 1-1.4.1-.1.2-.3.3-.4.5-.6.9-1.1 1.4-1.6l.3-.3 1.2-1.2.4-.4c.5-.5 1-.9 1.6-1.4.6-.5 1.1-.9 1.7-1.3.2-.1.3-.2.5-.3.5-.3.9-.7 1.4-1 .1-.1.3-.2.4-.3.6-.4 1.2-.7 1.9-1.1.1-.1.3-.1.4-.2.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8.7-.3 1.4-.5 2.1-.7.2-.1.4-.1.6-.2.6-.2 1.1-.3 1.7-.4.2 0 .3-.1.5-.1.7-.2 1.5-.3 2.2-.4.2 0 .3 0 .5-.1.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2.2 0 .3 0 .5.1.7.1 1.5.2 2.2.4.2 0 .3.1.5.1.6.1 1.2.3 1.7.4.2.1.4.1.6.2.7.2 1.4.4 2.1.7.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8.1.1.3.1.4.2.6.3 1.3.7 1.9 1.1.1.1.3.2.4.3.5.3 1 .6 1.4 1 .2.1.3.2.5.3.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4 1.2 1.2.3.3c.5.5 1 1.1 1.4 1.6.1.1.2.3.3.4.4.4.7.9 1 1.4.1.2.2.3.3.5l1.2 1.8v.1a36.18 36.18 0 015.1 18.5c0 6-1.5 11.7-4.1 16.7-.3.6-.7 1.2-1 1.8v.1l-1.2 1.8c-.1.2-.2.3-.3.5-.3.5-.7.9-1 1.4-.1.1-.2.3-.3.4-.5.6-.9 1.1-1.4 1.6l-.3.3-1.2 1.2-.4.4c-.5.5-1 .9-1.6 1.4-.6.5-1.1.9-1.7 1.3-.2.1-.3.2-.5.3-.5.3-.9.7-1.4 1-.1.1-.3.2-.4.3-.6.4-1.2.7-1.9 1.1-.1.1-.3.1-.4.2-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8-.7.3-1.4.5-2.1.7-.2.1-.4.1-.6.2-.6.2-1.1.3-1.7.4-.2 0-.3.1-.5.1-.7.2-1.5.3-2.2.4-.2 0-.3 0-.5.1-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2-.2 0-.3 0-.5-.1-.7-.1-1.5-.2-2.2-.4-.2 0-.3-.1-.5-.1-.6-.1-1.2-.3-1.7-.4-.2-.1-.4-.1-.6-.2-.7-.2-1.4-.4-2.1-.7-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8-.1-.1-.3-.1-.4-.2-.6-.3-1.3-.7-1.9-1.1-.1-.1-.3-.2-.4-.3-.5-.3-1-.6-1.4-1-.2-.1-.3-.2-.5-.3-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4-1.2-1.2-.3-.3c-.5-.5-1-1.1-1.4-1.6-.1-.1-.2-.3-.3-.4-.4-.4-.7-.9-1-1.4-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7z"}}]},name:"control",theme:"outlined"},ti=function(r,a){return n.createElement(Ct,we({},r,{ref:a,icon:ei}))},Ua=n.forwardRef(ti),ai={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM382 896h-.2L232 746.2v-.2h150v150z"}}]},name:"copy",theme:"filled"},ni=function(r,a){return n.createElement(Ct,we({},r,{ref:a,icon:ai}))},ha=n.forwardRef(ni),ri={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"},si=function(r,a){return n.createElement(Ct,we({},r,{ref:a,icon:ri}))},rr=n.forwardRef(si),ii={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},li=function(r,a){return n.createElement(Ct,we({},r,{ref:a,icon:ii}))},sr=n.forwardRef(li),oi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},ci=function(r,a){return n.createElement(Ct,we({},r,{ref:a,icon:oi}))},ui=n.forwardRef(ci);const di=()=>{const{message:t}=ua.useApp(),[r,a]=n.useState(""),[s,i]=n.useState("newest"),[o,m]=n.useState({field:"id",order:"descend"}),[l,c]=n.useState(1),[d,u]=n.useState(10),[b,y]=n.useState([]),[k,D]=n.useState([]),[g,S]=n.useState(!1),[j,v]=n.useState(!1),[p,w]=n.useState(!1),[E,V]=n.useState(null),[G,L]=n.useState(null),[N,h]=n.useState(!1),[C,M]=n.useState("default"),{logUserActivity:q}=zt(),{logUserNotification:T}=Yt(),{userData:$}=Rt(),{userData:I}=Et(),W=($==null?void 0:$.username)||(I==null?void 0:I.username)||"Unknown User",U=!!$,Q=!!I,z=U?"admin":Q?"user":"guest",Y=async()=>{h(!0),a(""),i("newest"),m({field:"id",order:"descend"}),c(1),u(10),y([]),M("default");try{const A=await lt();D(A)}catch{t.error("Failed to load inventory data.")}finally{h(!1)}};n.useEffect(()=>{Y()},[]);const O=Y,_=Array.isArray(k)?k.filter(A=>Object.values(A).join(" ").toLowerCase().includes(r.toLowerCase())):[],f=[..._].sort((A,X)=>{if(o.field&&o.order){const{field:ve,order:me}=o;if(me==="ascend")return A[ve]>X[ve]?1:-1;if(me==="descend")return A[ve]<X[ve]?1:-1}return 0}),F=f.length,H=f.slice((l-1)*d,l*d);return{searchText:r,setSearchText:a,sortOrder:s,setSortOrder:i,sorterConfig:o,setSorterConfig:m,currentPage:l,setCurrentPage:c,pageSize:d,setPageSize:u,selectedRowKeys:b,setSelectedRowKeys:y,dataSource:k,setDataSource:D,isModalVisible:g,setIsModalVisible:S,isEditModalVisible:j,setIsEditModalVisible:v,redistributeItemData:E,setRedistributeItemData:V,isRedistributeModalVisible:p,setIsRedistributeModalVisible:w,editingItem:G,setEditingItem:L,isLoading:N,setIsLoading:h,activeTab:C,setActiveTab:M,username:W,isAdmin:U,isUser:Q,userRole:z,filteredData:_,sortedData:f,paginatedData:H,totalEntries:F,handleRedistribute:A=>{V(A),w(!0)},handleRedistributeItem:async A=>{var X,ve;h(!0);try{const me=await Ir(A);t.success(`Item redistributed successfully! New Item ID: ${me.new_item_id}`);const x=await lt();D(x),w(!1),V(null),await q(W,"Inventory",`Redistributed item with ID: ${A.id} to new item ID: ${me.new_item_id}`),await T("Inventory Update",`You redistributed an item with ID: ${A.id} to new item ID: ${me.new_item_id}`)}catch(me){const x=((ve=(X=me==null?void 0:me.response)==null?void 0:X.data)==null?void 0:ve.message)||me.message||"";x.toLowerCase().includes("quantity")&&x.includes("1")?t.error("You can't redistribute an item with quantity of 1."):t.error("Failed to redistribute item."),console.error(me)}finally{h(!1)}},handlePageChange:(A,X)=>{c(A),u(X)},handleSortOrderChange:A=>{i(A.toLowerCase());const X=A.toLowerCase()==="newest"?"descend":"ascend";m({field:"id",order:X}),c(1)},handleTableChange:A=>{A.field&&m({field:A.field,order:A.order})},handleAddItem:async A=>{try{h(!0);const X=await kr(A);if(X&&X.id){t.success(`Item added successfully! ID: ${X.id}`),await q(W,"Inventory",`Added item with ID: ${X.id}`),await T("Inventory Update",`You added an item with ID: ${X.id}`);const ve=await lt();D(ve)}else t.error("Failed to retrieve item ID.")}catch(X){console.error("Error adding item:",X),t.error("Failed to add item.")}finally{h(!1)}},handleEdit:A=>{L(A),v(!0)},handleEditItem:async(A,X=null)=>{const ve=X||G;if(!Object.keys(A).some(x=>{const Ce=A[x],Ie=ve[x];if(x==="issuedDate"||x==="purchaseDate"){const Te=Ie?$e(Ie).format("YYYY-MM-DD"):null;return Ce!==Te}return typeof Ce=="string"?Ce.trim()!==(Ie||"").trim():Ce!==Ie})){t.info("No changes detected.");return}h(!0);try{const x=await Nr({...A,id:(A==null?void 0:A.id)||(G==null?void 0:G.id)});if(x.message==="Item updated successfully"){const Ce=await lt();D(Ce),t.success(`Item with ID ${A.id} updated successfully!`),await q(W,"Inventory",`Updated item with ID: ${A.id}`),await T("Inventory Update",`You edited an item with ID: ${A.id}`),v(!1)}else t.error(x.message||"Failed to update item.")}catch(x){console.error("Error updating item:",x),x.response&&x.response.data&&x.response.data.message?t.error(`Failed to update item: ${x.response.data.message}`):t.error("Failed to update item. Please try again.")}finally{h(!1)}},handleBatchDelete:async()=>{if(!U){t.error("You do not have permission to delete items.");return}if(b.length===0){t.warning("Please select items to delete.");return}try{if((await wr(b)).message==="Items deleted successfully"){const X=await lt();D(X),y([]),t.success("Items deleted successfully!"),await q(W,"Inventory",`Deleted item(s) with ID(s): ${b.join(", ")}`),await T("Inventory Update",`You deleted item(s) with ID(s): ${b.join(", ")}`)}else t.error("Error deleting items.")}catch(A){console.error("Error deleting items:",A),t.error("Failed to delete items. Please try again.")}finally{h(!1)}},handleTabChange:A=>{document.activeElement&&document.activeElement.blur(),M(A)},handleRefresh:O,rowSelection:U?{selectedRowKeys:b,onChange:y}:null}},mi=async t=>{try{return(await da.post("/save_template.php",t)).data}catch(r){throw r}},fi=async()=>{try{return(await da.get("/get_templates.php")).data}catch(t){throw t}},hi=async(t,r)=>{try{return(await da.put(`/update_template.php?id=${t}`,r)).data}catch(a){throw a}},pi=async t=>{try{return(await da.delete(`/delete_template.php?id=${t}`)).data}catch(r){throw r}},vi=t=>{const[r,a]=n.useState(null),[s,i]=n.useState(null),[o,m]=n.useState([]),[l,c]=n.useState(!1),[d,u]=n.useState(null),[b]=P.useForm(),{message:y}=ua.useApp(),[k,D]=n.useState(0),{logUserActivity:g}=zt(),{logUserNotification:S}=Yt(),j=Rt(),v=Et();n.useEffect(()=>{p()},[k]);const p=async()=>{try{const h=await fi();h.success&&(m(h.templates),r==="User Templates"&&(a(null),i(null),t(null)))}catch(h){console.error("Error loading templates:",h),y.error("Error loading templates")}};return{selectedCategory:r,selectedType:s,userTemplates:o,isEditModalVisible:l,editingTemplate:d,form:b,refreshTrigger:k,setRefreshTrigger:D,handleCategoryChange:h=>{if(h==="No Template"||!h){a(null),i(null),t(null);return}a(h),i(null)},handleTypeChange:h=>{if(!h||h==="No Template")return a(null),i(null),t(null),{isUserTemplate:!1};if(i(h),r==="User Templates"){const C=o.find(M=>M.template_name===h);if(C){const M={...C,locationType:C.location.includes("Head Office")?"Head Office":"Other",department:C.location.includes("Head Office")?C.location.split(" - ")[1]:null,location:(C.location.includes("Head Office"),C.location)};return t(M),{isUserTemplate:!0}}}else if(r&&oa[r][h])return t(oa[r][h]),{isUserTemplate:!1}},handleEdit:h=>{u(h),b.setFieldsValue({...h,locationType:h.location.includes("Head Office")?"Head Office":"Other",department:h.location.includes("Head Office")?h.location.split(" - ")[1]:null,location:h.location.includes("Head Office")?null:h.location,purchaseDate:h.purchaseDate?$e(h.purchaseDate):void 0,issuedDate:h.issuedDate?$e(h.issuedDate):void 0}),c(!0)},handleDelete:async h=>{try{const C=await pi(h.id);C.success?(y.success("Template deleted successfully"),m(M=>M.filter(q=>q.id!==h.id)),s===h.template_name&&(a(null),i(null),t(null)),D(M=>M+1),await g(j.userData.username,"Template Deleted",`Template "${h.template_name}" has been deleted.`),await S("Template Deleted",`Template "${h.template_name}" has been deleted.`)):y.error(C.message||"Failed to delete template")}catch(C){console.error("Error deleting template:",C),y.error("Error deleting template")}},handleEditSubmit:async h=>{try{const C={...h,location:h.locationType==="Head Office"?`Head Office - ${h.department}`:h.location,purchaseDate:h.purchaseDate?h.purchaseDate.format("YYYY-MM-DD"):null,issuedDate:h.issuedDate?h.issuedDate.format("YYYY-MM-DD"):null};delete C.locationType,delete C.department;const M=await hi(d.id,C);if(M.success){if(y.success("Template updated successfully"),c(!1),m(q=>q.map(T=>T.id===d.id?{...T,...C}:T)),s===d.template_name){const q={...d,...C,locationType:C.location.includes("Head Office")?"Head Office":"Other",department:C.location.includes("Head Office")?C.location.split(" - ")[1]:null};t(q)}D(q=>q+1),await g(j.userData.username,"Template Updated",`Template "${h.template_name}" has been updated.`),await S("Template Updated",`Template "${h.template_name}" has been updated.`)}else y.error(M.message||"Failed to update template")}catch(C){console.error("Error updating template:",C),y.error("Error updating template")}},setIsEditModalVisible:c,getCurrentUser:()=>j.token&&j.userData?j.userData:v.token&&v.userData?v.userData:null}},{Option:se}=he,xi={SOD:"SOD",CID:"CID",GAD:"GAD",HRD:"HRD",AFD:"AFD",EOD:"EOD",BDO:"BDO"},oa={"IT Equipment":{"System Unit":{type:"System Unit",brand:"Dell",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Standard office computer",serialNumber:"",purchaseDate:"",issuedDate:""},Laptop:{type:"Laptop",brand:"Lenovo",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Business laptop",serialNumber:"",purchaseDate:"",issuedDate:""},Monitor:{type:"Monitor",brand:"Dell",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Office monitor",serialNumber:"",purchaseDate:"",issuedDate:""},Printer:{type:"Printer",brand:"HP",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Office printer",serialNumber:"",purchaseDate:"",issuedDate:""}},"Network Equipment":{Router:{type:"Router",brand:"Cisco",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Network router",serialNumber:"",purchaseDate:"",issuedDate:""},Switch:{type:"Switch",brand:"Cisco",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Network switch",serialNumber:"",purchaseDate:"",issuedDate:""},Modem:{type:"Modem",brand:"TP-Link",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Internet modem",serialNumber:"",purchaseDate:"",issuedDate:""},"WIFI-Mesh":{type:"WIFI-Mesh",brand:"Ubiquiti",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Wireless mesh system",serialNumber:"",purchaseDate:"",issuedDate:""}},"Security Equipment":{CCTV:{type:"CCTV",brand:"Hikvision",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security camera",serialNumber:"",purchaseDate:"",issuedDate:""},Biometrics:{type:"Biometrics",brand:"ZKTeco",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Biometric scanner",serialNumber:"",purchaseDate:"",issuedDate:""},"Metal Detector":{type:"Metal Detector",brand:"Garrett",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security metal detector",serialNumber:"",purchaseDate:"",issuedDate:""},"Guard Tour System":{type:"Guard Tour System",brand:"Detex",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Guard tour monitoring system",serialNumber:"",purchaseDate:"",issuedDate:""}},"Communication Equipment":{Radio:{type:"Radio",brand:"Motorola",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Two-way radio",serialNumber:"",purchaseDate:"",issuedDate:""},Smartphone:{type:"Smartphone",brand:"Samsung",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Office mobile phone",serialNumber:"",purchaseDate:"",issuedDate:""},Headset:{type:"Headset",brand:"Jabra",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Office headset",serialNumber:"",purchaseDate:"",issuedDate:""},Megaphone:{type:"Megaphone",brand:"Pyle",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Public address system",serialNumber:"",purchaseDate:"",issuedDate:""}},"Power Equipment":{UPS:{type:"UPS",brand:"APC",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Uninterruptible power supply",serialNumber:"",purchaseDate:"",issuedDate:""},AVR:{type:"AVR",brand:"Stavol",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Automatic voltage regulator",serialNumber:"",purchaseDate:"",issuedDate:""},Battery:{type:"Battery",brand:"Yuasa",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Backup battery",serialNumber:"",purchaseDate:"",issuedDate:""},Charger:{type:"Charger",brand:"Anker",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Device charger",serialNumber:"",purchaseDate:"",issuedDate:""}},Accessories:{Keyboard:{type:"Keyboard",brand:"Logitech",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Computer keyboard",serialNumber:"",purchaseDate:"",issuedDate:""},Mouse:{type:"Mouse",brand:"Logitech",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Computer mouse",serialNumber:"",purchaseDate:"",issuedDate:""},Speaker:{type:"Speaker",brand:"JBL",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Audio speaker",serialNumber:"",purchaseDate:"",issuedDate:""},Microphone:{type:"Microphone",brand:"Shure",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Audio microphone",serialNumber:"",purchaseDate:"",issuedDate:""}},Others:{Pedestal:{type:"Pedestal",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"General",remarks:"Equipment pedestal",serialNumber:"",purchaseDate:"",issuedDate:""},Podium:{type:"Podium",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"General",remarks:"Presentation podium",serialNumber:"",purchaseDate:"",issuedDate:""},"Search Stick":{type:"Search Stick",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security search tool",serialNumber:"",purchaseDate:"",issuedDate:""},Searchlight:{type:"Searchlight",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security search light",serialNumber:"",purchaseDate:"",issuedDate:""},"Guard Tour Chips":{type:"Guard Tour Chips",brand:"Detex",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Guard tour system chips",serialNumber:"",purchaseDate:"",issuedDate:""},"Under Chassis":{type:"Under Chassis",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Vehicle under chassis scanner",serialNumber:"",purchaseDate:"",issuedDate:""}}},gi=n.forwardRef(({onTemplateSelect:t},r)=>{const{selectedCategory:a,selectedType:s,userTemplates:i,isEditModalVisible:o,form:m,setRefreshTrigger:l,handleCategoryChange:c,handleTypeChange:d,handleEdit:u,handleDelete:b,handleEditSubmit:y,setIsEditModalVisible:k}=vi(t),D=Rt(),g=Et(),S=()=>{const p=D.token&&D.userData,w=g.token&&g.userData;if(p)return D.userData;if(w)return g.userData;const E=ft.get("username"),V=ft.get("user_id");return E&&V?{username:E,id:V}:null},j=p=>{const w=S();return w&&w.username===p.created_by};n.useImperativeHandle(r,()=>({setRefreshTrigger:l,handleTypeChange:d}));const v=Object.keys(oa).sort();return e.jsxs(kt,{direction:"vertical",style:{width:"100%",marginBottom:"16px"},children:[e.jsx(Mn,{message:"Quick Templates",description:"Select a category and type to quickly fill item details, or choose No Template to use your own values",type:"info",showIcon:!0,className:"theme-aware-alert"}),e.jsxs(Ot,{gutter:16,children:[e.jsx(We,{span:12,children:e.jsxs(he,{placeholder:"Select Category",style:{width:"100%"},onChange:c,value:a,allowClear:!0,children:[e.jsx(se,{value:"No Template",children:"No Template"}),v.map(p=>e.jsx(se,{value:p,children:p},p)),i.length>0&&e.jsx(se,{value:"User Templates",children:"User Templates"})]})}),e.jsx(We,{span:12,children:e.jsx(he,{placeholder:"Select Type",style:{width:"100%"},onChange:d,disabled:!a,value:s,allowClear:!0,optionLabelProp:"label",children:a==="User Templates"?i.sort((p,w)=>p.template_name.localeCompare(w.template_name)).map(p=>e.jsx(se,{value:p.template_name,label:p.template_name,children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:p.template_name}),e.jsxs("div",{style:{fontSize:"12px",color:"#8c8c8c",marginTop:"2px"},children:["Created by: ",p.created_by||"System"]})]}),e.jsxs(kt,{children:[e.jsx(Ue,{title:j(p)?"Edit Template":"Only the creator can edit this template",children:e.jsx(be,{type:"text",style:{backgroundColor:"transparent"},icon:e.jsx(Xa,{}),onClick:w=>{w.stopPropagation(),u(p)},disabled:!j(p)})}),e.jsx(Ue,{title:j(p)?"Delete Template":"Only the creator can delete this template",children:e.jsx(be,{type:"text",style:{backgroundColor:"transparent"},danger:!0,icon:e.jsx(la,{}),onClick:w=>{w.stopPropagation(),b(p)},disabled:!j(p)})})]})]})},p.template_name)):a&&Object.keys(oa[a]).sort().map(p=>e.jsx(se,{value:p,children:p},p))})})]}),e.jsx(qr,{style:{margin:"16px 0"}}),e.jsx(Lt,{title:"Edit Template",open:o,onCancel:()=>k(!1),footer:null,width:900,children:e.jsx(P,{form:m,onFinish:y,layout:"vertical",children:e.jsxs(Ot,{gutter:16,children:[e.jsxs(We,{span:12,children:[e.jsx(P.Item,{name:"template_name",label:"Template Name",rules:[{required:!0,message:"Please enter template name"}],children:e.jsx(ye,{})}),e.jsx(P.Item,{name:"type",label:"Type",rules:[{required:!0,message:"Please select type"}],children:e.jsxs(he,{children:[e.jsx(se,{value:"AVR",children:"AVR"}),e.jsx(se,{value:"Battery",children:"Battery"}),e.jsx(se,{value:"Biometrics",children:"Biometrics"}),e.jsx(se,{value:"Camera",children:"Camera"}),e.jsx(se,{value:"CCTV",children:"CCTV"}),e.jsx(se,{value:"Charger",children:"Charger"}),e.jsx(se,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(se,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(se,{value:"Headset",children:"Headset"}),e.jsx(se,{value:"Keyboard",children:"Keyboard"}),e.jsx(se,{value:"Laptop",children:"Laptop"}),e.jsx(se,{value:"Megaphone",children:"Megaphone"}),e.jsx(se,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(se,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(se,{value:"Microphone",children:"Microphone"}),e.jsx(se,{value:"Modem",children:"Modem"}),e.jsx(se,{value:"Monitor",children:"Monitor"}),e.jsx(se,{value:"Mouse",children:"Mouse"}),e.jsx(se,{value:"Others",children:"Others"}),e.jsx(se,{value:"Pedestal",children:"Pedestal"}),e.jsx(se,{value:"Podium",children:"Podium"}),e.jsx(se,{value:"Printer",children:"Printer"}),e.jsx(se,{value:"Radio",children:"Radio"}),e.jsx(se,{value:"Router",children:"Router"}),e.jsx(se,{value:"Search Stick",children:"Search Stick"}),e.jsx(se,{value:"Searchlight",children:"Searchlight"}),e.jsx(se,{value:"Smartphone",children:"Smartphone"}),e.jsx(se,{value:"Speaker",children:"Speaker"}),e.jsx(se,{value:"Switch",children:"Switch"}),e.jsx(se,{value:"System Unit",children:"System Unit"}),e.jsx(se,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(se,{value:"UPS",children:"UPS"})]})}),e.jsx(P.Item,{name:"brand",label:"Brand",rules:[{required:!0,message:"Please enter brand"}],children:e.jsx(ye,{})}),e.jsx(P.Item,{name:"serialNumber",label:"Serial Number",children:e.jsx(ye,{})}),e.jsx(P.Item,{name:"purchaseDate",label:"Purchase Date",rules:[{required:!0,message:"Please select purchase date"}],children:e.jsx(Ye,{format:"YYYY-MM-DD",style:{width:"100%"}})}),e.jsx(P.Item,{name:"issuedDate",label:"Issued Date",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(Ye,{format:"YYYY-MM-DD",style:{width:"100%"}})})]}),e.jsxs(We,{span:12,children:[e.jsx(P.Item,{name:"condition",label:"Condition",rules:[{required:!0,message:"Please select condition"}],children:e.jsxs(he,{children:[e.jsx(se,{value:"Brand New",children:"Brand New"}),e.jsx(se,{value:"Good Condition",children:"Good Condition"}),e.jsx(se,{value:"Defective",children:"Defective"})]})}),e.jsx(P.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:e.jsxs(he,{children:[e.jsx(se,{value:"On Stock",children:"On Stock"}),e.jsx(se,{value:"Deployed",children:"Deployed"}),e.jsx(se,{value:"For Repair",children:"For Repair"})]})}),e.jsx(P.Item,{name:"locationType",label:"Detachment/Office",rules:[{required:!0,message:"Please select a location type"}],children:e.jsxs(he,{onChange:p=>{const w=p==="Head Office";m.setFieldsValue({department:w?m.getFieldValue("department"):null,location:w?null:m.getFieldValue("location")})},children:[e.jsx(se,{value:"Head Office",children:"Head Office"}),e.jsx(se,{value:"Other",children:"Other (Specify Below)"})]})}),e.jsx(P.Item,{noStyle:!0,shouldUpdate:(p,w)=>p.locationType!==w.locationType,children:({getFieldValue:p})=>p("locationType")==="Head Office"?e.jsx(P.Item,{name:"department",label:"Department (Head Office)",rules:[{required:!0,message:"Please select a department"}],children:e.jsx(he,{children:Object.entries(xi).map(([E,V])=>e.jsx(se,{value:E,children:V},E))})}):e.jsx(P.Item,{name:"location",label:"Specific Location",rules:[{required:!0,message:"Please input a location"}],children:e.jsx(ye,{})})}),e.jsx(P.Item,{name:"remarks",label:"Remarks",children:e.jsx(ye.TextArea,{})}),e.jsx(P.Item,{children:e.jsx(be,{type:"primary",htmlType:"submit",children:"Save Changes"})})]})]})})})]})}),{Option:ae}=he,bi=({form:t,onFinish:r,loading:a,templateRef:s,onTemplateSelect:i,isHeadOffice:o,setIsHeadOffice:m,hasSerialNumber:l,handleSerialChange:c,selectedStockItem:d})=>e.jsxs(P,{form:t,onFinish:r,layout:"vertical",initialValues:{quantity:1},children:[e.jsx(gi,{ref:s,onTemplateSelect:i}),e.jsxs(Ot,{gutter:[32,24],children:[e.jsx(We,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:e.jsxs(he,{size:"medium",placeholder:"Select item type",children:[e.jsx(ae,{value:"AVR",children:"AVR"}),e.jsx(ae,{value:"Battery",children:"Battery"}),e.jsx(ae,{value:"Biometrics",children:"Biometrics"}),e.jsx(ae,{value:"Camera",children:"Camera"}),e.jsx(ae,{value:"CCTV",children:"CCTV"}),e.jsx(ae,{value:"Charger",children:"Charger"}),e.jsx(ae,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(ae,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(ae,{value:"Headset",children:"Headset"}),e.jsx(ae,{value:"Keyboard",children:"Keyboard"}),e.jsx(ae,{value:"Laptop",children:"Laptop"}),e.jsx(ae,{value:"Megaphone",children:"Megaphone"}),e.jsx(ae,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(ae,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(ae,{value:"Microphone",children:"Microphone"}),e.jsx(ae,{value:"Modem",children:"Modem"}),e.jsx(ae,{value:"Monitor",children:"Monitor"}),e.jsx(ae,{value:"Mouse",children:"Mouse"}),e.jsx(ae,{value:"Others",children:"Others"}),e.jsx(ae,{value:"Pedestal",children:"Pedestal"}),e.jsx(ae,{value:"Podium",children:"Podium"}),e.jsx(ae,{value:"Printer",children:"Printer"}),e.jsx(ae,{value:"Radio",children:"Radio"}),e.jsx(ae,{value:"Router",children:"Router"}),e.jsx(ae,{value:"Search Stick",children:"Search Stick"}),e.jsx(ae,{value:"Searchlight",children:"Searchlight"}),e.jsx(ae,{value:"Smartphone",children:"Smartphone"}),e.jsx(ae,{value:"Speaker",children:"Speaker"}),e.jsx(ae,{value:"Switch",children:"Switch"}),e.jsx(ae,{value:"System Unit",children:"System Unit"}),e.jsx(ae,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(ae,{value:"UPS",children:"UPS"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:e.jsx(ye,{size:"medium",placeholder:"Enter brand name"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",tooltip:"Optional - Leave empty if there no remarks",children:e.jsx(ye.TextArea,{size:"medium",rows:3,placeholder:"Enter any additional remarks"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Serial Number"}),name:"serialNumber",tooltip:"Optional - Leave empty if item has no serial number",children:e.jsx(ye,{size:"medium",onChange:c,placeholder:"Enter serial number (optional)"})}),(d==null?void 0:d.action)==="redistribute"&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Original Quantity"}),name:"originalQuantity",rules:[{required:!0,message:"Original quantity is required"}],children:e.jsx(ye,{size:"medium",disabled:!0,min:1})}),!l&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:(d==null?void 0:d.action)==="redistribute"?"New Quantity to Redistribute":"Quantity"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity!"},{validator:(u,b)=>!b||b<1?Promise.reject("Quantity must be at least 1"):(d==null?void 0:d.action)==="redistribute"&&(d!=null&&d.quantity)&&b>=d.quantity?Promise.reject(`Quantity must be less than ${d.quantity}`):Promise.resolve()}],children:e.jsx(ye,{size:"medium",type:"number",min:1,max:(d==null?void 0:d.action)==="redistribute"&&(d!=null&&d.quantity)?d.quantity-1:void 0,placeholder:"Enter quantity"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(Ye,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select issued date"})})]})}),e.jsx(We,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Purchased Date"}),name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:e.jsx(Ye,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select purchase date"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:e.jsxs(he,{size:"medium",placeholder:"Select condition",children:[e.jsx(ae,{value:"Brand New",children:"Brand New"}),e.jsx(ae,{value:"Good Condition",children:"Good Condition"}),e.jsx(ae,{value:"Defective",children:"Defective"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Detachment/Office"}),name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:e.jsxs(he,{size:"medium",onChange:u=>m(u==="Head Office"),placeholder:"Select location type",children:[e.jsx(ae,{value:"Head Office",children:"Head Office"}),e.jsx(ae,{value:"Other",children:"Other (Specify Below)"})]})}),o&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department!"}],children:e.jsxs(he,{size:"medium",placeholder:"Select department",children:[e.jsx(ae,{value:"SOD",children:"SOD"}),e.jsx(ae,{value:"CID",children:"CID"}),e.jsx(ae,{value:"GAD",children:"GAD"}),e.jsx(ae,{value:"HRD",children:"HRD"}),e.jsx(ae,{value:"AFD",children:"AFD"}),e.jsx(ae,{value:"EOD",children:"EOD"}),e.jsx(ae,{value:"BDO",children:"BDO"})]})}),!o&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a location!"}],children:e.jsx(ye,{size:"medium",placeholder:"Enter specific location"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status!"}],children:e.jsxs(he,{size:"medium",placeholder:"Select status",children:[e.jsx(ae,{value:"On Stock",children:"On Stock"}),e.jsx(ae,{value:"Deployed",children:"Deployed"}),e.jsx(ae,{value:"For Repair",children:"For Repair"})]})}),e.jsx(P.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(be,{type:"primary",htmlType:"submit",icon:e.jsx(sr,{}),loading:a,size:"small",style:{background:"var(--theme-card-head-bg, #5fe7a7)",border:"none",borderRadius:"8px",padding:"10px",height:"auto",fontSize:"14px",fontWeight:"600",color:"var(--theme-text, #072C1C)"},children:"Add Item"})})})]})})]})]}),yi=({onStockItems:t,searchText:r,setSearchText:a,fetchOnStockItems:s,loading:i,handleStockItemSelect:o})=>{const m=t.filter(c=>Object.values(c).some(d=>String(d).toLowerCase().includes(r.toLowerCase()))),l=[{title:"ID",dataIndex:"id",key:"id",width:"15%",render:c=>e.jsx("span",{className:"font-medium text-xs",children:c})},{title:"Type",dataIndex:"type",key:"type",width:"20%",render:c=>e.jsx("span",{className:"font-medium",children:c})},{title:"Brand",dataIndex:"brand",key:"brand",width:"20%",render:c=>e.jsx("span",{className:"font-medium",children:c})},{title:"Quantity",dataIndex:"quantity",key:"quantity",width:"15%",render:c=>e.jsx(Ja,{color:c>5?"green":c>1?"orange":"red",children:c})},{title:"Location",dataIndex:"location",key:"location",width:"20%",render:c=>e.jsx(Ue,{title:c,children:e.jsx("span",{className:"truncate block max-w-[200px]",children:c})})},{title:"Action",key:"action",width:"10%",render:(c,d)=>e.jsxs(kt,{children:[e.jsx(Ue,{title:"Edit",children:e.jsx(be,{type:"primary",icon:e.jsx(rr,{}),onClick:()=>o(d),size:"small",style:{backgroundColor:"var(--theme-card-head-bg, #5fe7a7)",color:"black"}})}),d.quantity>1&&e.jsx(Ue,{title:"Redistribute",children:e.jsx(be,{type:"primary",icon:e.jsx(ha,{}),onClick:()=>o({...d,action:"redistribute"}),size:"small",style:{backgroundColor:"var(--theme-text-light-custom, #EAF4E2)",color:"black"}})})]})}];return e.jsxs(Gt,{className:"shadow-lg border-0 mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(ye,{placeholder:"Search items...",prefix:e.jsx(Bt,{}),value:r,onChange:c=>a(c.target.value),style:{width:300},allowClear:!0,size:"small"})}),e.jsx(be,{type:"primary",icon:e.jsx(ia,{}),onClick:s,size:"small",style:{backgroundColor:"var(--theme-card-head-bg, #a7f3d0)",color:"black"},children:"Refresh"})]}),e.jsx(Ht,{dataSource:m,columns:l,rowKey:"id",size:"middle",pagination:{pageSize:5,showSizeChanger:!0,showTotal:c=>`Total ${c} items`},scroll:{y:400},loading:i})]})},{Option:ne}=he,{Title:ji}=Mt,Ci=({form:t,onFinish:r,loading:a,selectedStockItem:s,isHeadOffice:i,setIsHeadOffice:o,hasSerialNumber:m,handleSerialChange:l})=>s?e.jsxs(Gt,{className:"shadow-lg custom-card ",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(ji,{level:4,className:"mb-2",children:s.action==="redistribute"?"🔄 Redistribute Item":"✏️ Edit Item"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.action==="redistribute"?"Create a new item from existing stock":"Update item details and information"})]}),e.jsx(P,{form:t,onFinish:r,layout:"vertical",children:e.jsxs(Ot,{gutter:[32,24],children:[e.jsx(We,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:e.jsxs(he,{size:"medium",placeholder:"Select item type",children:[e.jsx(ne,{value:"AVR",children:"AVR"}),e.jsx(ne,{value:"Battery",children:"Battery"}),e.jsx(ne,{value:"Biometrics",children:"Biometrics"}),e.jsx(ne,{value:"Camera",children:"Camera"}),e.jsx(ne,{value:"CCTV",children:"CCTV"}),e.jsx(ne,{value:"Charger",children:"Charger"}),e.jsx(ne,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(ne,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(ne,{value:"Headset",children:"Headset"}),e.jsx(ne,{value:"Keyboard",children:"Keyboard"}),e.jsx(ne,{value:"Laptop",children:"Laptop"}),e.jsx(ne,{value:"Megaphone",children:"Megaphone"}),e.jsx(ne,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(ne,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(ne,{value:"Microphone",children:"Microphone"}),e.jsx(ne,{value:"Modem",children:"Modem"}),e.jsx(ne,{value:"Monitor",children:"Monitor"}),e.jsx(ne,{value:"Mouse",children:"Mouse"}),e.jsx(ne,{value:"Others",children:"Others"}),e.jsx(ne,{value:"Pedestal",children:"Pedestal"}),e.jsx(ne,{value:"Podium",children:"Podium"}),e.jsx(ne,{value:"Printer",children:"Printer"}),e.jsx(ne,{value:"Radio",children:"Radio"}),e.jsx(ne,{value:"Router",children:"Router"}),e.jsx(ne,{value:"Search Stick",children:"Search Stick"}),e.jsx(ne,{value:"Searchlight",children:"Searchlight"}),e.jsx(ne,{value:"Smartphone",children:"Smartphone"}),e.jsx(ne,{value:"Speaker",children:"Speaker"}),e.jsx(ne,{value:"Switch",children:"Switch"}),e.jsx(ne,{value:"System Unit",children:"System Unit"}),e.jsx(ne,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(ne,{value:"UPS",children:"UPS"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:e.jsx(ye,{size:"medium",placeholder:"Enter brand name"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",tooltip:"Optional - Leave empty if there no remarks",children:e.jsx(ye.TextArea,{size:"medium",rows:3,placeholder:"Enter any additional remarks"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Serial Number"}),name:"serialNumber",tooltip:"Optional - Leave empty if item has no serial number",children:e.jsx(ye,{size:"medium",onChange:l,placeholder:"Enter serial number (optional)"})}),(s==null?void 0:s.action)==="redistribute"&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Original Quantity"}),name:"originalQuantity",rules:[{required:!0,message:"Original quantity is required"}],children:e.jsx(ye,{size:"medium",disabled:!0})}),!m&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:(s==null?void 0:s.action)==="redistribute"?"New Quantity to Redistribute":"Quantity"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity!"},{validator:(c,d)=>!d||d<1?Promise.reject("Quantity must be at least 1"):(s==null?void 0:s.action)==="redistribute"&&(s!=null&&s.quantity)&&d>=s.quantity?Promise.reject(`Quantity must be less than ${s.quantity}`):Promise.resolve()}],children:e.jsx(ye,{size:"medium",type:"number",min:1,max:(s==null?void 0:s.action)==="redistribute"&&(s!=null&&s.quantity)?s.quantity-1:void 0,placeholder:"Enter quantity"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(Ye,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select issued date"})})]})}),e.jsx(We,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Purchased Date"}),name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:e.jsx(Ye,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select purchase date"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:e.jsxs(he,{size:"medium",placeholder:"Select condition",children:[e.jsx(ne,{value:"Brand New",children:"Brand New"}),e.jsx(ne,{value:"Good Condition",children:"Good Condition"}),e.jsx(ne,{value:"Defective",children:"Defective"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Detachment/Office"}),name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:e.jsxs(he,{size:"medium",onChange:c=>o(c==="Head Office"),placeholder:"Select location type",children:[e.jsx(ne,{value:"Head Office",children:"Head Office"}),e.jsx(ne,{value:"Other",children:"Other (Specify Below)"})]})}),i&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department!"}],children:e.jsxs(he,{size:"medium",placeholder:"Select department",children:[e.jsx(ne,{value:"SOD",children:"SOD"}),e.jsx(ne,{value:"CID",children:"CID"}),e.jsx(ne,{value:"GAD",children:"GAD"}),e.jsx(ne,{value:"HRD",children:"HRD"}),e.jsx(ne,{value:"AFD",children:"AFD"}),e.jsx(ne,{value:"EOD",children:"EOD"}),e.jsx(ne,{value:"BDO",children:"BDO"})]})}),!i&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a location!"}],children:e.jsx(ye,{size:"medium",placeholder:"Enter specific location"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status!"}],children:e.jsxs(he,{size:"medium",placeholder:"Select status",children:[e.jsx(ne,{value:"On Stock",children:"On Stock"}),e.jsx(ne,{value:"Deployed",children:"Deployed"}),e.jsx(ne,{value:"For Repair",children:"For Repair"})]})}),e.jsx(P.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(be,{type:"primary",htmlType:"submit",icon:s.action==="redistribute"?e.jsx(ha,{}):e.jsx(Xa,{}),loading:a,size:"small",style:{backgroundColor:"var(--theme-card-head-bg, #a7f3d0)",border:"none",borderRadius:"8px",padding:"10px",height:"auto",fontSize:"14px",fontWeight:"600",color:"black"},children:s.action==="redistribute"?"Redistribute":"Update Item"})})})]})})]})})]}):null,{Title:Di}=Mt,Si=({visible:t,onCancel:r,onSave:a,templateName:s,setTemplateName:i})=>e.jsx(Lt,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(Di,{level:4,className:"mb-0 font-semibold",children:"Save as Template"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Save this item configuration for future use"})]}),open:t,onCancel:r,footer:[e.jsx(be,{onClick:r,size:"large",children:"Cancel"},"cancel"),e.jsx(be,{type:"primary",onClick:a,icon:e.jsx(ui,{}),size:"large",style:{background:"#A8E1C5",border:"none",borderRadius:"8px",padding:"8px 24px",height:"auto",fontSize:"14px",fontWeight:"600",color:"#072C1C"},children:"Save Template"},"save")],className:"template-modal",styles:{header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"#A8E1C5",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"Would you like to save this item as a template for future use?"}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Template Name"}),required:!0,tooltip:"Enter a unique name for this template",children:e.jsx(ye,{size:"large",value:s,onChange:o=>i(o.target.value),placeholder:"Enter template name"})})]})}),{Title:wi}=Mt,Ni=({visible:t,onClose:r,onAdd:a,onRedistribute:s,handleEditItem:i,loading:o})=>{const[m]=P.useForm(),[l,c]=n.useState(!1),[d,u]=n.useState(!1),[b,y]=n.useState(!1),[k,D]=n.useState(""),[g,S]=n.useState(null),[j,v]=n.useState([]),[p,w]=n.useState(null),[E,V]=n.useState("new"),[G,L]=n.useState(""),N=n.useRef(null),{message:h}=ua.useApp(),{logUserActivity:C}=zt(),{logUserNotification:M}=Yt(),q=Rt(),T=Et(),$=()=>{const f=q.token&&q.userData,F=T.token&&T.userData;if(f)return q.userData;if(F)return T.userData;const H=ft.get("username"),R=ft.get("user_id");return H&&R?{username:H,id:R}:null};n.useEffect(()=>{t&&I()},[t]);const I=async()=>{try{const F=(await lt()).filter(H=>H.status==="On Stock");v(F)}catch(f){console.error("Error fetching on stock items:",f)}},W=f=>{E!=="stock"&&V("stock"),w(f),f.action==="redistribute"?m.setFieldsValue({type:f.type,brand:f.brand,originalQuantity:f.quantity,quantity:1,condition:f.condition,status:f.status,remarks:f.remarks,locationType:f.location.includes("Head Office")?"Head Office":"Other",department:f.location.includes("Head Office")?f.location.split(" - ")[1]:void 0,location:f.location.includes("Head Office")?void 0:f.location,issuedDate:f.issuedDate?$e(f.issuedDate):void 0,purchaseDate:f.purchaseDate?$e(f.purchaseDate):void 0,serialNumber:f.serialNumber}):m.setFieldsValue({type:f.type,brand:f.brand,quantity:f.quantity,condition:f.condition,status:f.status,remarks:f.remarks,locationType:f.location.includes("Head Office")?"Head Office":"Other",department:f.location.includes("Head Office")?f.location.split(" - ")[1]:void 0,location:f.location.includes("Head Office")?void 0:f.location,issuedDate:f.issuedDate?$e(f.issuedDate):void 0,purchaseDate:f.purchaseDate?$e(f.purchaseDate):void 0,serialNumber:f.serialNumber}),c(f.location.includes("Head Office")),u(!!f.serialNumber)},U=f=>{f?(m.setFieldsValue({...f,locationType:f.locationType||(f.location.includes("Head Office")?"Head Office":"Other"),department:f.department||(f.location.includes("Head Office")?f.location.split(" - ")[1]:null),location:f.location,purchaseDate:f.purchaseDate?$e(f.purchaseDate):void 0,issuedDate:f.issuedDate?$e(f.issuedDate):void 0}),c(f.locationType==="Head Office"||f.location.includes("Head Office"))):(m.resetFields(),c(!1))},Q=async f=>{var F,H,R;try{if(f.purchaseDate&&f.purchaseDate.isAfter($e())){h.error("Purchase date cannot be in the future.");return}const J=await lt();if(f.serialNumber&&(!p||f.serialNumber!==p.serialNumber)&&J.some(ue=>ue.serialNumber===f.serialNumber)){h.error("Serial number already exists. Please use a unique serial number.");return}const le=l?`Head Office - ${f.department}`:f.location;if(p)if(p.action==="redistribute"){const pe=J.find(Se=>Se.id===p.id);if(!pe){h.error("Item not found in inventory.");return}if(pe.quantity===1){h.warning("Cannot redistribute item with quantity of 1.");return}if(!f.quantity||f.quantity<=0||f.quantity>=pe.quantity){h.error("New quantity must be greater than 0 and less than existing quantity.");return}const ue={id:pe.id,newQuantity:f.quantity,newLocation:le,issuedDate:f.issuedDate?f.issuedDate.format("YYYY-MM-DD"):null,condition:f.condition,status:f.status,remarks:((F=f.remarks)==null?void 0:F.trim())||null};await s(ue),await I(),w(null),m.resetFields()}else{const pe={id:p.id,type:f.type,brand:f.brand,quantity:d?1:Math.max(1,f.quantity||1),serialNumber:f.serialNumber||"",issuedDate:f.issuedDate?f.issuedDate.format("YYYY-MM-DD"):null,purchaseDate:f.purchaseDate?f.purchaseDate.format("YYYY-MM-DD"):null,condition:f.condition,location:le,status:f.status,remarks:f.remarks||""};await i(pe,p),await I(),w(null),m.resetFields()}else{const pe={type:f.type,brand:f.brand,quantity:d?1:Math.max(1,f.quantity||1),serialNumber:f.serialNumber,issuedDate:f.issuedDate?f.issuedDate.format("YYYY-MM-DD"):null,purchaseDate:f.purchaseDate?f.purchaseDate.format("YYYY-MM-DD"):null,condition:f.condition,location:le,status:f.status,remarks:f.remarks||null};await a(pe),S(f);const ue=(R=(H=N.current)==null?void 0:H.handleTypeChange)==null?void 0:R.call(H,f.type);ue&&!ue.isUserTemplate&&y(!0),m.resetFields(),r()}}catch(J){console.error(J),h.error("Failed to save item")}},z=async()=>{if(!k.trim()){h.error("Please enter a template name");return}const f=$();if(!f){h.error("User not authenticated");return}const F=g,H={template_name:k,type:F.type,brand:F.brand,condition:F.condition,status:F.status,quantity:F.quantity||1,location:l?`Head Office - ${F.department}`:F.location,remarks:F.remarks||"",serialNumber:F.serialNumber||null,purchaseDate:F.purchaseDate?F.purchaseDate.format("YYYY-MM-DD"):null,issuedDate:F.issuedDate?F.issuedDate.format("YYYY-MM-DD"):null};try{const R=await mi(H);R.success?(h.success("Template saved successfully!"),y(!1),D(""),N.current&&N.current.setRefreshTrigger(J=>J+1),await C(f.username,"Template Created",`Template "${k}" has been created successfully.`),await M("Template Created",`Template "${k}" has been created successfully.`)):h.error(R.message||"Failed to save template")}catch(R){console.error("Error saving template:",R),h.error("Error saving template")}},Y=()=>{m.resetFields(),u(!1),w(null),L(""),V("new"),r()},O=f=>{const F=f.target.value.trim();u(F!==""),F!==""?m.setFieldsValue({quantity:1}):m.setFieldsValue({quantity:1})},_=f=>{V(f),f==="new"&&(m.resetFields(),w(null),u(!1),c(!1))};return e.jsxs(e.Fragment,{children:[e.jsx(Lt,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(wi,{level:3,className:"mb-0 font-semibold",children:"Inventory Management"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Add, edit, and manage your inventory items"})]}),open:t,onCancel:Y,footer:null,width:1400,styles:{body:{padding:0},header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"var(--theme-card-head-bg, #5fe7a7)",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsx(Rn,{activeKey:E,onChange:_,items:[{key:"new",label:e.jsxs("div",{className:"flex items-center p-2",children:[e.jsx(sr,{}),e.jsx("span",{className:"font-medium",children:"New Item"})]}),children:e.jsx(bi,{form:m,onFinish:Q,loading:o,templateRef:N,onTemplateSelect:U,isHeadOffice:l,setIsHeadOffice:c,hasSerialNumber:d,handleSerialChange:O,selectedStockItem:p})},{key:"stock",label:e.jsxs("div",{className:"flex items-center p-2",children:[e.jsx(Bt,{}),e.jsx("span",{className:"font-medium",children:"On Stock Items"})]}),children:e.jsxs(e.Fragment,{children:[e.jsx(yi,{onStockItems:j,searchText:G,setSearchText:L,fetchOnStockItems:I,loading:o,handleStockItemSelect:W}),p&&e.jsx(Ci,{form:m,onFinish:Q,loading:o,selectedStockItem:p,isHeadOffice:l,setIsHeadOffice:c,hasSerialNumber:d,handleSerialChange:O})]})}]})}),e.jsx(Si,{visible:b,onCancel:()=>y(!1),onSave:z,templateName:k,setTemplateName:D})]})},{Option:re}=he,{Title:ki}=Mt,Ii=({visible:t,onClose:r,onEdit:a,item:s})=>{const[i]=P.useForm(),[o,m]=n.useState(!1),[l,c]=n.useState(!1),{message:d}=ua.useApp(),{logUserActivity:u}=zt(),{logUserNotification:b}=Yt(),y=Rt(),k=Et(),D=()=>{const v=y.token&&y.userData,p=k.token&&k.userData;if(v)return y.userData;if(p)return k.userData;const w=ft.get("username"),E=ft.get("user_id");return w&&E?{username:w,id:E}:null};n.useEffect(()=>{if(t&&s){const v=s.location.includes("Head Office"),p=v?s.location.split(" - ")[1]:null;i.setFieldsValue({...s,locationType:v?"Head Office":"Other",department:p,location:v?null:s.location,purchaseDate:s.purchaseDate?$e(s.purchaseDate):void 0,issuedDate:s.issuedDate?$e(s.issuedDate):void 0}),m(v),c(!!s.serialNumber)}},[t,s,i]);const g=async v=>{try{if(v.purchaseDate&&v.purchaseDate.isAfter($e())){d.error("Purchase date cannot be in the future.");return}const p=await lt();if(v.serialNumber&&v.serialNumber!==s.serialNumber&&p.some(L=>L.serialNumber===v.serialNumber)){d.error("Serial number already exists. Please use a unique serial number.");return}const w=o?`Head Office - ${v.department}`:v.location,E={...s,type:v.type,brand:v.brand,quantity:l?1:Math.max(1,v.quantity||1),serialNumber:v.serialNumber,issuedDate:v.issuedDate?v.issuedDate.format("YYYY-MM-DD"):null,purchaseDate:v.purchaseDate?v.purchaseDate.format("YYYY-MM-DD"):null,condition:v.condition,location:w,status:v.status,remarks:v.remarks||null};a(E);const V=D();V&&(await u(V.username,"Item Updated",`Item "${E.type}" has been updated.`),await b("Item Updated",`Item "${E.type}" has been updated.`)),i.resetFields(),r()}catch(p){console.error(p)}},S=()=>{i.resetFields(),c(!1),r()},j=v=>{const p=v.target.value.trim();c(p!==""),p!==""?i.setFieldsValue({quantity:1}):i.setFieldsValue({quantity:1})};return e.jsx(Lt,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(ki,{level:3,className:"mb-0 font-semibold",children:"Edit Item"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Update item details and information"})]}),open:t,onCancel:S,footer:null,width:1e3,className:"custom-card",styles:{body:{padding:0},header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"var(--theme-card-head-bg, #5fe7a7)",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsx("div",{className:"p-8 bg-gray-50",children:e.jsx(Gt,{className:"shadow-lg border-0",children:e.jsx(P,{form:i,onFinish:g,layout:"vertical",initialValues:{quantity:1},children:e.jsxs(Ot,{gutter:[32,24],children:[e.jsx(We,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:e.jsxs(he,{size:"medium",placeholder:"Select item type",children:[e.jsx(re,{value:"AVR",children:"AVR"}),e.jsx(re,{value:"Battery",children:"Battery"}),e.jsx(re,{value:"Biometrics",children:"Biometrics"}),e.jsx(re,{value:"Camera",children:"Camera"}),e.jsx(re,{value:"CCTV",children:"CCTV"}),e.jsx(re,{value:"Charger",children:"Charger"}),e.jsx(re,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(re,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(re,{value:"Headset",children:"Headset"}),e.jsx(re,{value:"Keyboard",children:"Keyboard"}),e.jsx(re,{value:"Laptop",children:"Laptop"}),e.jsx(re,{value:"Megaphone",children:"Megaphone"}),e.jsx(re,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(re,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(re,{value:"Microphone",children:"Microphone"}),e.jsx(re,{value:"Modem",children:"Modem"}),e.jsx(re,{value:"Monitor",children:"Monitor"}),e.jsx(re,{value:"Mouse",children:"Mouse"}),e.jsx(re,{value:"Others",children:"Others"}),e.jsx(re,{value:"Pedestal",children:"Pedestal"}),e.jsx(re,{value:"Podium",children:"Podium"}),e.jsx(re,{value:"Printer",children:"Printer"}),e.jsx(re,{value:"Radio",children:"Radio"}),e.jsx(re,{value:"Router",children:"Router"}),e.jsx(re,{value:"Search Stick",children:"Search Stick"}),e.jsx(re,{value:"Searchlight",children:"Searchlight"}),e.jsx(re,{value:"Smartphone",children:"Smartphone"}),e.jsx(re,{value:"Speaker",children:"Speaker"}),e.jsx(re,{value:"Switch",children:"Switch"}),e.jsx(re,{value:"System Unit",children:"System Unit"}),e.jsx(re,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(re,{value:"UPS",children:"UPS"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:e.jsx(ye,{size:"medium",placeholder:"Enter brand name"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",tooltip:"Optional - Leave empty if there no remarks",children:e.jsx(ye.TextArea,{size:"medium",rows:3,placeholder:"Enter any additional remarks"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Serial Number"}),name:"serialNumber",tooltip:"Optional - Leave empty if item has no serial number",children:e.jsx(ye,{size:"medium",onChange:j,placeholder:"Enter serial number (optional)"})}),!l&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Quantity"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity!"}],children:e.jsx(ye,{size:"medium",type:"number",min:1,placeholder:"Enter quantity"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(Ye,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select issued date"})})]})}),e.jsx(We,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Purchased Date"}),name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:e.jsx(Ye,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select purchase date"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:e.jsxs(he,{size:"medium",placeholder:"Select condition",children:[e.jsx(re,{value:"Brand New",children:"Brand New"}),e.jsx(re,{value:"Good Condition",children:"Good Condition"}),e.jsx(re,{value:"Defective",children:"Defective"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Detachment/Office"}),name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:e.jsxs(he,{size:"medium",onChange:v=>m(v==="Head Office"),placeholder:"Select location type",children:[e.jsx(re,{value:"Head Office",children:"Head Office"}),e.jsx(re,{value:"Other",children:"Other (Specify Below)"})]})}),o&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department!"}],children:e.jsxs(he,{size:"medium",placeholder:"Select department",children:[e.jsx(re,{value:"SOD",children:"SOD"}),e.jsx(re,{value:"CID",children:"CID"}),e.jsx(re,{value:"GAD",children:"GAD"}),e.jsx(re,{value:"HRD",children:"HRD"}),e.jsx(re,{value:"AFD",children:"AFD"}),e.jsx(re,{value:"EOD",children:"EOD"}),e.jsx(re,{value:"BDO",children:"BDO"})]})}),!o&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a location!"}],children:e.jsx(ye,{size:"medium",placeholder:"Enter specific location"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status!"}],children:e.jsxs(he,{size:"medium",placeholder:"Select status",children:[e.jsx(re,{value:"On Stock",children:"On Stock"}),e.jsx(re,{value:"Deployed",children:"Deployed"}),e.jsx(re,{value:"For Repair",children:"For Repair"})]})}),e.jsx(P.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(be,{type:"primary",htmlType:"submit",icon:e.jsx(Xa,{}),size:"small",style:{background:"var(--theme-card-head-bg, #5fe7a7)",border:"none",borderRadius:"8px",padding:"10px",height:"auto",fontSize:"14px",fontWeight:"600",color:"black"},children:"Update Item"})})})]})})]})})})})})},{Option:Ve}=he,{Title:Pi}=Mt,Oi=({visible:t,onClose:r,item:a,onEdit:s,isLoading:i})=>{const[o]=P.useForm(),[m,l]=n.useState(!1),{logUserActivity:c}=zt(),{logUserNotification:d}=Yt(),u=Rt(),b=Et(),y=()=>{const g=u.token&&u.userData,S=b.token&&b.userData;if(g)return u.userData;if(S)return b.userData;const j=ft.get("username"),v=ft.get("user_id");return j&&v?{username:j,id:v}:null};n.useEffect(()=>{var g;if(t&&a){const S=(g=a.location)==null?void 0:g.includes("Head Office");l(S);let j="Other",v,p;if(S){j="Head Office";const w=a.location.split(" - ");w.length>1&&(v=w[1])}else p=a.location;o.setFieldsValue({type:a.type,brand:a.brand,originalQuantity:a.quantity,quantity:1,condition:a.condition,status:a.status,remarks:a.remarks,locationType:j,department:v,location:p,issuedDate:a.issuedDate?$e(a.issuedDate):void 0})}},[t,a,o]);const k=async g=>{var S;try{if(!a)return;const v=(await lt()).find(G=>G.id===a.id);if(!v){ta.error("Item not found in inventory.");return}if(v.quantity===1){ta.warning("Cannot redistribute item with quantity of 1.");return}if(!g.quantity||g.quantity<=0||g.quantity>=v.quantity){ta.error("New quantity must be greater than 0 and less than existing quantity.");return}const p=g.locationType==="Head Office"?`Head Office - ${g.department}`:g.location,w=g.issuedDate?$e(g.issuedDate).format("YYYY-MM-DD"):null,E={id:v.id,newQuantity:g.quantity,newLocation:p,issuedDate:w,condition:g.condition,status:g.status,remarks:((S=g.remarks)==null?void 0:S.trim())||null};await s(E);const V=y();V&&(await c(V.username,"Item Redistributed",`Item "${v.type}" has been redistributed to ${p} with quantity ${g.quantity}.`),await d("Item Redistributed",`Item "${v.type}" has been redistributed to ${p} with quantity ${g.quantity}.`)),o.resetFields(),r()}catch(j){console.error(j),ta.error("Failed to redistribute item.")}},D=()=>{o.resetFields(),l(!1),r()};return e.jsx(Lt,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(Pi,{level:3,className:"mb-0 font-semibold",children:"Redistribute Item"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Create a new item from existing stock"})]}),open:t,onCancel:D,footer:null,width:1e3,className:"custom-card",styles:{body:{padding:0},header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"var(--theme-card-head-bg, #5fe7a7)",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsx("div",{className:"p-8 bg-gray-50",children:e.jsx(Gt,{className:"shadow-lg border-0",children:e.jsx(P,{form:o,onFinish:k,layout:"vertical",children:e.jsxs(Ot,{gutter:[32,24],children:[e.jsx(We,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Type is required"}],children:e.jsx(ye,{disabled:!0,size:"medium"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Brand is required"}],children:e.jsx(ye,{disabled:!0,size:"medium"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Original Quantity"}),name:"originalQuantity",rules:[{required:!0,message:"Original quantity is required"}],children:e.jsx(ye,{disabled:!0,size:"medium"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"New Quantity to Redistribute"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity to redistribute"},{validator:(g,S)=>!S||S<1?Promise.reject("Quantity must be at least 1"):S>=(a==null?void 0:a.quantity)?Promise.reject(`Quantity must be less than ${a==null?void 0:a.quantity}`):Promise.resolve()}],children:e.jsx(ye,{size:"medium",type:"number",min:1,max:a!=null&&a.quantity?a.quantity-1:1,placeholder:"Enter quantity"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",children:e.jsx(ye.TextArea,{size:"medium",rows:3,placeholder:"Enter remarks (optional)"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",children:e.jsx(Ye,{size:"medium",format:"YYYY-MM-DD",className:"w-full",placeholder:"Select date"})})]})}),e.jsx(We,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition"}],children:e.jsxs(he,{size:"medium",placeholder:"Select condition",children:[e.jsx(Ve,{value:"Brand New",children:"Brand New"}),e.jsx(Ve,{value:"Good Condition",children:"Good Condition"}),e.jsx(Ve,{value:"Defective",children:"Defective"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status"}],children:e.jsxs(he,{size:"medium",placeholder:"Select status",children:[e.jsx(Ve,{value:"On Stock",children:"On Stock"}),e.jsx(Ve,{value:"Deployed",children:"Deployed"}),e.jsx(Ve,{value:"For Repair",children:"For Repair"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Location Type"}),name:"locationType",rules:[{required:!0,message:"Please select a location type"}],children:e.jsxs(he,{size:"medium",placeholder:"Select location type",onChange:g=>l(g==="Head Office"),children:[e.jsx(Ve,{value:"Head Office",children:"Head Office"}),e.jsx(Ve,{value:"Other",children:"Other (Specify)"})]})}),m?e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department"}],children:e.jsxs(he,{size:"medium",placeholder:"Select department",children:[e.jsx(Ve,{value:"SOD",children:"SOD"}),e.jsx(Ve,{value:"CID",children:"CID"}),e.jsx(Ve,{value:"GAD",children:"GAD"}),e.jsx(Ve,{value:"HRD",children:"HRD"}),e.jsx(Ve,{value:"AFD",children:"AFD"}),e.jsx(Ve,{value:"EOD",children:"EOD"}),e.jsx(Ve,{value:"BDO",children:"BDO"})]})}):e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a specific location"}],children:e.jsx(ye,{size:"medium",placeholder:"Enter location"})}),e.jsx(P.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(be,{type:"primary",htmlType:"submit",icon:e.jsx(ha,{}),loading:i,disabled:i,size:"small",style:{background:"var(--theme-card-head-bg, #5fe7a7)",border:"none",borderRadius:"8px",padding:"10px",height:"auto",fontSize:"14px",fontWeight:"600",color:"black"},children:"Redistribute"})})})]})})]})})})})})},Ri=(t,r="")=>{let a;switch(t){case"On Stock":a="green";break;case"For Repair":a="volcano";break;case"Deployed":a="blue";break;default:a="gray"}return e.jsx(Ja,{color:a,className:"text-wrap text-center",children:e.jsx(Le,{text:t,searchTerm:r})})},Ei=(t,r="")=>{let a;switch(t){case"Brand New":a="gold";break;case"Good Condition":a="green";break;case"Defective":a="red";break;default:a="gray"}return e.jsx(Ja,{color:a,className:"text-wrap text-center",children:e.jsx(Le,{text:t,searchTerm:r})})},sa=(t,r,a,s,i,o="")=>{const m=[{title:"ID",dataIndex:"id",key:"id",align:"center",width:"120px",className:"text-xs overflow-auto",sorter:(l,c)=>l.id.localeCompare(c.id),render:l=>e.jsx(Le,{text:l,searchTerm:o})},{title:"Type",dataIndex:"type",key:"type",align:"center",width:"100px",className:"text-xs overflow-auto",responsive:["sm"],render:l=>e.jsx(Le,{text:l,searchTerm:o}),filters:[{text:"AVR",value:"AVR"},{text:"Battery",value:"Battery"},{text:"Biometrics",value:"Biometrics"},{text:"Camera",value:"Camera"},{text:"CCTV",value:"CCTV"},{text:"Charger",value:"Charger"},{text:"Guard Tour Chips",value:"Guard Tour Chips"},{text:"Guard Tour System",value:"Guard Tour System"},{text:"Headset",value:"Headset"},{text:"Keyboard",value:"Keyboard"},{text:"Laptop",value:"Laptop"},{text:"Megaphone",value:"Megaphone"},{text:"WIFI-Mesh",value:"WIFI-Mesh"},{text:"Metal Detector",value:"Metal Detector"},{text:"Microphone",value:"Microphone"},{text:"Modem",value:"Modem"},{text:"Monitor",value:"Monitor"},{text:"Mouse",value:"Mouse"},{text:"Others",value:"Others"},{text:"Pedestal",value:"Pedestal"},{text:"Podium",value:"Podium"},{text:"Printer",value:"Printer"},{text:"Radio",value:"Radio"},{text:"Router",value:"Router"},{text:"Search Stick",value:"Search Stick"},{text:"Searchlight",value:"Searchlight"},{text:"Smartphone",value:"Smartphone"},{text:"Speaker",value:"Speaker"},{text:"Switch",value:"Switch"},{text:"System Unit",value:"System Unit"},{text:"Under Chassis",value:"Under Chassis"},{text:"UPS",value:"UPS"}],onFilter:(l,c)=>c.type.includes(l)},{title:"Brand",dataIndex:"brand",key:"brand",align:"center",width:"100px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,c)=>l.brand.localeCompare(c.brand),render:l=>e.jsx(Le,{text:l,searchTerm:o})},{title:"Qty",dataIndex:"quantity",key:"quantity",align:"center",width:"80px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],sorter:(l,c)=>l.quantity-c.quantity,render:l=>e.jsx(Le,{text:l,searchTerm:o})},{title:"Remarks",dataIndex:"remarks",key:"remarks",align:"center",width:"200px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],render:l=>e.jsx(Le,{text:l&&l.trim()!==""?l:"-",searchTerm:o})},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",align:"center",width:"150px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],sorter:(l,c)=>{var d;return(d=l.serialNumber)==null?void 0:d.localeCompare(c.serialNumber||"")},render:l=>e.jsx(Le,{text:l&&l.trim()!==""?l:"-",searchTerm:o})},...i==="default"?[{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,c)=>{const d=new Date(l.issuedDate),u=new Date(c.issuedDate);return a==="newest"?u-d:d-u},render:l=>e.jsx(Le,{text:!l||l==="0000-00-00"?"NO DATE":l,searchTerm:o})},{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,c)=>{const d=new Date(l.purchaseDate),u=new Date(c.purchaseDate);return a==="newest"?u-d:d-u},render:l=>e.jsx(Le,{text:l,searchTerm:o})}]:i==="issuedDate"?[{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,c)=>{const d=new Date(l.issuedDate),u=new Date(c.issuedDate);return a==="newest"?u-d:d-u},render:l=>e.jsx(Le,{text:!l||l==="0000-00-00"?"NO DATE":l,searchTerm:o})}]:[{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,c)=>{const d=new Date(l.purchaseDate),u=new Date(c.purchaseDate);return a==="newest"?u-d:d-u},render:l=>e.jsx(Le,{text:l,searchTerm:o})}],{title:"Condition",dataIndex:"condition",key:"condition",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],render:l=>Ei(l,o),filters:[{text:"Brand New",value:"Brand New"},{text:"Good Condition",value:"Good Condition"},{text:"Defective",value:"Defective"}],onFilter:(l,c)=>c.condition.includes(l)},{title:"Detachment/Office",dataIndex:"location",key:"location",align:"center",width:"150px",className:"text-xs overflow-auto",responsive:["sm"],render:l=>e.jsx(Le,{text:l,searchTerm:o})},{title:"Status",dataIndex:"status",key:"status",align:"center",width:"110px",className:"text-xs overflow-auto",responsive:["sm"],render:l=>Ri(l,o),filters:[{text:"On Stock",value:"On Stock"},{text:"For Repair",value:"For Repair"},{text:"Deployed",value:"Deployed"}],onFilter:(l,c)=>c.status.includes(l)}];return s!=="guest"&&m.push({title:"Action",key:"action",align:"center",width:"80px",className:"text-xs overflow-auto",render:l=>e.jsxs(e.Fragment,{children:[e.jsx(Ue,{title:"Edit",children:e.jsx(be,{type:"text",icon:e.jsx(rr,{}),onClick:()=>t(l),size:"small"})}),l.quantity>1&&e.jsx(Ue,{title:"Redistribute",children:e.jsx(be,{type:"text",icon:e.jsx(ha,{}),onClick:()=>r(l),size:"small"})})]})}),m},{Option:gt}=he,Mi=[{key:"default",label:"Default"},{key:"issuedDate",label:"Issued Date"},{key:"purchaseDate",label:"Purchased Date"}],fl=()=>{var xe,K,A,X,ve,me;const[t,r]=n.useState(0),[a,s]=n.useState("all"),[i,o]=n.useState([]),[m,l]=n.useState(!1),[c,d]=n.useState("default"),u=_r({maxWidth:639}),{searchText:b,setSearchText:y,sortOrder:k,currentPage:D,pageSize:g,isModalVisible:S,setIsModalVisible:j,isEditModalVisible:v,setIsEditModalVisible:p,redistributeItemData:w,setRedistributeItemData:E,isRedistributeModalVisible:V,setIsRedistributeModalVisible:G,editingItem:L,isLoading:N,activeTab:h,isAdmin:C,userRole:M,paginatedData:q,totalEntries:T,handleRedistribute:$,handleRedistributeItem:I,handlePageChange:W,handleSortOrderChange:U,handleTableChange:Q,handleAddItem:z,handleEdit:Y,handleEditItem:O,handleBatchDelete:_,handleTabChange:f,rowSelection:F,dataSource:H,selectedRowKeys:R,handleRefresh:J}=di(),le=()=>{const x=H.filter(Ce=>R.includes(Ce.id));x.length>0&&zr(x)},pe=n.useMemo(()=>m?i:q,[m,i,q]),ue=n.useCallback(Br(x=>{if(x===""){l(!1);return}l(!0);const Ce=H.filter(Ie=>{if(!Ie)return!1;if(a==="all"){for(const Te in Ie){const qe=Ie[Te];if(qe&&String(qe).toLowerCase().includes(x.toLowerCase()))return!0}return!1}else{const Te=Ie[a];return Te&&String(Te).toLowerCase().includes(x.toLowerCase())}});o(Ce)},300),[H,a]),Se=n.useCallback(x=>{const Ce=x.target.value;y(Ce),ue(Ce)},[ue,y]),ee=n.useMemo(()=>{const x=[{key:"all",label:"All Columns"},{key:"id",label:"ID"},{key:"type",label:"Type"},{key:"brand",label:"Brand"},{key:"serialNumber",label:"Serial Number"},{key:"remarks",label:"Remarks"},{key:"quantity",label:"Quantity"},{key:"location",label:"Location"},{key:"status",label:"Status"},{key:"condition",label:"Condition"},{key:"issuedDate",label:"Issued Date"},{key:"purchaseDate",label:"Purchased Date"}],Ce=u?c:h;return x.filter(Ie=>Ce==="issuedDate"?Ie.key!=="purchaseDate":Ce==="purchaseDate"?Ie.key!=="issuedDate":!0)},[h,c,u]),Z=x=>({items:ee.map(Ce=>({key:Ce.key,label:e.jsx("span",{className:"break-words whitespace-normal text-xs",children:Ce.label})})),onClick:({key:Ce})=>s(Ce),selectedKeys:[a]}),de=()=>{s("all"),l(!1),o([]),r(x=>x+1),J()};return e.jsxs(Gt,{title:e.jsx("span",{className:"font-bold flex justify-center text-lgi md:text-base lg:text-lgi xl:text-xl",children:"INVENTORY"}),className:"flex flex-col w-full mx-auto bg-[#A8E1C5] rounded-xl shadow border-none",children:[e.jsxs("div",{className:"block sm:hidden mb-4",children:[e.jsx(he,{value:c,onChange:d,className:"w-full transparent-select",size:"small",children:Mi.map(x=>e.jsx(gt,{value:x.key,children:e.jsx("span",{className:"text-xs",children:x.label})},x.key))}),e.jsx("div",{className:"w-auto overflow-x-auto mt-4",children:e.jsx(Ht,{rowSelection:F,rowKey:"id",dataSource:pe,columns:sa(Y,$,k,M,c,b),pagination:!1,bordered:!0,onChange:Q,scroll:{x:"max-content",y:600},loading:N,responsive:["sm","md","lg","xl","xxl"],expandable:{expandedRowRender:x=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",x.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",x.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",x.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",x.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",x.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",x.serialNumber]}),c==="issuedDate"&&e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",x.issuedDate||"NO DATE"]}),c==="purchaseDate"&&e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",x.purchaseDate||"NO DATE"]}),c==="default"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",x.issuedDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",x.purchaseDate||"NO DATE"]})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",x.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",x.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",x.status]})]}),rowExpandable:()=>!0},className:"text-xs"},t)})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(Rn,{defaultActiveKey:"default",activeKey:h,onChange:f,type:"card",tabBarGutter:1,moreIcon:null,items:[{key:"default",label:e.jsx("span",{className:"text-xs",children:"Default"}),children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4",children:[e.jsx(qa,{menu:Z(),trigger:["click"],className:"border-black text-xs sm:block hidden theme-aware-dropdown-btn",children:e.jsxs(be,{type:"text",className:"flex items-center",children:[e.jsx(za,{className:"text-xs"}),e.jsx(kt,{children:((xe=ee.find(x=>x.key===a))==null?void 0:xe.label)||"All Columns"}),e.jsx(_a,{className:"align-middle ml-1"})]})}),e.jsx(ye,{placeholder:`Search in ${a==="all"?"all columns":(K=ee.find(x=>x.key===a))==null?void 0:K.label}`,prefix:e.jsx(Bt,{}),value:b,onChange:Se,className:"ml-1 w-auto sm:w-auto border-black text-xs",suffix:b?e.jsx(be,{type:"text",size:"small",onClick:()=>{y(""),l(!1)},className:"text-xs",children:"×"}):null}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{title:"Actions",children:(C||M==="user")&&e.jsx(be,{type:"text",icon:e.jsx(Ua,{}),onClick:()=>j(!0),className:"text-xs"})}),C&&e.jsx(Ue,{title:"Delete",children:e.jsx(be,{type:"link",icon:e.jsx(la,{}),danger:!0,disabled:R.length===0,onClick:_,className:"text-xs"})}),e.jsxs(he,{defaultValue:"Newest",className:"w-auto text-xs transparent-select",onChange:U,size:"small",children:[e.jsx(gt,{value:"Newest",children:e.jsx("span",{className:"text-xs",children:"Newest"})}),e.jsx(gt,{value:"Oldest",children:e.jsx("span",{className:"text-xs",children:"Oldest"})})]}),e.jsx(be,{onClick:de,className:"custom-button w-auto text-xs",type:"default",size:"small",icon:e.jsx(ia,{}),children:e.jsx("span",{className:"text-xs",children:"Refresh"})}),e.jsx(be,{onClick:le,icon:e.jsx(Ba,{}),size:"small",className:"custom-button w-auto text-xs",disabled:!R||R.length===0,children:e.jsx("span",{className:"text-xs",children:"Print"})})]})]}),e.jsx("div",{className:"w-auto overflow-x-auto",children:e.jsx(Ht,{rowSelection:F,rowKey:"id",dataSource:pe,columns:sa(Y,$,k,M,"default",b),pagination:!1,bordered:!0,onChange:Q,scroll:{x:"max-content",y:600},loading:N,responsive:["sm","md","lg","xl","xxl"],expandable:u?{expandedRowRender:x=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",x.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",x.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",x.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",x.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",x.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",x.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",x.issuedDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",x.purchaseDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",x.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",x.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",x.status]})]}),rowExpandable:()=>!0}:void 0,className:"text-xs"},t)})]})},{key:"issuedDate",label:e.jsx("span",{className:"text-xs",children:"Issued Date"}),children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4",children:[e.jsx(qa,{menu:Z(),trigger:["click"],className:"border-black text-xs sm:block hidden theme-aware-dropdown-btn",children:e.jsxs(be,{type:"text",className:"flex items-center",children:[e.jsx(za,{className:"text-xs"}),e.jsx(kt,{children:((A=ee.find(x=>x.key===a))==null?void 0:A.label)||"All Columns"}),e.jsx(_a,{className:"align-middle ml-1"})]})}),e.jsx(ye,{placeholder:`Search in ${a==="all"?"all columns":(X=ee.find(x=>x.key===a))==null?void 0:X.label}`,prefix:e.jsx(Bt,{}),value:b,onChange:Se,className:"ml-1 w-auto sm:w-auto border-black text-xs",suffix:b?e.jsx(be,{type:"text",size:"small",onClick:()=>{y(""),l(!1)},className:"text-xs",children:"×"}):null}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{title:"Actions",children:(C||M==="user")&&e.jsx(be,{type:"text",icon:e.jsx(Ua,{}),onClick:()=>j(!0),className:"text-xs"})}),C&&e.jsx(Ue,{title:"Delete",children:e.jsx(be,{type:"link",icon:e.jsx(la,{}),danger:!0,disabled:R.length===0,onClick:_,className:"text-xs"})}),e.jsxs(he,{defaultValue:"Newest",className:"w-auto text-xs transparent-select",onChange:U,size:"small",children:[e.jsx(gt,{value:"Newest",children:e.jsx("span",{className:"text-xs",children:"Newest"})}),e.jsx(gt,{value:"Oldest",children:e.jsx("span",{className:"text-xs",children:"Oldest"})})]}),e.jsx(be,{onClick:de,className:"custom-button w-auto text-xs",type:"default",size:"small",icon:e.jsx(ia,{}),children:e.jsx("span",{className:"text-xs",children:"Refresh"})}),e.jsx(be,{onClick:le,icon:e.jsx(Ba,{}),size:"small",className:"custom-button w-auto text-xs",disabled:!R||R.length===0,children:e.jsx("span",{className:"text-xs",children:"Print"})})]})]}),e.jsx("div",{className:"w-auto overflow-x-auto",children:e.jsx(Ht,{rowSelection:F,rowKey:"id",dataSource:pe,columns:sa(Y,$,k,M,"issuedDate",b),pagination:!1,bordered:!0,onChange:Q,scroll:{x:"max-content",y:600},loading:N,responsive:["sm","md","lg","xl","xxl"],expandable:u?{expandedRowRender:x=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",x.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",x.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",x.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",x.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",x.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",x.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",x.issuedDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",x.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",x.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",x.status]})]}),rowExpandable:()=>!0}:void 0,className:"text-xs"},t)})]})},{key:"purchaseDate",label:e.jsx("span",{className:"text-xs",children:"Purchased Date"}),children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4",children:[e.jsx(qa,{menu:Z(),trigger:["click"],className:"border-black text-xs sm:block hidden theme-aware-dropdown-btn",children:e.jsxs(be,{type:"text",className:"flex items-center",children:[e.jsx(za,{className:"text-xs"}),e.jsx(kt,{children:((ve=ee.find(x=>x.key===a))==null?void 0:ve.label)||"All Columns"}),e.jsx(_a,{className:"align-middle ml-1"})]})}),e.jsx(ye,{placeholder:`Search in ${a==="all"?"all columns":(me=ee.find(x=>x.key===a))==null?void 0:me.label}`,prefix:e.jsx(Bt,{}),value:b,onChange:Se,className:"ml-1 w-auto sm:w-auto border-black text-xs",suffix:b?e.jsx(be,{type:"text",size:"small",onClick:()=>{y(""),l(!1)},className:"text-xs",children:"×"}):null}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ue,{title:"Actions",children:(C||M==="user")&&e.jsx(be,{type:"text",icon:e.jsx(Ua,{}),onClick:()=>j(!0),className:"text-xs"})}),C&&e.jsx(Ue,{title:"Delete",children:e.jsx(be,{type:"link",icon:e.jsx(la,{}),danger:!0,disabled:R.length===0,onClick:_,className:"text-xs"})}),e.jsxs(he,{defaultValue:"Newest",className:"w-auto text-xs transparent-select",onChange:U,size:"small",children:[e.jsx(gt,{value:"Newest",children:e.jsx("span",{className:"text-xs",children:"Newest"})}),e.jsx(gt,{value:"Oldest",children:e.jsx("span",{className:"text-xs",children:"Oldest"})})]}),e.jsx(be,{onClick:de,className:"custom-button w-auto text-xs",type:"default",size:"small",icon:e.jsx(ia,{}),children:e.jsx("span",{className:"text-xs",children:"Refresh"})}),e.jsx(be,{onClick:le,icon:e.jsx(Ba,{}),size:"small",className:"custom-button w-auto text-xs",disabled:!R||R.length===0,children:e.jsx("span",{className:"text-xs",children:"Print"})})]})]}),e.jsx("div",{className:"w-auto overflow-x-auto",children:e.jsx(Ht,{rowSelection:F,rowKey:"id",dataSource:pe,columns:sa(Y,$,k,M,"purchaseDate",b),pagination:!1,bordered:!0,onChange:Q,scroll:{x:"max-content",y:600},loading:N,responsive:["sm","md","lg","xl","xxl"],expandable:u?{expandedRowRender:x=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",x.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",x.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",x.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",x.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",x.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",x.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",x.purchaseDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",x.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",x.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",x.status]})]}),rowExpandable:()=>!0}:void 0,className:"text-xs"},t)})]})}]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mt-5 space-y-2 sm:space-y-0",children:[e.jsxs(Mt.Text,{className:"w-full text-xs text-nowrap text-center sm:text-left overflow-auto",style:{color:"#072C1C"},children:["Showing data of ",T>0?(D-1)*g+1:0," to ",Math.min(D*g,T)," of ",T," entries"]}),e.jsx("div",{className:"w-full flex justify-center sm:justify-end",children:e.jsx(Yr,{current:D,pageSize:g,total:T,showSizeChanger:!0,pageSizeOptions:["10","20","30","50","100","200","500","1000","2000"],onChange:W,className:"text-xs",responsive:!0})})]}),e.jsx(Ni,{visible:S,onClose:()=>j(!1),onAdd:z,onRedistribute:I,handleEditItem:O,loading:N}),e.jsx(Ii,{visible:v,onClose:()=>p(!1),onEdit:O,item:L,loading:N}),e.jsx(Oi,{visible:V,onClose:()=>{G(!1),E(null)},onEdit:I,item:w,loading:N})]})};export{fl as default};
