const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/HistoryTable-BOcYDAKo.js","js/index-D_DjqwU6.js","css/index-1RobZ94W.css","js/HighlightText-BHuCeSLK.js","js/index-BlUNoHI2.js","js/ExportModal-DlIubpvc.js","js/index-CRHxdFZf.js","js/useBubbleLock-BNMpLRc-.js","js/index-CYk8aGXX.js","js/index-GL6TR608.js","js/index-DG92omOn.js","js/Pagination-B3MLnmFW.js","js/debounce-BtCwp3QT.js","js/cacheUtils-rgXBj3X0.js","js/offlineUtils-CjPJFgFK.js","js/FilterOutlined-B9-Kq489.js"])))=>i.map(i=>d[i]);
import{c as b,r as s,p as j,j as t,b as v,u as D,_ as S,S as k}from"./index-D_DjqwU6.js";const _=async()=>{try{return(await b.get("/getHistory.php")).data}catch(e){throw console.error("Error fetching history:",e),e}},H=v.lazy(()=>S(()=>import("./HistoryTable-BOcYDAKo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),i=()=>{const{theme:e,currentTheme:n}=D(),o=n!=="default"&&e.border||"#d1d5db",d=n!=="default"&&e.componentBackground||"#a7f3d0";return t.jsx("div",{className:"container max-w-full",children:t.jsx("div",{className:"mt-5",children:t.jsxs("div",{className:"rounded-xl shadow border-none p-6 skeleton-container",style:{backgroundColor:d},children:[t.jsx("div",{className:"h-8 rounded mb-4 animate-pulse",style:{backgroundColor:o}}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"h-10 rounded animate-pulse",style:{backgroundColor:o}}),t.jsx("div",{className:"h-96 rounded animate-pulse",style:{backgroundColor:o}}),t.jsx("div",{className:"h-8 rounded animate-pulse",style:{backgroundColor:o}})]})]})})})},N=()=>{const[e,n]=s.useState([]),[o,d]=s.useState(!0),[u,c]=s.useState(null),[y,m]=s.useState(null),h=s.useMemo(()=>{if(!e||e.length===0)return{addedData:[],updatedData:[],deletedData:[],inventoryData:[]};const r=e.filter(a=>a.action==="Added"),f=e.filter(a=>a.action==="Updated"||a.action==="QRCode Update"),x=e.filter(a=>a.action==="Deleted"),g=r.map(a=>({type:a.type,quantity:a.quantity}));return{addedData:r,updatedData:f,deletedData:x,inventoryData:g}},[e]),l=s.useCallback(async()=>{try{d(!0),c(null);const r=await _();n(r),m(Date.now())}catch(r){console.error("Error fetching history data:",r),c(r.message)}finally{d(!1)}},[]);s.useEffect(()=>{j([k]),l()},[l]);const p=s.useCallback(()=>{l()},[l]);return o?t.jsx(i,{}):t.jsx("div",{className:"container max-w-full",children:t.jsx("div",{className:"mt-5",children:t.jsx(s.Suspense,{fallback:t.jsx(i,{}),children:t.jsx(H,{historyData:e,processedData:h,loading:o,error:u,onRefresh:p,lastSyncTime:y})})})})},E=Object.freeze(Object.defineProperty({__proto__:null,default:N},Symbol.toStringTag,{value:"Module"}));export{E as H,_ as g};
