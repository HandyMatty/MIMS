import{j as e,a3 as G,r as l,u as V,s as S,B as D,a4 as K}from"./index-CoTjVTXu.js";import{g as $}from"./addItemToInventory-UNG0Q4vs.js";import{Q as H}from"./QrCodeModal-VNjfzLfB.js";import{H as n}from"./HighlightText-2pS5ok3g.js";import{T as R}from"./index-DX3u3_2E.js";import{u as W,F as _}from"./index-cS6mKtwe.js";import{R as J,h as U}from"./printUtils-h8SPFVvH.js";import{S as O}from"./index-FFLaIl49.js";import{T as X}from"./index-r6vKt3ij.js";import{P as Y}from"./Pagination-BTBkJFo1.js";import"./index-C1uGnGf1.js";import"./createForOfIteratorHelper-_GrxZFqs.js";import"./addEventListener-C2_QGBxY.js";import"./index-DS9BMYTm.js";import"./index-Bd7YzGv1.js";import"./Dropdown-IxbQZqzH.js";import"./move-CeDiqiSl.js";import"./useBreakpoint-BTN1QGJk.js";import"./useForceUpdate-qFMU9LT5.js";import"./responsiveObserver-B_NheYvK.js";import"./SearchOutlined-oi5dMXdq.js";import"./index-GjVEIOir.js";import"./TextArea-C-Yc_kQs.js";import"./EyeOutlined-CY0v74EL.js";import"./CheckOutlined-7lQp5xtI.js";const Z=(o,a="")=>{let t;switch(o){case"On Stock":t="green";break;case"For Repair":t="volcano";break;case"Deployed":t="blue";break;default:t="gray"}return e.jsx(R,{color:t,className:"text-wrap text-center",children:e.jsx(n,{text:o,searchTerm:a})})},ee=(o,a="")=>{let t;switch(o){case"Brand New":t="gold";break;case"Good Condition":t="green";break;case"Defective":t="red";break;default:t="gray"}return e.jsx(R,{color:t,className:"text-wrap text-center",children:e.jsx(n,{text:o,searchTerm:a})})},te=(o,a="")=>[{title:"QR Code",dataIndex:"qrCode",key:"qrCode",align:"center",width:"80px",className:"text-xs overflow-auto",responsive:["sm"],render:(t,r)=>e.jsx(G,{style:{fontSize:"24px",cursor:"pointer"},onClick:()=>o(r),title:"Generate QR Code"})},{title:"ID",dataIndex:"id",key:"id",align:"center",sorter:!0,width:"130px",className:"text-xs overflow-auto",responsive:["xs","sm","md","lg","xl","xxl"],render:t=>e.jsx(n,{text:t,searchTerm:a})},{title:"Type",dataIndex:"type",key:"type",align:"center",sorter:!0,width:"120px",className:"text-xs overflow-auto",responsive:["sm","md","lg","xl","xxl"],render:t=>e.jsx(n,{text:t,searchTerm:a})},{title:"Brand",dataIndex:"brand",key:"brand",align:"center",sorter:!0,width:"120px",className:"text-xs overflow-auto",responsive:["md","lg","xl","xxl"],render:t=>e.jsx(n,{text:t,searchTerm:a})},{title:"Qty",dataIndex:"quantity",key:"quantity",align:"center",width:"70px",className:"text-xs overflow-auto text-wrap",sorter:(t,r)=>t.quantity-r.quantity,responsive:["xs","sm","md","lg","xl","xxl"],render:t=>e.jsx(n,{text:t,searchTerm:a})},{title:"Remarks",dataIndex:"remarks",key:"remarks",align:"center",width:"200px",className:"text-xs overflow-auto text-wrap",responsive:["lg","xl","xxl"],render:t=>e.jsx(n,{text:t&&t.trim()!==""?t:"-",searchTerm:a})},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",align:"center",sorter:!0,width:"170px",className:"text-xs overflow-auto text-wrap",responsive:["lg","xl","xxl"],render:t=>e.jsx(n,{text:t&&t.trim()!==""?t:"-",searchTerm:a})},{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",sorter:!0,width:"120px",className:"text-xs overflow-auto",responsive:["md","lg","xl","xxl"],render:t=>!t||t==="0000-00-00"||t===""?e.jsx(n,{text:"NO DATE",searchTerm:a}):e.jsx(n,{text:t,searchTerm:a})},{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",sorter:!0,width:"120px",className:"text-xs overflow-auto",responsive:["md","lg","xl","xxl"],render:t=>!t||t==="0000-00-00"||t===""?e.jsx(n,{text:"NO DATE",searchTerm:a}):e.jsx(n,{text:t,searchTerm:a})},{title:"Condition",dataIndex:"condition",key:"condition",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm","md","lg","xl","xxl"],render:t=>ee(t,a),filters:[{text:"Brand New",value:"Brand New"},{text:"Good Condition",value:"Good Condition"},{text:"Defective",value:"Defective"}],onFilter:(t,r)=>r.condition.includes(t)},{title:"Detachment/Office",dataIndex:"location",key:"location",align:"center",width:"150px",className:"text-xs overflow-auto",responsive:["md","lg","xl","xxl"],render:t=>e.jsx(n,{text:t,searchTerm:a})},{title:"Status",dataIndex:"status",key:"status",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm","md","lg","xl","xxl"],render:t=>Z(t,a),filters:[{text:"On Stock",value:"On Stock"},{text:"For Repair",value:"For Repair"},{text:"Deployed",value:"Deployed"}],onFilter:(t,r)=>r.status.includes(t)}],{Option:I}=O,Re=({searchText:o})=>{const[a,t]=l.useState([]),[r,u]=l.useState(1),[d,P]=l.useState(10),[Q,w]=l.useState(!1),[q,z]=l.useState(null),[se,j]=l.useState("newest"),[m,p]=l.useState({field:"id",order:"descend"}),[B,v]=l.useState(!0),[f,y]=l.useState([]),b=W({maxWidth:639}),{theme:h,currentTheme:N}=V(),g=l.useCallback(async()=>{v(!0);try{const s=await $();t(s)}catch{S.error("Failed to load inventory data.")}finally{v(!1)}},[]);l.useEffect(()=>{g()},[g]);const F=()=>{u(1),j("newest"),p({field:"id",order:"descend"}),y([]),g()},E=()=>{const s=a.filter(i=>f.includes(i.id));s.length>0?U(s):S.warning("Please select items to print.")},C=[...Array.isArray(a)?a.filter(s=>Object.values(s).join(" ").toLowerCase().includes(o.toLowerCase())):[]].sort((s,i)=>{if(m.field&&m.order){const{field:c,order:k}=m;if(k==="ascend")return s[c]>i[c]?1:-1;if(k==="descend")return s[c]<i[c]?1:-1}return 0}),x=C.length,M=(s,i)=>{u(s),P(i)},L=s=>{j(s.toLowerCase());const i=s.toLowerCase()==="newest"?"descend":"ascend";p({field:"id",order:i}),u(1)},T=s=>{z(s),w(!0)},A=s=>{s.field&&p({field:s.field,order:s.order})};return e.jsxs("div",{className:"w-full h-full mx-auto bg-[#a7f3d0] rounded-xl shadow border-none p-8",style:N!=="default"?{background:h.componentBackground,color:h.text}:{},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 space-y-2 sm:space-y-0",children:[e.jsxs(O,{defaultValue:"Newest",className:"w-full sm:w-auto transparent-select",onChange:L,size:"small",children:[e.jsx(I,{value:"Newest",children:e.jsx("span",{className:"text-xs sm:text-sm text-black",children:"Newest"})}),e.jsx(I,{value:"Oldest",children:e.jsx("span",{className:"text-xs sm:text-sm text-black",children:"Oldest"})})]}),e.jsx(D,{onClick:F,icon:e.jsx(K,{}),size:"small",className:"custom-button text-xs",children:"Refresh"}),e.jsx(D,{onClick:E,icon:e.jsx(J,{}),size:"small",className:"custom-button text-xs",disabled:f.length===0,children:"Print"})]}),e.jsx("div",{className:"w-auto overflow-x-auto",children:e.jsx(_,{rowSelection:{selectedRowKeys:f,onChange:s=>y(s)},columns:te(T,o),dataSource:C.slice((r-1)*d,r*d),pagination:!1,expandable:b?{expandedRowRender:s=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",s.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",s.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",s.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",s.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",s.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",s.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",s.issuedDate]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",s.purchaseDate]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",s.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",s.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",s.status]})]}),rowExpandable:()=>!0}:void 0,bordered:!0,rowKey:"id",onChange:A,scroll:{x:"max-content",y:500},loading:B,responsive:{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-center sm:justify-between mt-7 sm:mt-10 space-y-2 sm:space-y-0",children:[e.jsxs(X.Text,{className:"w-full text-xs text-nowrap text-center sm:text-left overflow-auto",style:N!=="default"?{color:h.text}:{color:"#072C1C"},children:["Showing data of ",x>0?(r-1)*d+1:0," to"," ",Math.min(r*d,x)," of ",x," entries"]}),e.jsx("div",{className:"w-full flex justify-center sm:justify-end",children:e.jsx(Y,{current:r,pageSize:d,total:x,showSizeChanger:!b,pageSizeOptions:["10","20","30","50","100","200","500","1000","2000"],onChange:M,className:"text-xs",responsive:!0})})]}),e.jsx(H,{isVisible:Q,onClose:()=>w(!1),qrDetails:q})]})};export{Re as default};
