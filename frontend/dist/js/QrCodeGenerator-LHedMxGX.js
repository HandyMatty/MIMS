import{r as o,d as H,e as K,v as Y,t as J,u as Z,j as e,h as Q,aK as _,P as X,bs as z,S as ee,be as G,B as x}from"./index-Cq9w5H2m.js";import{u as se}from"./index-CVya9Qnf.js";import{g as v,d as te,c as oe,p as le,Q as ae,a as de}from"./qrCodeUtils-DEq3Bs4U.js";import"./createForOfIteratorHelper-ZMyofER8.js";const xe=({itemDetails:l,previewItems:m})=>{const[h,k]=o.useState("PNG"),[u,C]=o.useState("MEDIUM"),p=o.useRef(null),{logUserActivity:b}=H(),{logUserNotification:f}=K(),{userData:r}=Y(),{userData:i}=J(),{theme:t,currentTheme:a}=Z(),j=o.useMemo(()=>(r==null?void 0:r.username)||(i==null?void 0:i.username)||"Unknown User",[r==null?void 0:r.username,i==null?void 0:i.username]),c=o.useMemo(()=>r||i,[r,i]),y=o.useMemo(()=>v(l||{}),[l]),I=o.useCallback(s=>{s==="PNG"?te(p,l.id):oe(p,l.id),b(j,"Download QR Code",`Downloaded QR code in ${s} format`),f("Downloaded QR CODE",`You successfully downloaded QR code in ${s} format`)},[l==null?void 0:l.id,b,f,j]),O=o.useCallback(()=>{const s=de[u];le(p,s,l.id),b(j,"Print QR Code",`Printed QR code for item with serial number: ${l.serialNumber}`),f("Printed QR CODE",`You successfully printed QR code for item with serial number: ${l.serialNumber}`)},[u,l==null?void 0:l.id,l==null?void 0:l.serialNumber,b,f,j]),R=o.useCallback(s=>{const d=h===s;return a==="default"?{backgroundColor:d?"#d9f99d":"#EAF4E2",color:"#072C1C"}:{backgroundColor:d?t.CardHead:t.componentBackground,color:t.text}},[h,a,t]),g=o.useCallback(s=>{const d=u===s;return a==="default"?{backgroundColor:d?"#d9f99d":"#EAF4E2",color:"#072C1C"}:{backgroundColor:d?t.CardHead:t.componentBackground,color:t.text}},[u,a,t]),M=o.useMemo(()=>a!=="default"?{backgroundColor:t.componentBackground,color:t.text}:{backgroundColor:"#A8E1C5"},[a,t]),L=o.useMemo(()=>a!=="default"?{backgroundColor:t.background,border:"1px solid",borderRadius:"8px"}:{backgroundColor:"#A8E1C5",border:"1px solid #072C1C",borderRadius:"8px"},[a,t]),B=o.useMemo(()=>a!=="default"?{display:"inline-block",border:"1px solid",borderRadius:"8px",padding:"0",width:"250px",height:"250px",maxWidth:"100%"}:{display:"inline-block",border:"1px solid #072C1C",borderRadius:"8px",padding:"0",width:"250px",height:"250px",maxWidth:"100%"},[a,t]),q=o.useMemo(()=>({label:a!=="default"?{fontWeight:"bold",color:t.text,width:"auto"}:{fontWeight:"bold",color:"#072C1C",width:"auto"},content:a!=="default"?{color:t.text}:{color:"#072C1C"}}),[a,t]),T=o.useMemo(()=>a!=="default"?{color:t.text}:{},[a,t]),A=o.useMemo(()=>a!=="default"?{color:t.text}:{color:"#072C1C"},[a,t]),W=o.useMemo(()=>Object.entries(y).filter(([s])=>!(s==="quantity"&&y.serialNumber!=="N/A")),[y]),[N,F]=o.useState(1),[S,$]=o.useState(5),E=se({maxWidth:639}),U=o.useMemo(()=>E?{expandedRowRender:s=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",s.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",s.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",s.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",s.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",s.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",s.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",s.issuedDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",s.purchaseDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",s.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",s.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",s.status]})]}),rowExpandable:()=>!0}:void 0,[E]);if(m&&Array.isArray(m)){const s=m[0]||l||{},d={id:80,type:120,brand:120,quantity:90,remarks:160,serialNumber:120,issuedDate:120,purchaseDate:120,condition:110,location:150,status:100},V=Object.keys(v(s)).map(n=>({title:n.charAt(0).toUpperCase()+n.slice(1),dataIndex:n,key:n,width:d[n]||120,render:w=>e.jsx("span",{className:"text-xs",children:w})})),P=m.map(n=>v(n)),D=P.slice((N-1)*S,N*S);return e.jsxs(Q,{title:e.jsx("span",{className:"text-lgi sm:text-sm md:text-base lg:text-lgi xl:text-xl font-bold flex justify-center",children:"QR Code Details Preview"}),className:"flex flex-col w-full mx-auto rounded-xl shadow border-none",style:M,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsx(_,{dataSource:D,columns:V,rowKey:"id",pagination:!1,bordered:!0,scroll:{x:"max-content",y:600},size:"small",className:"text-xs",locale:{emptyText:e.jsx("span",{className:"text-xs",children:"No items selected."})},expandable:U})}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(X,{current:N,pageSize:S,total:P.length,onChange:(n,w)=>{F(n),$(w)},showSizeChanger:!0,pageSizeOptions:["5","10","20","50"],className:"text-xs"})})]})}return e.jsx(Q,{title:e.jsx("span",{className:"text-lgi sm:text-sm md:text-base lg:text-lgi xl:text-xl font-bold flex justify-center",children:"QR CODE"}),className:"flex flex-col w-full mx-auto rounded-xl shadow border-none",style:M,children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-6",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx("div",{className:"p-4 rounded-lg shadow",style:L,children:e.jsx(z,{title:e.jsx("div",{className:"text-center font-bold md:text-lgi overflow-auto text-lgi",style:T,children:"Item Details"}),className:"text-xs",bordered:!0,column:1,size:"small",styles:q,children:W.map(([s,d])=>e.jsx(z.Item,{label:s,children:e.jsx("span",{className:"text-xs overflow-auto wrap-text w-auto",children:d})},s))})})}),e.jsxs("div",{className:"w-full md:w-1/2 flex flex-col items-center space-y-4 mt-6 md:mt-0",children:[e.jsx("div",{ref:p,style:B,children:e.jsx(ae,{icon:ee,iconSize:50,value:JSON.stringify(y),type:"svg",style:{width:"100%",height:"100%",border:"none"}})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"font-bold text-sm mb-2",style:A,children:"Image format:"}),e.jsxs(G.Compact,{children:[e.jsx(x,{type:"primary",className:"text-xs",onClick:()=>k("PNG"),style:R("PNG"),disabled:!c,children:"PNG"}),e.jsx(x,{type:"primary",className:"text-xs",onClick:()=>k("SVG"),style:R("SVG"),disabled:!c,children:"SVG"})]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"font-bold text-sm mb-2",style:A,children:"Print size:"}),e.jsxs(G.Compact,{children:[e.jsx(x,{type:"primary",className:"text-xs",onClick:()=>C("SMALL"),style:g("SMALL"),disabled:!c,children:"Small"}),e.jsx(x,{type:"primary",className:"text-xs",onClick:()=>C("MEDIUM"),style:g("MEDIUM"),disabled:!c,children:"Medium"}),e.jsx(x,{type:"primary",className:"text-xs",onClick:()=>C("LARGE"),style:g("LARGE"),disabled:!c,children:"Large"})]})]}),e.jsxs(x,{onClick:()=>I(h),className:"qr-action-btn shadow-md text-xs",type:"primary",style:{width:"100%",maxWidth:"177px",height:"31px"},disabled:!c,children:["Download ",h]}),e.jsxs(x,{onClick:O,className:"qr-action-btn shadow-md text-xs",type:"primary",style:{width:"100%",maxWidth:"177px",height:"31px"},disabled:!c,children:["Print QR Code (",u.toLowerCase(),")"]})]})]})})};export{xe as default};
