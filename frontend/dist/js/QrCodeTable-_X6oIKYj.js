import{j as e,a3 as X,r as a,B as F,aA as Y}from"./index-Bfv_RYKM.js";import{g as Z}from"./addItemToInventory-CvTWKOPd.js";import{Q as ee}from"./QrCodeModal-CUwbFykX.js";import{H as o}from"./HighlightText-Br3j19mj.js";import{T as M}from"./index-Bo17F_wH.js";import{d as te}from"./debounce-Bbnqe4V5.js";import{u as se,F as ae}from"./index-DgGshNjw.js";import{C as le}from"./index-C2F5TDUc.js";import{D as re,S as ne}from"./index-9RLLIFz7.js";import{R as oe,S as Q}from"./index-Ckb53lhV.js";import{R as ie}from"./FilterOutlined-BAxS69vU.js";import{I as ce}from"./index-eFG5XlKP.js";import{R as de}from"./SearchOutlined-DVBhVuGZ.js";import{T as xe}from"./index-mXndb-Dc.js";import{P as ue}from"./Pagination-B-pym6de.js";import"./index-D5Kz4ytj.js";import"./createForOfIteratorHelper-D6wG0jg3.js";import"./addEventListener-Dy8rsZb5.js";import"./index-hrGg1JAw.js";import"./useBreakpoint-DjwzN-EJ.js";import"./useForceUpdate-UmoMdvYc.js";import"./responsiveObserver-DpdOGnt2.js";import"./PlusOutlined-BmIFcUcQ.js";import"./Dropdown-DdpZg6k3.js";import"./move-CQO4rCAV.js";import"./TextArea-Bk2TBN4c.js";import"./CheckOutlined-nId50N2-.js";import"./EyeOutlined-ChXYwmpH.js";const me=(i,r="")=>{let t;switch(i){case"On Stock":t="green";break;case"For Repair":t="volcano";break;case"Deployed":t="blue";break;default:t="gray"}return e.jsx(M,{color:t,className:"text-wrap text-center",children:e.jsx(o,{text:i,searchTerm:r})})},pe=(i,r="")=>{let t;switch(i){case"Brand New":t="gold";break;case"Good Condition":t="green";break;case"Defective":t="red";break;default:t="gray"}return e.jsx(M,{color:t,className:"text-wrap text-center",children:e.jsx(o,{text:i,searchTerm:r})})},fe=(i,r="")=>[{title:"QR Code",dataIndex:"qrCode",key:"qrCode",align:"center",width:"70px",className:"text-xs overflow-auto",render:(t,l)=>e.jsx(X,{style:{fontSize:"24px",cursor:"pointer"},onClick:()=>i(l),title:"Generate QR Code"})},{title:"ID",dataIndex:"id",key:"id",align:"center",className:"text-xs overflow-auto",width:"120px",sorter:(t,l)=>t.id.localeCompare(l.id),render:t=>e.jsx(o,{text:t,searchTerm:r})},{title:"Type",dataIndex:"type",key:"type",align:"center",className:"text-xs overflow-auto",responsive:["sm"],width:"120px",sorter:(t,l)=>t.type.localeCompare(l.type),render:t=>e.jsx(o,{text:t,searchTerm:r})},{title:"Brand",dataIndex:"brand",key:"brand",align:"center",className:"text-xs overflow-auto",width:"120px",responsive:["sm"],sorter:(t,l)=>t.brand.localeCompare(l.brand),render:t=>e.jsx(o,{text:t,searchTerm:r})},{title:"Qty",dataIndex:"quantity",key:"quantity",align:"center",className:"text-xs overflow-auto text-wrap",responsive:["sm"],width:"70px",sorter:(t,l)=>t.quantity-l.quantity,render:t=>e.jsx(o,{text:t,searchTerm:r})},{title:"Remarks",dataIndex:"remarks",key:"remarks",align:"center",className:"text-xs overflow-auto text-wrap",responsive:["sm"],width:"200px",render:t=>e.jsx(o,{text:t&&t.trim()!==""?t:"-",searchTerm:r})},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",align:"center",width:"170px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],sorter:(t,l)=>t.serialNumber.localeCompare(l.serialNumber),render:t=>e.jsx(o,{text:t&&t.trim()!==""?t:"-",searchTerm:r})},{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",className:"text-xs overflow-auto",width:"110px",responsive:["sm"],sorter:(t,l)=>t.issuedDate.localeCompare(l.issuedDate),render:t=>!t||t==="0000-00-00"||t===""?e.jsx(o,{text:"NO DATE",searchTerm:r}):e.jsx(o,{text:t,searchTerm:r})},{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",width:"110px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(t,l)=>t.purchaseDate.localeCompare(l.purchaseDate),render:t=>!t||t==="0000-00-00"||t===""?e.jsx(o,{text:"NO DATE",searchTerm:r}):e.jsx(o,{text:t,searchTerm:r})},{title:"Condition",dataIndex:"condition",key:"condition",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],render:t=>pe(t,r),filters:[{text:"Brand New",value:"Brand New"},{text:"Good Condition",value:"Good Condition"},{text:"Defective",value:"Defective"}],onFilter:(t,l)=>l.condition.includes(t)},{title:"Detachment/Office",dataIndex:"location",key:"location",align:"center",width:"150px",className:"text-xs overflow-auto",responsive:["sm"],render:t=>e.jsx(o,{text:t,searchTerm:r})},{title:"Status",dataIndex:"status",key:"status",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],render:t=>me(t,r),filters:[{text:"On Stock",value:"On Stock"},{text:"For Repair",value:"For Repair"},{text:"Deployed",value:"Deployed"}],onFilter:(t,l)=>l.status.includes(t)}],{Option:A}=Q,Ge=({onItemSelect:i})=>{var R,O;const[r,t]=a.useState(""),[l,g]=a.useState("newest"),[u,y]=a.useState(1),[m,q]=a.useState(10),[p,E]=a.useState([]),[L,C]=a.useState(!1),[j,w]=a.useState(null),[P,B]=a.useState(!0),[d,N]=a.useState("all"),[D,z]=a.useState([]),[S,v]=a.useState(!1),T=se({maxWidth:639});a.useEffect(()=>{(async()=>{try{const n=await Z();if(Array.isArray(n)){const c=[...n].sort((x,b)=>b.id-x.id);E(c),c.length>0&&!j&&(i(c[0]),w(c[0]))}else console.error("Received invalid data:",n)}catch(n){console.error("Failed to load inventory data:",n)}finally{B(!1)}})()},[i,j]);const f=a.useMemo(()=>[{key:"all",label:"All Columns"},{key:"id",label:"ID"},{key:"type",label:"Type"},{key:"brand",label:"Brand"},{key:"quantity",label:"Quantity"},{key:"remarks",label:"Remarks"},{key:"serialNumber",label:"Serial Number"},{key:"issuedDate",label:"Issued Date"},{key:"purchaseDate",label:"Purchase Date"},{key:"location",label:"Location"},{key:"status",label:"Status"},{key:"condition",label:"Condition"}],[]),k=a.useMemo(()=>S?D:p,[S,D,p]),V=a.useMemo(()=>[...k].sort((s,n)=>l==="newest"?n.id-s.id:l==="oldest"?s.id-n.id:0),[k,l]),I=a.useCallback(te(s=>{if(s===""){v(!1);return}v(!0);const n=p.filter(c=>{if(!c)return!1;if(d==="all"){for(const x in c){const b=c[x];if(b&&String(b).toLowerCase().includes(s.toLowerCase()))return!0}return!1}else{const x=c[d];return x&&String(x).toLowerCase().includes(s.toLowerCase())}});z(n)},300),[p,d]),$=a.useCallback(s=>{const n=s.target.value;t(n),I(n)},[I]),G=a.useCallback(s=>{N(s)},[]),H=a.useCallback(()=>{t(""),g("newest"),y(1),N("all"),v(!1)},[]),K=a.useCallback(s=>{g(s.toLowerCase()),y(1)},[]),W=a.useCallback((s,n)=>{y(s),q(n)},[]),_=a.useCallback(s=>{w(s),C(!0)},[]),J=a.useCallback(s=>{i(s),w(s)},[i]),h=k.length,U=a.useMemo(()=>f.map(s=>({key:s.key,label:s.label})),[f]);return e.jsxs(le,{title:e.jsx("span",{className:"text-lgi sm:text-sm md:text-base lg:text-lgi xl:text-xl font-bold flex justify-center",children:"ITEMS"}),className:"flex flex-col w-full mx-auto bg-[#A8E1C5] rounded-xl shadow border-none",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2 sm:mb-0",children:[e.jsx(re,{className:"theme-aware-dropdown-btn border border-black sm:block hidden",menu:{items:U,onClick:({key:s})=>G(s),selectedKeys:[d]},trigger:["click"],children:e.jsx(F,{type:"text",icon:e.jsx(ie,{className:"text-xs"}),children:e.jsxs(ne,{className:"text-xs w-auto align-middle",children:[((R=f.find(s=>s.key===d))==null?void 0:R.label)||"All Columns",e.jsx(oe,{})]})})}),e.jsx(ce,{placeholder:`Search in ${d==="all"?"all columns":(O=f.find(s=>s.key===d))==null?void 0:O.label}`,prefix:e.jsx(de,{}),className:"border border-black w-auto ml-1 text-xs",value:r,onChange:$})]}),e.jsxs("div",{className:"flex gap-2 w-auto justify-center",children:[e.jsxs(Q,{defaultValue:"Newest",className:"w-auto text-xs transparent-select mt-1",size:"small",onChange:K,children:[e.jsx(A,{value:"Newest",children:e.jsx("span",{className:"text-xs",children:"Newest"})}),e.jsx(A,{value:"Oldest",children:e.jsx("span",{className:"text-xs",children:"Oldest"})})]}),e.jsx(F,{onClick:H,className:"custom-button mt-1 text-xs",type:"default",size:"small",icon:e.jsx(Y,{}),children:e.jsx("span",{className:"text-xs",children:"Reset"})})]})]}),e.jsx("div",{className:"w-auto overflow-x-auto",children:e.jsx(ae,{rowKey:"id",columns:fe(_,r),dataSource:V.slice((u-1)*m,u*m),pagination:!1,bordered:!0,onRow:s=>({onClick:()=>J(s)}),scroll:{x:"max-content",y:600},loading:P,responsive:["sm","md","lg","xl","xxl"],expandable:T?{expandedRowRender:s=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",s.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",s.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",s.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",s.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",s.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",s.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",s.issuedDate]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",s.purchaseDate]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",s.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Location:"})," ",s.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",s.status]})]}),rowExpandable:()=>!0}:void 0})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mt-5 space-y-2 sm:space-y-0",children:[e.jsxs(xe.Text,{style:{color:"#072C1C"},className:"w-full text-xs text-wrap text-center sm:text-left",children:["Showing data of ",h>0?(u-1)*m+1:0," to"," ",Math.min(u*m,h)," of ",h," entries"]}),e.jsx("div",{className:"w-full flex justify-center sm:justify-end",children:e.jsx(ue,{current:u,pageSize:m,total:h,showSizeChanger:!0,pageSizeOptions:["10","20","30","50","100","200","500","1000","2000"],onChange:W,className:"text-xs",responsive:!0})})]}),e.jsx(ee,{isVisible:L,onClose:()=>C(!1),qrDetails:j})]})};export{Ge as default};
