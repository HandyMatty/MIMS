import{r as n,R as x,j as c,a as C}from"./index-1bUjThPI.js";import{g as w}from"./addItemToInventory-Dg-l0Y_f.js";import{B as F}from"./index-BfXno2TE.js";import"./lodash-Dx-4AeC4.js";import"./createForOfIteratorHelper-CS5FNHVX.js";import"./tslib.es6-DBPwE56R.js";var u=function(){return u=Object.assign||function(r){for(var a,o=1,b=arguments.length;o<b;o++){a=arguments[o];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(r[f]=a[f])}return r},u.apply(this,arguments)},N=n.forwardRef(function(r,a){return x.createElement(F,u({},r,{chartType:"Bar",ref:a}))});const m=["#f4664a","#faad14","#a0d911","#52c41a","#13c2c2","#1890ff","#2f54eb","#722ed1","#eb2f96","#fa541c","#fa8c16","#fadb14","#b7eb8f","#87e8de","#91d5ff","#adc6ff","#d3adf7","#ffadd2","#ffd6e7","#ffe7ba","#fff566","#d9f7be","#e6fffb","#bae7ff","#d6e4ff","#efdbff","#ffccc7","#ffe58f","#fff1b8","#f4ffb8","#d9f7be","#e6fffb","#b5f5ec","#adc6ff"],I=({searchText:r})=>{const[a,o]=n.useState([]),[b,f]=n.useState(!0),[t,p]=n.useState(window.innerWidth<640);n.useEffect(()=>{const e=()=>p(window.innerWidth<640);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),n.useEffect(()=>{(async()=>{try{const h=(await w()).filter(l=>Object.values(l).join(" ").toLowerCase().includes(r.toLowerCase())).reduce((l,s)=>{const{type:d,quantity:v}=s;return d&&(l[d]||(l[d]=0),l[d]+=parseInt(v)||0),l},{}),g=Object.entries(h).map(([l,s])=>({labelName:l,value:s})).sort((l,s)=>l.labelName.localeCompare(s.labelName));o(g)}catch(i){console.error("Failed to fetch inventory data:",i)}finally{f(!1)}})()},[r]);const y={data:a,xField:"labelName",yField:"value",colorField:"labelName",paddingRight:t?20:75,style:{maxWidth:t?7:18},markBackground:{label:{text:({originData:e})=>`${e.value/1e3*100}% | ${e.value}`,position:"bottom",dx:t?40:80,style:{fill:"#072C1C",fillOpacity:1,fontSize:t?7:9}},style:{fill:"#eee"}},legend:{color:{title:!1,position:"top",itemName:{style:{fill:"#072C1C",fontSize:t?8:12,fontWeight:600}},items:a.slice().sort((e,i)=>e.labelName.localeCompare(i.labelName)).map(e=>({name:e.labelName,value:e.labelName,marker:{symbol:"square",style:{fill:m[a.findIndex(i=>i.labelName===e.labelName)%m.length],r:5}}}))}},scale:{y:{domain:[0,Math.max(...a.map(e=>e.value||0),1e3)]},color:{range:m}},axis:{x:{tick:!0,label:!0,labelFontSize:t?5:9,labelFontStyle:"bold",labelFill:"#072C1C",labelFillOpacity:2},y:{grid:!0,gridStrokeOpacity:5,gridLineDash:[5,5],tick:!1,label:!0,title:"Inventory Types Quantity",titleFontSize:t?10:12,titleFontStyle:"bold",scrollY:!t,labelFontSize:t?8:12,labelFill:"#072C1C",labelFillOpacity:2}},interaction:{elementHighlight:!0},autoFit:!0,height:t?270:420};return c.jsx("div",{className:"history-bar-graph-container",style:{height:t?270:420,width:"100%",minWidth:320,padding:t?"2px":"10px"},children:b?c.jsx("div",{className:"loading-spinner",children:c.jsx(C,{size:"large"})}):c.jsx(N,{...y})})};export{I as default};
