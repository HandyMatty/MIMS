const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/UsersStatisticBoard-wxg7E0QJ.js","js/index-D_DjqwU6.js","css/index-1RobZ94W.css","js/index-o4RaDSJb.js","js/UsersList-Cn_qWN_x.js","js/cacheUtils-rgXBj3X0.js","js/offlineUtils-CjPJFgFK.js","js/index-GL6TR608.js","js/index-DG92omOn.js","js/useBubbleLock-BNMpLRc-.js","js/index-CYk8aGXX.js","js/index-CRHxdFZf.js","js/Pagination-B3MLnmFW.js","js/index-BlUNoHI2.js","js/UsersActivities-CvVhfrEk.js","js/HighlightText-BHuCeSLK.js","js/lodash-acZijzff.js","js/FilterOutlined-B9-Kq489.js"])))=>i.map(i=>d[i]);
import{c as n,r as a,p as U,j as e,b as y,_ as x,u as g,S as D}from"./index-D_DjqwU6.js";const T=async()=>{try{return(await n.get("/users.php")).data}catch(s){throw console.error("Fetch users data API Error:",s),s}},O=async s=>{try{return(await n.post("/users_add.php",s)).data}catch(r){throw console.error("Add user API Error:",r),r}},Q=async s=>{try{return(await n.post("/users_delete.php",{userIds:s})).data}catch(r){throw console.error("Delete users API Error:",r),r}},I=async()=>{try{return(await n.get("/getUsersStatistics.php")).data}catch(s){throw console.error("Error fetching users statistics:",s),s}},V=async s=>{try{return(await n.get(`/updateSecurityQuestion.php?userId=${s}`)).data}catch(r){return console.error("Error fetching security question:",r),{success:!1}}},F=async(s,r,t)=>{try{return(await n.post("/updateSecurityQuestion.php",{userId:s,security_question:r,security_answer:t})).data}catch(o){return console.error("Error updating security question:",o),{success:!1}}},M=async(s,r)=>{try{return(await n.post("/update_role.php",{userId:s,role:r})).data}catch(t){throw console.error("Error updating role:",t),t}},$=async(s,r)=>{try{console.log("Sending update request:",{userId:s,department:r});const t=await n.post("/update_department.php",{userId:s,department:r},{headers:{"Content-Type":"application/json"},withCredentials:!1});return console.log("Update response:",t.data),t.data}catch(t){throw console.error("Update department API Error:",t),t.response?(console.error("Error response data:",t.response.data),console.error("Error response status:",t.response.status),console.error("Error response headers:",t.response.headers)):t.request&&console.error("Error request:",t.request),t}},L=async()=>{try{return(await n.get("/fetch_activities.php")).data}catch(s){throw console.error("Fetch Activities API Error:",s),s}},P=y.lazy(()=>x(()=>import("./UsersStatisticBoard-wxg7E0QJ.js"),__vite__mapDeps([0,1,2,3]))),R=y.lazy(()=>x(()=>import("./UsersList-Cn_qWN_x.js"),__vite__mapDeps([4,1,2,5,6,7,8,9,10,11,12,13]))),q=y.lazy(()=>x(()=>import("./UsersActivities-CvVhfrEk.js"),__vite__mapDeps([14,1,2,15,16,7,8,9,10,11,12,17]))),b=()=>{const{theme:s,currentTheme:r}=g(),t=r!=="default"&&s.border||"#d1d5db",o=r!=="default"&&s.componentBackground||"#A8E1C5";return e.jsx("div",{className:"status-dashboard skeleton-container",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(3)].map((d,u)=>e.jsxs("div",{className:"rounded-xl shadow-md border-none p-4 skeleton-optimized",style:{backgroundColor:o},children:[e.jsxs("div",{className:"flex items-center justify-center mb-3",children:[e.jsx("div",{className:"w-6 h-6 rounded mr-2 animate-pulse",style:{backgroundColor:t}}),e.jsx("div",{className:"h-4 rounded w-20 animate-pulse",style:{backgroundColor:t}})]}),e.jsx("div",{className:"h-8 rounded w-16 mx-auto animate-pulse",style:{backgroundColor:t}})]},u))})})},S=()=>{const{theme:s,currentTheme:r}=g(),t=r!=="default"&&s.border||"#d1d5db",o=r!=="default"&&s.componentBackground||"#a7f3d0";return e.jsxs("div",{className:"rounded-xl shadow border-none p-6 skeleton-container",style:{backgroundColor:o},children:[e.jsx("div",{className:"h-8 rounded mb-4 animate-pulse",style:{backgroundColor:t}}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-10 rounded animate-pulse",style:{backgroundColor:t}}),e.jsx("div",{className:"h-96 rounded animate-pulse",style:{backgroundColor:t}}),e.jsx("div",{className:"h-8 rounded animate-pulse",style:{backgroundColor:t}})]})]})},k=()=>{const{theme:s,currentTheme:r}=g(),t=r!=="default"&&s.border||"#d1d5db",o=r!=="default"&&s.componentBackground||"#a7f3d0";return e.jsxs("div",{className:"rounded-xl shadow border-none p-6 skeleton-container",style:{backgroundColor:o},children:[e.jsx("div",{className:"h-8 rounded mb-4 animate-pulse",style:{backgroundColor:t}}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-10 rounded animate-pulse",style:{backgroundColor:t}}),e.jsx("div",{className:"h-96 rounded animate-pulse",style:{backgroundColor:t}}),e.jsx("div",{className:"h-8 rounded animate-pulse",style:{backgroundColor:t}})]})]})},f=()=>e.jsxs("div",{className:"container max-w-full",children:[e.jsx("div",{className:"mt-5",children:e.jsx(b,{})}),e.jsx("div",{className:"mt-5",children:e.jsx(S,{})}),e.jsx("div",{className:"mt-5",children:e.jsx(k,{})})]}),z=()=>{const[s,r]=a.useState({totalUsers:0,activeUsers:0,activities:0}),[t,o]=a.useState({users:[]}),[d,u]=a.useState([]),[c,j]=a.useState(!0),[p,v]=a.useState(null),[_,w]=a.useState(null),[N,C]=a.useState(null),h=a.useMemo(()=>({statistics:{...s},users:t.users||[],activities:d||[]}),[s,t.users,d]),i=a.useCallback(async()=>{try{j(!0),v(null);const[l,E,A]=await Promise.all([I(),T(),L()]);r(l),o(E),u(A),w(Date.now()),C(Date.now())}catch(l){console.error("Error fetching users data:",l),v(l.message)}finally{j(!1)}},[]);a.useEffect(()=>{U([D]),i()},[i]);const m=a.useCallback(()=>{i()},[i]);return c?e.jsx(f,{}):e.jsx(a.Suspense,{fallback:e.jsx(f,{}),children:e.jsxs("div",{className:"container max-w-full",children:[e.jsx("div",{className:"mt-5",children:e.jsx(a.Suspense,{fallback:e.jsx(b,{}),children:e.jsx(P,{statistics:h.statistics,loading:c,error:p,onRefresh:m})})}),e.jsx("div",{className:"mt-5",children:e.jsx(a.Suspense,{fallback:e.jsx(S,{}),children:e.jsx(R,{usersData:h.users,loading:c,error:p,onRefresh:m,lastSyncTime:N})})}),e.jsx("div",{className:"mt-5",children:e.jsx(a.Suspense,{fallback:e.jsx(k,{}),children:e.jsx(q,{activitiesData:h.activities,loading:c,error:p,onRefresh:m,lastSyncTime:_})})})]})})},G=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{G as U,F as a,O as b,M as c,Q as d,T as f,V as g,$ as u};
