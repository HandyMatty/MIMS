import{n as cr,t as ur,v as sn,r as n,C as Ka,x as $e,af as ca,z as dr,F as mr,ag as fr,ah as hr,ai as pr,aj as vr,ak as xr,al as gr,a6 as br,a7 as ln,a9 as on,am as yr,ab as Pe,aa as B,an as Wa,ao as _e,a8 as ye,W as It,R as Va,ap as Ot,aq as jr,ar as Cr,as as yt,a2 as jt,g as Se,J as cn,ad as bt,at as un,au as Dr,I as Ct,B as Ce,av as dn,H as mn,G as fn,aw as hn,$ as pn,a0 as vn,a1 as xn,ax as gn,ay as bn,az as yn,E as ua,b as zt,c as Yt,e as Rt,d as Et,A as da,j as e,T as Ye,M as Lt,D as ft,aA as ia,s as ta}from"./index-Bfv_RYKM.js";import{g as lt,d as Sr,u as wr,a as Nr,r as kr}from"./addItemToInventory-CvTWKOPd.js";import{P as at,p as jn,f as _t,e as ot,h as Ir,t as Ut,j as Or,u as Pr,k as Rr,l as Cn,m as Za,n as Dn,o as Er,q as Tr,s as $a,R as Ha,v as Mr,w as Sn,x as Fr,y as wn,c as Ar,d as Ve}from"./index-CnHePsaa.js";import{F as P}from"./index-v5vGacUn.js";import{S as kt,D as qa}from"./index-9RLLIFz7.js";import{_ as Vr}from"./callSuper-DdST2PVm.js";import{R as Pt,C as Ke}from"./row-DVtG68eM.js";import{u as $r,S as pe,R as _a}from"./index-Ckb53lhV.js";import{R as Qa,T as Tt}from"./index-mXndb-Dc.js";import{R as la}from"./DeleteOutlined-_lnTXcyB.js";import{D as Hr}from"./index-Bj5Ss5MQ.js";import{I as be}from"./index-eFG5XlKP.js";import{R as Nn}from"./CalendarOutlined-BKGu-Nve.js";import{u as kn,g as In,a as On}from"./TextArea-Bk2TBN4c.js";import{C as Gt,T as Pn}from"./index-C2F5TDUc.js";import{R as Bt}from"./SearchOutlined-DVBhVuGZ.js";import{F as Ht,u as qr}from"./index-DgGshNjw.js";import{T as Xa}from"./index-Bo17F_wH.js";import{H as ze}from"./HighlightText-Br3j19mj.js";import{d as _r}from"./debounce-Bbnqe4V5.js";import{R as Ba}from"./FilterOutlined-BAxS69vU.js";import{P as Br}from"./Pagination-B-pym6de.js";import"./move-CQO4rCAV.js";import"./Dropdown-DdpZg6k3.js";import"./responsiveObserver-DpdOGnt2.js";import"./CheckOutlined-nId50N2-.js";import"./EyeOutlined-ChXYwmpH.js";import"./PlusOutlined-BmIFcUcQ.js";import"./addEventListener-Dy8rsZb5.js";import"./index-hrGg1JAw.js";import"./useBreakpoint-DjwzN-EJ.js";import"./useForceUpdate-UmoMdvYc.js";const aa=(t,r,a,s,i)=>({background:t,border:`${sn(s.lineWidth)} ${s.lineType} ${r}`,[`${i}-icon`]:{color:a}}),zr=t=>{const{componentCls:r,motionDurationSlow:a,marginXS:s,marginSM:i,fontSize:o,fontSizeLG:m,lineHeight:l,borderRadiusLG:c,motionEaseInOutCirc:d,withDescriptionIconSize:u,colorText:b,colorTextHeading:y,withDescriptionPadding:k,defaultPadding:S}=t;return{[r]:Object.assign(Object.assign({},ur(t)),{position:"relative",display:"flex",alignItems:"center",padding:S,wordWrap:"break-word",borderRadius:c,[`&${r}-rtl`]:{direction:"rtl"},[`${r}-content`]:{flex:1,minWidth:0},[`${r}-icon`]:{marginInlineEnd:s,lineHeight:0},"&-description":{display:"none",fontSize:o,lineHeight:l},"&-message":{color:y},[`&${r}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${a} ${d}, opacity ${a} ${d},
        padding-top ${a} ${d}, padding-bottom ${a} ${d},
        margin-bottom ${a} ${d}`},[`&${r}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${r}-with-description`]:{alignItems:"flex-start",padding:k,[`${r}-icon`]:{marginInlineEnd:i,fontSize:u,lineHeight:0},[`${r}-message`]:{display:"block",marginBottom:s,color:y,fontSize:m},[`${r}-description`]:{display:"block",color:b}},[`${r}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Yr=t=>{const{componentCls:r,colorSuccess:a,colorSuccessBorder:s,colorSuccessBg:i,colorWarning:o,colorWarningBorder:m,colorWarningBg:l,colorError:c,colorErrorBorder:d,colorErrorBg:u,colorInfo:b,colorInfoBorder:y,colorInfoBg:k}=t;return{[r]:{"&-success":aa(i,s,a,t,r),"&-info":aa(k,y,b,t,r),"&-warning":aa(l,m,o,t,r),"&-error":Object.assign(Object.assign({},aa(u,d,c,t,r)),{[`${r}-description > pre`]:{margin:0,padding:0}})}}},Lr=t=>{const{componentCls:r,iconCls:a,motionDurationMid:s,marginXS:i,fontSizeIcon:o,colorIcon:m,colorIconHover:l}=t;return{[r]:{"&-action":{marginInlineStart:i},[`${r}-close-icon`]:{marginInlineStart:i,padding:0,overflow:"hidden",fontSize:o,lineHeight:sn(o),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${a}-close`]:{color:m,transition:`color ${s}`,"&:hover":{color:l}}},"&-close-text":{color:m,transition:`color ${s}`,"&:hover":{color:l}}}}},Ur=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`}),Gr=cr("Alert",t=>[zr(t),Yr(t),Lr(t)],Ur);var en=function(t,r){var a={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)r.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(a[s[i]]=t[s[i]]);return a};const Kr={success:xr,info:vr,error:pr,warning:hr},Wr=t=>{const{icon:r,prefixCls:a,type:s}=t,i=Kr[s]||null;return r?fr(r,n.createElement("span",{className:`${a}-icon`},r),()=>({className:$e(`${a}-icon`,{[r.props.className]:r.props.className})})):n.createElement(i,{className:`${a}-icon`})},Qr=t=>{const{isClosable:r,prefixCls:a,closeIcon:s,handleClose:i,ariaProps:o}=t,m=s===!0||s===void 0?n.createElement(gr,null):s;return r?n.createElement("button",Object.assign({type:"button",onClick:i,className:`${a}-close-icon`,tabIndex:0},o),m):null},Rn=n.forwardRef((t,r)=>{const{description:a,prefixCls:s,message:i,banner:o,className:m,rootClassName:l,style:c,onMouseEnter:d,onMouseLeave:u,onClick:b,afterClose:y,showIcon:k,closable:S,closeText:g,closeIcon:w,action:D,id:p}=t,h=en(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[N,E]=n.useState(!1),F=n.useRef(null);n.useImperativeHandle(r,()=>({nativeElement:F.current}));const{getPrefixCls:U,direction:C,alert:v}=n.useContext(Ka),j=U("alert",s),[O,$,X]=Gr(j),A=R=>{var _;E(!0),(_=t.onClose)===null||_===void 0||_.call(t,R)},V=n.useMemo(()=>t.type!==void 0?t.type:o?"warning":"info",[t.type,o]),I=n.useMemo(()=>typeof S=="object"&&S.closeIcon||g?!0:typeof S=="boolean"?S:w!==!1&&w!==null&&w!==void 0?!0:!!(v!=null&&v.closable),[g,w,S,v==null?void 0:v.closable]),W=o&&k===void 0?!0:k,L=$e(j,`${j}-${V}`,{[`${j}-with-description`]:!!a,[`${j}-no-icon`]:!W,[`${j}-banner`]:!!o,[`${j}-rtl`]:C==="rtl"},v==null?void 0:v.className,m,l,X,$),Q=ca(h,{aria:!0,data:!0}),z=n.useMemo(()=>{var R,_;return typeof S=="object"&&S.closeIcon?S.closeIcon:g||(w!==void 0?w:typeof(v==null?void 0:v.closable)=="object"&&(!((R=v==null?void 0:v.closable)===null||R===void 0)&&R.closeIcon)?(_=v==null?void 0:v.closable)===null||_===void 0?void 0:_.closeIcon:v==null?void 0:v.closeIcon)},[w,S,g,v==null?void 0:v.closeIcon]),Y=n.useMemo(()=>{const R=S??(v==null?void 0:v.closable);if(typeof R=="object"){const{closeIcon:_}=R;return en(R,["closeIcon"])}return{}},[S,v==null?void 0:v.closable]);return O(n.createElement(dr,{visible:!N,motionName:`${j}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:R=>({maxHeight:R.offsetHeight}),onLeaveEnd:y},(R,_)=>{let{className:f,style:T}=R;return n.createElement("div",Object.assign({id:p,ref:mr(F,_),"data-show":!N,className:$e(L,f),style:Object.assign(Object.assign(Object.assign({},v==null?void 0:v.style),c),T),onMouseEnter:d,onMouseLeave:u,onClick:b,role:"alert"},Q),W?n.createElement(Wr,{description:a,icon:t.icon,prefixCls:j,type:V}):null,n.createElement("div",{className:`${j}-content`},i?n.createElement("div",{className:`${j}-message`},i):null,a?n.createElement("div",{className:`${j}-description`},a):null),D?n.createElement("div",{className:`${j}-action`},D):null,n.createElement(Qr,{isClosable:I,prefixCls:j,closeIcon:z,handleClose:A,ariaProps:Y}))}))});let Xr=function(t){function r(){var a;return on(this,r),a=Vr(this,r,arguments),a.state={error:void 0,info:{componentStack:""}},a}return br(r,t),ln(r,[{key:"componentDidCatch",value:function(s,i){this.setState({error:s,info:i})}},{key:"render",value:function(){const{message:s,description:i,id:o,children:m}=this.props,{error:l,info:c}=this.state,d=(c==null?void 0:c.componentStack)||null,u=typeof s>"u"?(l||"").toString():s,b=typeof i>"u"?d:i;return l?n.createElement(Rn,{id:o,type:"error",message:u,description:n.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},b)}):m}}])}(n.Component);const En=Rn;En.ErrorBoundary=Xr;function ma(t,r){return t!==void 0?t:r?"bottomRight":"bottomLeft"}function Tn(t,r){var a=ma(t,r),s=a==null?void 0:a.toLowerCase().endsWith("right"),i=s?"insetInlineEnd":"insetInlineStart";return r&&(i=["insetInlineStart","insetInlineEnd"].find(function(o){return o!==i})),i}var Jr={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};function Mn(t){var r=t.popupElement,a=t.popupStyle,s=t.popupClassName,i=t.popupAlign,o=t.transitionName,m=t.getPopupContainer,l=t.children,c=t.range,d=t.placement,u=t.builtinPlacements,b=u===void 0?Jr:u,y=t.direction,k=t.visible,S=t.onClose,g=n.useContext(at),w=g.prefixCls,D="".concat(w,"-dropdown"),p=ma(d,y==="rtl");return n.createElement(yr,{showAction:[],hideAction:["click"],popupPlacement:p,builtinPlacements:b,prefixCls:D,popupTransitionName:o,popup:r,popupAlign:i,popupVisible:k,popupClassName:$e(s,Pe(Pe({},"".concat(D,"-range"),c),"".concat(D,"-rtl"),y==="rtl")),popupStyle:a,stretch:"minWidth",getPopupContainer:m,onPopupVisibleChange:function(N){N||S()}},l)}function Fn(t){return jn(t,["placement","builtinPlacements","popupAlign","getPopupContainer","transitionName","direction"])}function An(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=n.useState([!1,!1]),i=B(s,2),o=i[0],m=i[1],l=function(u,b){m(function(y){return _t(y,b,u)})},c=n.useMemo(function(){return o.map(function(d,u){if(d)return!0;var b=t[u];return b?!!(!a[u]&&!b||b&&r(b,{activeIndex:u})):!1})},[t,o,r,a]);return[c,l]}function Zr(t,r,a){if(r===!1)return null;var s=r&&Wa(r)==="object"?r:{};return s.clearIcon||a||n.createElement("span",{className:"".concat(t,"-clear-btn")})}function es(t,r,a,s,i){var o=_e(function(m,l){return!!(a&&a(m,l)||s&&t.isAfter(s,m)&&!ot(t,r,s,m,l.type)||i&&t.isAfter(m,i)&&!ot(t,r,i,m,l.type))});return o}function ts(t,r,a){return n.useMemo(function(){var s=Ir(t,r,a),i=Ut(s),o=i[0],m=Wa(o)==="object"&&o.type==="mask"?o.format:null;return[i.map(function(l){return typeof l=="string"||typeof l=="function"?l:l.format}),m]},[t,r,a])}function as(t,r,a){return typeof t[0]=="function"||a?!0:r}function ns(t,r,a,s){var i=_e(function(o,m){var l=ye({type:r},m);if(delete l.activeIndex,!t.isValidate(o)||a&&a(o,l))return!0;if((r==="date"||r==="time")&&s){var c,d=m&&m.activeIndex===1?"end":"start",u=((c=s.disabledTime)===null||c===void 0?void 0:c.call(s,o,d,{from:l.from}))||{},b=u.disabledHours,y=u.disabledMinutes,k=u.disabledSeconds,S=u.disabledMilliseconds,g=s.disabledHours,w=s.disabledMinutes,D=s.disabledSeconds,p=b||g,h=y||w,N=k||D,E=t.getHour(o),F=t.getMinute(o),U=t.getSecond(o),C=t.getMillisecond(o);if(p&&p().includes(E)||h&&h(E).includes(F)||N&&N(E,F).includes(U)||S&&S(E,F,U).includes(C))return!0}return!1});return i}function na(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=n.useMemo(function(){var s=t&&Ut(t);return r&&s&&(s[1]=s[1]||s[0]),s},[t,r]);return a}function Vn(t,r){var a=t.generateConfig,s=t.locale,i=t.picker,o=i===void 0?"date":i,m=t.prefixCls,l=m===void 0?"rc-picker":m,c=t.styles,d=c===void 0?{}:c,u=t.classNames,b=u===void 0?{}:u,y=t.order,k=y===void 0?!0:y,S=t.components,g=S===void 0?{}:S,w=t.inputRender,D=t.allowClear,p=t.clearIcon,h=t.needConfirm,N=t.multiple,E=t.format,F=t.inputReadOnly,U=t.disabledDate,C=t.minDate,v=t.maxDate,j=t.showTime,O=t.value,$=t.defaultValue,X=t.pickerValue,A=t.defaultPickerValue,V=na(O),I=na($),W=na(X),L=na(A),Q=o==="date"&&j?"datetime":o,z=Q==="time"||Q==="datetime",Y=z||N,R=h??z,_=Or(t),f=B(_,4),T=f[0],q=f[1],H=f[2],K=f[3],de=Pr(s,q),ve=n.useMemo(function(){return Rr(Q,H,K,T,de)},[Q,H,K,T,de]),se=n.useMemo(function(){return ye(ye({},t),{},{prefixCls:l,locale:de,picker:o,styles:d,classNames:b,order:k,components:ye({input:w},g),clearIcon:Zr(l,D,p),showTime:ve,value:V,defaultValue:I,pickerValue:W,defaultPickerValue:L},r==null?void 0:r())},[t]),De=ts(Q,de,E),ce=B(De,2),ee=ce[0],fe=ce[1],xe=as(ee,F,N),G=es(a,s,U,C,v),M=ns(a,o,G,ve),J=n.useMemo(function(){return ye(ye({},se),{},{needConfirm:R,inputReadOnly:xe,disabledDate:G})},[se,R,xe,G]);return[J,Q,Y,ee,fe,M]}function rs(t,r,a){var s=It(r,{value:t}),i=B(s,2),o=i[0],m=i[1],l=Va.useRef(t),c=Va.useRef(),d=function(){Ot.cancel(c.current)},u=_e(function(){m(l.current),a&&o!==l.current&&a(l.current)}),b=_e(function(y,k){d(),l.current=y,y||k?u():c.current=Ot(u)});return Va.useEffect(function(){return d},[]),[o,b]}function $n(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0,i=a.every(function(u){return u})?!1:t,o=rs(i,r||!1,s),m=B(o,2),l=m[0],c=m[1];function d(u){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!b.inherit||l)&&c(u,b.force)}return[l,d]}function Hn(t){var r=n.useRef();return n.useImperativeHandle(t,function(){var a;return{nativeElement:(a=r.current)===null||a===void 0?void 0:a.nativeElement,focus:function(i){var o;(o=r.current)===null||o===void 0||o.focus(i)},blur:function(){var i;(i=r.current)===null||i===void 0||i.blur()}}}),r}function qn(t,r){return n.useMemo(function(){return t||(r?(jr(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.entries(r).map(function(a){var s=B(a,2),i=s[0],o=s[1];return{label:i,value:o}})):[])},[t,r])}function Ja(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=n.useRef(r);s.current=r,Cr(function(){if(t)s.current(t);else{var i=Ot(function(){s.current(t)},a);return function(){Ot.cancel(i)}}},[t])}function _n(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n.useState(0),i=B(s,2),o=i[0],m=i[1],l=n.useState(!1),c=B(l,2),d=c[0],u=c[1],b=n.useRef([]),y=n.useRef(null),k=function(D){u(D)},S=function(D){return D&&(y.current=D),y.current},g=function(D){var p=b.current,h=new Set(p.filter(function(E){return D[E]||r[E]})),N=p[p.length-1]===0?1:0;return h.size>=2||t[N]?null:N};return Ja(d||a,function(){d||(b.current=[])}),n.useEffect(function(){d&&b.current.push(o)},[d,o]),[d,k,S,o,m,g,b.current]}function ss(t,r,a,s,i,o){var m=a[a.length-1],l=function(d,u){var b=B(t,2),y=b[0],k=b[1],S=ye(ye({},u),{},{from:Cn(t,a)});return m===1&&r[0]&&y&&!ot(s,i,y,d,S.type)&&s.isAfter(y,d)||m===0&&r[1]&&k&&!ot(s,i,k,d,S.type)&&s.isAfter(d,k)?!0:o==null?void 0:o(d,S)};return l}function qt(t,r,a,s){switch(r){case"date":case"week":return t.addMonth(a,s);case"month":case"quarter":return t.addYear(a,s);case"year":return t.addYear(a,s*10);case"decade":return t.addYear(a,s*100);default:return a}}var za=[];function Bn(t,r,a,s,i,o,m,l){var c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:za,d=arguments.length>9&&arguments[9]!==void 0?arguments[9]:za,u=arguments.length>10&&arguments[10]!==void 0?arguments[10]:za,b=arguments.length>11?arguments[11]:void 0,y=arguments.length>12?arguments[12]:void 0,k=arguments.length>13?arguments[13]:void 0,S=m==="time",g=o||0,w=function(W){var L=t.getNow();return S&&(L=Za(t,L)),c[W]||a[W]||L},D=B(d,2),p=D[0],h=D[1],N=It(function(){return w(0)},{value:p}),E=B(N,2),F=E[0],U=E[1],C=It(function(){return w(1)},{value:h}),v=B(C,2),j=v[0],O=v[1],$=n.useMemo(function(){var I=[F,j][g];return S?I:Za(t,I,u[g])},[S,F,j,g,t,u]),X=function(W){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"panel",Q=[U,O][g];Q(W);var z=[F,j];z[g]=W,b&&(!ot(t,r,F,z[0],m)||!ot(t,r,j,z[1],m))&&b(z,{source:L,range:g===1?"end":"start",mode:s})},A=function(W,L){if(l){var Q={date:"month",week:"month",month:"year",quarter:"year"},z=Q[m];if(z&&!ot(t,r,W,L,z))return qt(t,m,L,-1);if(m==="year"&&W){var Y=Math.floor(t.getYear(W)/10),R=Math.floor(t.getYear(L)/10);if(Y!==R)return qt(t,m,L,-1)}}return L},V=n.useRef(null);return yt(function(){if(i&&!c[g]){var I=S?null:t.getNow();if(V.current!==null&&V.current!==g?I=[F,j][g^1]:a[g]?I=g===0?a[0]:A(a[0],a[1]):a[g^1]&&(I=a[g^1]),I){y&&t.isAfter(y,I)&&(I=y);var W=l?qt(t,m,I,1):I;k&&t.isAfter(W,k)&&(I=l?qt(t,m,k,-1):k),X(I,"reset")}}},[i,g,a[g]]),n.useEffect(function(){i?V.current=g:V.current=null},[i,g]),yt(function(){i&&c&&c[g]&&X(c[g],"reset")},[i,g]),[$,X]}function zn(t,r){var a=n.useRef(t),s=n.useState({}),i=B(s,2),o=i[1],m=function(d){return d&&r!==void 0?r:a.current},l=function(d){a.current=d,o({})};return[m,l,m(!0)]}var is=[];function Yn(t,r,a){var s=function(m){return m.map(function(l){return Dn(l,{generateConfig:t,locale:r,format:a[0]})})},i=function(m,l){for(var c=Math.max(m.length,l.length),d=-1,u=0;u<c;u+=1){var b=m[u]||null,y=l[u]||null;if(b!==y&&!Er(t,b,y)){d=u;break}}return[d<0,d!==0]};return[s,i]}function Ln(t,r){return jt(t).sort(function(a,s){return r.isAfter(a,s)?1:-1})}function ls(t){var r=zn(t),a=B(r,2),s=a[0],i=a[1],o=_e(function(){i(t)});return n.useEffect(function(){o()},[t]),[s,i]}function Un(t,r,a,s,i,o,m,l,c){var d=It(o,{value:m}),u=B(d,2),b=u[0],y=u[1],k=b||is,S=ls(k),g=B(S,2),w=g[0],D=g[1],p=Yn(t,r,a),h=B(p,2),N=h[0],E=h[1],F=_e(function(C){var v=jt(C);if(s)for(var j=0;j<2;j+=1)v[j]=v[j]||null;else i&&(v=Ln(v.filter(function(I){return I}),t));var O=E(w(),v),$=B(O,2),X=$[0],A=$[1];if(!X&&(D(v),l)){var V=N(v);l(v,V,{range:A?"end":"start"})}}),U=function(){c&&c(w())};return[k,y,w,F,U]}function Gn(t,r,a,s,i,o,m,l,c,d){var u=t.generateConfig,b=t.locale,y=t.picker,k=t.onChange,S=t.allowEmpty,g=t.order,w=o.some(function(A){return A})?!1:g,D=Yn(u,b,m),p=B(D,2),h=p[0],N=p[1],E=zn(r),F=B(E,2),U=F[0],C=F[1],v=_e(function(){C(r)});n.useEffect(function(){v()},[r]);var j=_e(function(A){var V=A===null,I=jt(A||U());if(V)for(var W=Math.max(o.length,I.length),L=0;L<W;L+=1)o[L]||(I[L]=null);w&&I[0]&&I[1]&&(I=Ln(I,u)),i(I);var Q=I,z=B(Q,2),Y=z[0],R=z[1],_=!Y,f=!R,T=S?(!_||S[0])&&(!f||S[1]):!0,q=!g||_||f||ot(u,b,Y,R,y)||u.isAfter(R,Y),H=(o[0]||!Y||!d(Y,{activeIndex:0}))&&(o[1]||!R||!d(R,{from:Y,activeIndex:1})),K=V||T&&q&&H;if(K){a(I);var de=N(I,r),ve=B(de,1),se=ve[0];k&&!se&&k(V&&I.every(function(De){return!De})?null:I,h(I))}return K}),O=_e(function(A,V){var I=_t(U(),A,s()[A]);C(I),V&&j()}),$=!l&&!c;Ja(!$,function(){$&&(j(),i(r),v())},2);function X(A){return!!U()[A]}return[O,j,X]}function Kn(t,r,a,s,i){return r!=="date"&&r!=="time"?!1:a!==void 0?a:s!==void 0?s:!i&&(t==="date"||t==="time")}function os(t){var r=t.mode,a=t.internalMode,s=t.renderExtraFooter,i=t.showNow,o=t.showTime,m=t.onSubmit,l=t.onNow,c=t.invalid,d=t.needConfirm,u=t.generateConfig,b=t.disabledDate,y=n.useContext(at),k=y.prefixCls,S=y.locale,g=y.button,w=g===void 0?"button":g,D=u.getNow(),p=Tr(u,o,D),h=B(p,1),N=h[0],E=s==null?void 0:s(r),F=b(D,{type:r}),U=function(){if(!F){var A=N(D);l(A)}},C="".concat(k,"-now"),v="".concat(C,"-btn"),j=i&&n.createElement("li",{className:C},n.createElement("a",{className:$e(v,F&&"".concat(v,"-disabled")),"aria-disabled":F,onClick:U},a==="date"?S.today:S.now)),O=d&&n.createElement("li",{className:"".concat(k,"-ok")},n.createElement(w,{disabled:c,onClick:m},S.ok)),$=(j||O)&&n.createElement("ul",{className:"".concat(k,"-ranges")},j,O);return!E&&!$?null:n.createElement("div",{className:"".concat(k,"-footer")},E&&n.createElement("div",{className:"".concat(k,"-footer-extra")},E),$)}function cs(t){var r=t.picker,a=t.multiplePanel,s=t.pickerValue,i=t.onPickerValueChange,o=t.needConfirm,m=t.onSubmit,l=t.range,c=t.hoverValue,d=n.useContext(at),u=d.prefixCls,b=d.generateConfig,y=n.useCallback(function(p,h){return qt(b,r,p,h)},[b,r]),k=n.useMemo(function(){return y(s,1)},[s,y]),S=function(h){i(y(h,-1))},g={onCellDblClick:function(){o&&m()}},w=r==="time",D=ye(ye({},t),{},{hoverValue:null,hoverRangeValue:null,hideHeader:w});return l?D.hoverRangeValue=c:D.hoverValue=c,a?n.createElement("div",{className:"".concat(u,"-panels")},n.createElement($a.Provider,{value:ye(ye({},g),{},{hideNext:!0})},n.createElement(Ha,D)),n.createElement($a.Provider,{value:ye(ye({},g),{},{hidePrev:!0})},n.createElement(Ha,Se({},D,{pickerValue:k,onPickerValueChange:S})))):n.createElement($a.Provider,{value:ye({},g)},n.createElement(Ha,D))}function tn(t){return typeof t=="function"?t():t}function us(t){var r=t.prefixCls,a=t.presets,s=t.onClick,i=t.onHover;return a.length?n.createElement("div",{className:"".concat(r,"-presets")},n.createElement("ul",null,a.map(function(o,m){var l=o.label,c=o.value;return n.createElement("li",{key:m,onClick:function(){s(tn(c))},onMouseEnter:function(){i(tn(c))},onMouseLeave:function(){i(null)}},l)}))):null}function Wn(t){var r=t.panelRender,a=t.internalMode,s=t.picker,i=t.showNow,o=t.range,m=t.multiple,l=t.activeOffset,c=l===void 0?0:l,d=t.placement,u=t.presets,b=t.onPresetHover,y=t.onPresetSubmit,k=t.onFocus,S=t.onBlur,g=t.onPanelMouseDown,w=t.direction,D=t.value,p=t.onSelect,h=t.isInvalid,N=t.defaultOpenValue,E=t.onOk,F=t.onSubmit,U=n.useContext(at),C=U.prefixCls,v="".concat(C,"-panel"),j=w==="rtl",O=n.useRef(null),$=n.useRef(null),X=n.useState(0),A=B(X,2),V=A[0],I=A[1],W=n.useState(0),L=B(W,2),Q=L[0],z=L[1],Y=function(G){G.offsetWidth&&I(G.offsetWidth)};n.useEffect(function(){if(o){var xe,G=((xe=O.current)===null||xe===void 0?void 0:xe.offsetWidth)||0,M=V-G;c<=M?z(0):z(c+G-V)}},[V,c,o]);function R(xe){return xe.filter(function(G){return G})}var _=n.useMemo(function(){return R(Ut(D))},[D]),f=s==="time"&&!_.length,T=n.useMemo(function(){return f?R([N]):_},[f,_,N]),q=f?N:_,H=n.useMemo(function(){return T.length?T.some(function(xe){return h(xe)}):!0},[T,h]),K=function(){f&&p(N),E(),F()},de=n.createElement("div",{className:"".concat(C,"-panel-layout")},n.createElement(us,{prefixCls:C,presets:u,onClick:y,onHover:b}),n.createElement("div",null,n.createElement(cs,Se({},t,{value:q})),n.createElement(os,Se({},t,{showNow:m?!1:i,invalid:H,onSubmit:K}))));r&&(de=r(de));var ve="".concat(v,"-container"),se="marginLeft",De="marginRight",ce=n.createElement("div",{onMouseDown:g,tabIndex:-1,className:$e(ve,"".concat(C,"-").concat(a,"-panel-container")),style:Pe(Pe({},j?De:se,Q),j?se:De,"auto"),onFocus:k,onBlur:S},de);if(o){var ee=ma(d,j),fe=Tn(ee,j);ce=n.createElement("div",{onMouseDown:g,ref:$,className:$e("".concat(C,"-range-wrapper"),"".concat(C,"-").concat(s,"-range-wrapper"))},n.createElement("div",{ref:O,className:"".concat(C,"-range-arrow"),style:Pe({},fe,c)}),n.createElement(cn,{onResize:Y},ce))}return ce}function Qn(t,r){var a=t.format,s=t.maskFormat,i=t.generateConfig,o=t.locale,m=t.preserveInvalidOnBlur,l=t.inputReadOnly,c=t.required,d=t["aria-required"],u=t.onSubmit,b=t.onFocus,y=t.onBlur,k=t.onInputChange,S=t.onInvalid,g=t.open,w=t.onOpenChange,D=t.onKeyDown,p=t.onChange,h=t.activeHelp,N=t.name,E=t.autoComplete,F=t.id,U=t.value,C=t.invalid,v=t.placeholder,j=t.disabled,O=t.activeIndex,$=t.allHelp,X=t.picker,A=function(R,_){var f=i.locale.parse(o.locale,R,[_]);return f&&i.isValidate(f)?f:null},V=a[0],I=n.useCallback(function(Y){return Dn(Y,{locale:o,format:V,generateConfig:i})},[o,i,V]),W=n.useMemo(function(){return U.map(I)},[U,I]),L=n.useMemo(function(){var Y=X==="time"?8:10,R=typeof V=="function"?V(i.getNow()).length:V.length;return Math.max(Y,R)+2},[V,X,i]),Q=function(R){for(var _=0;_<a.length;_+=1){var f=a[_];if(typeof f=="string"){var T=A(R,f);if(T)return T}}return!1},z=function(R){function _(q){return R!==void 0?q[R]:q}var f=ca(t,{aria:!0,data:!0}),T=ye(ye({},f),{},{format:s,validateFormat:function(H){return!!Q(H)},preserveInvalidOnBlur:m,readOnly:l,required:c,"aria-required":d,name:N,autoComplete:E,size:L,id:_(F),value:_(W)||"",invalid:_(C),placeholder:_(v),active:O===R,helped:$||h&&O===R,disabled:_(j),onFocus:function(H){b(H,R)},onBlur:function(H){y(H,R)},onSubmit:u,onChange:function(H){k();var K=Q(H);if(K){S(!1,R),p(K,R);return}S(!!H,R)},onHelp:function(){w(!0,{index:R})},onKeyDown:function(H){var K=!1;if(D==null||D(H,function(){K=!0}),!H.defaultPrevented&&!K)switch(H.key){case"Escape":w(!1,{index:R});break;case"Enter":g||w(!0);break}}},r==null?void 0:r({valueTexts:W}));return Object.keys(T).forEach(function(q){T[q]===void 0&&delete T[q]}),T};return[z,I]}var ds=["onMouseEnter","onMouseLeave"];function Xn(t){return n.useMemo(function(){return jn(t,ds)},[t])}var ms=["icon","type"],fs=["onClear"];function fa(t){var r=t.icon,a=t.type,s=bt(t,ms),i=n.useContext(at),o=i.prefixCls;return r?n.createElement("span",Se({className:"".concat(o,"-").concat(a)},s),r):null}function Ua(t){var r=t.onClear,a=bt(t,fs);return n.createElement(fa,Se({},a,{type:"clear",role:"button",onMouseDown:function(i){i.preventDefault()},onClick:function(i){i.stopPropagation(),r()}}))}var Ya=["YYYY","MM","DD","HH","mm","ss","SSS"],an="顧",hs=function(){function t(r){on(this,t),Pe(this,"format",void 0),Pe(this,"maskFormat",void 0),Pe(this,"cells",void 0),Pe(this,"maskCells",void 0),this.format=r;var a=Ya.map(function(l){return"(".concat(l,")")}).join("|"),s=new RegExp(a,"g");this.maskFormat=r.replace(s,function(l){return an.repeat(l.length)});var i=new RegExp("(".concat(Ya.join("|"),")")),o=(r.split(i)||[]).filter(function(l){return l}),m=0;this.cells=o.map(function(l){var c=Ya.includes(l),d=m,u=m+l.length;return m=u,{text:l,mask:c,start:d,end:u}}),this.maskCells=this.cells.filter(function(l){return l.mask})}return ln(t,[{key:"getSelection",value:function(a){var s=this.maskCells[a]||{},i=s.start,o=s.end;return[i||0,o||0]}},{key:"match",value:function(a){for(var s=0;s<this.maskFormat.length;s+=1){var i=this.maskFormat[s],o=a[s];if(!o||i!==an&&i!==o)return!1}return!0}},{key:"size",value:function(){return this.maskCells.length}},{key:"getMaskCellIndex",value:function(a){for(var s=Number.MAX_SAFE_INTEGER,i=0,o=0;o<this.maskCells.length;o+=1){var m=this.maskCells[o],l=m.start,c=m.end;if(a>=l&&a<=c)return o;var d=Math.min(Math.abs(a-l),Math.abs(a-c));d<s&&(s=d,i=o)}return i}}]),t}();function ps(t){var r={YYYY:[0,9999,new Date().getFullYear()],MM:[1,12],DD:[1,31],HH:[0,23],mm:[0,59],ss:[0,59],SSS:[0,999]};return r[t]}var vs=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"],Ga=n.forwardRef(function(t,r){var a=t.active,s=t.showActiveCls,i=s===void 0?!0:s,o=t.suffixIcon,m=t.format,l=t.validateFormat,c=t.onChange;t.onInput;var d=t.helped,u=t.onHelp,b=t.onSubmit,y=t.onKeyDown,k=t.preserveInvalidOnBlur,S=k===void 0?!1:k,g=t.invalid,w=t.clearIcon,D=bt(t,vs),p=t.value,h=t.onFocus,N=t.onBlur,E=t.onMouseUp,F=n.useContext(at),U=F.prefixCls,C=F.input,v=C===void 0?"input":C,j="".concat(U,"-input"),O=n.useState(!1),$=B(O,2),X=$[0],A=$[1],V=n.useState(p),I=B(V,2),W=I[0],L=I[1],Q=n.useState(""),z=B(Q,2),Y=z[0],R=z[1],_=n.useState(null),f=B(_,2),T=f[0],q=f[1],H=n.useState(null),K=B(H,2),de=K[0],ve=K[1],se=W||"";n.useEffect(function(){L(p)},[p]);var De=n.useRef(),ce=n.useRef();n.useImperativeHandle(r,function(){return{nativeElement:De.current,inputElement:ce.current,focus:function(je){ce.current.focus(je)},blur:function(){ce.current.blur()}}});var ee=n.useMemo(function(){return new hs(m||"")},[m]),fe=n.useMemo(function(){return d?[0,0]:ee.getSelection(T)},[ee,T,d]),xe=B(fe,2),G=xe[0],M=xe[1],J=function(je){je&&je!==m&&je!==p&&u()},x=_e(function(ue){l(ue)&&c(ue),L(ue),J(ue)}),Z=function(je){if(!m){var Ee=je.target.value;J(Ee),L(Ee),c(Ee)}},oe=function(je){var Ee=je.clipboardData.getData("text");l(Ee)&&x(Ee)},ke=n.useRef(!1),Te=function(){ke.current=!0},Le=function(je){var Ee=je.target,Oe=Ee.selectionStart,Fe=ee.getMaskCellIndex(Oe);q(Fe),ve({}),E==null||E(je),ke.current=!1},We=function(je){A(!0),q(0),R(""),h(je)},Ie=function(je){N(je)},ht=function(je){A(!1),Ie(je)};Ja(a,function(){!a&&!S&&L(p)});var Re=function(je){je.key==="Enter"&&l(se)&&b(),y==null||y(je)},Qe=function(je){Re(je);var Ee=je.key,Oe=null,Fe=null,nt=M-G,Xe=m.slice(G,M),ct=function(Je){q(function(Ge){var He=Ge+Je;return He=Math.max(He,0),He=Math.min(He,ee.size()-1),He})},pt=function(Je){var Ge=ps(Xe),He=B(Ge,3),ut=He[0],Dt=He[1],dt=He[2],mt=se.slice(G,M),vt=Number(mt);if(isNaN(vt))return String(dt||(Je>0?ut:Dt));var St=vt+Je,xt=Dt-ut+1;return String(ut+(xt+St-ut)%xt)};switch(Ee){case"Backspace":case"Delete":Oe="",Fe=Xe;break;case"ArrowLeft":Oe="",ct(-1);break;case"ArrowRight":Oe="",ct(1);break;case"ArrowUp":Oe="",Fe=pt(1);break;case"ArrowDown":Oe="",Fe=pt(-1);break;default:isNaN(Number(Ee))||(Oe=Y+Ee,Fe=Oe);break}if(Oe!==null&&(R(Oe),Oe.length>=nt&&(ct(1),R(""))),Fe!==null){var Ze=se.slice(0,G)+Mr(Fe,nt)+se.slice(M);x(Ze.slice(0,m.length))}ve({})},Ue=n.useRef();yt(function(){if(!(!X||!m||ke.current)){if(!ee.match(se)){x(m);return}return ce.current.setSelectionRange(G,M),Ue.current=Ot(function(){ce.current.setSelectionRange(G,M)}),function(){Ot.cancel(Ue.current)}}},[ee,m,X,se,T,G,M,de,x]);var we=m?{onFocus:We,onBlur:ht,onKeyDown:Qe,onMouseDown:Te,onMouseUp:Le,onPaste:oe}:{};return n.createElement("div",{ref:De,className:$e(j,Pe(Pe({},"".concat(j,"-active"),a&&i),"".concat(j,"-placeholder"),d))},n.createElement(v,Se({ref:ce,"aria-invalid":g,autoComplete:"off"},D,{onKeyDown:Re,onBlur:Ie},we,{value:se,onChange:Z})),n.createElement(fa,{type:"suffix",icon:o}),w)}),xs=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveOffset","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],gs=["index"],bs=["insetInlineStart","insetInlineEnd"];function ys(t,r){var a=t.id,s=t.prefix,i=t.clearIcon,o=t.suffixIcon,m=t.separator,l=m===void 0?"~":m,c=t.activeIndex;t.activeHelp,t.allHelp;var d=t.focused;t.onFocus,t.onBlur,t.onKeyDown,t.locale,t.generateConfig;var u=t.placeholder,b=t.className,y=t.style,k=t.onClick,S=t.onClear,g=t.value;t.onChange,t.onSubmit,t.onInputChange,t.format,t.maskFormat,t.preserveInvalidOnBlur,t.onInvalid;var w=t.disabled,D=t.invalid;t.inputReadOnly;var p=t.direction;t.onOpenChange;var h=t.onActiveOffset,N=t.placement,E=t.onMouseDown;t.required,t["aria-required"];var F=t.autoFocus,U=t.tabIndex,C=bt(t,xs),v=p==="rtl",j=n.useContext(at),O=j.prefixCls,$=n.useMemo(function(){if(typeof a=="string")return[a];var ce=a||{};return[ce.start,ce.end]},[a]),X=n.useRef(),A=n.useRef(),V=n.useRef(),I=function(ee){var fe;return(fe=[A,V][ee])===null||fe===void 0?void 0:fe.current};n.useImperativeHandle(r,function(){return{nativeElement:X.current,focus:function(ee){if(Wa(ee)==="object"){var fe,xe=ee||{},G=xe.index,M=G===void 0?0:G,J=bt(xe,gs);(fe=I(M))===null||fe===void 0||fe.focus(J)}else{var x;(x=I(ee??0))===null||x===void 0||x.focus()}},blur:function(){var ee,fe;(ee=I(0))===null||ee===void 0||ee.blur(),(fe=I(1))===null||fe===void 0||fe.blur()}}});var W=Xn(C),L=n.useMemo(function(){return Array.isArray(u)?u:[u,u]},[u]),Q=Qn(ye(ye({},t),{},{id:$,placeholder:L})),z=B(Q,1),Y=z[0],R=ma(N,v),_=Tn(R,v),f=R==null?void 0:R.toLowerCase().endsWith("right"),T=n.useState({position:"absolute",width:0}),q=B(T,2),H=q[0],K=q[1],de=_e(function(){var ce=I(c);if(ce){var ee=ce.nativeElement,fe=ee.offsetWidth,xe=ee.offsetLeft,G=ee.offsetParent,M=(G==null?void 0:G.offsetWidth)||0,J=f?M-fe-xe:xe;K(function(x){x.insetInlineStart,x.insetInlineEnd;var Z=bt(x,bs);return ye(ye({},Z),{},Pe({width:fe},_,J))}),h(J)}});n.useEffect(function(){de()},[c]);var ve=i&&(g[0]&&!w[0]||g[1]&&!w[1]),se=F&&!w[0],De=F&&!se&&!w[1];return n.createElement(cn,{onResize:de},n.createElement("div",Se({},W,{className:$e(O,"".concat(O,"-range"),Pe(Pe(Pe(Pe({},"".concat(O,"-focused"),d),"".concat(O,"-disabled"),w.every(function(ce){return ce})),"".concat(O,"-invalid"),D.some(function(ce){return ce})),"".concat(O,"-rtl"),v),b),style:y,ref:X,onClick:k,onMouseDown:function(ee){var fe=ee.target;fe!==A.current.inputElement&&fe!==V.current.inputElement&&ee.preventDefault(),E==null||E(ee)}}),s&&n.createElement("div",{className:"".concat(O,"-prefix")},s),n.createElement(Ga,Se({ref:A},Y(0),{autoFocus:se,tabIndex:U,"date-range":"start"})),n.createElement("div",{className:"".concat(O,"-range-separator")},l),n.createElement(Ga,Se({ref:V},Y(1),{autoFocus:De,tabIndex:U,"date-range":"end"})),n.createElement("div",{className:"".concat(O,"-active-bar"),style:H}),n.createElement(fa,{type:"suffix",icon:o}),ve&&n.createElement(Ua,{icon:i,onClear:S})))}var js=n.forwardRef(ys);function nn(t,r){var a=t??r;return Array.isArray(a)?a:[a,a]}function ra(t){return t===1?"end":"start"}function Cs(t,r){var a=Vn(t,function(){var ge=t.disabled,le=t.allowEmpty,he=nn(ge,!1),Ne=nn(le,!1);return{disabled:he,allowEmpty:Ne}}),s=B(a,6),i=s[0],o=s[1],m=s[2],l=s[3],c=s[4],d=s[5],u=i.prefixCls,b=i.styles,y=i.classNames,k=i.placement,S=i.defaultValue,g=i.value,w=i.needConfirm,D=i.onKeyDown,p=i.disabled,h=i.allowEmpty,N=i.disabledDate,E=i.minDate,F=i.maxDate,U=i.defaultOpen,C=i.open,v=i.onOpenChange,j=i.locale,O=i.generateConfig,$=i.picker,X=i.showNow,A=i.showToday,V=i.showTime,I=i.mode,W=i.onPanelChange,L=i.onCalendarChange,Q=i.onOk,z=i.defaultPickerValue,Y=i.pickerValue,R=i.onPickerValueChange,_=i.inputReadOnly,f=i.suffixIcon,T=i.onFocus,q=i.onBlur,H=i.presets,K=i.ranges,de=i.components,ve=i.cellRender,se=i.dateRender,De=i.monthCellRender,ce=i.onClick,ee=Hn(r),fe=$n(C,U,p,v),xe=B(fe,2),G=xe[0],M=xe[1],J=function(le,he){(p.some(function(Ne){return!Ne})||!le)&&M(le,he)},x=Un(O,j,l,!0,!1,S,g,L,Q),Z=B(x,5),oe=Z[0],ke=Z[1],Te=Z[2],Le=Z[3],We=Z[4],Ie=Te(),ht=_n(p,h,G),Re=B(ht,7),Qe=Re[0],Ue=Re[1],we=Re[2],ue=Re[3],je=Re[4],Ee=Re[5],Oe=Re[6],Fe=function(le,he){Ue(!0),T==null||T(le,{range:ra(he??ue)})},nt=function(le,he){Ue(!1),q==null||q(le,{range:ra(he??ue)})},Xe=n.useMemo(function(){if(!V)return null;var ge=V.disabledTime,le=ge?function(he){var Ne=ra(ue),Me=Cn(Ie,Oe,ue);return ge(he,Ne,{from:Me})}:void 0;return ye(ye({},V),{},{disabledTime:le})},[V,ue,Ie,Oe]),ct=It([$,$],{value:I}),pt=B(ct,2),Ze=pt[0],rt=pt[1],Je=Ze[ue]||$,Ge=Je==="date"&&Xe?"datetime":Je,He=Ge===$&&Ge!=="time",ut=Kn($,Je,X,A,!0),Dt=Gn(i,oe,ke,Te,Le,p,l,Qe,G,d),dt=B(Dt,3),mt=dt[0],vt=dt[1],St=dt[2],xt=ss(Ie,p,Oe,O,j,N),pa=An(Ie,d,h),Kt=B(pa,2),va=Kt[0],xa=Kt[1],Wt=Bn(O,j,Ie,Ze,G,ue,o,He,z,Y,Xe==null?void 0:Xe.defaultOpenValue,R,E,F),Qt=B(Wt,2),ga=Qt[0],Xt=Qt[1],st=_e(function(ge,le,he){var Ne=_t(Ze,ue,le);if((Ne[0]!==Ze[0]||Ne[1]!==Ze[1])&&rt(Ne),W&&he!==!1){var Me=jt(Ie);ge&&(Me[ue]=ge),W(Me,Ne)}}),Mt=function(le,he){return _t(Ie,he,le)},et=function(le,he){var Ne=Ie;le&&(Ne=Mt(le,ue));var Me=Ee(Ne);Le(Ne),mt(ue,Me===null),Me===null?J(!1,{force:!0}):he||ee.current.focus({index:Me})},ba=function(le){var he,Ne=le.target.getRootNode();if(!ee.current.nativeElement.contains((he=Ne.activeElement)!==null&&he!==void 0?he:document.activeElement)){var Me=p.findIndex(function(or){return!or});Me>=0&&ee.current.focus({index:Me})}J(!0),ce==null||ce(le)},Jt=function(){vt(null),J(!1,{force:!0})},ya=n.useState(null),Ft=B(ya,2),ja=Ft[0],At=Ft[1],it=n.useState(null),wt=B(it,2),Nt=wt[0],Vt=wt[1],Zt=n.useMemo(function(){return Nt||Ie},[Ie,Nt]);n.useEffect(function(){G||Vt(null)},[G]);var Ca=n.useState(0),$t=B(Ca,2),Da=$t[0],Sa=$t[1],wa=qn(H,K),Na=function(le){Vt(le),At("preset")},ka=function(le){var he=vt(le);he&&J(!1,{force:!0})},Ia=function(le){et(le)},Oa=function(le){Vt(le?Mt(le,ue):null),At("cell")},Pa=function(le){J(!0),Fe(le)},Ra=function(){we("panel")},Ea=function(le){var he=_t(Ie,ue,le);Le(he),!w&&!m&&o===Ge&&et(le)},Ta=function(){J(!1)},Ma=Sn(ve,se,De,ra(ue)),Fa=Ie[ue]||null,Aa=_e(function(ge){return d(ge,{activeIndex:ue})}),me=n.useMemo(function(){var ge=ca(i,!1),le=un(i,[].concat(jt(Object.keys(ge)),["onChange","onCalendarChange","style","className","onPanelChange","disabledTime"]));return le},[i]),te=n.createElement(Wn,Se({},me,{showNow:ut,showTime:Xe,range:!0,multiplePanel:He,activeOffset:Da,placement:k,disabledDate:xt,onFocus:Pa,onBlur:nt,onPanelMouseDown:Ra,picker:$,mode:Je,internalMode:Ge,onPanelChange:st,format:c,value:Fa,isInvalid:Aa,onChange:null,onSelect:Ea,pickerValue:ga,defaultOpenValue:Ut(V==null?void 0:V.defaultOpenValue)[ue],onPickerValueChange:Xt,hoverValue:Zt,onHover:Oa,needConfirm:w,onSubmit:et,onOk:We,presets:wa,onPresetHover:Na,onPresetSubmit:ka,onNow:Ia,cellRender:Ma})),qe=function(le,he){var Ne=Mt(le,he);Le(Ne)},tt=function(){we("input")},ea=function(le,he){var Ne=Oe.length,Me=Oe[Ne-1];if(Ne&&Me!==he&&w&&!h[Me]&&!St(Me)&&Ie[Me]){ee.current.focus({index:Me});return}we("input"),J(!0,{inherit:!0}),ue!==he&&G&&!w&&m&&et(null,!0),je(he),Fe(le,he)},sr=function(le,he){if(J(!1),!w&&we()==="input"){var Ne=Ee(Ie);mt(ue,Ne===null)}nt(le,he)},ir=function(le,he){le.key==="Tab"&&et(null,!0),D==null||D(le,he)},lr=n.useMemo(function(){return{prefixCls:u,locale:j,generateConfig:O,button:de.button,input:de.input}},[u,j,O,de.button,de.input]);return yt(function(){G&&ue!==void 0&&st(null,$,!1)},[G,ue,$]),yt(function(){var ge=we();!G&&ge==="input"&&(J(!1),et(null,!0)),!G&&m&&!w&&ge==="panel"&&(J(!0),et())},[G]),n.createElement(at.Provider,{value:lr},n.createElement(Mn,Se({},Fn(i),{popupElement:te,popupStyle:b.popup,popupClassName:y.popup,visible:G,onClose:Ta,range:!0}),n.createElement(js,Se({},i,{ref:ee,suffixIcon:f,activeIndex:Qe||G?ue:null,activeHelp:!!Nt,allHelp:!!Nt&&ja==="preset",focused:Qe,onFocus:ea,onBlur:sr,onKeyDown:ir,onSubmit:et,value:Zt,maskFormat:c,onChange:qe,onInputChange:tt,format:l,inputReadOnly:_,disabled:p,open:G,onOpenChange:J,onClick:ba,onClear:Jt,invalid:va,onInvalid:xa,onActiveOffset:Sa}))))}var Ds=n.forwardRef(Cs);function Ss(t){var r=t.prefixCls,a=t.value,s=t.onRemove,i=t.removeIcon,o=i===void 0?"×":i,m=t.formatDate,l=t.disabled,c=t.maxTagCount,d=t.placeholder,u="".concat(r,"-selector"),b="".concat(r,"-selection"),y="".concat(b,"-overflow");function k(w,D){return n.createElement("span",{className:$e("".concat(b,"-item")),title:typeof w=="string"?w:null},n.createElement("span",{className:"".concat(b,"-item-content")},w),!l&&D&&n.createElement("span",{onMouseDown:function(h){h.preventDefault()},onClick:D,className:"".concat(b,"-item-remove")},o))}function S(w){var D=m(w),p=function(N){N&&N.stopPropagation(),s(w)};return k(D,p)}function g(w){var D="+ ".concat(w.length," ...");return k(D)}return n.createElement("div",{className:u},n.createElement(Dr,{prefixCls:y,data:a,renderItem:S,renderRest:g,itemKey:function(D){return m(D)},maxCount:c}),!a.length&&n.createElement("span",{className:"".concat(r,"-selection-placeholder")},d))}var ws=["id","open","prefix","clearIcon","suffixIcon","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","internalPicker","value","onChange","onSubmit","onInputChange","multiple","maxTagCount","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onMouseDown","required","aria-required","autoFocus","tabIndex","removeIcon"];function Ns(t,r){t.id;var a=t.open,s=t.prefix,i=t.clearIcon,o=t.suffixIcon;t.activeHelp,t.allHelp;var m=t.focused;t.onFocus,t.onBlur,t.onKeyDown;var l=t.locale,c=t.generateConfig,d=t.placeholder,u=t.className,b=t.style,y=t.onClick,k=t.onClear,S=t.internalPicker,g=t.value,w=t.onChange,D=t.onSubmit;t.onInputChange;var p=t.multiple,h=t.maxTagCount;t.format,t.maskFormat,t.preserveInvalidOnBlur,t.onInvalid;var N=t.disabled,E=t.invalid;t.inputReadOnly;var F=t.direction;t.onOpenChange;var U=t.onMouseDown;t.required,t["aria-required"];var C=t.autoFocus,v=t.tabIndex,j=t.removeIcon,O=bt(t,ws),$=F==="rtl",X=n.useContext(at),A=X.prefixCls,V=n.useRef(),I=n.useRef();n.useImperativeHandle(r,function(){return{nativeElement:V.current,focus:function(H){var K;(K=I.current)===null||K===void 0||K.focus(H)},blur:function(){var H;(H=I.current)===null||H===void 0||H.blur()}}});var W=Xn(O),L=function(H){w([H])},Q=function(H){var K=g.filter(function(de){return de&&!ot(c,l,de,H,S)});w(K),a||D()},z=Qn(ye(ye({},t),{},{onChange:L}),function(q){var H=q.valueTexts;return{value:H[0]||"",active:m}}),Y=B(z,2),R=Y[0],_=Y[1],f=!!(i&&g.length&&!N),T=p?n.createElement(n.Fragment,null,n.createElement(Ss,{prefixCls:A,value:g,onRemove:Q,formatDate:_,maxTagCount:h,disabled:N,removeIcon:j,placeholder:d}),n.createElement("input",{className:"".concat(A,"-multiple-input"),value:g.map(_).join(","),ref:I,readOnly:!0,autoFocus:C,tabIndex:v}),n.createElement(fa,{type:"suffix",icon:o}),f&&n.createElement(Ua,{icon:i,onClear:k})):n.createElement(Ga,Se({ref:I},R(),{autoFocus:C,tabIndex:v,suffixIcon:o,clearIcon:f&&n.createElement(Ua,{icon:i,onClear:k}),showActiveCls:!1}));return n.createElement("div",Se({},W,{className:$e(A,Pe(Pe(Pe(Pe(Pe({},"".concat(A,"-multiple"),p),"".concat(A,"-focused"),m),"".concat(A,"-disabled"),N),"".concat(A,"-invalid"),E),"".concat(A,"-rtl"),$),u),style:b,ref:V,onClick:y,onMouseDown:function(H){var K,de=H.target;de!==((K=I.current)===null||K===void 0?void 0:K.inputElement)&&H.preventDefault(),U==null||U(H)}}),s&&n.createElement("div",{className:"".concat(A,"-prefix")},s),T)}var ks=n.forwardRef(Ns);function Is(t,r){var a=Vn(t),s=B(a,6),i=s[0],o=s[1],m=s[2],l=s[3],c=s[4],d=s[5],u=i,b=u.prefixCls,y=u.styles,k=u.classNames,S=u.order,g=u.defaultValue,w=u.value,D=u.needConfirm,p=u.onChange,h=u.onKeyDown,N=u.disabled,E=u.disabledDate,F=u.minDate,U=u.maxDate,C=u.defaultOpen,v=u.open,j=u.onOpenChange,O=u.locale,$=u.generateConfig,X=u.picker,A=u.showNow,V=u.showToday,I=u.showTime,W=u.mode,L=u.onPanelChange,Q=u.onCalendarChange,z=u.onOk,Y=u.multiple,R=u.defaultPickerValue,_=u.pickerValue,f=u.onPickerValueChange,T=u.inputReadOnly,q=u.suffixIcon,H=u.removeIcon,K=u.onFocus,de=u.onBlur,ve=u.presets,se=u.components,De=u.cellRender,ce=u.dateRender,ee=u.monthCellRender,fe=u.onClick,xe=Hn(r);function G(me){return me===null?null:Y?me:me[0]}var M=Fr($,O,o),J=$n(v,C,[N],j),x=B(J,2),Z=x[0],oe=x[1],ke=function(te,qe,tt){if(Q){var ea=ye({},tt);delete ea.range,Q(G(te),G(qe),ea)}},Te=function(te){z==null||z(G(te))},Le=Un($,O,l,!1,S,g,w,ke,Te),We=B(Le,5),Ie=We[0],ht=We[1],Re=We[2],Qe=We[3],Ue=We[4],we=Re(),ue=_n([N]),je=B(ue,4),Ee=je[0],Oe=je[1],Fe=je[2],nt=je[3],Xe=function(te){Oe(!0),K==null||K(te,{})},ct=function(te){Oe(!1),de==null||de(te,{})},pt=It(X,{value:W}),Ze=B(pt,2),rt=Ze[0],Je=Ze[1],Ge=rt==="date"&&I?"datetime":rt,He=Kn(X,rt,A,V),ut=p&&function(me,te){p(G(me),G(te))},Dt=Gn(ye(ye({},i),{},{onChange:ut}),Ie,ht,Re,Qe,[],l,Ee,Z,d),dt=B(Dt,2),mt=dt[1],vt=An(we,d),St=B(vt,2),xt=St[0],pa=St[1],Kt=n.useMemo(function(){return xt.some(function(me){return me})},[xt]),va=function(te,qe){if(f){var tt=ye(ye({},qe),{},{mode:qe.mode[0]});delete tt.range,f(te[0],tt)}},xa=Bn($,O,we,[rt],Z,nt,o,!1,R,_,Ut(I==null?void 0:I.defaultOpenValue),va,F,U),Wt=B(xa,2),Qt=Wt[0],ga=Wt[1],Xt=_e(function(me,te,qe){if(Je(te),L&&qe!==!1){var tt=me||we[we.length-1];L(tt,te)}}),st=function(){mt(Re()),oe(!1,{force:!0})},Mt=function(te){!N&&!xe.current.nativeElement.contains(document.activeElement)&&xe.current.focus(),oe(!0),fe==null||fe(te)},et=function(){mt(null),oe(!1,{force:!0})},ba=n.useState(null),Jt=B(ba,2),ya=Jt[0],Ft=Jt[1],ja=n.useState(null),At=B(ja,2),it=At[0],wt=At[1],Nt=n.useMemo(function(){var me=[it].concat(jt(we)).filter(function(te){return te});return Y?me:me.slice(0,1)},[we,it,Y]),Vt=n.useMemo(function(){return!Y&&it?[it]:we.filter(function(me){return me})},[we,it,Y]);n.useEffect(function(){Z||wt(null)},[Z]);var Zt=qn(ve),Ca=function(te){wt(te),Ft("preset")},$t=function(te){var qe=Y?M(Re(),te):[te],tt=mt(qe);tt&&!Y&&oe(!1,{force:!0})},Da=function(te){$t(te)},Sa=function(te){wt(te),Ft("cell")},wa=function(te){oe(!0),Xe(te)},Na=function(te){if(Fe("panel"),!(Y&&Ge!==X)){var qe=Y?M(Re(),te):[te];Qe(qe),!D&&!m&&o===Ge&&st()}},ka=function(){oe(!1)},Ia=Sn(De,ce,ee),Oa=n.useMemo(function(){var me=ca(i,!1),te=un(i,[].concat(jt(Object.keys(me)),["onChange","onCalendarChange","style","className","onPanelChange"]));return ye(ye({},te),{},{multiple:i.multiple})},[i]),Pa=n.createElement(Wn,Se({},Oa,{showNow:He,showTime:I,disabledDate:E,onFocus:wa,onBlur:ct,picker:X,mode:rt,internalMode:Ge,onPanelChange:Xt,format:c,value:we,isInvalid:d,onChange:null,onSelect:Na,pickerValue:Qt,defaultOpenValue:I==null?void 0:I.defaultOpenValue,onPickerValueChange:ga,hoverValue:Nt,onHover:Sa,needConfirm:D,onSubmit:st,onOk:Ue,presets:Zt,onPresetHover:Ca,onPresetSubmit:$t,onNow:Da,cellRender:Ia})),Ra=function(te){Qe(te)},Ea=function(){Fe("input")},Ta=function(te){Fe("input"),oe(!0,{inherit:!0}),Xe(te)},Ma=function(te){oe(!1),ct(te)},Fa=function(te,qe){te.key==="Tab"&&st(),h==null||h(te,qe)},Aa=n.useMemo(function(){return{prefixCls:b,locale:O,generateConfig:$,button:se.button,input:se.input}},[b,O,$,se.button,se.input]);return yt(function(){Z&&nt!==void 0&&Xt(null,X,!1)},[Z,nt,X]),yt(function(){var me=Fe();!Z&&me==="input"&&(oe(!1),st()),!Z&&m&&!D&&me==="panel"&&(oe(!0),st())},[Z]),n.createElement(at.Provider,{value:Aa},n.createElement(Mn,Se({},Fn(i),{popupElement:Pa,popupStyle:y.popup,popupClassName:k.popup,visible:Z,onClose:ka}),n.createElement(ks,Se({},i,{ref:xe,suffixIcon:q,removeIcon:H,activeHelp:!!it,allHelp:!!it&&ya==="preset",focused:Ee,onFocus:Ta,onBlur:Ma,onKeyDown:Fa,onSubmit:st,value:Vt,maskFormat:c,onChange:Ra,onInputChange:Ea,internalPicker:o,format:l,inputReadOnly:T,disabled:N,open:Z,onOpenChange:oe,onClick:Mt,onClear:et,invalid:Kt,onInvalid:function(te){pa(te,0)}}))))}var Os=n.forwardRef(Is),Ps={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},Rs=function(r,a){return n.createElement(Ct,Se({},r,{ref:a,icon:Ps}))},Jn=n.forwardRef(Rs),Es={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"},Ts=function(r,a){return n.createElement(Ct,Se({},r,{ref:a,icon:Es}))},Ms=n.forwardRef(Ts);function Fs(t,r,a){return a!==void 0?a:r==="year"&&t.lang.yearPlaceholder?t.lang.yearPlaceholder:r==="quarter"&&t.lang.quarterPlaceholder?t.lang.quarterPlaceholder:r==="month"&&t.lang.monthPlaceholder?t.lang.monthPlaceholder:r==="week"&&t.lang.weekPlaceholder?t.lang.weekPlaceholder:r==="time"&&t.timePickerLocale.placeholder?t.timePickerLocale.placeholder:t.lang.placeholder}function As(t,r,a){return a!==void 0?a:r==="year"&&t.lang.yearPlaceholder?t.lang.rangeYearPlaceholder:r==="quarter"&&t.lang.quarterPlaceholder?t.lang.rangeQuarterPlaceholder:r==="month"&&t.lang.monthPlaceholder?t.lang.rangeMonthPlaceholder:r==="week"&&t.lang.weekPlaceholder?t.lang.rangeWeekPlaceholder:r==="time"&&t.timePickerLocale.placeholder?t.timePickerLocale.rangePlaceholder:t.lang.rangePlaceholder}function Zn(t,r){const{allowClear:a=!0}=t,{clearIcon:s,removeIcon:i}=$r(Object.assign(Object.assign({},t),{prefixCls:r,componentName:"DatePicker"}));return[n.useMemo(()=>a===!1?!1:Object.assign({clearIcon:s},a===!0?{}:a),[a,s]),i]}const[Vs,$s]=["week","WeekPicker"],[Hs,qs]=["month","MonthPicker"],[_s,Bs]=["year","YearPicker"],[zs,Ys]=["quarter","QuarterPicker"],[er,rn]=["time","TimePicker"],Ls=t=>n.createElement(Ce,Object.assign({size:"small",type:"primary"},t));function tr(t){return n.useMemo(()=>Object.assign({button:Ls},t),[t])}var Us=function(t,r){var a={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)r.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(a[s[i]]=t[s[i]]);return a};const Gs=t=>n.forwardRef((a,s)=>{var i;const{prefixCls:o,getPopupContainer:m,components:l,className:c,style:d,placement:u,size:b,disabled:y,bordered:k=!0,placeholder:S,popupClassName:g,dropdownClassName:w,status:D,rootClassName:p,variant:h,picker:N}=a,E=Us(a,["prefixCls","getPopupContainer","components","className","style","placement","size","disabled","bordered","placeholder","popupClassName","dropdownClassName","status","rootClassName","variant","picker"]),F=n.useRef(null),{getPrefixCls:U,direction:C,getPopupContainer:v,rangePicker:j}=n.useContext(Ka),O=U("picker",o),{compactSize:$,compactItemClassnames:X}=dn(O,C),A=U(),[V,I]=kn("rangePicker",h,k),W=mn(O),[L,Q,z]=wn(O,W),[Y]=Zn(a,O),R=tr(l),_=fn(ee=>{var fe;return(fe=b??$)!==null&&fe!==void 0?fe:ee}),f=n.useContext(hn),T=y??f,q=n.useContext(pn),{hasFeedback:H,status:K,feedbackIcon:de}=q,ve=n.createElement(n.Fragment,null,N===er?n.createElement(Jn,null):n.createElement(Nn,null),H&&de);n.useImperativeHandle(s,()=>F.current);const[se]=vn("Calendar",xn),De=Object.assign(Object.assign({},se),a.locale),[ce]=gn("DatePicker",(i=a.popupStyle)===null||i===void 0?void 0:i.zIndex);return L(n.createElement(bn,{space:!0},n.createElement(Ds,Object.assign({separator:n.createElement("span",{"aria-label":"to",className:`${O}-separator`},n.createElement(Ms,null)),disabled:T,ref:F,placement:u,placeholder:As(De,N,S),suffixIcon:ve,prevIcon:n.createElement("span",{className:`${O}-prev-icon`}),nextIcon:n.createElement("span",{className:`${O}-next-icon`}),superPrevIcon:n.createElement("span",{className:`${O}-super-prev-icon`}),superNextIcon:n.createElement("span",{className:`${O}-super-next-icon`}),transitionName:`${A}-slide-up`,picker:N},E,{className:$e({[`${O}-${_}`]:_,[`${O}-${V}`]:I},In(O,On(K,D),H),Q,X,c,j==null?void 0:j.className,z,W,p),style:Object.assign(Object.assign({},j==null?void 0:j.style),d),locale:De.lang,prefixCls:O,getPopupContainer:m||v,generateConfig:t,components:R,direction:C,classNames:{popup:$e(Q,g||w,z,W,p)},styles:{popup:Object.assign(Object.assign({},a.popupStyle),{zIndex:ce})},allowClear:Y}))))});var Ks=function(t,r){var a={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)r.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(a[s[i]]=t[s[i]]);return a};const Ws=t=>{const r=(c,d)=>{const u=d===rn?"timePicker":"datePicker";return n.forwardRef((y,k)=>{var S;const{prefixCls:g,getPopupContainer:w,components:D,style:p,className:h,rootClassName:N,size:E,bordered:F,placement:U,placeholder:C,popupClassName:v,dropdownClassName:j,disabled:O,status:$,variant:X,onCalendarChange:A}=y,V=Ks(y,["prefixCls","getPopupContainer","components","style","className","rootClassName","size","bordered","placement","placeholder","popupClassName","dropdownClassName","disabled","status","variant","onCalendarChange"]),{getPrefixCls:I,direction:W,getPopupContainer:L,[u]:Q}=n.useContext(Ka),z=I("picker",g),{compactSize:Y,compactItemClassnames:R}=dn(z,W),_=n.useRef(null),[f,T]=kn("datePicker",X,F),q=mn(z),[H,K,de]=wn(z,q);n.useImperativeHandle(k,()=>_.current);const ve={showToday:!0},se=c||y.picker,De=I(),{onSelect:ce,multiple:ee}=V,fe=ce&&c==="time"&&!ee,xe=(Ue,we,ue)=>{A==null||A(Ue,we,ue),fe&&ce(Ue)},[G,M]=Zn(y,z),J=tr(D),x=fn(Ue=>{var we;return(we=E??Y)!==null&&we!==void 0?we:Ue}),Z=n.useContext(hn),oe=O??Z,ke=n.useContext(pn),{hasFeedback:Te,status:Le,feedbackIcon:We}=ke,Ie=n.createElement(n.Fragment,null,se==="time"?n.createElement(Jn,null):n.createElement(Nn,null),Te&&We),[ht]=vn("DatePicker",xn),Re=Object.assign(Object.assign({},ht),y.locale),[Qe]=gn("DatePicker",(S=y.popupStyle)===null||S===void 0?void 0:S.zIndex);return H(n.createElement(bn,{space:!0},n.createElement(Os,Object.assign({ref:_,placeholder:Fs(Re,se,C),suffixIcon:Ie,placement:U,prevIcon:n.createElement("span",{className:`${z}-prev-icon`}),nextIcon:n.createElement("span",{className:`${z}-next-icon`}),superPrevIcon:n.createElement("span",{className:`${z}-super-prev-icon`}),superNextIcon:n.createElement("span",{className:`${z}-super-next-icon`}),transitionName:`${De}-slide-up`,picker:c,onCalendarChange:xe},ve,V,{locale:Re.lang,className:$e({[`${z}-${x}`]:x,[`${z}-${f}`]:T},In(z,On(Le,$),Te),K,R,Q==null?void 0:Q.className,h,de,q,N),style:Object.assign(Object.assign({},Q==null?void 0:Q.style),p),prefixCls:z,getPopupContainer:w||L,generateConfig:t,components:J,direction:W,disabled:oe,classNames:{popup:$e(K,de,q,N,v||j)},styles:{popup:Object.assign(Object.assign({},y.popupStyle),{zIndex:Qe})},allowClear:G,removeIcon:M}))))})},a=r(),s=r(Vs,$s),i=r(Hs,qs),o=r(_s,Bs),m=r(zs,Ys),l=r(er,rn);return{DatePicker:a,WeekPicker:s,MonthPicker:i,YearPicker:o,TimePicker:l,QuarterPicker:m}},ar=t=>{const{DatePicker:r,WeekPicker:a,MonthPicker:s,YearPicker:i,TimePicker:o,QuarterPicker:m}=Ws(t),l=Gs(t),c=r;return c.WeekPicker=a,c.MonthPicker=s,c.YearPicker=i,c.RangePicker=l,c.TimePicker=o,c.QuarterPicker=m,c},Be=ar(Ar),Qs=yn(Be,"picker",null);Be._InternalPanelDoNotUseOrYouWillBeFired=Qs;const Xs=yn(Be.RangePicker,"picker",null);Be._InternalRangePanelDoNotUseOrYouWillBeFired=Xs;Be.generatePicker=ar;var Js={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM340 683v77c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-77c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198V264c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v221c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5.3-.5.7-.9 1-1.4.1-.1.2-.3.3-.4.5-.6.9-1.1 1.4-1.6l.3-.3 1.2-1.2.4-.4c.5-.5 1-.9 1.6-1.4.6-.5 1.1-.9 1.7-1.3.2-.1.3-.2.5-.3.5-.3.9-.7 1.4-1 .1-.1.3-.2.4-.3.6-.4 1.2-.7 1.9-1.1.1-.1.3-.1.4-.2.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8.7-.3 1.4-.5 2.1-.7.2-.1.4-.1.6-.2.6-.2 1.1-.3 1.7-.4.2 0 .3-.1.5-.1.7-.2 1.5-.3 2.2-.4.2 0 .3 0 .5-.1.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2.2 0 .3 0 .5.1.7.1 1.5.2 2.2.4.2 0 .3.1.5.1.6.1 1.2.3 1.7.4.2.1.4.1.6.2.7.2 1.4.4 2.1.7.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8.1.1.3.1.4.2.6.3 1.3.7 1.9 1.1.1.1.3.2.4.3.5.3 1 .6 1.4 1 .2.1.3.2.5.3.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4 1.2 1.2.3.3c.5.5 1 1.1 1.4 1.6.1.1.2.3.3.4.4.4.7.9 1 1.4.1.2.2.3.3.5l1.2 1.8s0 .1.1.1a36.18 36.18 0 015.1 18.5c0 6-1.5 11.7-4.1 16.7-.3.6-.7 1.2-1 1.8 0 0 0 .1-.1.1l-1.2 1.8c-.1.2-.2.3-.3.5-.3.5-.7.9-1 1.4-.1.1-.2.3-.3.4-.5.6-.9 1.1-1.4 1.6l-.3.3-1.2 1.2-.4.4c-.5.5-1 .9-1.6 1.4-.6.5-1.1.9-1.7 1.3-.2.1-.3.2-.5.3-.5.3-.9.7-1.4 1-.1.1-.3.2-.4.3-.6.4-1.2.7-1.9 1.1-.1.1-.3.1-.4.2-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8-.7.3-1.4.5-2.1.7-.2.1-.4.1-.6.2-.6.2-1.1.3-1.7.4-.2 0-.3.1-.5.1-.7.2-1.5.3-2.2.4-.2 0-.3 0-.5.1-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2-.2 0-.3 0-.5-.1-.7-.1-1.5-.2-2.2-.4-.2 0-.3-.1-.5-.1-.6-.1-1.2-.3-1.7-.4-.2-.1-.4-.1-.6-.2-.7-.2-1.4-.4-2.1-.7-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8-.1-.1-.3-.1-.4-.2-.6-.3-1.3-.7-1.9-1.1-.1-.1-.3-.2-.4-.3-.5-.3-1-.6-1.4-1-.2-.1-.3-.2-.5-.3-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4-1.2-1.2-.3-.3c-.5-.5-1-1.1-1.4-1.6-.1-.1-.2-.3-.3-.4-.4-.4-.7-.9-1-1.4-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7zM620 539v221c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V539c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198v-77c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v77c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5.3-.5.7-.9 1-1.4.1-.1.2-.3.3-.4.5-.6.9-1.1 1.4-1.6l.3-.3 1.2-1.2.4-.4c.5-.5 1-.9 1.6-1.4.6-.5 1.1-.9 1.7-1.3.2-.1.3-.2.5-.3.5-.3.9-.7 1.4-1 .1-.1.3-.2.4-.3.6-.4 1.2-.7 1.9-1.1.1-.1.3-.1.4-.2.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8.7-.3 1.4-.5 2.1-.7.2-.1.4-.1.6-.2.6-.2 1.1-.3 1.7-.4.2 0 .3-.1.5-.1.7-.2 1.5-.3 2.2-.4.2 0 .3 0 .5-.1.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2.2 0 .3 0 .5.1.7.1 1.5.2 2.2.4.2 0 .3.1.5.1.6.1 1.2.3 1.7.4.2.1.4.1.6.2.7.2 1.4.4 2.1.7.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8.1.1.3.1.4.2.6.3 1.3.7 1.9 1.1.1.1.3.2.4.3.5.3 1 .6 1.4 1 .2.1.3.2.5.3.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4 1.2 1.2.3.3c.5.5 1 1.1 1.4 1.6.1.1.2.3.3.4.4.4.7.9 1 1.4.1.2.2.3.3.5l1.2 1.8v.1a36.18 36.18 0 015.1 18.5c0 6-1.5 11.7-4.1 16.7-.3.6-.7 1.2-1 1.8v.1l-1.2 1.8c-.1.2-.2.3-.3.5-.3.5-.7.9-1 1.4-.1.1-.2.3-.3.4-.5.6-.9 1.1-1.4 1.6l-.3.3-1.2 1.2-.4.4c-.5.5-1 .9-1.6 1.4-.6.5-1.1.9-1.7 1.3-.2.1-.3.2-.5.3-.5.3-.9.7-1.4 1-.1.1-.3.2-.4.3-.6.4-1.2.7-1.9 1.1-.1.1-.3.1-.4.2-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8-.7.3-1.4.5-2.1.7-.2.1-.4.1-.6.2-.6.2-1.1.3-1.7.4-.2 0-.3.1-.5.1-.7.2-1.5.3-2.2.4-.2 0-.3 0-.5.1-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2-.2 0-.3 0-.5-.1-.7-.1-1.5-.2-2.2-.4-.2 0-.3-.1-.5-.1-.6-.1-1.2-.3-1.7-.4-.2-.1-.4-.1-.6-.2-.7-.2-1.4-.4-2.1-.7-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8-.1-.1-.3-.1-.4-.2-.6-.3-1.3-.7-1.9-1.1-.1-.1-.3-.2-.4-.3-.5-.3-1-.6-1.4-1-.2-.1-.3-.2-.5-.3-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4-1.2-1.2-.3-.3c-.5-.5-1-1.1-1.4-1.6-.1-.1-.2-.3-.3-.4-.4-.4-.7-.9-1-1.4-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7z"}}]},name:"control",theme:"outlined"},Zs=function(r,a){return n.createElement(Ct,Se({},r,{ref:a,icon:Js}))},La=n.forwardRef(Zs),ei={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM382 896h-.2L232 746.2v-.2h150v150z"}}]},name:"copy",theme:"filled"},ti=function(r,a){return n.createElement(Ct,Se({},r,{ref:a,icon:ei}))},ha=n.forwardRef(ti),ai={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"},ni=function(r,a){return n.createElement(Ct,Se({},r,{ref:a,icon:ai}))},nr=n.forwardRef(ni),ri={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},si=function(r,a){return n.createElement(Ct,Se({},r,{ref:a,icon:ri}))},rr=n.forwardRef(si),ii={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},li=function(r,a){return n.createElement(Ct,Se({},r,{ref:a,icon:ii}))},oi=n.forwardRef(li);const ci=()=>{const{message:t}=ua.useApp(),[r,a]=n.useState(""),[s,i]=n.useState("newest"),[o,m]=n.useState({field:"id",order:"descend"}),[l,c]=n.useState(1),[d,u]=n.useState(10),[b,y]=n.useState([]),[k,S]=n.useState([]),[g,w]=n.useState(!1),[D,p]=n.useState(!1),[h,N]=n.useState(!1),[E,F]=n.useState(null),[U,C]=n.useState(null),[v,j]=n.useState(!1),[O,$]=n.useState("default"),{logUserActivity:X}=zt(),{logUserNotification:A}=Yt(),{userData:V}=Rt(),{userData:I}=Et(),W=(V==null?void 0:V.username)||(I==null?void 0:I.username)||"Unknown User",L=!!V,Q=!!I,z=L?"admin":Q?"user":"guest",Y=async()=>{j(!0),a(""),i("newest"),m({field:"id",order:"descend"}),c(1),u(10),y([]),$("default");try{const M=await lt();S(M)}catch{t.error("Failed to load inventory data.")}finally{j(!1)}};n.useEffect(()=>{Y()},[]);const R=Y,_=Array.isArray(k)?k.filter(M=>Object.values(M).join(" ").toLowerCase().includes(r.toLowerCase())):[],f=[..._].sort((M,J)=>{if(o.field&&o.order){const{field:x,order:Z}=o;if(Z==="ascend")return M[x]>J[x]?1:-1;if(Z==="descend")return M[x]<J[x]?1:-1}return 0}),T=f.length,q=f.slice((l-1)*d,l*d);return{searchText:r,setSearchText:a,sortOrder:s,setSortOrder:i,sorterConfig:o,setSorterConfig:m,currentPage:l,setCurrentPage:c,pageSize:d,setPageSize:u,selectedRowKeys:b,setSelectedRowKeys:y,dataSource:k,setDataSource:S,isModalVisible:g,setIsModalVisible:w,isEditModalVisible:D,setIsEditModalVisible:p,redistributeItemData:E,setRedistributeItemData:F,isRedistributeModalVisible:h,setIsRedistributeModalVisible:N,editingItem:U,setEditingItem:C,isLoading:v,setIsLoading:j,activeTab:O,setActiveTab:$,username:W,isAdmin:L,isUser:Q,userRole:z,filteredData:_,sortedData:f,paginatedData:q,totalEntries:T,handleRedistribute:M=>{F(M),N(!0)},handleRedistributeItem:async M=>{var J,x;j(!0);try{const Z=await kr(M);t.success(`Item redistributed successfully! New Item ID: ${Z.new_item_id}`);const oe=await lt();S(oe),N(!1),F(null),await X(W,"Inventory",`Redistributed item with ID: ${M.id} to new item ID: ${Z.new_item_id}`),await A("Inventory Update",`You redistributed an item with ID: ${M.id} to new item ID: ${Z.new_item_id}`)}catch(Z){const oe=((x=(J=Z==null?void 0:Z.response)==null?void 0:J.data)==null?void 0:x.message)||Z.message||"";oe.toLowerCase().includes("quantity")&&oe.includes("1")?t.error("You can't redistribute an item with quantity of 1."):t.error("Failed to redistribute item."),console.error(Z)}finally{j(!1)}},handlePageChange:(M,J)=>{c(M),u(J)},handleSortOrderChange:M=>{i(M.toLowerCase());const J=M.toLowerCase()==="newest"?"descend":"ascend";m({field:"id",order:J}),c(1)},handleTableChange:M=>{M.field&&m({field:M.field,order:M.order})},handleAddItem:async M=>{try{j(!0);const J=await Nr(M);if(J&&J.id){t.success(`Item added successfully! ID: ${J.id}`),await X(W,"Inventory",`Added item with ID: ${J.id}`),await A("Inventory Update",`You added an item with ID: ${J.id}`);const x=await lt();S(x)}else t.error("Failed to retrieve item ID.")}catch(J){console.error("Error adding item:",J),t.error("Failed to add item.")}finally{j(!1)}},handleEdit:M=>{C(M),p(!0)},handleEditItem:async(M,J=null)=>{const x=J||U;if(!Object.keys(M).some(oe=>{const ke=M[oe],Te=x[oe];if(oe==="issuedDate"||oe==="purchaseDate"){const Le=Te?Ve(Te).format("YYYY-MM-DD"):null;return ke!==Le}return typeof ke=="string"?ke.trim()!==(Te||"").trim():ke!==Te})){t.info("No changes detected.");return}j(!0);try{const oe=await wr({...M,id:(M==null?void 0:M.id)||(U==null?void 0:U.id)});if(oe.message==="Item updated successfully"){const ke=await lt();S(ke),t.success(`Item with ID ${M.id} updated successfully!`),await X(W,"Inventory",`Updated item with ID: ${M.id}`),await A("Inventory Update",`You edited an item with ID: ${M.id}`),p(!1)}else t.error(oe.message||"Failed to update item.")}catch(oe){console.error("Error updating item:",oe),oe.response&&oe.response.data&&oe.response.data.message?t.error(`Failed to update item: ${oe.response.data.message}`):t.error("Failed to update item. Please try again.")}finally{j(!1)}},handleBatchDelete:async()=>{if(!L){t.error("You do not have permission to delete items.");return}if(b.length===0){t.warning("Please select items to delete.");return}try{if((await Sr(b)).message==="Items deleted successfully"){const J=await lt();S(J),y([]),t.success("Items deleted successfully!"),await X(W,"Inventory",`Deleted item(s) with ID(s): ${b.join(", ")}`),await A("Inventory Update",`You deleted item(s) with ID(s): ${b.join(", ")}`)}else t.error("Error deleting items.")}catch(M){console.error("Error deleting items:",M),t.error("Failed to delete items. Please try again.")}finally{j(!1)}},handleTabChange:M=>{document.activeElement&&document.activeElement.blur(),$(M)},handleRefresh:R,rowSelection:L?{selectedRowKeys:b,onChange:y}:null}},ui=async t=>{try{return(await da.post("/save_template.php",t)).data}catch(r){throw r}},di=async()=>{try{return(await da.get("/get_templates.php")).data}catch(t){throw t}},mi=async(t,r)=>{try{return(await da.put(`/update_template.php?id=${t}`,r)).data}catch(a){throw a}},fi=async t=>{try{return(await da.delete(`/delete_template.php?id=${t}`)).data}catch(r){throw r}},hi=t=>{const[r,a]=n.useState(null),[s,i]=n.useState(null),[o,m]=n.useState([]),[l,c]=n.useState(!1),[d,u]=n.useState(null),[b]=P.useForm(),{message:y}=ua.useApp(),[k,S]=n.useState(0),{logUserActivity:g}=zt(),{logUserNotification:w}=Yt(),D=Rt();Et(),n.useEffect(()=>{p()},[k]);const p=async()=>{try{const C=await di();C.success&&(m(C.templates),r==="User Templates"&&(a(null),i(null),t(null)))}catch(C){console.error("Error loading templates:",C),y.error("Error loading templates")}};return{selectedCategory:r,selectedType:s,userTemplates:o,isEditModalVisible:l,editingTemplate:d,form:b,refreshTrigger:k,setRefreshTrigger:S,handleCategoryChange:C=>{if(C==="No Template"||!C){a(null),i(null),t(null);return}a(C),i(null)},handleTypeChange:C=>{if(!C||C==="No Template")return a(null),i(null),t(null),{isUserTemplate:!1};if(i(C),r==="User Templates"){const v=o.find(j=>j.template_name===C);if(v){const j={...v,locationType:v.location.includes("Head Office")?"Head Office":"Other",department:v.location.includes("Head Office")?v.location.split(" - ")[1]:null,location:(v.location.includes("Head Office"),v.location)};return t(j),{isUserTemplate:!0}}}else if(r&&oa[r][C])return t(oa[r][C]),{isUserTemplate:!1}},handleEdit:C=>{u(C),b.setFieldsValue({...C,locationType:C.location.includes("Head Office")?"Head Office":"Other",department:C.location.includes("Head Office")?C.location.split(" - ")[1]:null,location:C.location.includes("Head Office")?null:C.location,purchaseDate:C.purchaseDate?Ve(C.purchaseDate):void 0,issuedDate:C.issuedDate?Ve(C.issuedDate):void 0}),c(!0)},handleDelete:async C=>{try{const v=await fi(C.id);v.success?(y.success("Template deleted successfully"),m(j=>j.filter(O=>O.id!==C.id)),s===C.template_name&&(a(null),i(null),t(null)),S(j=>j+1),await g(D.userData.username,"Template Deleted",`Template "${C.template_name}" has been deleted.`),await w("Template Deleted",`Template "${C.template_name}" has been deleted.`)):y.error(v.message||"Failed to delete template")}catch(v){console.error("Error deleting template:",v),y.error("Error deleting template")}},handleEditSubmit:async C=>{try{const v={...C,location:C.locationType==="Head Office"?`Head Office - ${C.department}`:C.location,purchaseDate:C.purchaseDate?C.purchaseDate.format("YYYY-MM-DD"):null,issuedDate:C.issuedDate?C.issuedDate.format("YYYY-MM-DD"):null};delete v.locationType,delete v.department;const j=await mi(d.id,v);if(j.success){if(y.success("Template updated successfully"),c(!1),m(O=>O.map($=>$.id===d.id?{...$,...v}:$)),s===d.template_name){const O={...d,...v,locationType:v.location.includes("Head Office")?"Head Office":"Other",department:v.location.includes("Head Office")?v.location.split(" - ")[1]:null};t(O)}S(O=>O+1),await g(D.userData.username,"Template Updated",`Template "${C.template_name}" has been updated.`),await w("Template Updated",`Template "${C.template_name}" has been updated.`)}else y.error(j.message||"Failed to update template")}catch(v){console.error("Error updating template:",v),y.error("Error updating template")}},setIsEditModalVisible:c}},{Option:ie}=pe,pi={SOD:"SOD",CID:"CID",GAD:"GAD",HRD:"HRD",AFD:"AFD",EOD:"EOD",BDO:"BDO"},oa={"IT Equipment":{"System Unit":{type:"System Unit",brand:"Dell",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Standard office computer",serialNumber:"",purchaseDate:"",issuedDate:""},Laptop:{type:"Laptop",brand:"Lenovo",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Business laptop",serialNumber:"",purchaseDate:"",issuedDate:""},Monitor:{type:"Monitor",brand:"Dell",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Office monitor",serialNumber:"",purchaseDate:"",issuedDate:""},Printer:{type:"Printer",brand:"HP",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Office printer",serialNumber:"",purchaseDate:"",issuedDate:""}},"Network Equipment":{Router:{type:"Router",brand:"Cisco",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Network router",serialNumber:"",purchaseDate:"",issuedDate:""},Switch:{type:"Switch",brand:"Cisco",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Network switch",serialNumber:"",purchaseDate:"",issuedDate:""},Modem:{type:"Modem",brand:"TP-Link",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Internet modem",serialNumber:"",purchaseDate:"",issuedDate:""},"WIFI-Mesh":{type:"WIFI-Mesh",brand:"Ubiquiti",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Wireless mesh system",serialNumber:"",purchaseDate:"",issuedDate:""}},"Security Equipment":{CCTV:{type:"CCTV",brand:"Hikvision",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security camera",serialNumber:"",purchaseDate:"",issuedDate:""},Biometrics:{type:"Biometrics",brand:"ZKTeco",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Biometric scanner",serialNumber:"",purchaseDate:"",issuedDate:""},"Metal Detector":{type:"Metal Detector",brand:"Garrett",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security metal detector",serialNumber:"",purchaseDate:"",issuedDate:""},"Guard Tour System":{type:"Guard Tour System",brand:"Detex",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Guard tour monitoring system",serialNumber:"",purchaseDate:"",issuedDate:""}},"Communication Equipment":{Radio:{type:"Radio",brand:"Motorola",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Two-way radio",serialNumber:"",purchaseDate:"",issuedDate:""},Smartphone:{type:"Smartphone",brand:"Samsung",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Office mobile phone",serialNumber:"",purchaseDate:"",issuedDate:""},Headset:{type:"Headset",brand:"Jabra",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Office headset",serialNumber:"",purchaseDate:"",issuedDate:""},Megaphone:{type:"Megaphone",brand:"Pyle",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Public address system",serialNumber:"",purchaseDate:"",issuedDate:""}},"Power Equipment":{UPS:{type:"UPS",brand:"APC",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Uninterruptible power supply",serialNumber:"",purchaseDate:"",issuedDate:""},AVR:{type:"AVR",brand:"Stavol",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Automatic voltage regulator",serialNumber:"",purchaseDate:"",issuedDate:""},Battery:{type:"Battery",brand:"Yuasa",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Backup battery",serialNumber:"",purchaseDate:"",issuedDate:""},Charger:{type:"Charger",brand:"Anker",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Device charger",serialNumber:"",purchaseDate:"",issuedDate:""}},Accessories:{Keyboard:{type:"Keyboard",brand:"Logitech",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Computer keyboard",serialNumber:"",purchaseDate:"",issuedDate:""},Mouse:{type:"Mouse",brand:"Logitech",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Computer mouse",serialNumber:"",purchaseDate:"",issuedDate:""},Speaker:{type:"Speaker",brand:"JBL",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Audio speaker",serialNumber:"",purchaseDate:"",issuedDate:""},Microphone:{type:"Microphone",brand:"Shure",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Audio microphone",serialNumber:"",purchaseDate:"",issuedDate:""}},Others:{Pedestal:{type:"Pedestal",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"General",remarks:"Equipment pedestal",serialNumber:"",purchaseDate:"",issuedDate:""},Podium:{type:"Podium",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"General",remarks:"Presentation podium",serialNumber:"",purchaseDate:"",issuedDate:""},"Search Stick":{type:"Search Stick",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security search tool",serialNumber:"",purchaseDate:"",issuedDate:""},Searchlight:{type:"Searchlight",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security search light",serialNumber:"",purchaseDate:"",issuedDate:""},"Guard Tour Chips":{type:"Guard Tour Chips",brand:"Detex",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Guard tour system chips",serialNumber:"",purchaseDate:"",issuedDate:""},"Under Chassis":{type:"Under Chassis",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Vehicle under chassis scanner",serialNumber:"",purchaseDate:"",issuedDate:""}}},vi=n.forwardRef(({onTemplateSelect:t},r)=>{const{selectedCategory:a,selectedType:s,userTemplates:i,isEditModalVisible:o,form:m,setRefreshTrigger:l,handleCategoryChange:c,handleTypeChange:d,handleEdit:u,handleDelete:b,handleEditSubmit:y,setIsEditModalVisible:k}=hi(t),S=Rt(),g=Et(),w=()=>{const h=S.token&&S.userData,N=g.token&&g.userData;if(h)return S.userData;if(N)return g.userData;const E=ft.get("username"),F=ft.get("user_id");return E&&F?{username:E,id:F}:null},D=h=>{const N=w();return N&&N.username===h.created_by};n.useImperativeHandle(r,()=>({setRefreshTrigger:l,handleTypeChange:d}));const p=Object.keys(oa).sort();return e.jsxs(kt,{direction:"vertical",style:{width:"100%",marginBottom:"16px"},children:[e.jsx(En,{message:"Quick Templates",description:"Select a category and type to quickly fill item details, or choose No Template to use your own values",type:"info",showIcon:!0,className:"theme-aware-alert"}),e.jsxs(Pt,{gutter:16,children:[e.jsx(Ke,{span:12,children:e.jsxs(pe,{placeholder:"Select Category",style:{width:"100%"},onChange:c,value:a,allowClear:!0,children:[e.jsx(ie,{value:"No Template",children:"No Template"}),p.map(h=>e.jsx(ie,{value:h,children:h},h)),i.length>0&&e.jsx(ie,{value:"User Templates",children:"User Templates"})]})}),e.jsx(Ke,{span:12,children:e.jsx(pe,{placeholder:"Select Type",style:{width:"100%"},onChange:d,disabled:!a,value:s,allowClear:!0,optionLabelProp:"label",children:a==="User Templates"?i.sort((h,N)=>h.template_name.localeCompare(N.template_name)).map(h=>e.jsx(ie,{value:h.template_name,label:h.template_name,children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:h.template_name}),e.jsxs("div",{style:{fontSize:"12px",color:"#8c8c8c",marginTop:"2px"},children:["Created by: ",h.created_by||"System"]})]}),e.jsxs(kt,{children:[e.jsx(Ye,{title:D(h)?"Edit Template":"Only the creator can edit this template",children:e.jsx(Ce,{type:"text",style:{backgroundColor:"transparent"},icon:e.jsx(Qa,{}),onClick:N=>{N.stopPropagation(),u(h)},disabled:!D(h)})}),e.jsx(Ye,{title:D(h)?"Delete Template":"Only the creator can delete this template",children:e.jsx(Ce,{type:"text",style:{backgroundColor:"transparent"},danger:!0,icon:e.jsx(la,{}),onClick:N=>{N.stopPropagation(),b(h)},disabled:!D(h)})})]})]})},h.template_name)):a&&Object.keys(oa[a]).sort().map(h=>e.jsx(ie,{value:h,children:h},h))})})]}),e.jsx(Hr,{style:{margin:"16px 0"}}),e.jsx(Lt,{title:"Edit Template",open:o,onCancel:()=>k(!1),footer:null,width:900,children:e.jsx(P,{form:m,onFinish:y,layout:"vertical",children:e.jsxs(Pt,{gutter:16,children:[e.jsxs(Ke,{span:12,children:[e.jsx(P.Item,{name:"template_name",label:"Template Name",rules:[{required:!0,message:"Please enter template name"}],children:e.jsx(be,{})}),e.jsx(P.Item,{name:"type",label:"Type",rules:[{required:!0,message:"Please select type"}],children:e.jsxs(pe,{children:[e.jsx(ie,{value:"AVR",children:"AVR"}),e.jsx(ie,{value:"Battery",children:"Battery"}),e.jsx(ie,{value:"Biometrics",children:"Biometrics"}),e.jsx(ie,{value:"Camera",children:"Camera"}),e.jsx(ie,{value:"CCTV",children:"CCTV"}),e.jsx(ie,{value:"Charger",children:"Charger"}),e.jsx(ie,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(ie,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(ie,{value:"Headset",children:"Headset"}),e.jsx(ie,{value:"Keyboard",children:"Keyboard"}),e.jsx(ie,{value:"Laptop",children:"Laptop"}),e.jsx(ie,{value:"Megaphone",children:"Megaphone"}),e.jsx(ie,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(ie,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(ie,{value:"Microphone",children:"Microphone"}),e.jsx(ie,{value:"Modem",children:"Modem"}),e.jsx(ie,{value:"Monitor",children:"Monitor"}),e.jsx(ie,{value:"Mouse",children:"Mouse"}),e.jsx(ie,{value:"Others",children:"Others"}),e.jsx(ie,{value:"Pedestal",children:"Pedestal"}),e.jsx(ie,{value:"Podium",children:"Podium"}),e.jsx(ie,{value:"Printer",children:"Printer"}),e.jsx(ie,{value:"Radio",children:"Radio"}),e.jsx(ie,{value:"Router",children:"Router"}),e.jsx(ie,{value:"Search Stick",children:"Search Stick"}),e.jsx(ie,{value:"Searchlight",children:"Searchlight"}),e.jsx(ie,{value:"Smartphone",children:"Smartphone"}),e.jsx(ie,{value:"Speaker",children:"Speaker"}),e.jsx(ie,{value:"Switch",children:"Switch"}),e.jsx(ie,{value:"System Unit",children:"System Unit"}),e.jsx(ie,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(ie,{value:"UPS",children:"UPS"})]})}),e.jsx(P.Item,{name:"brand",label:"Brand",rules:[{required:!0,message:"Please enter brand"}],children:e.jsx(be,{})}),e.jsx(P.Item,{name:"serialNumber",label:"Serial Number",children:e.jsx(be,{})}),e.jsx(P.Item,{name:"purchaseDate",label:"Purchase Date",rules:[{required:!0,message:"Please select purchase date"}],children:e.jsx(Be,{format:"YYYY-MM-DD",style:{width:"100%"}})}),e.jsx(P.Item,{name:"issuedDate",label:"Issued Date",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(Be,{format:"YYYY-MM-DD",style:{width:"100%"}})})]}),e.jsxs(Ke,{span:12,children:[e.jsx(P.Item,{name:"condition",label:"Condition",rules:[{required:!0,message:"Please select condition"}],children:e.jsxs(pe,{children:[e.jsx(ie,{value:"Brand New",children:"Brand New"}),e.jsx(ie,{value:"Good Condition",children:"Good Condition"}),e.jsx(ie,{value:"Defective",children:"Defective"})]})}),e.jsx(P.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:e.jsxs(pe,{children:[e.jsx(ie,{value:"On Stock",children:"On Stock"}),e.jsx(ie,{value:"Deployed",children:"Deployed"}),e.jsx(ie,{value:"For Repair",children:"For Repair"})]})}),e.jsx(P.Item,{name:"locationType",label:"Detachment/Office",rules:[{required:!0,message:"Please select a location type"}],children:e.jsxs(pe,{onChange:h=>{const N=h==="Head Office";m.setFieldsValue({department:N?m.getFieldValue("department"):null,location:N?null:m.getFieldValue("location")})},children:[e.jsx(ie,{value:"Head Office",children:"Head Office"}),e.jsx(ie,{value:"Other",children:"Other (Specify Below)"})]})}),e.jsx(P.Item,{noStyle:!0,shouldUpdate:(h,N)=>h.locationType!==N.locationType,children:({getFieldValue:h})=>h("locationType")==="Head Office"?e.jsx(P.Item,{name:"department",label:"Department (Head Office)",rules:[{required:!0,message:"Please select a department"}],children:e.jsx(pe,{children:Object.entries(pi).map(([E,F])=>e.jsx(ie,{value:E,children:F},E))})}):e.jsx(P.Item,{name:"location",label:"Specific Location",rules:[{required:!0,message:"Please input a location"}],children:e.jsx(be,{})})}),e.jsx(P.Item,{name:"remarks",label:"Remarks",children:e.jsx(be.TextArea,{})}),e.jsx(P.Item,{children:e.jsx(Ce,{type:"primary",htmlType:"submit",children:"Save Changes"})})]})]})})})]})}),{Option:ae}=pe,xi=({form:t,onFinish:r,loading:a,templateRef:s,onTemplateSelect:i,isHeadOffice:o,setIsHeadOffice:m,hasSerialNumber:l,handleSerialChange:c,selectedStockItem:d})=>e.jsxs(P,{form:t,onFinish:r,layout:"vertical",initialValues:{quantity:1},children:[e.jsx(vi,{ref:s,onTemplateSelect:i}),e.jsxs(Pt,{gutter:[32,24],children:[e.jsx(Ke,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select item type",children:[e.jsx(ae,{value:"AVR",children:"AVR"}),e.jsx(ae,{value:"Battery",children:"Battery"}),e.jsx(ae,{value:"Biometrics",children:"Biometrics"}),e.jsx(ae,{value:"Camera",children:"Camera"}),e.jsx(ae,{value:"CCTV",children:"CCTV"}),e.jsx(ae,{value:"Charger",children:"Charger"}),e.jsx(ae,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(ae,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(ae,{value:"Headset",children:"Headset"}),e.jsx(ae,{value:"Keyboard",children:"Keyboard"}),e.jsx(ae,{value:"Laptop",children:"Laptop"}),e.jsx(ae,{value:"Megaphone",children:"Megaphone"}),e.jsx(ae,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(ae,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(ae,{value:"Microphone",children:"Microphone"}),e.jsx(ae,{value:"Modem",children:"Modem"}),e.jsx(ae,{value:"Monitor",children:"Monitor"}),e.jsx(ae,{value:"Mouse",children:"Mouse"}),e.jsx(ae,{value:"Others",children:"Others"}),e.jsx(ae,{value:"Pedestal",children:"Pedestal"}),e.jsx(ae,{value:"Podium",children:"Podium"}),e.jsx(ae,{value:"Printer",children:"Printer"}),e.jsx(ae,{value:"Radio",children:"Radio"}),e.jsx(ae,{value:"Router",children:"Router"}),e.jsx(ae,{value:"Search Stick",children:"Search Stick"}),e.jsx(ae,{value:"Searchlight",children:"Searchlight"}),e.jsx(ae,{value:"Smartphone",children:"Smartphone"}),e.jsx(ae,{value:"Speaker",children:"Speaker"}),e.jsx(ae,{value:"Switch",children:"Switch"}),e.jsx(ae,{value:"System Unit",children:"System Unit"}),e.jsx(ae,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(ae,{value:"UPS",children:"UPS"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:e.jsx(be,{size:"medium",placeholder:"Enter brand name"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",tooltip:"Optional - Leave empty if there no remarks",children:e.jsx(be.TextArea,{size:"medium",rows:3,placeholder:"Enter any additional remarks"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Serial Number"}),name:"serialNumber",tooltip:"Optional - Leave empty if item has no serial number",children:e.jsx(be,{size:"medium",onChange:c,placeholder:"Enter serial number (optional)"})}),(d==null?void 0:d.action)==="redistribute"&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Original Quantity"}),name:"originalQuantity",rules:[{required:!0,message:"Original quantity is required"}],children:e.jsx(be,{size:"medium",disabled:!0,min:1})}),!l&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:(d==null?void 0:d.action)==="redistribute"?"New Quantity to Redistribute":"Quantity"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity!"},{validator:(u,b)=>!b||b<1?Promise.reject("Quantity must be at least 1"):(d==null?void 0:d.action)==="redistribute"&&(d!=null&&d.quantity)&&b>=d.quantity?Promise.reject(`Quantity must be less than ${d.quantity}`):Promise.resolve()}],children:e.jsx(be,{size:"medium",type:"number",min:1,max:(d==null?void 0:d.action)==="redistribute"&&(d!=null&&d.quantity)?d.quantity-1:void 0,placeholder:"Enter quantity"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(Be,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select issued date"})})]})}),e.jsx(Ke,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Purchased Date"}),name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:e.jsx(Be,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select purchase date"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select condition",children:[e.jsx(ae,{value:"Brand New",children:"Brand New"}),e.jsx(ae,{value:"Good Condition",children:"Good Condition"}),e.jsx(ae,{value:"Defective",children:"Defective"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Detachment/Office"}),name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:e.jsxs(pe,{size:"medium",onChange:u=>m(u==="Head Office"),placeholder:"Select location type",children:[e.jsx(ae,{value:"Head Office",children:"Head Office"}),e.jsx(ae,{value:"Other",children:"Other (Specify Below)"})]})}),o&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department!"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select department",children:[e.jsx(ae,{value:"SOD",children:"SOD"}),e.jsx(ae,{value:"CID",children:"CID"}),e.jsx(ae,{value:"GAD",children:"GAD"}),e.jsx(ae,{value:"HRD",children:"HRD"}),e.jsx(ae,{value:"AFD",children:"AFD"}),e.jsx(ae,{value:"EOD",children:"EOD"}),e.jsx(ae,{value:"BDO",children:"BDO"})]})}),!o&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a location!"}],children:e.jsx(be,{size:"medium",placeholder:"Enter specific location"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status!"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select status",children:[e.jsx(ae,{value:"On Stock",children:"On Stock"}),e.jsx(ae,{value:"Deployed",children:"Deployed"}),e.jsx(ae,{value:"For Repair",children:"For Repair"})]})}),e.jsx(P.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(Ce,{type:"primary",htmlType:"submit",icon:e.jsx(rr,{}),loading:a,size:"small",style:{background:"var(--theme-card-head-bg, #5fe7a7)",border:"none",borderRadius:"8px",padding:"10px",height:"auto",fontSize:"14px",fontWeight:"600",color:"var(--theme-text, #072C1C)"},children:"Add Item"})})})]})})]})]}),gi=({onStockItems:t,searchText:r,setSearchText:a,fetchOnStockItems:s,loading:i,handleStockItemSelect:o})=>{const m=t.filter(c=>Object.values(c).some(d=>String(d).toLowerCase().includes(r.toLowerCase()))),l=[{title:"ID",dataIndex:"id",key:"id",width:"15%",render:c=>e.jsx("span",{className:"font-medium text-xs",children:c})},{title:"Type",dataIndex:"type",key:"type",width:"20%",render:c=>e.jsx("span",{className:"font-medium",children:c})},{title:"Brand",dataIndex:"brand",key:"brand",width:"20%",render:c=>e.jsx("span",{className:"font-medium",children:c})},{title:"Quantity",dataIndex:"quantity",key:"quantity",width:"15%",render:c=>e.jsx(Xa,{color:c>5?"green":c>1?"orange":"red",children:c})},{title:"Location",dataIndex:"location",key:"location",width:"20%",render:c=>e.jsx(Ye,{title:c,children:e.jsx("span",{className:"truncate block max-w-[200px]",children:c})})},{title:"Action",key:"action",width:"10%",render:(c,d)=>e.jsxs(kt,{children:[e.jsx(Ye,{title:"Edit",children:e.jsx(Ce,{type:"primary",icon:e.jsx(nr,{}),onClick:()=>o(d),size:"small",style:{backgroundColor:"var(--theme-card-head-bg, #5fe7a7)",color:"black"}})}),d.quantity>1&&e.jsx(Ye,{title:"Redistribute",children:e.jsx(Ce,{type:"primary",icon:e.jsx(ha,{}),onClick:()=>o({...d,action:"redistribute"}),size:"small",style:{backgroundColor:"var(--theme-text-light-custom, #EAF4E2)",color:"black"}})})]})}];return e.jsxs(Gt,{className:"shadow-lg border-0 mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(be,{placeholder:"Search items...",prefix:e.jsx(Bt,{}),value:r,onChange:c=>a(c.target.value),style:{width:300},allowClear:!0,size:"small"})}),e.jsx(Ce,{type:"primary",icon:e.jsx(ia,{}),onClick:s,size:"small",style:{backgroundColor:"var(--theme-card-head-bg, #a7f3d0)",color:"black"},children:"Refresh"})]}),e.jsx(Ht,{dataSource:m,columns:l,rowKey:"id",size:"middle",pagination:{pageSize:5,showSizeChanger:!0,showTotal:c=>`Total ${c} items`},scroll:{y:400},loading:i})]})},{Option:ne}=pe,{Title:bi}=Tt,yi=({form:t,onFinish:r,loading:a,selectedStockItem:s,isHeadOffice:i,setIsHeadOffice:o,hasSerialNumber:m,handleSerialChange:l})=>s?e.jsxs(Gt,{className:"shadow-lg custom-card ",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(bi,{level:4,className:"mb-2",children:s.action==="redistribute"?"🔄 Redistribute Item":"✏️ Edit Item"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.action==="redistribute"?"Create a new item from existing stock":"Update item details and information"})]}),e.jsx(P,{form:t,onFinish:r,layout:"vertical",children:e.jsxs(Pt,{gutter:[32,24],children:[e.jsx(Ke,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select item type",children:[e.jsx(ne,{value:"AVR",children:"AVR"}),e.jsx(ne,{value:"Battery",children:"Battery"}),e.jsx(ne,{value:"Biometrics",children:"Biometrics"}),e.jsx(ne,{value:"Camera",children:"Camera"}),e.jsx(ne,{value:"CCTV",children:"CCTV"}),e.jsx(ne,{value:"Charger",children:"Charger"}),e.jsx(ne,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(ne,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(ne,{value:"Headset",children:"Headset"}),e.jsx(ne,{value:"Keyboard",children:"Keyboard"}),e.jsx(ne,{value:"Laptop",children:"Laptop"}),e.jsx(ne,{value:"Megaphone",children:"Megaphone"}),e.jsx(ne,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(ne,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(ne,{value:"Microphone",children:"Microphone"}),e.jsx(ne,{value:"Modem",children:"Modem"}),e.jsx(ne,{value:"Monitor",children:"Monitor"}),e.jsx(ne,{value:"Mouse",children:"Mouse"}),e.jsx(ne,{value:"Others",children:"Others"}),e.jsx(ne,{value:"Pedestal",children:"Pedestal"}),e.jsx(ne,{value:"Podium",children:"Podium"}),e.jsx(ne,{value:"Printer",children:"Printer"}),e.jsx(ne,{value:"Radio",children:"Radio"}),e.jsx(ne,{value:"Router",children:"Router"}),e.jsx(ne,{value:"Search Stick",children:"Search Stick"}),e.jsx(ne,{value:"Searchlight",children:"Searchlight"}),e.jsx(ne,{value:"Smartphone",children:"Smartphone"}),e.jsx(ne,{value:"Speaker",children:"Speaker"}),e.jsx(ne,{value:"Switch",children:"Switch"}),e.jsx(ne,{value:"System Unit",children:"System Unit"}),e.jsx(ne,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(ne,{value:"UPS",children:"UPS"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:e.jsx(be,{size:"medium",placeholder:"Enter brand name"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",tooltip:"Optional - Leave empty if there no remarks",children:e.jsx(be.TextArea,{size:"medium",rows:3,placeholder:"Enter any additional remarks"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Serial Number"}),name:"serialNumber",tooltip:"Optional - Leave empty if item has no serial number",children:e.jsx(be,{size:"medium",onChange:l,placeholder:"Enter serial number (optional)"})}),(s==null?void 0:s.action)==="redistribute"&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Original Quantity"}),name:"originalQuantity",rules:[{required:!0,message:"Original quantity is required"}],children:e.jsx(be,{size:"medium",disabled:!0})}),!m&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:(s==null?void 0:s.action)==="redistribute"?"New Quantity to Redistribute":"Quantity"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity!"},{validator:(c,d)=>!d||d<1?Promise.reject("Quantity must be at least 1"):(s==null?void 0:s.action)==="redistribute"&&(s!=null&&s.quantity)&&d>=s.quantity?Promise.reject(`Quantity must be less than ${s.quantity}`):Promise.resolve()}],children:e.jsx(be,{size:"medium",type:"number",min:1,max:(s==null?void 0:s.action)==="redistribute"&&(s!=null&&s.quantity)?s.quantity-1:void 0,placeholder:"Enter quantity"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(Be,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select issued date"})})]})}),e.jsx(Ke,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Purchased Date"}),name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:e.jsx(Be,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select purchase date"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select condition",children:[e.jsx(ne,{value:"Brand New",children:"Brand New"}),e.jsx(ne,{value:"Good Condition",children:"Good Condition"}),e.jsx(ne,{value:"Defective",children:"Defective"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Detachment/Office"}),name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:e.jsxs(pe,{size:"medium",onChange:c=>o(c==="Head Office"),placeholder:"Select location type",children:[e.jsx(ne,{value:"Head Office",children:"Head Office"}),e.jsx(ne,{value:"Other",children:"Other (Specify Below)"})]})}),i&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department!"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select department",children:[e.jsx(ne,{value:"SOD",children:"SOD"}),e.jsx(ne,{value:"CID",children:"CID"}),e.jsx(ne,{value:"GAD",children:"GAD"}),e.jsx(ne,{value:"HRD",children:"HRD"}),e.jsx(ne,{value:"AFD",children:"AFD"}),e.jsx(ne,{value:"EOD",children:"EOD"}),e.jsx(ne,{value:"BDO",children:"BDO"})]})}),!i&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a location!"}],children:e.jsx(be,{size:"medium",placeholder:"Enter specific location"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status!"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select status",children:[e.jsx(ne,{value:"On Stock",children:"On Stock"}),e.jsx(ne,{value:"Deployed",children:"Deployed"}),e.jsx(ne,{value:"For Repair",children:"For Repair"})]})}),e.jsx(P.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(Ce,{type:"primary",htmlType:"submit",icon:s.action==="redistribute"?e.jsx(ha,{}):e.jsx(Qa,{}),loading:a,size:"small",style:{backgroundColor:"var(--theme-card-head-bg, #a7f3d0)",border:"none",borderRadius:"8px",padding:"10px",height:"auto",fontSize:"14px",fontWeight:"600",color:"black"},children:s.action==="redistribute"?"Redistribute":"Update Item"})})})]})})]})})]}):null,{Title:ji}=Tt,Ci=({visible:t,onCancel:r,onSave:a,templateName:s,setTemplateName:i})=>e.jsx(Lt,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(ji,{level:4,className:"mb-0 font-semibold",children:"Save as Template"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Save this item configuration for future use"})]}),open:t,onCancel:r,footer:[e.jsx(Ce,{onClick:r,size:"large",children:"Cancel"},"cancel"),e.jsx(Ce,{type:"primary",onClick:a,icon:e.jsx(oi,{}),size:"large",style:{background:"#A8E1C5",border:"none",borderRadius:"8px",padding:"8px 24px",height:"auto",fontSize:"14px",fontWeight:"600",color:"#072C1C"},children:"Save Template"},"save")],className:"template-modal",styles:{header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"#A8E1C5",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"Would you like to save this item as a template for future use?"}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Template Name"}),required:!0,tooltip:"Enter a unique name for this template",children:e.jsx(be,{size:"large",value:s,onChange:o=>i(o.target.value),placeholder:"Enter template name"})})]})}),{Title:Di}=Tt,Si=({visible:t,onClose:r,onAdd:a,onRedistribute:s,handleEditItem:i,loading:o})=>{const[m]=P.useForm(),[l,c]=n.useState(!1),[d,u]=n.useState(!1),[b,y]=n.useState(!1),[k,S]=n.useState(""),[g,w]=n.useState(null),[D,p]=n.useState([]),[h,N]=n.useState(null),[E,F]=n.useState("new"),[U,C]=n.useState(""),v=n.useRef(null),{message:j}=ua.useApp(),{logUserActivity:O}=zt(),{logUserNotification:$}=Yt(),X=Rt(),A=Et(),V=()=>{const f=X.token&&X.userData,T=A.token&&A.userData;if(f)return X.userData;if(T)return A.userData;const q=ft.get("username"),H=ft.get("user_id");return q&&H?{username:q,id:H}:null};n.useEffect(()=>{t&&I()},[t]);const I=async()=>{try{const T=(await lt()).filter(q=>q.status==="On Stock");p(T)}catch(f){console.error("Error fetching on stock items:",f)}},W=f=>{E!=="stock"&&F("stock"),N(f),f.action==="redistribute"?m.setFieldsValue({type:f.type,brand:f.brand,originalQuantity:f.quantity,quantity:1,condition:f.condition,status:f.status,remarks:f.remarks,locationType:f.location.includes("Head Office")?"Head Office":"Other",department:f.location.includes("Head Office")?f.location.split(" - ")[1]:void 0,location:f.location.includes("Head Office")?void 0:f.location,issuedDate:f.issuedDate?Ve(f.issuedDate):void 0,purchaseDate:f.purchaseDate?Ve(f.purchaseDate):void 0,serialNumber:f.serialNumber}):m.setFieldsValue({type:f.type,brand:f.brand,quantity:f.quantity,condition:f.condition,status:f.status,remarks:f.remarks,locationType:f.location.includes("Head Office")?"Head Office":"Other",department:f.location.includes("Head Office")?f.location.split(" - ")[1]:void 0,location:f.location.includes("Head Office")?void 0:f.location,issuedDate:f.issuedDate?Ve(f.issuedDate):void 0,purchaseDate:f.purchaseDate?Ve(f.purchaseDate):void 0,serialNumber:f.serialNumber}),c(f.location.includes("Head Office")),u(!!f.serialNumber)},L=f=>{f?(m.setFieldsValue({...f,locationType:f.locationType||(f.location.includes("Head Office")?"Head Office":"Other"),department:f.department||(f.location.includes("Head Office")?f.location.split(" - ")[1]:null),location:f.location,purchaseDate:f.purchaseDate?Ve(f.purchaseDate):void 0,issuedDate:f.issuedDate?Ve(f.issuedDate):void 0}),c(f.locationType==="Head Office"||f.location.includes("Head Office"))):(m.resetFields(),c(!1))},Q=async f=>{var T,q,H;try{if(f.purchaseDate&&f.purchaseDate.isAfter(Ve())){j.error("Purchase date cannot be in the future.");return}const K=await lt();if(f.serialNumber&&(!h||f.serialNumber!==h.serialNumber)&&K.some(se=>se.serialNumber===f.serialNumber)){j.error("Serial number already exists. Please use a unique serial number.");return}const de=l?`Head Office - ${f.department}`:f.location;if(h)if(h.action==="redistribute"){const ve=K.find(De=>De.id===h.id);if(!ve){j.error("Item not found in inventory.");return}if(ve.quantity===1){j.warning("Cannot redistribute item with quantity of 1.");return}if(!f.quantity||f.quantity<=0||f.quantity>=ve.quantity){j.error("New quantity must be greater than 0 and less than existing quantity.");return}const se={id:ve.id,newQuantity:f.quantity,newLocation:de,issuedDate:f.issuedDate?f.issuedDate.format("YYYY-MM-DD"):null,condition:f.condition,status:f.status,remarks:((T=f.remarks)==null?void 0:T.trim())||null};await s(se),await I(),N(null),m.resetFields()}else{const ve={id:h.id,type:f.type,brand:f.brand,quantity:d?1:Math.max(1,f.quantity||1),serialNumber:f.serialNumber||"",issuedDate:f.issuedDate?f.issuedDate.format("YYYY-MM-DD"):null,purchaseDate:f.purchaseDate?f.purchaseDate.format("YYYY-MM-DD"):null,condition:f.condition,location:de,status:f.status,remarks:f.remarks||""};await i(ve,h),await I(),N(null),m.resetFields()}else{const ve={type:f.type,brand:f.brand,quantity:d?1:Math.max(1,f.quantity||1),serialNumber:f.serialNumber,issuedDate:f.issuedDate?f.issuedDate.format("YYYY-MM-DD"):null,purchaseDate:f.purchaseDate?f.purchaseDate.format("YYYY-MM-DD"):null,condition:f.condition,location:de,status:f.status,remarks:f.remarks||null};await a(ve),w(f);const se=(H=(q=v.current)==null?void 0:q.handleTypeChange)==null?void 0:H.call(q,f.type);se&&!se.isUserTemplate&&y(!0),m.resetFields(),r()}}catch(K){console.error(K),j.error("Failed to save item")}},z=async()=>{if(!k.trim()){j.error("Please enter a template name");return}const f=V();if(!f){j.error("User not authenticated");return}const T=g,q={template_name:k,type:T.type,brand:T.brand,condition:T.condition,status:T.status,quantity:T.quantity||1,location:l?`Head Office - ${T.department}`:T.location,remarks:T.remarks||"",created_by:f.username,serialNumber:T.serialNumber||null,purchaseDate:T.purchaseDate?T.purchaseDate.format("YYYY-MM-DD"):null,issuedDate:T.issuedDate?T.issuedDate.format("YYYY-MM-DD"):null};try{const H=await ui(q);H.success?(j.success("Template saved successfully!"),y(!1),S(""),v.current&&v.current.setRefreshTrigger(K=>K+1),await O(f.username,"Template Created",`Template "${k}" has been created successfully.`),await $("Template Created",`Template "${k}" has been created successfully.`)):j.error(H.message||"Failed to save template")}catch(H){console.error("Error saving template:",H),j.error("Error saving template")}},Y=()=>{m.resetFields(),u(!1),N(null),C(""),F("new"),r()},R=f=>{const T=f.target.value.trim();u(T!==""),T!==""?m.setFieldsValue({quantity:1}):m.setFieldsValue({quantity:1})},_=f=>{F(f),f==="new"&&(m.resetFields(),N(null),u(!1),c(!1))};return e.jsxs(e.Fragment,{children:[e.jsx(Lt,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(Di,{level:3,className:"mb-0 font-semibold",children:"Inventory Management"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Add, edit, and manage your inventory items"})]}),open:t,onCancel:Y,footer:null,width:1400,styles:{body:{padding:0},header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"var(--theme-card-head-bg, #5fe7a7)",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsx(Pn,{activeKey:E,onChange:_,items:[{key:"new",label:e.jsxs("div",{className:"flex items-center p-2",children:[e.jsx(rr,{}),e.jsx("span",{className:"font-medium",children:"New Item"})]}),children:e.jsx(xi,{form:m,onFinish:Q,loading:o,templateRef:v,onTemplateSelect:L,isHeadOffice:l,setIsHeadOffice:c,hasSerialNumber:d,handleSerialChange:R,selectedStockItem:h})},{key:"stock",label:e.jsxs("div",{className:"flex items-center p-2",children:[e.jsx(Bt,{}),e.jsx("span",{className:"font-medium",children:"On Stock Items"})]}),children:e.jsxs(e.Fragment,{children:[e.jsx(gi,{onStockItems:D,searchText:U,setSearchText:C,fetchOnStockItems:I,loading:o,handleStockItemSelect:W}),h&&e.jsx(yi,{form:m,onFinish:Q,loading:o,selectedStockItem:h,isHeadOffice:l,setIsHeadOffice:c,hasSerialNumber:d,handleSerialChange:R})]})}]})}),e.jsx(Ci,{visible:b,onCancel:()=>y(!1),onSave:z,templateName:k,setTemplateName:S})]})},{Option:re}=pe,{Title:wi}=Tt,Ni=({visible:t,onClose:r,onEdit:a,item:s})=>{const[i]=P.useForm(),[o,m]=n.useState(!1),[l,c]=n.useState(!1),{message:d}=ua.useApp(),{logUserActivity:u}=zt(),{logUserNotification:b}=Yt(),y=Rt(),k=Et(),S=()=>{const p=y.token&&y.userData,h=k.token&&k.userData;if(p)return y.userData;if(h)return k.userData;const N=ft.get("username"),E=ft.get("user_id");return N&&E?{username:N,id:E}:null};n.useEffect(()=>{if(t&&s){const p=s.location.includes("Head Office"),h=p?s.location.split(" - ")[1]:null;i.setFieldsValue({...s,locationType:p?"Head Office":"Other",department:h,location:p?null:s.location,purchaseDate:s.purchaseDate?Ve(s.purchaseDate):void 0,issuedDate:s.issuedDate?Ve(s.issuedDate):void 0}),m(p),c(!!s.serialNumber)}},[t,s,i]);const g=async p=>{try{if(p.purchaseDate&&p.purchaseDate.isAfter(Ve())){d.error("Purchase date cannot be in the future.");return}const h=await lt();if(p.serialNumber&&p.serialNumber!==s.serialNumber&&h.some(C=>C.serialNumber===p.serialNumber)){d.error("Serial number already exists. Please use a unique serial number.");return}const N=o?`Head Office - ${p.department}`:p.location,E={...s,type:p.type,brand:p.brand,quantity:l?1:Math.max(1,p.quantity||1),serialNumber:p.serialNumber,issuedDate:p.issuedDate?p.issuedDate.format("YYYY-MM-DD"):null,purchaseDate:p.purchaseDate?p.purchaseDate.format("YYYY-MM-DD"):null,condition:p.condition,location:N,status:p.status,remarks:p.remarks||null};a(E);const F=S();F&&(await u(F.username,"Item Updated",`Item "${E.type}" has been updated.`),await b("Item Updated",`Item "${E.type}" has been updated.`)),i.resetFields(),r()}catch(h){console.error(h)}},w=()=>{i.resetFields(),c(!1),r()},D=p=>{const h=p.target.value.trim();c(h!==""),h!==""?i.setFieldsValue({quantity:1}):i.setFieldsValue({quantity:1})};return e.jsx(Lt,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(wi,{level:3,className:"mb-0 font-semibold",children:"Edit Item"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Update item details and information"})]}),open:t,onCancel:w,footer:null,width:1e3,className:"custom-card",styles:{body:{padding:0},header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"var(--theme-card-head-bg, #5fe7a7)",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsx("div",{className:"p-8 bg-gray-50",children:e.jsx(Gt,{className:"shadow-lg border-0",children:e.jsx(P,{form:i,onFinish:g,layout:"vertical",initialValues:{quantity:1},children:e.jsxs(Pt,{gutter:[32,24],children:[e.jsx(Ke,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select item type",children:[e.jsx(re,{value:"AVR",children:"AVR"}),e.jsx(re,{value:"Battery",children:"Battery"}),e.jsx(re,{value:"Biometrics",children:"Biometrics"}),e.jsx(re,{value:"Camera",children:"Camera"}),e.jsx(re,{value:"CCTV",children:"CCTV"}),e.jsx(re,{value:"Charger",children:"Charger"}),e.jsx(re,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(re,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(re,{value:"Headset",children:"Headset"}),e.jsx(re,{value:"Keyboard",children:"Keyboard"}),e.jsx(re,{value:"Laptop",children:"Laptop"}),e.jsx(re,{value:"Megaphone",children:"Megaphone"}),e.jsx(re,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(re,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(re,{value:"Microphone",children:"Microphone"}),e.jsx(re,{value:"Modem",children:"Modem"}),e.jsx(re,{value:"Monitor",children:"Monitor"}),e.jsx(re,{value:"Mouse",children:"Mouse"}),e.jsx(re,{value:"Others",children:"Others"}),e.jsx(re,{value:"Pedestal",children:"Pedestal"}),e.jsx(re,{value:"Podium",children:"Podium"}),e.jsx(re,{value:"Printer",children:"Printer"}),e.jsx(re,{value:"Radio",children:"Radio"}),e.jsx(re,{value:"Router",children:"Router"}),e.jsx(re,{value:"Search Stick",children:"Search Stick"}),e.jsx(re,{value:"Searchlight",children:"Searchlight"}),e.jsx(re,{value:"Smartphone",children:"Smartphone"}),e.jsx(re,{value:"Speaker",children:"Speaker"}),e.jsx(re,{value:"Switch",children:"Switch"}),e.jsx(re,{value:"System Unit",children:"System Unit"}),e.jsx(re,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(re,{value:"UPS",children:"UPS"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:e.jsx(be,{size:"medium",placeholder:"Enter brand name"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",tooltip:"Optional - Leave empty if there no remarks",children:e.jsx(be.TextArea,{size:"medium",rows:3,placeholder:"Enter any additional remarks"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Serial Number"}),name:"serialNumber",tooltip:"Optional - Leave empty if item has no serial number",children:e.jsx(be,{size:"medium",onChange:D,placeholder:"Enter serial number (optional)"})}),!l&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Quantity"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity!"}],children:e.jsx(be,{size:"medium",type:"number",min:1,placeholder:"Enter quantity"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(Be,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select issued date"})})]})}),e.jsx(Ke,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Purchased Date"}),name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:e.jsx(Be,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select purchase date"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select condition",children:[e.jsx(re,{value:"Brand New",children:"Brand New"}),e.jsx(re,{value:"Good Condition",children:"Good Condition"}),e.jsx(re,{value:"Defective",children:"Defective"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Detachment/Office"}),name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:e.jsxs(pe,{size:"medium",onChange:p=>m(p==="Head Office"),placeholder:"Select location type",children:[e.jsx(re,{value:"Head Office",children:"Head Office"}),e.jsx(re,{value:"Other",children:"Other (Specify Below)"})]})}),o&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department!"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select department",children:[e.jsx(re,{value:"SOD",children:"SOD"}),e.jsx(re,{value:"CID",children:"CID"}),e.jsx(re,{value:"GAD",children:"GAD"}),e.jsx(re,{value:"HRD",children:"HRD"}),e.jsx(re,{value:"AFD",children:"AFD"}),e.jsx(re,{value:"EOD",children:"EOD"}),e.jsx(re,{value:"BDO",children:"BDO"})]})}),!o&&e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a location!"}],children:e.jsx(be,{size:"medium",placeholder:"Enter specific location"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status!"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select status",children:[e.jsx(re,{value:"On Stock",children:"On Stock"}),e.jsx(re,{value:"Deployed",children:"Deployed"}),e.jsx(re,{value:"For Repair",children:"For Repair"})]})}),e.jsx(P.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(Ce,{type:"primary",htmlType:"submit",icon:e.jsx(Qa,{}),size:"small",style:{background:"var(--theme-card-head-bg, #5fe7a7)",border:"none",borderRadius:"8px",padding:"10px",height:"auto",fontSize:"14px",fontWeight:"600",color:"black"},children:"Update Item"})})})]})})]})})})})})},{Option:Ae}=pe,{Title:ki}=Tt,Ii=({visible:t,onClose:r,item:a,onEdit:s,isLoading:i})=>{const[o]=P.useForm(),[m,l]=n.useState(!1),{logUserActivity:c}=zt(),{logUserNotification:d}=Yt(),u=Rt(),b=Et(),y=()=>{const g=u.token&&u.userData,w=b.token&&b.userData;if(g)return u.userData;if(w)return b.userData;const D=ft.get("username"),p=ft.get("user_id");return D&&p?{username:D,id:p}:null};n.useEffect(()=>{var g;if(t&&a){const w=(g=a.location)==null?void 0:g.includes("Head Office");l(w);let D="Other",p,h;if(w){D="Head Office";const N=a.location.split(" - ");N.length>1&&(p=N[1])}else h=a.location;o.setFieldsValue({type:a.type,brand:a.brand,originalQuantity:a.quantity,quantity:1,condition:a.condition,status:a.status,remarks:a.remarks,locationType:D,department:p,location:h,issuedDate:a.issuedDate?Ve(a.issuedDate):void 0})}},[t,a,o]);const k=async g=>{var w;try{if(!a)return;const p=(await lt()).find(U=>U.id===a.id);if(!p){ta.error("Item not found in inventory.");return}if(p.quantity===1){ta.warning("Cannot redistribute item with quantity of 1.");return}if(!g.quantity||g.quantity<=0||g.quantity>=p.quantity){ta.error("New quantity must be greater than 0 and less than existing quantity.");return}const h=g.locationType==="Head Office"?`Head Office - ${g.department}`:g.location,N=g.issuedDate?Ve(g.issuedDate).format("YYYY-MM-DD"):null,E={id:p.id,newQuantity:g.quantity,newLocation:h,issuedDate:N,condition:g.condition,status:g.status,remarks:((w=g.remarks)==null?void 0:w.trim())||null};await s(E);const F=y();F&&(await c(F.username,"Item Redistributed",`Item "${p.type}" has been redistributed to ${h} with quantity ${g.quantity}.`),await d("Item Redistributed",`Item "${p.type}" has been redistributed to ${h} with quantity ${g.quantity}.`)),o.resetFields(),r()}catch(D){console.error(D),ta.error("Failed to redistribute item.")}},S=()=>{o.resetFields(),l(!1),r()};return e.jsx(Lt,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(ki,{level:3,className:"mb-0 font-semibold",children:"Redistribute Item"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Create a new item from existing stock"})]}),open:t,onCancel:S,footer:null,width:1e3,className:"custom-card",styles:{body:{padding:0},header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"var(--theme-card-head-bg, #5fe7a7)",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsx("div",{className:"p-8 bg-gray-50",children:e.jsx(Gt,{className:"shadow-lg border-0",children:e.jsx(P,{form:o,onFinish:k,layout:"vertical",children:e.jsxs(Pt,{gutter:[32,24],children:[e.jsx(Ke,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Type is required"}],children:e.jsx(be,{disabled:!0,size:"medium"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Brand is required"}],children:e.jsx(be,{disabled:!0,size:"medium"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Original Quantity"}),name:"originalQuantity",rules:[{required:!0,message:"Original quantity is required"}],children:e.jsx(be,{disabled:!0,size:"medium"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"New Quantity to Redistribute"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity to redistribute"},{validator:(g,w)=>!w||w<1?Promise.reject("Quantity must be at least 1"):w>=(a==null?void 0:a.quantity)?Promise.reject(`Quantity must be less than ${a==null?void 0:a.quantity}`):Promise.resolve()}],children:e.jsx(be,{size:"medium",type:"number",min:1,max:a!=null&&a.quantity?a.quantity-1:1,placeholder:"Enter quantity"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",children:e.jsx(be.TextArea,{size:"medium",rows:3,placeholder:"Enter remarks (optional)"})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",children:e.jsx(Be,{size:"medium",format:"YYYY-MM-DD",className:"w-full",placeholder:"Select date"})})]})}),e.jsx(Ke,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select condition",children:[e.jsx(Ae,{value:"Brand New",children:"Brand New"}),e.jsx(Ae,{value:"Good Condition",children:"Good Condition"}),e.jsx(Ae,{value:"Defective",children:"Defective"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select status",children:[e.jsx(Ae,{value:"On Stock",children:"On Stock"}),e.jsx(Ae,{value:"Deployed",children:"Deployed"}),e.jsx(Ae,{value:"For Repair",children:"For Repair"})]})}),e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Location Type"}),name:"locationType",rules:[{required:!0,message:"Please select a location type"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select location type",onChange:g=>l(g==="Head Office"),children:[e.jsx(Ae,{value:"Head Office",children:"Head Office"}),e.jsx(Ae,{value:"Other",children:"Other (Specify)"})]})}),m?e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department"}],children:e.jsxs(pe,{size:"medium",placeholder:"Select department",children:[e.jsx(Ae,{value:"SOD",children:"SOD"}),e.jsx(Ae,{value:"CID",children:"CID"}),e.jsx(Ae,{value:"GAD",children:"GAD"}),e.jsx(Ae,{value:"HRD",children:"HRD"}),e.jsx(Ae,{value:"AFD",children:"AFD"}),e.jsx(Ae,{value:"EOD",children:"EOD"}),e.jsx(Ae,{value:"BDO",children:"BDO"})]})}):e.jsx(P.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a specific location"}],children:e.jsx(be,{size:"medium",placeholder:"Enter location"})}),e.jsx(P.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(Ce,{type:"primary",htmlType:"submit",icon:e.jsx(ha,{}),loading:i,disabled:i,size:"small",style:{background:"var(--theme-card-head-bg, #5fe7a7)",border:"none",borderRadius:"8px",padding:"10px",height:"auto",fontSize:"14px",fontWeight:"600",color:"black"},children:"Redistribute"})})})]})})]})})})})})},Oi=(t,r="")=>{let a;switch(t){case"On Stock":a="green";break;case"For Repair":a="volcano";break;case"Deployed":a="blue";break;default:a="gray"}return e.jsx(Xa,{color:a,className:"text-wrap text-center",children:e.jsx(ze,{text:t,searchTerm:r})})},Pi=(t,r="")=>{let a;switch(t){case"Brand New":a="gold";break;case"Good Condition":a="green";break;case"Defective":a="red";break;default:a="gray"}return e.jsx(Xa,{color:a,className:"text-wrap text-center",children:e.jsx(ze,{text:t,searchTerm:r})})},sa=(t,r,a,s,i,o="")=>{const m=[{title:"ID",dataIndex:"id",key:"id",align:"center",width:"120px",className:"text-xs overflow-auto",sorter:(l,c)=>l.id.localeCompare(c.id),render:l=>e.jsx(ze,{text:l,searchTerm:o})},{title:"Type",dataIndex:"type",key:"type",align:"center",width:"100px",className:"text-xs overflow-auto",responsive:["sm"],render:l=>e.jsx(ze,{text:l,searchTerm:o}),filters:[{text:"AVR",value:"AVR"},{text:"Battery",value:"Battery"},{text:"Biometrics",value:"Biometrics"},{text:"Camera",value:"Camera"},{text:"CCTV",value:"CCTV"},{text:"Charger",value:"Charger"},{text:"Guard Tour Chips",value:"Guard Tour Chips"},{text:"Guard Tour System",value:"Guard Tour System"},{text:"Headset",value:"Headset"},{text:"Keyboard",value:"Keyboard"},{text:"Laptop",value:"Laptop"},{text:"Megaphone",value:"Megaphone"},{text:"WIFI-Mesh",value:"WIFI-Mesh"},{text:"Metal Detector",value:"Metal Detector"},{text:"Microphone",value:"Microphone"},{text:"Modem",value:"Modem"},{text:"Monitor",value:"Monitor"},{text:"Mouse",value:"Mouse"},{text:"Others",value:"Others"},{text:"Pedestal",value:"Pedestal"},{text:"Podium",value:"Podium"},{text:"Printer",value:"Printer"},{text:"Radio",value:"Radio"},{text:"Router",value:"Router"},{text:"Search Stick",value:"Search Stick"},{text:"Searchlight",value:"Searchlight"},{text:"Smartphone",value:"Smartphone"},{text:"Speaker",value:"Speaker"},{text:"Switch",value:"Switch"},{text:"System Unit",value:"System Unit"},{text:"Under Chassis",value:"Under Chassis"},{text:"UPS",value:"UPS"}],onFilter:(l,c)=>c.type.includes(l)},{title:"Brand",dataIndex:"brand",key:"brand",align:"center",width:"100px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,c)=>l.brand.localeCompare(c.brand),render:l=>e.jsx(ze,{text:l,searchTerm:o})},{title:"Qty",dataIndex:"quantity",key:"quantity",align:"center",width:"80px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],sorter:(l,c)=>l.quantity-c.quantity,render:l=>e.jsx(ze,{text:l,searchTerm:o})},{title:"Remarks",dataIndex:"remarks",key:"remarks",align:"center",width:"200px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],render:l=>e.jsx(ze,{text:l&&l.trim()!==""?l:"-",searchTerm:o})},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",align:"center",width:"150px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],sorter:(l,c)=>{var d;return(d=l.serialNumber)==null?void 0:d.localeCompare(c.serialNumber||"")},render:l=>e.jsx(ze,{text:l&&l.trim()!==""?l:"-",searchTerm:o})},...i==="default"?[{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,c)=>{const d=new Date(l.issuedDate),u=new Date(c.issuedDate);return a==="newest"?u-d:d-u},render:l=>e.jsx(ze,{text:!l||l==="0000-00-00"?"NO DATE":l,searchTerm:o})},{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,c)=>{const d=new Date(l.purchaseDate),u=new Date(c.purchaseDate);return a==="newest"?u-d:d-u},render:l=>e.jsx(ze,{text:l,searchTerm:o})}]:i==="issuedDate"?[{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,c)=>{const d=new Date(l.issuedDate),u=new Date(c.issuedDate);return a==="newest"?u-d:d-u},render:l=>e.jsx(ze,{text:!l||l==="0000-00-00"?"NO DATE":l,searchTerm:o})}]:[{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,c)=>{const d=new Date(l.purchaseDate),u=new Date(c.purchaseDate);return a==="newest"?u-d:d-u},render:l=>e.jsx(ze,{text:l,searchTerm:o})}],{title:"Condition",dataIndex:"condition",key:"condition",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],render:l=>Pi(l,o),filters:[{text:"Brand New",value:"Brand New"},{text:"Good Condition",value:"Good Condition"},{text:"Defective",value:"Defective"}],onFilter:(l,c)=>c.condition.includes(l)},{title:"Detachment/Office",dataIndex:"location",key:"location",align:"center",width:"150px",className:"text-xs overflow-auto",responsive:["sm"],render:l=>e.jsx(ze,{text:l,searchTerm:o})},{title:"Status",dataIndex:"status",key:"status",align:"center",width:"110px",className:"text-xs overflow-auto",responsive:["sm"],render:l=>Oi(l,o),filters:[{text:"On Stock",value:"On Stock"},{text:"For Repair",value:"For Repair"},{text:"Deployed",value:"Deployed"}],onFilter:(l,c)=>c.status.includes(l)}];return s!=="guest"&&m.push({title:"Action",key:"action",align:"center",width:"80px",className:"text-xs overflow-auto",render:l=>e.jsxs(e.Fragment,{children:[e.jsx(Ye,{title:"Edit",children:e.jsx(Ce,{type:"text",icon:e.jsx(nr,{}),onClick:()=>t(l),size:"small"})}),l.quantity>1&&e.jsx(Ye,{title:"Redistribute",children:e.jsx(Ce,{type:"text",icon:e.jsx(ha,{}),onClick:()=>r(l),size:"small"})})]})}),m},{Option:gt}=pe,Ri=[{key:"default",label:"Default"},{key:"issuedDate",label:"Issued Date"},{key:"purchaseDate",label:"Purchased Date"}],ul=()=>{var ee,fe,xe,G,M,J;const[t,r]=n.useState(0),[a,s]=n.useState("all"),[i,o]=n.useState([]),[m,l]=n.useState(!1),[c,d]=n.useState("default"),u=qr({maxWidth:639}),{searchText:b,setSearchText:y,sortOrder:k,currentPage:S,pageSize:g,isModalVisible:w,setIsModalVisible:D,isEditModalVisible:p,setIsEditModalVisible:h,redistributeItemData:N,setRedistributeItemData:E,isRedistributeModalVisible:F,setIsRedistributeModalVisible:U,editingItem:C,isLoading:v,activeTab:j,isAdmin:O,userRole:$,paginatedData:X,totalEntries:A,handleRedistribute:V,handleRedistributeItem:I,handlePageChange:W,handleSortOrderChange:L,handleTableChange:Q,handleAddItem:z,handleEdit:Y,handleEditItem:R,handleBatchDelete:_,handleTabChange:f,rowSelection:T,dataSource:q,handleRefresh:H}=ci(),K=n.useMemo(()=>m?i:X,[m,i,X]),de=n.useCallback(_r(x=>{if(x===""){l(!1);return}l(!0);const Z=q.filter(oe=>{if(!oe)return!1;if(a==="all"){for(const ke in oe){const Te=oe[ke];if(Te&&String(Te).toLowerCase().includes(x.toLowerCase()))return!0}return!1}else{const ke=oe[a];return ke&&String(ke).toLowerCase().includes(x.toLowerCase())}});o(Z)},300),[q,a]),ve=n.useCallback(x=>{const Z=x.target.value;y(Z),de(Z)},[de,y]),se=n.useMemo(()=>{const x=[{key:"all",label:"All Columns"},{key:"id",label:"ID"},{key:"type",label:"Type"},{key:"brand",label:"Brand"},{key:"serialNumber",label:"Serial Number"},{key:"remarks",label:"Remarks"},{key:"quantity",label:"Quantity"},{key:"location",label:"Location"},{key:"status",label:"Status"},{key:"condition",label:"Condition"},{key:"issuedDate",label:"Issued Date"},{key:"purchaseDate",label:"Purchased Date"}],Z=u?c:j;return x.filter(oe=>Z==="issuedDate"?oe.key!=="purchaseDate":Z==="purchaseDate"?oe.key!=="issuedDate":!0)},[j,c,u]),De=x=>({items:se.map(Z=>({key:Z.key,label:e.jsx("span",{className:"break-words whitespace-normal text-xs",children:Z.label})})),onClick:({key:Z})=>s(Z),selectedKeys:[a]}),ce=()=>{s("all"),l(!1),o([]),r(x=>x+1),H()};return e.jsxs(Gt,{title:e.jsx("span",{className:"font-bold flex justify-center text-lgi md:text-base lg:text-lgi xl:text-xl",children:"INVENTORY"}),className:"flex flex-col w-full mx-auto bg-[#A8E1C5] rounded-xl shadow border-none",children:[e.jsxs("div",{className:"block sm:hidden mb-4",children:[e.jsx(pe,{value:c,onChange:d,className:"w-full transparent-select",size:"small",children:Ri.map(x=>e.jsx(gt,{value:x.key,children:e.jsx("span",{className:"text-xs",children:x.label})},x.key))}),e.jsx("div",{className:"w-auto overflow-x-auto mt-4",children:e.jsx(Ht,{rowSelection:T,rowKey:"id",dataSource:K,columns:sa(Y,V,k,$,c,b),pagination:!1,bordered:!0,onChange:Q,scroll:{x:"max-content",y:600},loading:v,responsive:["sm","md","lg","xl","xxl"],expandable:{expandedRowRender:x=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",x.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",x.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",x.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",x.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",x.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",x.serialNumber]}),c==="issuedDate"&&e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",x.issuedDate||"NO DATE"]}),c==="purchaseDate"&&e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",x.purchaseDate||"NO DATE"]}),c==="default"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",x.issuedDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",x.purchaseDate||"NO DATE"]})]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",x.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",x.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",x.status]})]}),rowExpandable:()=>!0},className:"text-xs"},t)})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsx(Pn,{defaultActiveKey:"default",activeKey:j,onChange:f,type:"card",tabBarGutter:1,moreIcon:null,items:[{key:"default",label:e.jsx("span",{className:"text-xs",children:"Default"}),children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4",children:[e.jsx(qa,{menu:De(),trigger:["click"],className:"border-black text-xs sm:block hidden theme-aware-dropdown-btn",children:e.jsxs(Ce,{type:"text",className:"flex items-center",children:[e.jsx(Ba,{className:"text-xs"}),e.jsx(kt,{children:((ee=se.find(x=>x.key===a))==null?void 0:ee.label)||"All Columns"}),e.jsx(_a,{className:"align-middle ml-1"})]})}),e.jsx(be,{placeholder:`Search in ${a==="all"?"all columns":(fe=se.find(x=>x.key===a))==null?void 0:fe.label}`,prefix:e.jsx(Bt,{}),value:b,onChange:ve,className:"ml-1 w-auto sm:w-auto border-black text-xs",suffix:b?e.jsx(Ce,{type:"text",size:"small",onClick:()=>{y(""),l(!1)},className:"text-xs",children:"×"}):null}),e.jsxs("div",{className:"flex justify-center gap-2 w-auto",children:[e.jsx(Ye,{title:e.jsx("span",{className:"text-xs",children:"Actions"}),children:(O||$==="user")&&e.jsx(Ce,{type:"text",icon:e.jsx(La,{}),onClick:()=>D(!0),className:"text-xs"})}),O&&e.jsx(Ye,{title:e.jsx("span",{className:"text-xs",children:"Delete"}),children:e.jsx(Ce,{type:"link",icon:e.jsx(la,{}),danger:!0,onClick:_,className:"text-xs"})}),e.jsx(Ce,{onClick:x=>{x.currentTarget.blur(),ce()},className:"custom-button mt-1",type:"default",size:"small",icon:e.jsx(ia,{className:"text-xs"}),children:e.jsx("span",{className:"text-xs",children:"Refresh"})}),e.jsxs(pe,{defaultValue:"Newest",className:"w-auto text-xs transparent-select mt-1",onChange:L,value:k==="newest"?"Newest":"Oldest",size:"small",children:[e.jsx(gt,{value:"Newest",children:e.jsx("span",{className:"text-xs",children:"Newest"})}),e.jsx(gt,{value:"Oldest",children:e.jsx("span",{className:"text-xs",children:"Oldest"})})]})]})]}),e.jsx("div",{className:"w-auto overflow-x-auto",children:e.jsx(Ht,{rowSelection:T,rowKey:"id",dataSource:K,columns:sa(Y,V,k,$,"default",b),pagination:!1,bordered:!0,onChange:Q,scroll:{x:"max-content",y:600},loading:v,responsive:["sm","md","lg","xl","xxl"],expandable:u?{expandedRowRender:x=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",x.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",x.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",x.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",x.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",x.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",x.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",x.issuedDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",x.purchaseDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",x.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",x.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",x.status]})]}),rowExpandable:()=>!0}:void 0,className:"text-xs"},t)})]})},{key:"issuedDate",label:e.jsx("span",{className:"text-xs",children:"Issued Date"}),children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4",children:[e.jsx(qa,{menu:De(),trigger:["click"],className:"border-black text-xs sm:block hidden theme-aware-dropdown-btn",children:e.jsxs(Ce,{type:"text",className:"flex items-center",children:[e.jsx(Ba,{className:"text-xs"}),e.jsx(kt,{children:((xe=se.find(x=>x.key===a))==null?void 0:xe.label)||"All Columns"}),e.jsx(_a,{className:"align-middle ml-1"})]})}),e.jsx(be,{placeholder:`Search in ${a==="all"?"all columns":(G=se.find(x=>x.key===a))==null?void 0:G.label}`,prefix:e.jsx(Bt,{}),value:b,onChange:ve,className:"ml-1 w-auto sm:w-auto border-black text-xs",suffix:b?e.jsx(Ce,{type:"text",size:"small",onClick:()=>{y(""),l(!1)},className:"text-xs",children:"×"}):null}),e.jsxs("div",{className:"flex justify-center gap-2 w-auto",children:[e.jsx(Ye,{title:e.jsx("span",{className:"text-xs",children:"Actions"}),children:(O||$==="user")&&e.jsx(Ce,{type:"text",icon:e.jsx(La,{}),onClick:()=>D(!0),className:"text-xs"})}),O&&e.jsx(Ye,{title:e.jsx("span",{className:"text-xs",children:"Delete"}),children:e.jsx(Ce,{type:"link",icon:e.jsx(la,{}),danger:!0,onClick:_,className:"text-xs"})}),e.jsx(Ce,{onClick:x=>{x.currentTarget.blur(),ce()},className:"custom-button mt-1",type:"default",size:"small",icon:e.jsx(ia,{className:"text-xs"}),children:e.jsx("span",{className:"text-xs",children:"Refresh"})}),e.jsxs(pe,{defaultValue:"Newest",className:"w-auto text-xs transparent-select mt-1",onChange:L,value:k==="newest"?"Newest":"Oldest",size:"small",children:[e.jsx(gt,{value:"Newest",children:e.jsx("span",{className:"text-xs",children:"Newest"})}),e.jsx(gt,{value:"Oldest",children:e.jsx("span",{className:"text-xs",children:"Oldest"})})]})]})]}),e.jsx("div",{className:"w-auto overflow-x-auto",children:e.jsx(Ht,{rowSelection:T,rowKey:"id",dataSource:K,columns:sa(Y,V,k,$,"issuedDate",b),pagination:!1,bordered:!0,onChange:Q,scroll:{x:"max-content",y:600},loading:v,responsive:["sm","md","lg","xl","xxl"],expandable:u?{expandedRowRender:x=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",x.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",x.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",x.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",x.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",x.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",x.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",x.issuedDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",x.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",x.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",x.status]})]}),rowExpandable:()=>!0}:void 0,className:"text-xs"},t)})]})},{key:"purchaseDate",label:e.jsx("span",{className:"text-xs",children:"Purchased Date"}),children:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4",children:[e.jsx(qa,{menu:De(),trigger:["click"],className:"border-black text-xs sm:block hidden theme-aware-dropdown-btn",children:e.jsxs(Ce,{type:"text",className:"flex items-center",children:[e.jsx(Ba,{className:"text-xs"}),e.jsx(kt,{children:((M=se.find(x=>x.key===a))==null?void 0:M.label)||"All Columns"}),e.jsx(_a,{className:"align-middle ml-1"})]})}),e.jsx(be,{placeholder:`Search in ${a==="all"?"all columns":(J=se.find(x=>x.key===a))==null?void 0:J.label}`,prefix:e.jsx(Bt,{}),value:b,onChange:ve,className:"ml-1 w-auto sm:w-auto border-black text-xs",suffix:b?e.jsx(Ce,{type:"text",size:"small",onClick:()=>{y(""),l(!1)},className:"text-xs",children:"×"}):null}),e.jsxs("div",{className:"flex justify-center gap-2 w-auto",children:[e.jsx(Ye,{title:e.jsx("span",{className:"text-xs",children:"Actions"}),children:(O||$==="user")&&e.jsx(Ce,{type:"text",icon:e.jsx(La,{}),onClick:()=>D(!0),className:"text-xs"})}),O&&e.jsx(Ye,{title:e.jsx("span",{className:"text-xs",children:"Delete"}),children:e.jsx(Ce,{type:"link",icon:e.jsx(la,{}),danger:!0,onClick:_,className:"text-xs"})}),e.jsx(Ce,{onClick:x=>{x.currentTarget.blur(),ce()},className:"custom-button mt-1",type:"default",size:"small",icon:e.jsx(ia,{className:"text-xs"}),children:e.jsx("span",{className:"text-xs",children:"Refresh"})}),e.jsxs(pe,{defaultValue:"Newest",className:"w-auto text-xs transparent-select mt-1",onChange:L,value:k==="newest"?"Newest":"Oldest",size:"small",children:[e.jsx(gt,{value:"Newest",children:e.jsx("span",{className:"text-xs",children:"Newest"})}),e.jsx(gt,{value:"Oldest",children:e.jsx("span",{className:"text-xs",children:"Oldest"})})]})]})]}),e.jsx("div",{className:"w-auto overflow-x-auto",children:e.jsx(Ht,{rowSelection:T,rowKey:"id",dataSource:K,columns:sa(Y,V,k,$,"purchaseDate",b),pagination:!1,bordered:!0,onChange:Q,scroll:{x:"max-content",y:600},loading:v,responsive:["sm","md","lg","xl","xxl"],expandable:u?{expandedRowRender:x=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",x.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",x.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",x.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",x.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",x.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",x.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",x.purchaseDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",x.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",x.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",x.status]})]}),rowExpandable:()=>!0}:void 0,className:"text-xs"},t)})]})}]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mt-5 space-y-2 sm:space-y-0",children:[e.jsxs(Tt.Text,{className:"w-full text-xs text-nowrap text-center sm:text-left overflow-auto",style:{color:"#072C1C"},children:["Showing data of ",A>0?(S-1)*g+1:0," to ",Math.min(S*g,A)," of ",A," entries"]}),e.jsx("div",{className:"w-full flex justify-center sm:justify-end",children:e.jsx(Br,{current:S,pageSize:g,total:A,showSizeChanger:!0,pageSizeOptions:["10","20","30","50","100","200","500","1000","2000"],onChange:W,className:"text-xs",responsive:!0})})]}),e.jsx(Si,{visible:w,onClose:()=>D(!1),onAdd:z,onRedistribute:I,handleEditItem:R,loading:v}),e.jsx(Ni,{visible:p,onClose:()=>h(!1),onEdit:R,item:C,loading:v}),e.jsx(Ii,{visible:F,onClose:()=>{U(!1),E(null)},onEdit:I,item:N,loading:v})]})};export{ul as default};
