const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/addItemToInventory-Bv13ONqm.js","js/index-D_DjqwU6.js","css/index-1RobZ94W.css","js/offlineUtils-CjPJFgFK.js"])))=>i.map(i=>d[i]);
import{r as n,aH as Gr,V as Je,ax as Pe,aw as te,aI as Ia,aJ as mt,at as Ve,aa as ra,b as ya,aK as Mt,aL as Ln,aM as Sa,aN as Yt,ai as Vt,w as qe,a2 as Un,aO as rn,az as Lt,as as sn,au as ln,aP as Gn,aQ as Wr,v as qt,aR as Kr,aS as Qr,aT as Xr,Y as Jr,aU as Zr,aV as es,H as ts,J as as,aW as ns,aX as rs,N as Ga,aY as Wn,aZ as ss,P as gt,a_ as is,a$ as ls,b0 as os,b1 as cs,b2 as us,b3 as ds,b4 as ms,b5 as fs,Q as on,a1 as cn,b6 as un,ae as dn,Z as mn,b7 as fn,b8 as hn,b9 as ja,ba as wa,bb as Kn,bc as pn,bd as hs,be as ps,B as Oe,a9 as xs,af as Qn,ag as Xn,bf as Jn,bg as Zn,bh as Xt,d as ft,e as ht,l as Jt,k as Zt,bi as Cn,bj as jn,F as L,u as er,j as e,bk as tr,a as sa,C as St,i as re,f as Rt,bl as xn,g as ar,D as vs,M as ot,I as ge,bm as Ut,q as fa,R as vn,al as nr,m as Ht,T as rr,s as va,c as gn,bn as gs,_ as bs,am as ys}from"./index-D_DjqwU6.js";import{getInventoryData as Pt,addItemToInventory as Ss,redistributeItem as Cs,updateItem as js,deleteItems as wn}from"./addItemToInventory-Bv13ONqm.js";import{P as Et,p as sr,f as ma,e as Ft,h as ws,t as ha,j as Ns,u as Ds,k as Is,l as ir,m as Nn,n as lr,o as ks,q as Os,s as Wa,R as Ka,v as Rs,w as or,x as Ps,y as cr,c as Ms,d as Be}from"./index-Bc3K6vAP.js";import{i as Nt}from"./offlineUtils-CjPJFgFK.js";import{S as Na,D as Dn}from"./index-CYk8aGXX.js";import{R as ur}from"./CalendarOutlined-CeJQtT4o.js";import{u as dr,F as Gt}from"./index-GL6TR608.js";import{P as mr}from"./Pagination-B3MLnmFW.js";import{T as _t}from"./index-BlUNoHI2.js";import{C as fr}from"./index-DG92omOn.js";import{h as In,B as Es}from"./BatchPrintItemModal-DkVt5K-6.js";import{E as Ts}from"./ExportModal-DlIubpvc.js";import{H as vt,S as $s}from"./HighlightText-BHuCeSLK.js";import{d as As}from"./debounce-BtCwp3QT.js";import{R as Bs}from"./FilterOutlined-B9-Kq489.js";import{R as Fs}from"./ToolOutlined-BNQw_Ffh.js";import{R as Vs}from"./PrinterOutlined-D-ModBVM.js";import"./index-CRHxdFZf.js";import"./useBubbleLock-BNMpLRc-.js";function _s(t,a){return t!==void 0?t:a?"bottomRight":"bottomLeft"}var qs={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};function hr(t){var a=t.popupElement,r=t.popupStyle,s=t.popupClassName,i=t.popupAlign,o=t.transitionName,l=t.getPopupContainer,u=t.children,p=t.range,f=t.placement,d=t.builtinPlacements,j=d===void 0?qs:d,y=t.direction,O=t.visible,M=t.onClose,b=n.useContext(Et),w=b.prefixCls,h="".concat(w,"-dropdown"),S=_s(f,y==="rtl");return n.createElement(Gr,{showAction:[],hideAction:["click"],popupPlacement:S,builtinPlacements:j,prefixCls:h,popupTransitionName:o,popup:a,popupAlign:i,popupVisible:O,popupClassName:Je(s,Pe(Pe({},"".concat(h,"-range"),p),"".concat(h,"-rtl"),y==="rtl")),popupStyle:r,stretch:"minWidth",getPopupContainer:l,onPopupVisibleChange:function(I){I||M()}},u)}function pr(t){return sr(t,["placement","builtinPlacements","popupAlign","getPopupContainer","transitionName","direction"])}function xr(t,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=n.useState([!1,!1]),i=te(s,2),o=i[0],l=i[1],u=function(d,j){l(function(y){return ma(y,j,d)})},p=n.useMemo(function(){return o.map(function(f,d){if(f)return!0;var j=t[d];return j?!!(!r[d]&&!j||j&&a(j,{activeIndex:d})):!1})},[t,o,a,r]);return[p,u]}function Hs(t,a,r){if(a===!1)return null;var s=a&&Ia(a)==="object"?a:{};return s.clearIcon||r||n.createElement("span",{className:"".concat(t,"-clear-btn")})}function zs(t,a,r,s,i){var o=mt(function(l,u){return!!(r&&r(l,u)||s&&t.isAfter(s,l)&&!Ft(t,a,s,l,u.type)||i&&t.isAfter(l,i)&&!Ft(t,a,i,l,u.type))});return o}function Ys(t,a,r){return n.useMemo(function(){var s=ws(t,a,r),i=ha(s),o=i[0],l=Ia(o)==="object"&&o.type==="mask"?o.format:null;return[i.map(function(u){return typeof u=="string"||typeof u=="function"?u:u.format}),l]},[t,a,r])}function Ls(t,a,r){return typeof t[0]=="function"||r?!0:a}function Us(t,a,r,s){var i=mt(function(o,l){var u=Ve({type:a},l);if(delete u.activeIndex,!t.isValidate(o)||r&&r(o,u))return!0;if((a==="date"||a==="time")&&s){var p,f=l&&l.activeIndex===1?"end":"start",d=((p=s.disabledTime)===null||p===void 0?void 0:p.call(s,o,f,{from:u.from}))||{},j=d.disabledHours,y=d.disabledMinutes,O=d.disabledSeconds,M=d.disabledMilliseconds,b=s.disabledHours,w=s.disabledMinutes,h=s.disabledSeconds,S=j||b,C=y||w,I=O||h,$=t.getHour(o),A=t.getMinute(o),E=t.getSecond(o),P=t.getMillisecond(o);if(S&&S().includes($)||C&&C($).includes(A)||I&&I($,A).includes(E)||M&&M($,A,E).includes(P))return!0}return!1});return i}function ga(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=n.useMemo(function(){var s=t&&ha(t);return a&&s&&(s[1]=s[1]||s[0]),s},[t,a]);return r}function vr(t,a){var r=t.generateConfig,s=t.locale,i=t.picker,o=i===void 0?"date":i,l=t.prefixCls,u=l===void 0?"rc-picker":l,p=t.styles,f=p===void 0?{}:p,d=t.classNames,j=d===void 0?{}:d,y=t.order,O=y===void 0?!0:y,M=t.components,b=M===void 0?{}:M,w=t.inputRender,h=t.allowClear,S=t.clearIcon,C=t.needConfirm,I=t.multiple,$=t.format,A=t.inputReadOnly,E=t.disabledDate,P=t.minDate,V=t.maxDate,v=t.showTime,k=t.value,F=t.defaultValue,Y=t.pickerValue,T=t.defaultPickerValue,B=ga(k),z=ga(F),K=ga(Y),G=ga(T),ee=o==="date"&&v?"datetime":o,Q=ee==="time"||ee==="datetime",J=Q||I,x=C??Q,N=Ns(t),m=te(N,4),c=m[0],g=m[1],D=m[2],R=m[3],H=Ds(s,g),_=n.useMemo(function(){return Is(ee,D,R,c,H)},[ee,D,R,c,H]),Z=n.useMemo(function(){return Ve(Ve({},t),{},{prefixCls:u,locale:H,picker:o,styles:f,classNames:j,order:O,components:Ve({input:w},b),clearIcon:Hs(u,h,S),showTime:_,value:B,defaultValue:z,pickerValue:K,defaultPickerValue:G},a==null?void 0:a())},[t]),Me=Ys(ee,H,$),je=te(Me,2),Fe=je[0],Ye=je[1],ve=Ls(Fe,A,I),Ee=zs(r,s,E,P,V),Ne=Us(r,o,Ee,_),Ke=n.useMemo(function(){return Ve(Ve({},Z),{},{needConfirm:x,inputReadOnly:ve,disabledDate:Ee})},[Z,x,ve,Ee]);return[Ke,ee,J,Fe,Ye,Ne]}function Gs(t,a,r){var s=ra(a,{value:t}),i=te(s,2),o=i[0],l=i[1],u=ya.useRef(t),p=ya.useRef(),f=function(){Mt.cancel(p.current)},d=mt(function(){l(u.current),r&&o!==u.current&&r(u.current)}),j=mt(function(y,O){f(),u.current=y,y||O?d():p.current=Mt(d)});return ya.useEffect(function(){return f},[]),[o,j]}function gr(t,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0,i=r.every(function(d){return d})?!1:t,o=Gs(i,a||!1,s),l=te(o,2),u=l[0],p=l[1];function f(d){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!j.inherit||u)&&p(d,j.force)}return[u,f]}function br(t){var a=n.useRef();return n.useImperativeHandle(t,function(){var r;return{nativeElement:(r=a.current)===null||r===void 0?void 0:r.nativeElement,focus:function(i){var o;(o=a.current)===null||o===void 0||o.focus(i)},blur:function(){var i;(i=a.current)===null||i===void 0||i.blur()}}}),a}function yr(t,a){return n.useMemo(function(){return t||(a?(Ln(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.entries(a).map(function(r){var s=te(r,2),i=s[0],o=s[1];return{label:i,value:o}})):[])},[t,a])}function bn(t,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=n.useRef(a);s.current=a,Sa(function(){if(t)s.current(t);else{var i=Mt(function(){s.current(t)},r);return function(){Mt.cancel(i)}}},[t])}function Sr(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=n.useState(0),i=te(s,2),o=i[0],l=i[1],u=n.useState(!1),p=te(u,2),f=p[0],d=p[1],j=n.useRef([]),y=n.useRef(null),O=n.useRef(null),M=function(I){y.current=I},b=function(I){return y.current===I},w=function(I){d(I)},h=function(I){return I&&(O.current=I),O.current},S=function(I){var $=j.current,A=new Set($.filter(function(P){return I[P]||a[P]})),E=$[$.length-1]===0?1:0;return A.size>=2||t[E]?null:E};return bn(f||r,function(){f||(j.current=[],M(null))}),n.useEffect(function(){f&&j.current.push(o)},[f,o]),[f,w,h,o,l,S,j.current,M,b]}function Ws(t,a,r,s,i,o){var l=r[r.length-1],u=function(f,d){var j=te(t,2),y=j[0],O=j[1],M=Ve(Ve({},d),{},{from:ir(t,r)});return l===1&&a[0]&&y&&!Ft(s,i,y,f,M.type)&&s.isAfter(y,f)||l===0&&a[1]&&O&&!Ft(s,i,O,f,M.type)&&s.isAfter(f,O)?!0:o==null?void 0:o(f,M)};return u}function da(t,a,r,s){switch(a){case"date":case"week":return t.addMonth(r,s);case"month":case"quarter":return t.addYear(r,s);case"year":return t.addYear(r,s*10);case"decade":return t.addYear(r,s*100);default:return r}}var Qa=[];function Cr(t,a,r,s,i,o,l,u){var p=arguments.length>8&&arguments[8]!==void 0?arguments[8]:Qa,f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:Qa,d=arguments.length>10&&arguments[10]!==void 0?arguments[10]:Qa,j=arguments.length>11?arguments[11]:void 0,y=arguments.length>12?arguments[12]:void 0,O=arguments.length>13?arguments[13]:void 0,M=l==="time",b=o||0,w=function(K){var G=t.getNow();return M&&(G=Nn(t,G)),p[K]||r[K]||G},h=te(f,2),S=h[0],C=h[1],I=ra(function(){return w(0)},{value:S}),$=te(I,2),A=$[0],E=$[1],P=ra(function(){return w(1)},{value:C}),V=te(P,2),v=V[0],k=V[1],F=n.useMemo(function(){var z=[A,v][b];return M?z:Nn(t,z,d[b])},[M,A,v,b,t,d]),Y=function(K){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"panel",ee=[E,k][b];ee(K);var Q=[A,v];Q[b]=K,j&&(!Ft(t,a,A,Q[0],l)||!Ft(t,a,v,Q[1],l))&&j(Q,{source:G,range:b===1?"end":"start",mode:s})},T=function(K,G){if(u){var ee={date:"month",week:"month",month:"year",quarter:"year"},Q=ee[l];if(Q&&!Ft(t,a,K,G,Q))return da(t,l,G,-1);if(l==="year"&&K){var J=Math.floor(t.getYear(K)/10),x=Math.floor(t.getYear(G)/10);if(J!==x)return da(t,l,G,-1)}}return G},B=n.useRef(null);return Yt(function(){if(i&&!p[b]){var z=M?null:t.getNow();if(B.current!==null&&B.current!==b?z=[A,v][b^1]:r[b]?z=b===0?r[0]:T(r[0],r[1]):r[b^1]&&(z=r[b^1]),z){y&&t.isAfter(y,z)&&(z=y);var K=u?da(t,l,z,1):z;O&&t.isAfter(K,O)&&(z=u?da(t,l,O,-1):O),Y(z,"reset")}}},[i,b,r[b]]),n.useEffect(function(){i?B.current=b:B.current=null},[i,b]),Yt(function(){i&&p&&p[b]&&Y(p[b],"reset")},[i,b]),[F,Y]}function jr(t,a){var r=n.useRef(t),s=n.useState({}),i=te(s,2),o=i[1],l=function(f){return f&&a!==void 0?a:r.current},u=function(f){r.current=f,o({})};return[l,u,l(!0)]}var Ks=[];function wr(t,a,r){var s=function(l){return l.map(function(u){return lr(u,{generateConfig:t,locale:a,format:r[0]})})},i=function(l,u){for(var p=Math.max(l.length,u.length),f=-1,d=0;d<p;d+=1){var j=l[d]||null,y=u[d]||null;if(j!==y&&!ks(t,j,y)){f=d;break}}return[f<0,f!==0]};return[s,i]}function Nr(t,a){return Vt(t).sort(function(r,s){return a.isAfter(r,s)?1:-1})}function Qs(t){var a=jr(t),r=te(a,2),s=r[0],i=r[1],o=mt(function(){i(t)});return n.useEffect(function(){o()},[t]),[s,i]}function Dr(t,a,r,s,i,o,l,u,p){var f=ra(o,{value:l}),d=te(f,2),j=d[0],y=d[1],O=j||Ks,M=Qs(O),b=te(M,2),w=b[0],h=b[1],S=wr(t,a,r),C=te(S,2),I=C[0],$=C[1],A=mt(function(P){var V=Vt(P);if(s)for(var v=0;v<2;v+=1)V[v]=V[v]||null;else i&&(V=Nr(V.filter(function(z){return z}),t));var k=$(w(),V),F=te(k,2),Y=F[0],T=F[1];if(!Y&&(h(V),u)){var B=I(V);u(V,B,{range:T?"end":"start"})}}),E=function(){p&&p(w())};return[O,y,w,A,E]}function Ir(t,a,r,s,i,o,l,u,p,f){var d=t.generateConfig,j=t.locale,y=t.picker,O=t.onChange,M=t.allowEmpty,b=t.order,w=o.some(function(Y){return Y})?!1:b,h=wr(d,j,l),S=te(h,2),C=S[0],I=S[1],$=jr(a),A=te($,2),E=A[0],P=A[1],V=mt(function(){P(a)});n.useEffect(function(){V()},[a]);var v=mt(function(Y){var T=Y===null,B=Vt(Y||E());if(T)for(var z=Math.max(o.length,B.length),K=0;K<z;K+=1)o[K]||(B[K]=null);w&&B[0]&&B[1]&&(B=Nr(B,d)),i(B);var G=B,ee=te(G,2),Q=ee[0],J=ee[1],x=!Q,N=!J,m=M?(!x||M[0])&&(!N||M[1]):!0,c=!b||x||N||Ft(d,j,Q,J,y)||d.isAfter(J,Q),g=(o[0]||!Q||!f(Q,{activeIndex:0}))&&(o[1]||!J||!f(J,{from:Q,activeIndex:1})),D=T||m&&c&&g;if(D){r(B);var R=I(B,a),H=te(R,1),_=H[0];O&&!_&&O(T&&B.every(function(Z){return!Z})?null:B,C(B))}return D}),k=mt(function(Y,T){var B=ma(E(),Y,s()[Y]);P(B),T&&v()}),F=!u&&!p;return bn(!F,function(){F&&(v(),i(a),V())},2),[k,v]}function kr(t,a,r,s,i){return a!=="date"&&a!=="time"?!1:r!==void 0?r:s!==void 0?s:!i&&(t==="date"||t==="time")}function Xs(t){var a=t.mode,r=t.internalMode,s=t.renderExtraFooter,i=t.showNow,o=t.showTime,l=t.onSubmit,u=t.onNow,p=t.invalid,f=t.needConfirm,d=t.generateConfig,j=t.disabledDate,y=n.useContext(Et),O=y.prefixCls,M=y.locale,b=y.button,w=b===void 0?"button":b,h=d.getNow(),S=Os(d,o,h),C=te(S,1),I=C[0],$=s==null?void 0:s(a),A=j(h,{type:a}),E=function(){if(!A){var T=I(h);u(T)}},P="".concat(O,"-now"),V="".concat(P,"-btn"),v=i&&n.createElement("li",{className:P},n.createElement("a",{className:Je(V,A&&"".concat(V,"-disabled")),"aria-disabled":A,onClick:E},r==="date"?M.today:M.now)),k=f&&n.createElement("li",{className:"".concat(O,"-ok")},n.createElement(w,{disabled:p,onClick:l},M.ok)),F=(v||k)&&n.createElement("ul",{className:"".concat(O,"-ranges")},v,k);return!$&&!F?null:n.createElement("div",{className:"".concat(O,"-footer")},$&&n.createElement("div",{className:"".concat(O,"-footer-extra")},$),F)}function Js(t){var a=t.picker,r=t.multiplePanel,s=t.pickerValue,i=t.onPickerValueChange,o=t.needConfirm,l=t.onSubmit,u=t.range,p=t.hoverValue,f=n.useContext(Et),d=f.prefixCls,j=f.generateConfig,y=n.useCallback(function(S,C){return da(j,a,S,C)},[j,a]),O=n.useMemo(function(){return y(s,1)},[s,y]),M=function(C){i(y(C,-1))},b={onCellDblClick:function(){o&&l()}},w=a==="time",h=Ve(Ve({},t),{},{hoverValue:null,hoverRangeValue:null,hideHeader:w});return u?h.hoverRangeValue=p:h.hoverValue=p,r?n.createElement("div",{className:"".concat(d,"-panels")},n.createElement(Wa.Provider,{value:Ve(Ve({},b),{},{hideNext:!0})},n.createElement(Ka,h)),n.createElement(Wa.Provider,{value:Ve(Ve({},b),{},{hidePrev:!0})},n.createElement(Ka,qe({},h,{pickerValue:O,onPickerValueChange:M})))):n.createElement(Wa.Provider,{value:Ve({},b)},n.createElement(Ka,h))}function kn(t){return typeof t=="function"?t():t}function Zs(t){var a=t.prefixCls,r=t.presets,s=t.onClick,i=t.onHover;return r.length?n.createElement("div",{className:"".concat(a,"-presets")},n.createElement("ul",null,r.map(function(o,l){var u=o.label,p=o.value;return n.createElement("li",{key:l,onClick:function(){s(kn(p))},onMouseEnter:function(){i(kn(p))},onMouseLeave:function(){i(null)}},u)}))):null}function Or(t){var a=t.panelRender,r=t.internalMode,s=t.picker,i=t.showNow,o=t.range,l=t.multiple,u=t.activeInfo,p=u===void 0?[0,0,0]:u,f=t.presets,d=t.onPresetHover,j=t.onPresetSubmit,y=t.onFocus,O=t.onBlur,M=t.onPanelMouseDown,b=t.direction,w=t.value,h=t.onSelect,S=t.isInvalid,C=t.defaultOpenValue,I=t.onOk,$=t.onSubmit,A=n.useContext(Et),E=A.prefixCls,P="".concat(E,"-panel"),V=b==="rtl",v=n.useRef(null),k=n.useRef(null),F=n.useState(0),Y=te(F,2),T=Y[0],B=Y[1],z=n.useState(0),K=te(z,2),G=K[0],ee=K[1],Q=n.useState(0),J=te(Q,2),x=J[0],N=J[1],m=function(W){W.width&&B(W.width)},c=te(p,3),g=c[0],D=c[1],R=c[2],H=n.useState(0),_=te(H,2),Z=_[0],Me=_[1];n.useEffect(function(){Me(10)},[g]),n.useEffect(function(){if(o&&k.current){var q,W=((q=v.current)===null||q===void 0?void 0:q.offsetWidth)||0,ce=k.current.getBoundingClientRect();if(!ce.height||ce.right<0){Me(function(ue){return Math.max(0,ue-1)});return}var ie=(V?D-W:g)-ce.left;if(N(ie),T&&T<R){var oe=V?ce.right-(D-W+T):g+W-ce.left-T,ne=Math.max(0,oe);ee(ne)}else ee(0)}},[Z,V,T,g,D,R,o]);function je(q){return q.filter(function(W){return W})}var Fe=n.useMemo(function(){return je(ha(w))},[w]),Ye=s==="time"&&!Fe.length,ve=n.useMemo(function(){return Ye?je([C]):Fe},[Ye,Fe,C]),Ee=Ye?C:Fe,Ne=n.useMemo(function(){return ve.length?ve.some(function(q){return S(q)}):!0},[ve,S]),Ke=function(){Ye&&h(C),I(),$()},Ae=n.createElement("div",{className:"".concat(E,"-panel-layout")},n.createElement(Zs,{prefixCls:E,presets:f,onClick:j,onHover:d}),n.createElement("div",null,n.createElement(Js,qe({},t,{value:Ee})),n.createElement(Xs,qe({},t,{showNow:l?!1:i,invalid:Ne,onSubmit:Ke}))));a&&(Ae=a(Ae));var Re="".concat(P,"-container"),Le="marginLeft",Qe="marginRight",We=n.createElement("div",{onMouseDown:M,tabIndex:-1,className:Je(Re,"".concat(E,"-").concat(r,"-panel-container")),style:Pe(Pe({},V?Qe:Le,G),V?Le:Qe,"auto"),onFocus:y,onBlur:O},Ae);return o&&(We=n.createElement("div",{onMouseDown:M,ref:k,className:Je("".concat(E,"-range-wrapper"),"".concat(E,"-").concat(s,"-range-wrapper"))},n.createElement("div",{ref:v,className:"".concat(E,"-range-arrow"),style:{left:x}}),n.createElement(Un,{onResize:m},We))),We}function Rr(t,a){var r=t.format,s=t.maskFormat,i=t.generateConfig,o=t.locale,l=t.preserveInvalidOnBlur,u=t.inputReadOnly,p=t.required,f=t["aria-required"],d=t.onSubmit,j=t.onFocus,y=t.onBlur,O=t.onInputChange,M=t.onInvalid,b=t.open,w=t.onOpenChange,h=t.onKeyDown,S=t.onChange,C=t.activeHelp,I=t.name,$=t.autoComplete,A=t.id,E=t.value,P=t.invalid,V=t.placeholder,v=t.disabled,k=t.activeIndex,F=t.allHelp,Y=t.picker,T=function(x,N){var m=i.locale.parse(o.locale,x,[N]);return m&&i.isValidate(m)?m:null},B=r[0],z=n.useCallback(function(J){return lr(J,{locale:o,format:B,generateConfig:i})},[o,i,B]),K=n.useMemo(function(){return E.map(z)},[E,z]),G=n.useMemo(function(){var J=Y==="time"?8:10,x=typeof B=="function"?B(i.getNow()).length:B.length;return Math.max(J,x)+2},[B,Y,i]),ee=function(x){for(var N=0;N<r.length;N+=1){var m=r[N];if(typeof m=="string"){var c=T(x,m);if(c)return c}}return!1},Q=function(x){function N(g){return x!==void 0?g[x]:g}var m=rn(t,{aria:!0,data:!0}),c=Ve(Ve({},m),{},{format:s,validateFormat:function(D){return!!ee(D)},preserveInvalidOnBlur:l,readOnly:u,required:p,"aria-required":f,name:I,autoComplete:$,size:G,id:N(A),value:N(K)||"",invalid:N(P),placeholder:N(V),active:k===x,helped:F||C&&k===x,disabled:N(v),onFocus:function(D){j(D,x)},onBlur:function(D){y(D,x)},onSubmit:d,onChange:function(D){O();var R=ee(D);if(R){M(!1,x),S(R,x);return}M(!!D,x)},onHelp:function(){w(!0,{index:x})},onKeyDown:function(D){var R=!1;if(h==null||h(D,function(){R=!0}),!D.defaultPrevented&&!R)switch(D.key){case"Escape":w(!1,{index:x});break;case"Enter":b||w(!0);break}}},a==null?void 0:a({valueTexts:K}));return Object.keys(c).forEach(function(g){c[g]===void 0&&delete c[g]}),c};return[Q,z]}var ei=["onMouseEnter","onMouseLeave"];function Pr(t){return n.useMemo(function(){return sr(t,ei)},[t])}var ti=["icon","type"],ai=["onClear"];function ka(t){var a=t.icon,r=t.type,s=Lt(t,ti),i=n.useContext(Et),o=i.prefixCls;return a?n.createElement("span",qe({className:"".concat(o,"-").concat(r)},s),a):null}function Za(t){var a=t.onClear,r=Lt(t,ai);return n.createElement(ka,qe({},r,{type:"clear",role:"button",onMouseDown:function(i){i.preventDefault()},onClick:function(i){i.stopPropagation(),a()}}))}var Xa=["YYYY","MM","DD","HH","mm","ss","SSS"],On="顧",ni=function(){function t(a){ln(this,t),Pe(this,"format",void 0),Pe(this,"maskFormat",void 0),Pe(this,"cells",void 0),Pe(this,"maskCells",void 0),this.format=a;var r=Xa.map(function(u){return"(".concat(u,")")}).join("|"),s=new RegExp(r,"g");this.maskFormat=a.replace(s,function(u){return On.repeat(u.length)});var i=new RegExp("(".concat(Xa.join("|"),")")),o=(a.split(i)||[]).filter(function(u){return u}),l=0;this.cells=o.map(function(u){var p=Xa.includes(u),f=l,d=l+u.length;return l=d,{text:u,mask:p,start:f,end:d}}),this.maskCells=this.cells.filter(function(u){return u.mask})}return sn(t,[{key:"getSelection",value:function(r){var s=this.maskCells[r]||{},i=s.start,o=s.end;return[i||0,o||0]}},{key:"match",value:function(r){for(var s=0;s<this.maskFormat.length;s+=1){var i=this.maskFormat[s],o=r[s];if(!o||i!==On&&i!==o)return!1}return!0}},{key:"size",value:function(){return this.maskCells.length}},{key:"getMaskCellIndex",value:function(r){for(var s=Number.MAX_SAFE_INTEGER,i=0,o=0;o<this.maskCells.length;o+=1){var l=this.maskCells[o],u=l.start,p=l.end;if(r>=u&&r<=p)return o;var f=Math.min(Math.abs(r-u),Math.abs(r-p));f<s&&(s=f,i=o)}return i}}]),t}();function ri(t){var a={YYYY:[0,9999,new Date().getFullYear()],MM:[1,12],DD:[1,31],HH:[0,23],mm:[0,59],ss:[0,59],SSS:[0,999]};return a[t]}var si=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"],en=n.forwardRef(function(t,a){var r=t.active,s=t.showActiveCls,i=s===void 0?!0:s,o=t.suffixIcon,l=t.format,u=t.validateFormat,p=t.onChange;t.onInput;var f=t.helped,d=t.onHelp,j=t.onSubmit,y=t.onKeyDown,O=t.preserveInvalidOnBlur,M=O===void 0?!1:O,b=t.invalid,w=t.clearIcon,h=Lt(t,si),S=t.value,C=t.onFocus,I=t.onBlur,$=t.onMouseUp,A=n.useContext(Et),E=A.prefixCls,P=A.input,V=P===void 0?"input":P,v="".concat(E,"-input"),k=n.useState(!1),F=te(k,2),Y=F[0],T=F[1],B=n.useState(S),z=te(B,2),K=z[0],G=z[1],ee=n.useState(""),Q=te(ee,2),J=Q[0],x=Q[1],N=n.useState(null),m=te(N,2),c=m[0],g=m[1],D=n.useState(null),R=te(D,2),H=R[0],_=R[1],Z=K||"";n.useEffect(function(){G(S)},[S]);var Me=n.useRef(),je=n.useRef();n.useImperativeHandle(a,function(){return{nativeElement:Me.current,inputElement:je.current,focus:function(be){je.current.focus(be)},blur:function(){je.current.blur()}}});var Fe=n.useMemo(function(){return new ni(l||"")},[l]),Ye=n.useMemo(function(){return f?[0,0]:Fe.getSelection(c)},[Fe,c,f]),ve=te(Ye,2),Ee=ve[0],Ne=ve[1],Ke=function(be){be&&be!==l&&be!==S&&d()},Ae=mt(function(Ie){u(Ie)&&p(Ie),G(Ie),Ke(Ie)}),Re=function(be){if(!l){var Ue=be.target.value;Ke(Ue),G(Ue),p(Ue)}},Le=function(be){var Ue=be.clipboardData.getData("text");u(Ue)&&Ae(Ue)},Qe=n.useRef(!1),We=function(){Qe.current=!0},q=function(be){var Ue=be.target,He=Ue.selectionStart,ke=Fe.getMaskCellIndex(He);g(ke),_({}),$==null||$(be),Qe.current=!1},W=function(be){T(!0),g(0),x(""),C(be)},ce=function(be){I(be)},ie=function(be){T(!1),ce(be)};bn(r,function(){!r&&!M&&G(S)});var oe=function(be){be.key==="Enter"&&u(Z)&&j(),y==null||y(be)},ne=function(be){oe(be);var Ue=be.key,He=null,ke=null,et=Ne-Ee,pt=l.slice(Ee,Ne),lt=function(Ce){g(function(se){var _e=se+Ce;return _e=Math.max(_e,0),_e=Math.min(_e,Fe.size()-1),_e})},Ge=function(Ce){var se=ri(pt),_e=te(se,3),nt=_e[0],bt=_e[1],ut=_e[2],Dt=Z.slice(Ee,Ne),Tt=Number(Dt);if(isNaN(Tt))return String(ut||(Ce>0?nt:bt));var It=Tt+Ce,$t=bt-nt+1;return String(nt+($t+It-nt)%$t)};switch(Ue){case"Backspace":case"Delete":He="",ke=pt;break;case"ArrowLeft":He="",lt(-1);break;case"ArrowRight":He="",lt(1);break;case"ArrowUp":He="",ke=Ge(1);break;case"ArrowDown":He="",ke=Ge(-1);break;default:isNaN(Number(Ue))||(He=J+Ue,ke=He);break}if(He!==null&&(x(He),He.length>=et&&(lt(1),x(""))),ke!==null){var le=Z.slice(0,Ee)+Rs(ke,et)+Z.slice(Ne);Ae(le.slice(0,l.length))}_({})},ue=n.useRef();Yt(function(){if(!(!Y||!l||Qe.current)){if(!Fe.match(Z)){Ae(l);return}return je.current.setSelectionRange(Ee,Ne),ue.current=Mt(function(){je.current.setSelectionRange(Ee,Ne)}),function(){Mt.cancel(ue.current)}}},[Fe,l,Y,Z,c,Ee,Ne,H,Ae]);var X=l?{onFocus:W,onBlur:ie,onKeyDown:ne,onMouseDown:We,onMouseUp:q,onPaste:Le}:{};return n.createElement("div",{ref:Me,className:Je(v,Pe(Pe({},"".concat(v,"-active"),r&&i),"".concat(v,"-placeholder"),f))},n.createElement(V,qe({ref:je,"aria-invalid":b,autoComplete:"off"},h,{onKeyDown:oe,onBlur:ce},X,{value:Z,onChange:Re})),n.createElement(ka,{type:"suffix",icon:o}),w)}),ii=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveInfo","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],li=["index"];function oi(t,a){var r=t.id,s=t.prefix,i=t.clearIcon,o=t.suffixIcon,l=t.separator,u=l===void 0?"~":l,p=t.activeIndex;t.activeHelp,t.allHelp;var f=t.focused;t.onFocus,t.onBlur,t.onKeyDown,t.locale,t.generateConfig;var d=t.placeholder,j=t.className,y=t.style,O=t.onClick,M=t.onClear,b=t.value;t.onChange,t.onSubmit,t.onInputChange,t.format,t.maskFormat,t.preserveInvalidOnBlur,t.onInvalid;var w=t.disabled,h=t.invalid;t.inputReadOnly;var S=t.direction;t.onOpenChange;var C=t.onActiveInfo;t.placement;var I=t.onMouseDown;t.required,t["aria-required"];var $=t.autoFocus,A=t.tabIndex,E=Lt(t,ii),P=S==="rtl",V=n.useContext(Et),v=V.prefixCls,k=n.useMemo(function(){if(typeof r=="string")return[r];var H=r||{};return[H.start,H.end]},[r]),F=n.useRef(),Y=n.useRef(),T=n.useRef(),B=function(_){var Z;return(Z=[Y,T][_])===null||Z===void 0?void 0:Z.current};n.useImperativeHandle(a,function(){return{nativeElement:F.current,focus:function(_){if(Ia(_)==="object"){var Z,Me=_||{},je=Me.index,Fe=je===void 0?0:je,Ye=Lt(Me,li);(Z=B(Fe))===null||Z===void 0||Z.focus(Ye)}else{var ve;(ve=B(_??0))===null||ve===void 0||ve.focus()}},blur:function(){var _,Z;(_=B(0))===null||_===void 0||_.blur(),(Z=B(1))===null||Z===void 0||Z.blur()}}});var z=Pr(E),K=n.useMemo(function(){return Array.isArray(d)?d:[d,d]},[d]),G=Rr(Ve(Ve({},t),{},{id:k,placeholder:K})),ee=te(G,1),Q=ee[0],J=n.useState({position:"absolute",width:0}),x=te(J,2),N=x[0],m=x[1],c=mt(function(){var H=B(p);if(H){var _=H.nativeElement.getBoundingClientRect(),Z=F.current.getBoundingClientRect(),Me=_.left-Z.left;m(function(je){return Ve(Ve({},je),{},{width:_.width,left:Me})}),C([_.left,_.right,Z.width])}});n.useEffect(function(){c()},[p]);var g=i&&(b[0]&&!w[0]||b[1]&&!w[1]),D=$&&!w[0],R=$&&!D&&!w[1];return n.createElement(Un,{onResize:c},n.createElement("div",qe({},z,{className:Je(v,"".concat(v,"-range"),Pe(Pe(Pe(Pe({},"".concat(v,"-focused"),f),"".concat(v,"-disabled"),w.every(function(H){return H})),"".concat(v,"-invalid"),h.some(function(H){return H})),"".concat(v,"-rtl"),P),j),style:y,ref:F,onClick:O,onMouseDown:function(_){var Z=_.target;Z!==Y.current.inputElement&&Z!==T.current.inputElement&&_.preventDefault(),I==null||I(_)}}),s&&n.createElement("div",{className:"".concat(v,"-prefix")},s),n.createElement(en,qe({ref:Y},Q(0),{autoFocus:D,tabIndex:A,"date-range":"start"})),n.createElement("div",{className:"".concat(v,"-range-separator")},u),n.createElement(en,qe({ref:T},Q(1),{autoFocus:R,tabIndex:A,"date-range":"end"})),n.createElement("div",{className:"".concat(v,"-active-bar"),style:N}),n.createElement(ka,{type:"suffix",icon:o}),g&&n.createElement(Za,{icon:i,onClear:M})))}var ci=n.forwardRef(oi);function Rn(t,a){var r=t??a;return Array.isArray(r)?r:[r,r]}function ba(t){return t===1?"end":"start"}function ui(t,a){var r=vr(t,function(){var $e=t.disabled,xe=t.allowEmpty,De=Rn($e,!1),Ze=Rn(xe,!1);return{disabled:De,allowEmpty:Ze}}),s=te(r,6),i=s[0],o=s[1],l=s[2],u=s[3],p=s[4],f=s[5],d=i.prefixCls,j=i.styles,y=i.classNames,O=i.defaultValue,M=i.value,b=i.needConfirm,w=i.onKeyDown,h=i.disabled,S=i.allowEmpty,C=i.disabledDate,I=i.minDate,$=i.maxDate,A=i.defaultOpen,E=i.open,P=i.onOpenChange,V=i.locale,v=i.generateConfig,k=i.picker,F=i.showNow,Y=i.showToday,T=i.showTime,B=i.mode,z=i.onPanelChange,K=i.onCalendarChange,G=i.onOk,ee=i.defaultPickerValue,Q=i.pickerValue,J=i.onPickerValueChange,x=i.inputReadOnly,N=i.suffixIcon,m=i.onFocus,c=i.onBlur,g=i.presets,D=i.ranges,R=i.components,H=i.cellRender,_=i.dateRender,Z=i.monthCellRender,Me=i.onClick,je=br(a),Fe=gr(E,A,h,P),Ye=te(Fe,2),ve=Ye[0],Ee=Ye[1],Ne=function(xe,De){(h.some(function(Ze){return!Ze})||!xe)&&Ee(xe,De)},Ke=Dr(v,V,u,!0,!1,O,M,K,G),Ae=te(Ke,5),Re=Ae[0],Le=Ae[1],Qe=Ae[2],We=Ae[3],q=Ae[4],W=Qe(),ce=Sr(h,S,ve),ie=te(ce,9),oe=ie[0],ne=ie[1],ue=ie[2],X=ie[3],Ie=ie[4],be=ie[5],Ue=ie[6],He=ie[7],ke=ie[8],et=function(xe,De){ne(!0),m==null||m(xe,{range:ba(De??X)})},pt=function(xe,De){ne(!1),c==null||c(xe,{range:ba(De??X)})},lt=n.useMemo(function(){if(!T)return null;var $e=T.disabledTime,xe=$e?function(De){var Ze=ba(X),it=ir(W,Ue,X);return $e(De,Ze,{from:it})}:void 0;return Ve(Ve({},T),{},{disabledTime:xe})},[T,X,W,Ue]),Ge=ra([k,k],{value:B}),le=te(Ge,2),ae=le[0],Ce=le[1],se=ae[X]||k,_e=se==="date"&&lt?"datetime":se,nt=_e===k&&_e!=="time",bt=kr(k,se,F,Y,!0),ut=Ir(i,Re,Le,Qe,We,h,u,oe,ve,f),Dt=te(ut,2),Tt=Dt[0],It=Dt[1],$t=Ws(W,h,Ue,v,V,C),ia=xr(W,f,S),ea=te(ia,2),la=ea[0],oa=ea[1],Wt=Cr(v,V,W,ae,ve,X,o,nt,ee,Q,lt==null?void 0:lt.defaultOpenValue,J,I,$),zt=te(Wt,2),Ct=zt[0],ta=zt[1],U=mt(function($e,xe,De){var Ze=ma(ae,X,xe);if((Ze[0]!==ae[0]||Ze[1]!==ae[1])&&Ce(Ze),z&&De!==!1){var it=Vt(W);$e&&(it[X]=$e),z(it,Ze)}}),we=function(xe,De){return ma(W,De,xe)},Se=function(xe,De){var Ze=W;xe&&(Ze=we(xe,X)),He(X);var it=be(Ze);We(Ze),Tt(X,it===null),it===null?Ne(!1,{force:!0}):De||je.current.focus({index:it})},Te=function(xe){var De,Ze=xe.target.getRootNode();if(!je.current.nativeElement.contains((De=Ze.activeElement)!==null&&De!==void 0?De:document.activeElement)){var it=h.findIndex(function(Ur){return!Ur});it>=0&&je.current.focus({index:it})}Ne(!0),Me==null||Me(xe)},Xe=function(){It(null),Ne(!1,{force:!0})},tt=n.useState(null),st=te(tt,2),rt=st[0],kt=st[1],At=n.useState(null),aa=te(At,2),na=aa[0],ca=aa[1],pa=n.useMemo(function(){return na||W},[W,na]);n.useEffect(function(){ve||ca(null)},[ve]);var Ma=n.useState([0,0,0]),ua=te(Ma,2),Ea=ua[0],Ta=ua[1],$a=yr(g,D),Aa=function(xe){ca(xe),kt("preset")},Ba=function(xe){var De=It(xe);De&&Ne(!1,{force:!0})},Fa=function(xe){Se(xe)},Va=function(xe){ca(xe?we(xe,X):null),kt("cell")},_a=function(xe){Ne(!0),et(xe)},qa=function(){ue("panel")},Ha=function(xe){var De=ma(W,X,xe);We(De),!b&&!l&&o===_e&&Se(xe)},za=function(){Ne(!1)},Ya=or(H,_,Z,ba(X)),La=W[X]||null,Ua=mt(function($e){return f($e,{activeIndex:X})}),ye=n.useMemo(function(){var $e=rn(i,!1),xe=Gn(i,[].concat(Vt(Object.keys($e)),["onChange","onCalendarChange","style","className","onPanelChange","disabledTime"]));return xe},[i]),de=n.createElement(Or,qe({},ye,{showNow:bt,showTime:lt,range:!0,multiplePanel:nt,activeInfo:Ea,disabledDate:$t,onFocus:_a,onBlur:pt,onPanelMouseDown:qa,picker:k,mode:se,internalMode:_e,onPanelChange:U,format:p,value:La,isInvalid:Ua,onChange:null,onSelect:Ha,pickerValue:Ct,defaultOpenValue:ha(T==null?void 0:T.defaultOpenValue)[X],onPickerValueChange:ta,hoverValue:pa,onHover:Va,needConfirm:b,onSubmit:Se,onOk:q,presets:$a,onPresetHover:Aa,onPresetSubmit:Ba,onNow:Fa,cellRender:Ya})),dt=function(xe,De){var Ze=we(xe,De);We(Ze)},Ot=function(){ue("input")},xa=function(xe,De){var Ze=Ue.length,it=Ue[Ze-1];if(Ze&&it!==De&&b&&!S[it]&&!ke(it)&&W[it]){je.current.focus({index:it});return}ue("input"),Ne(!0,{inherit:!0}),X!==De&&ve&&!b&&l&&Se(null,!0),Ie(De),et(xe,De)},zr=function(xe,De){if(Ne(!1),!b&&ue()==="input"){var Ze=be(W);Tt(X,Ze===null)}pt(xe,De)},Yr=function(xe,De){xe.key==="Tab"&&Se(null,!0),w==null||w(xe,De)},Lr=n.useMemo(function(){return{prefixCls:d,locale:V,generateConfig:v,button:R.button,input:R.input}},[d,V,v,R.button,R.input]);return Yt(function(){ve&&X!==void 0&&U(null,k,!1)},[ve,X,k]),Yt(function(){var $e=ue();!ve&&$e==="input"&&(Ne(!1),Se(null,!0)),!ve&&l&&!b&&$e==="panel"&&(Ne(!0),Se())},[ve]),n.createElement(Et.Provider,{value:Lr},n.createElement(hr,qe({},pr(i),{popupElement:de,popupStyle:j.popup,popupClassName:y.popup,visible:ve,onClose:za,range:!0}),n.createElement(ci,qe({},i,{ref:je,suffixIcon:N,activeIndex:oe||ve?X:null,activeHelp:!!na,allHelp:!!na&&rt==="preset",focused:oe,onFocus:xa,onBlur:zr,onKeyDown:Yr,onSubmit:Se,value:pa,maskFormat:p,onChange:dt,onInputChange:Ot,format:u,inputReadOnly:x,disabled:h,open:ve,onOpenChange:Ne,onClick:Te,onClear:Xe,invalid:la,onInvalid:oa,onActiveInfo:Ta}))))}var di=n.forwardRef(ui);function mi(t){var a=t.prefixCls,r=t.value,s=t.onRemove,i=t.removeIcon,o=i===void 0?"×":i,l=t.formatDate,u=t.disabled,p=t.maxTagCount,f=t.placeholder,d="".concat(a,"-selector"),j="".concat(a,"-selection"),y="".concat(j,"-overflow");function O(w,h){return n.createElement("span",{className:Je("".concat(j,"-item")),title:typeof w=="string"?w:null},n.createElement("span",{className:"".concat(j,"-item-content")},w),!u&&h&&n.createElement("span",{onMouseDown:function(C){C.preventDefault()},onClick:h,className:"".concat(j,"-item-remove")},o))}function M(w){var h=l(w),S=function(I){I&&I.stopPropagation(),s(w)};return O(h,S)}function b(w){var h="+ ".concat(w.length," ...");return O(h)}return n.createElement("div",{className:d},n.createElement(Wr,{prefixCls:y,data:r,renderItem:M,renderRest:b,itemKey:function(h){return l(h)},maxCount:p}),!r.length&&n.createElement("span",{className:"".concat(a,"-selection-placeholder")},f))}var fi=["id","open","prefix","clearIcon","suffixIcon","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","internalPicker","value","onChange","onSubmit","onInputChange","multiple","maxTagCount","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onMouseDown","required","aria-required","autoFocus","tabIndex","removeIcon"];function hi(t,a){t.id;var r=t.open,s=t.prefix,i=t.clearIcon,o=t.suffixIcon;t.activeHelp,t.allHelp;var l=t.focused;t.onFocus,t.onBlur,t.onKeyDown;var u=t.locale,p=t.generateConfig,f=t.placeholder,d=t.className,j=t.style,y=t.onClick,O=t.onClear,M=t.internalPicker,b=t.value,w=t.onChange,h=t.onSubmit;t.onInputChange;var S=t.multiple,C=t.maxTagCount;t.format,t.maskFormat,t.preserveInvalidOnBlur,t.onInvalid;var I=t.disabled,$=t.invalid;t.inputReadOnly;var A=t.direction;t.onOpenChange;var E=t.onMouseDown;t.required,t["aria-required"];var P=t.autoFocus,V=t.tabIndex,v=t.removeIcon,k=Lt(t,fi),F=A==="rtl",Y=n.useContext(Et),T=Y.prefixCls,B=n.useRef(),z=n.useRef();n.useImperativeHandle(a,function(){return{nativeElement:B.current,focus:function(D){var R;(R=z.current)===null||R===void 0||R.focus(D)},blur:function(){var D;(D=z.current)===null||D===void 0||D.blur()}}});var K=Pr(k),G=function(D){w([D])},ee=function(D){var R=b.filter(function(H){return H&&!Ft(p,u,H,D,M)});w(R),r||h()},Q=Rr(Ve(Ve({},t),{},{onChange:G}),function(g){var D=g.valueTexts;return{value:D[0]||"",active:l}}),J=te(Q,2),x=J[0],N=J[1],m=!!(i&&b.length&&!I),c=S?n.createElement(n.Fragment,null,n.createElement(mi,{prefixCls:T,value:b,onRemove:ee,formatDate:N,maxTagCount:C,disabled:I,removeIcon:v,placeholder:f}),n.createElement("input",{className:"".concat(T,"-multiple-input"),value:b.map(N).join(","),ref:z,readOnly:!0,autoFocus:P,tabIndex:V}),n.createElement(ka,{type:"suffix",icon:o}),m&&n.createElement(Za,{icon:i,onClear:O})):n.createElement(en,qe({ref:z},x(),{autoFocus:P,tabIndex:V,suffixIcon:o,clearIcon:m&&n.createElement(Za,{icon:i,onClear:O}),showActiveCls:!1}));return n.createElement("div",qe({},K,{className:Je(T,Pe(Pe(Pe(Pe(Pe({},"".concat(T,"-multiple"),S),"".concat(T,"-focused"),l),"".concat(T,"-disabled"),I),"".concat(T,"-invalid"),$),"".concat(T,"-rtl"),F),d),style:j,ref:B,onClick:y,onMouseDown:function(D){var R,H=D.target;H!==((R=z.current)===null||R===void 0?void 0:R.inputElement)&&D.preventDefault(),E==null||E(D)}}),s&&n.createElement("div",{className:"".concat(T,"-prefix")},s),c)}var pi=n.forwardRef(hi);function xi(t,a){var r=vr(t),s=te(r,6),i=s[0],o=s[1],l=s[2],u=s[3],p=s[4],f=s[5],d=i,j=d.prefixCls,y=d.styles,O=d.classNames,M=d.order,b=d.defaultValue,w=d.value,h=d.needConfirm,S=d.onChange,C=d.onKeyDown,I=d.disabled,$=d.disabledDate,A=d.minDate,E=d.maxDate,P=d.defaultOpen,V=d.open,v=d.onOpenChange,k=d.locale,F=d.generateConfig,Y=d.picker,T=d.showNow,B=d.showToday,z=d.showTime,K=d.mode,G=d.onPanelChange,ee=d.onCalendarChange,Q=d.onOk,J=d.multiple,x=d.defaultPickerValue,N=d.pickerValue,m=d.onPickerValueChange,c=d.inputReadOnly,g=d.suffixIcon,D=d.removeIcon,R=d.onFocus,H=d.onBlur,_=d.presets,Z=d.components,Me=d.cellRender,je=d.dateRender,Fe=d.monthCellRender,Ye=d.onClick,ve=br(a);function Ee(ye){return ye===null?null:J?ye:ye[0]}var Ne=Ps(F,k,o),Ke=gr(V,P,[I],v),Ae=te(Ke,2),Re=Ae[0],Le=Ae[1],Qe=function(de,dt,Ot){if(ee){var xa=Ve({},Ot);delete xa.range,ee(Ee(de),Ee(dt),xa)}},We=function(de){Q==null||Q(Ee(de))},q=Dr(F,k,u,!1,M,b,w,Qe,We),W=te(q,5),ce=W[0],ie=W[1],oe=W[2],ne=W[3],ue=W[4],X=oe(),Ie=Sr([I]),be=te(Ie,4),Ue=be[0],He=be[1],ke=be[2],et=be[3],pt=function(de){He(!0),R==null||R(de,{})},lt=function(de){He(!1),H==null||H(de,{})},Ge=ra(Y,{value:K}),le=te(Ge,2),ae=le[0],Ce=le[1],se=ae==="date"&&z?"datetime":ae,_e=kr(Y,ae,T,B),nt=S&&function(ye,de){S(Ee(ye),Ee(de))},bt=Ir(Ve(Ve({},i),{},{onChange:nt}),ce,ie,oe,ne,[],u,Ue,Re,f),ut=te(bt,2),Dt=ut[1],Tt=xr(X,f),It=te(Tt,2),$t=It[0],ia=It[1],ea=n.useMemo(function(){return $t.some(function(ye){return ye})},[$t]),la=function(de,dt){if(m){var Ot=Ve(Ve({},dt),{},{mode:dt.mode[0]});delete Ot.range,m(de[0],Ot)}},oa=Cr(F,k,X,[ae],Re,et,o,!1,x,N,ha(z==null?void 0:z.defaultOpenValue),la,A,E),Wt=te(oa,2),zt=Wt[0],Ct=Wt[1],ta=mt(function(ye,de,dt){if(Ce(de),G&&dt!==!1){var Ot=ye||X[X.length-1];G(Ot,de)}}),U=function(){Dt(oe()),Le(!1,{force:!0})},we=function(de){!I&&!ve.current.nativeElement.contains(document.activeElement)&&ve.current.focus(),Le(!0),Ye==null||Ye(de)},Se=function(){Dt(null),Le(!1,{force:!0})},Te=n.useState(null),Xe=te(Te,2),tt=Xe[0],st=Xe[1],rt=n.useState(null),kt=te(rt,2),At=kt[0],aa=kt[1],na=n.useMemo(function(){var ye=[At].concat(Vt(X)).filter(function(de){return de});return J?ye:ye.slice(0,1)},[X,At,J]),ca=n.useMemo(function(){return!J&&At?[At]:X.filter(function(ye){return ye})},[X,At,J]);n.useEffect(function(){Re||aa(null)},[Re]);var pa=yr(_),Ma=function(de){aa(de),st("preset")},ua=function(de){var dt=J?Ne(oe(),de):[de],Ot=Dt(dt);Ot&&!J&&Le(!1,{force:!0})},Ea=function(de){ua(de)},Ta=function(de){aa(de),st("cell")},$a=function(de){Le(!0),pt(de)},Aa=function(de){if(ke("panel"),!(J&&se!==Y)){var dt=J?Ne(oe(),de):[de];ne(dt),!h&&!l&&o===se&&U()}},Ba=function(){Le(!1)},Fa=or(Me,je,Fe),Va=n.useMemo(function(){var ye=rn(i,!1),de=Gn(i,[].concat(Vt(Object.keys(ye)),["onChange","onCalendarChange","style","className","onPanelChange"]));return Ve(Ve({},de),{},{multiple:i.multiple})},[i]),_a=n.createElement(Or,qe({},Va,{showNow:_e,showTime:z,disabledDate:$,onFocus:$a,onBlur:lt,picker:Y,mode:ae,internalMode:se,onPanelChange:ta,format:p,value:X,isInvalid:f,onChange:null,onSelect:Aa,pickerValue:zt,defaultOpenValue:z==null?void 0:z.defaultOpenValue,onPickerValueChange:Ct,hoverValue:na,onHover:Ta,needConfirm:h,onSubmit:U,onOk:ue,presets:pa,onPresetHover:Ma,onPresetSubmit:ua,onNow:Ea,cellRender:Fa})),qa=function(de){ne(de)},Ha=function(){ke("input")},za=function(de){ke("input"),Le(!0,{inherit:!0}),pt(de)},Ya=function(de){Le(!1),lt(de)},La=function(de,dt){de.key==="Tab"&&U(),C==null||C(de,dt)},Ua=n.useMemo(function(){return{prefixCls:j,locale:k,generateConfig:F,button:Z.button,input:Z.input}},[j,k,F,Z.button,Z.input]);return Yt(function(){Re&&et!==void 0&&ta(null,Y,!1)},[Re,et,Y]),Yt(function(){var ye=ke();!Re&&ye==="input"&&(Le(!1),U()),!Re&&l&&!h&&ye==="panel"&&U()},[Re]),n.createElement(Et.Provider,{value:Ua},n.createElement(hr,qe({},pr(i),{popupElement:_a,popupStyle:y.popup,popupClassName:O.popup,visible:Re,onClose:Ba}),n.createElement(pi,qe({},i,{ref:ve,suffixIcon:g,removeIcon:D,activeHelp:!!At,allHelp:!!At&&tt==="preset",focused:Ue,onFocus:za,onBlur:Ya,onKeyDown:La,onSubmit:U,value:ca,maskFormat:p,onChange:qa,onInputChange:Ha,internalPicker:o,format:u,inputReadOnly:c,disabled:I,open:Re,onOpenChange:Le,onClick:we,onClear:Se,invalid:ea,onInvalid:function(de){ia(de,0)}}))))}var vi=n.forwardRef(xi),gi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},bi=function(a,r){return n.createElement(qt,qe({},a,{ref:r,icon:gi}))},yi=n.forwardRef(bi);function tn(){return typeof BigInt=="function"}function Mr(t){return!t&&t!==0&&!Number.isNaN(t)||!String(t).trim()}function Qt(t){var a=t.trim(),r=a.startsWith("-");r&&(a=a.slice(1)),a=a.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),a.startsWith(".")&&(a="0".concat(a));var s=a||"0",i=s.split("."),o=i[0]||"0",l=i[1]||"0";o==="0"&&l==="0"&&(r=!1);var u=r?"-":"";return{negative:r,negativeStr:u,trimStr:s,integerStr:o,decimalStr:l,fullStr:"".concat(u).concat(s)}}function yn(t){var a=String(t);return!Number.isNaN(Number(a))&&a.includes("e")}function Kt(t){var a=String(t);if(yn(t)){var r=Number(a.slice(a.indexOf("e-")+2)),s=a.match(/\.(\d+)/);return s!=null&&s[1]&&(r+=s[1].length),r}return a.includes(".")&&Sn(a)?a.length-a.indexOf(".")-1:0}function Oa(t){var a=String(t);if(yn(t)){if(t>Number.MAX_SAFE_INTEGER)return String(tn()?BigInt(t).toString():Number.MAX_SAFE_INTEGER);if(t<Number.MIN_SAFE_INTEGER)return String(tn()?BigInt(t).toString():Number.MIN_SAFE_INTEGER);a=t.toFixed(Kt(a))}return Qt(a).fullStr}function Sn(t){return typeof t=="number"?!Number.isNaN(t):t?/^\s*-?\d+(\.\d+)?\s*$/.test(t)||/^\s*-?\d+\.\s*$/.test(t)||/^\s*-?\.\d+\s*$/.test(t):!1}var Si=function(){function t(a){if(ln(this,t),Pe(this,"origin",""),Pe(this,"negative",void 0),Pe(this,"integer",void 0),Pe(this,"decimal",void 0),Pe(this,"decimalLen",void 0),Pe(this,"empty",void 0),Pe(this,"nan",void 0),Mr(a)){this.empty=!0;return}if(this.origin=String(a),a==="-"||Number.isNaN(a)){this.nan=!0;return}var r=a;if(yn(r)&&(r=Number(r)),r=typeof r=="string"?r:Oa(r),Sn(r)){var s=Qt(r);this.negative=s.negative;var i=s.trimStr.split(".");this.integer=BigInt(i[0]);var o=i[1]||"0";this.decimal=BigInt(o),this.decimalLen=o.length}else this.nan=!0}return sn(t,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(r){var s="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(r,"0"));return BigInt(s)}},{key:"negate",value:function(){var r=new t(this.toString());return r.negative=!r.negative,r}},{key:"cal",value:function(r,s,i){var o=Math.max(this.getDecimalStr().length,r.getDecimalStr().length),l=this.alignDecimal(o),u=r.alignDecimal(o),p=s(l,u).toString(),f=i(o),d=Qt(p),j=d.negativeStr,y=d.trimStr,O="".concat(j).concat(y.padStart(f+1,"0"));return new t("".concat(O.slice(0,-f),".").concat(O.slice(-f)))}},{key:"add",value:function(r){if(this.isInvalidate())return new t(r);var s=new t(r);return s.isInvalidate()?this:this.cal(s,function(i,o){return i+o},function(i){return i})}},{key:"multi",value:function(r){var s=new t(r);return this.isInvalidate()||s.isInvalidate()?new t(NaN):this.cal(s,function(i,o){return i*o},function(i){return i*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(r){return this.toString()===(r==null?void 0:r.toString())}},{key:"lessEquals",value:function(r){return this.add(r.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r?this.isInvalidate()?"":Qt("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),t}(),Ci=function(){function t(a){if(ln(this,t),Pe(this,"origin",""),Pe(this,"number",void 0),Pe(this,"empty",void 0),Mr(a)){this.empty=!0;return}this.origin=String(a),this.number=Number(a)}return sn(t,[{key:"negate",value:function(){return new t(-this.toNumber())}},{key:"add",value:function(r){if(this.isInvalidate())return new t(r);var s=Number(r);if(Number.isNaN(s))return this;var i=this.number+s;if(i>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var o=Math.max(Kt(this.number),Kt(s));return new t(i.toFixed(o))}},{key:"multi",value:function(r){var s=Number(r);if(this.isInvalidate()||Number.isNaN(s))return new t(NaN);var i=this.number*s;if(i>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var o=Math.max(Kt(this.number),Kt(s));return new t(i.toFixed(o))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(r){return this.toNumber()===(r==null?void 0:r.toNumber())}},{key:"lessEquals",value:function(r){return this.add(r.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r?this.isInvalidate()?"":Oa(this.number):this.origin}}]),t}();function wt(t){return tn()?new Si(t):new Ci(t)}function Ca(t,a,r){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t==="")return"";var i=Qt(t),o=i.negativeStr,l=i.integerStr,u=i.decimalStr,p="".concat(a).concat(u),f="".concat(o).concat(l);if(r>=0){var d=Number(u[r]);if(d>=5&&!s){var j=wt(t).add("".concat(o,"0.").concat("0".repeat(r)).concat(10-d));return Ca(j.toString(),a,r,s)}return r===0?f:"".concat(f).concat(a).concat(u.padEnd(r,"0").slice(0,r))}return p===".0"?f:"".concat(f).concat(p)}function ji(t,a){return typeof Proxy<"u"&&t?new Proxy(t,{get:function(s,i){if(a[i])return a[i];var o=s[i];return typeof o=="function"?o.bind(s):o}}):t}function wi(t,a){var r=n.useRef(null);function s(){try{var o=t.selectionStart,l=t.selectionEnd,u=t.value,p=u.substring(0,o),f=u.substring(l);r.current={start:o,end:l,value:u,beforeTxt:p,afterTxt:f}}catch{}}function i(){if(t&&r.current&&a)try{var o=t.value,l=r.current,u=l.beforeTxt,p=l.afterTxt,f=l.start,d=o.length;if(o.startsWith(u))d=u.length;else if(o.endsWith(p))d=o.length-r.current.afterTxt.length;else{var j=u[f-1],y=o.indexOf(j,f-1);y!==-1&&(d=y+1)}t.setSelectionRange(d,d)}catch(O){Ln(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(O.message))}}return[s,i]}var Ni=function(){var a=n.useState(!1),r=te(a,2),s=r[0],i=r[1];return Yt(function(){i(Kr())},[]),s},Di=200,Ii=600;function ki(t){var a=t.prefixCls,r=t.upNode,s=t.downNode,i=t.upDisabled,o=t.downDisabled,l=t.onStep,u=n.useRef(),p=n.useRef([]),f=n.useRef();f.current=l;var d=function(){clearTimeout(u.current)},j=function(C,I){C.preventDefault(),d(),f.current(I);function $(){f.current(I),u.current=setTimeout($,Di)}u.current=setTimeout($,Ii)};n.useEffect(function(){return function(){d(),p.current.forEach(function(S){return Mt.cancel(S)})}},[]);var y=Ni();if(y)return null;var O="".concat(a,"-handler"),M=Je(O,"".concat(O,"-up"),Pe({},"".concat(O,"-up-disabled"),i)),b=Je(O,"".concat(O,"-down"),Pe({},"".concat(O,"-down-disabled"),o)),w=function(){return p.current.push(Mt(d))},h={unselectable:"on",role:"button",onMouseUp:w,onMouseLeave:w};return n.createElement("div",{className:"".concat(O,"-wrap")},n.createElement("span",qe({},h,{onMouseDown:function(C){j(C,!0)},"aria-label":"Increase Value","aria-disabled":i,className:M}),r||n.createElement("span",{unselectable:"on",className:"".concat(a,"-handler-up-inner")})),n.createElement("span",qe({},h,{onMouseDown:function(C){j(C,!1)},"aria-label":"Decrease Value","aria-disabled":o,className:b}),s||n.createElement("span",{unselectable:"on",className:"".concat(a,"-handler-down-inner")})))}function Pn(t){var a=typeof t=="number"?Oa(t):Qt(t).fullStr,r=a.includes(".");return r?Qt(a.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:t+"0"}const Oi=function(){var t=n.useRef(0),a=function(){Mt.cancel(t.current)};return n.useEffect(function(){return a},[]),function(r){a(),t.current=Mt(function(){r()})}};var Ri=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],Pi=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],Mn=function(a,r){return a||r.isEmpty()?r.toString():r.toNumber()},En=function(a){var r=wt(a);return r.isInvalidate()?null:r},Mi=n.forwardRef(function(t,a){var r=t.prefixCls,s=t.className,i=t.style,o=t.min,l=t.max,u=t.step,p=u===void 0?1:u,f=t.defaultValue,d=t.value,j=t.disabled,y=t.readOnly,O=t.upHandler,M=t.downHandler,b=t.keyboard,w=t.changeOnWheel,h=w===void 0?!1:w,S=t.controls,C=S===void 0?!0:S;t.classNames;var I=t.stringMode,$=t.parser,A=t.formatter,E=t.precision,P=t.decimalSeparator,V=t.onChange,v=t.onInput,k=t.onPressEnter,F=t.onStep,Y=t.changeOnBlur,T=Y===void 0?!0:Y,B=t.domRef,z=Lt(t,Ri),K="".concat(r,"-input"),G=n.useRef(null),ee=n.useState(!1),Q=te(ee,2),J=Q[0],x=Q[1],N=n.useRef(!1),m=n.useRef(!1),c=n.useRef(!1),g=n.useState(function(){return wt(d??f)}),D=te(g,2),R=D[0],H=D[1];function _(le){d===void 0&&H(le)}var Z=n.useCallback(function(le,ae){if(!ae)return E>=0?E:Math.max(Kt(le),Kt(p))},[E,p]),Me=n.useCallback(function(le){var ae=String(le);if($)return $(ae);var Ce=ae;return P&&(Ce=Ce.replace(P,".")),Ce.replace(/[^\w.-]+/g,"")},[$,P]),je=n.useRef(""),Fe=n.useCallback(function(le,ae){if(A)return A(le,{userTyping:ae,input:String(je.current)});var Ce=typeof le=="number"?Oa(le):le;if(!ae){var se=Z(Ce,ae);if(Sn(Ce)&&(P||se>=0)){var _e=P||".";Ce=Ca(Ce,_e,se)}}return Ce},[A,Z,P]),Ye=n.useState(function(){var le=f??d;return R.isInvalidate()&&["string","number"].includes(Ia(le))?Number.isNaN(le)?"":le:Fe(R.toString(),!1)}),ve=te(Ye,2),Ee=ve[0],Ne=ve[1];je.current=Ee;function Ke(le,ae){Ne(Fe(le.isInvalidate()?le.toString(!1):le.toString(!ae),ae))}var Ae=n.useMemo(function(){return En(l)},[l,E]),Re=n.useMemo(function(){return En(o)},[o,E]),Le=n.useMemo(function(){return!Ae||!R||R.isInvalidate()?!1:Ae.lessEquals(R)},[Ae,R]),Qe=n.useMemo(function(){return!Re||!R||R.isInvalidate()?!1:R.lessEquals(Re)},[Re,R]),We=wi(G.current,J),q=te(We,2),W=q[0],ce=q[1],ie=function(ae){return Ae&&!ae.lessEquals(Ae)?Ae:Re&&!Re.lessEquals(ae)?Re:null},oe=function(ae){return!ie(ae)},ne=function(ae,Ce){var se=ae,_e=oe(se)||se.isEmpty();if(!se.isEmpty()&&!Ce&&(se=ie(se)||se,_e=!0),!y&&!j&&_e){var nt=se.toString(),bt=Z(nt,Ce);return bt>=0&&(se=wt(Ca(nt,".",bt)),oe(se)||(se=wt(Ca(nt,".",bt,!0)))),se.equals(R)||(_(se),V==null||V(se.isEmpty()?null:Mn(I,se)),d===void 0&&Ke(se,Ce)),se}return R},ue=Oi(),X=function le(ae){if(W(),je.current=ae,Ne(ae),!m.current){var Ce=Me(ae),se=wt(Ce);se.isNaN()||ne(se,!0)}v==null||v(ae),ue(function(){var _e=ae;$||(_e=ae.replace(/。/g,".")),_e!==ae&&le(_e)})},Ie=function(){m.current=!0},be=function(){m.current=!1,X(G.current.value)},Ue=function(ae){X(ae.target.value)},He=function(ae){var Ce;if(!(ae&&Le||!ae&&Qe)){N.current=!1;var se=wt(c.current?Pn(p):p);ae||(se=se.negate());var _e=(R||wt(0)).add(se.toString()),nt=ne(_e,!1);F==null||F(Mn(I,nt),{offset:c.current?Pn(p):p,type:ae?"up":"down"}),(Ce=G.current)===null||Ce===void 0||Ce.focus()}},ke=function(ae){var Ce=wt(Me(Ee)),se;Ce.isNaN()?se=ne(R,ae):se=ne(Ce,ae),d!==void 0?Ke(R,!1):se.isNaN()||Ke(se,!1)},et=function(){N.current=!0},pt=function(ae){var Ce=ae.key,se=ae.shiftKey;N.current=!0,c.current=se,Ce==="Enter"&&(m.current||(N.current=!1),ke(!1),k==null||k(ae)),b!==!1&&!m.current&&["Up","ArrowUp","Down","ArrowDown"].includes(Ce)&&(He(Ce==="Up"||Ce==="ArrowUp"),ae.preventDefault())},lt=function(){N.current=!1,c.current=!1};n.useEffect(function(){if(h&&J){var le=function(se){He(se.deltaY<0),se.preventDefault()},ae=G.current;if(ae)return ae.addEventListener("wheel",le,{passive:!1}),function(){return ae.removeEventListener("wheel",le)}}});var Ge=function(){T&&ke(!1),x(!1),N.current=!1};return Sa(function(){R.isInvalidate()||Ke(R,!1)},[E,A]),Sa(function(){var le=wt(d);H(le);var ae=wt(Me(Ee));(!le.equals(ae)||!N.current||A)&&Ke(le,N.current)},[d]),Sa(function(){A&&ce()},[Ee]),n.createElement("div",{ref:B,className:Je(r,s,Pe(Pe(Pe(Pe(Pe({},"".concat(r,"-focused"),J),"".concat(r,"-disabled"),j),"".concat(r,"-readonly"),y),"".concat(r,"-not-a-number"),R.isNaN()),"".concat(r,"-out-of-range"),!R.isInvalidate()&&!oe(R))),style:i,onFocus:function(){x(!0)},onBlur:Ge,onKeyDown:pt,onKeyUp:lt,onCompositionStart:Ie,onCompositionEnd:be,onBeforeInput:et},C&&n.createElement(ki,{prefixCls:r,upNode:O,downNode:M,upDisabled:Le,downDisabled:Qe,onStep:He}),n.createElement("div",{className:"".concat(K,"-wrap")},n.createElement("input",qe({autoComplete:"off",role:"spinbutton","aria-valuemin":o,"aria-valuemax":l,"aria-valuenow":R.isInvalidate()?null:R.toString(),step:p},z,{ref:Jr(G,a),className:K,value:Ee,onChange:Ue,disabled:j,readOnly:y}))))}),Ei=n.forwardRef(function(t,a){var r=t.disabled,s=t.style,i=t.prefixCls,o=i===void 0?"rc-input-number":i,l=t.value,u=t.prefix,p=t.suffix,f=t.addonBefore,d=t.addonAfter,j=t.className,y=t.classNames,O=Lt(t,Pi),M=n.useRef(null),b=n.useRef(null),w=n.useRef(null),h=function(C){w.current&&Xr(w.current,C)};return n.useImperativeHandle(a,function(){return ji(w.current,{focus:h,nativeElement:M.current.nativeElement||b.current})}),n.createElement(Qr,{className:j,triggerFocus:h,prefixCls:o,value:l,disabled:r,style:s,prefix:u,suffix:p,addonAfter:d,addonBefore:f,classNames:y,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:M},n.createElement(Mi,qe({prefixCls:o,disabled:r,ref:w,domRef:b,className:y==null?void 0:y.input},O)))});const Ti=t=>{var a;const r=(a=t.handleVisible)!==null&&a!==void 0?a:"auto",s=t.controlHeightSM-t.lineWidth*2;return Object.assign(Object.assign({},Zr(t)),{controlWidth:90,handleWidth:s,handleFontSize:t.fontSize/2,handleVisible:r,handleActiveBg:t.colorFillAlter,handleBg:t.colorBgContainer,filledHandleBg:new es(t.colorFillSecondary).onBackground(t.colorBgContainer).toHexString(),handleHoverColor:t.colorPrimary,handleBorderColor:t.colorBorder,handleOpacity:r===!0?1:0,handleVisibleWidth:r===!0?s:0})},Tn=({componentCls:t,borderRadiusSM:a,borderRadiusLG:r},s)=>{const i=s==="lg"?r:a;return{[`&-${s}`]:{[`${t}-handler-wrap`]:{borderStartEndRadius:i,borderEndEndRadius:i},[`${t}-handler-up`]:{borderStartEndRadius:i},[`${t}-handler-down`]:{borderEndEndRadius:i}}}},$i=t=>{const{componentCls:a,lineWidth:r,lineType:s,borderRadius:i,inputFontSizeSM:o,inputFontSizeLG:l,controlHeightLG:u,controlHeightSM:p,colorError:f,paddingInlineSM:d,paddingBlockSM:j,paddingBlockLG:y,paddingInlineLG:O,colorIcon:M,motionDurationMid:b,handleHoverColor:w,handleOpacity:h,paddingInline:S,paddingBlock:C,handleBg:I,handleActiveBg:$,colorTextDisabled:A,borderRadiusSM:E,borderRadiusLG:P,controlWidth:V,handleBorderColor:v,filledHandleBg:k,lineHeightLG:F,calc:Y}=t;return[{[a]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ga(t)),Wn(t)),{display:"inline-block",width:V,margin:0,padding:0,borderRadius:i}),ss(t,{[`${a}-handler-wrap`]:{background:I,[`${a}-handler-down`]:{borderBlockStart:`${gt(r)} ${s} ${v}`}}})),is(t,{[`${a}-handler-wrap`]:{background:k,[`${a}-handler-down`]:{borderBlockStart:`${gt(r)} ${s} ${v}`}},"&:focus-within":{[`${a}-handler-wrap`]:{background:I}}})),ls(t,{[`${a}-handler-wrap`]:{background:I,[`${a}-handler-down`]:{borderBlockStart:`${gt(r)} ${s} ${v}`}}})),os(t)),{"&-rtl":{direction:"rtl",[`${a}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:l,lineHeight:F,borderRadius:P,[`input${a}-input`]:{height:Y(u).sub(Y(r).mul(2)).equal(),padding:`${gt(y)} ${gt(O)}`}},"&-sm":{padding:0,fontSize:o,borderRadius:E,[`input${a}-input`]:{height:Y(p).sub(Y(r).mul(2)).equal(),padding:`${gt(j)} ${gt(d)}`}},"&-out-of-range":{[`${a}-input-wrap`]:{input:{color:f}}},"&-group":Object.assign(Object.assign(Object.assign({},Ga(t)),us(t)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${a}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${a}-group-addon`]:{borderRadius:P,fontSize:t.fontSizeLG}},"&-sm":{[`${a}-group-addon`]:{borderRadius:E}}},ds(t)),ms(t)),{[`&:not(${a}-compact-first-item):not(${a}-compact-last-item)${a}-compact-item`]:{[`${a}, ${a}-group-addon`]:{borderRadius:0}},[`&:not(${a}-compact-last-item)${a}-compact-first-item`]:{[`${a}, ${a}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${a}-compact-first-item)${a}-compact-last-item`]:{[`${a}, ${a}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${a}-input`]:{cursor:"not-allowed"},[a]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},Ga(t)),{width:"100%",padding:`${gt(C)} ${gt(S)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:i,outline:0,transition:`all ${b} linear`,appearance:"textfield",fontSize:"inherit"}),cs(t.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,appearance:"none"}})},[`&:hover ${a}-handler-wrap, &-focused ${a}-handler-wrap`]:{width:t.handleWidth,opacity:1}})},{[a]:Object.assign(Object.assign(Object.assign({[`${a}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:t.handleVisibleWidth,opacity:h,height:"100%",borderStartStartRadius:0,borderStartEndRadius:i,borderEndEndRadius:i,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${b}`,overflow:"hidden",[`${a}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${a}-handler-up-inner,
              ${a}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:t.handleFontSize}}},[`${a}-handler`]:{height:"50%",overflow:"hidden",color:M,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${gt(r)} ${s} ${v}`,transition:`all ${b} linear`,"&:active":{background:$},"&:hover":{height:"60%",[`
              ${a}-handler-up-inner,
              ${a}-handler-down-inner
            `]:{color:w}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},fs()),{color:M,transition:`all ${b} linear`,userSelect:"none"})},[`${a}-handler-up`]:{borderStartEndRadius:i},[`${a}-handler-down`]:{borderEndEndRadius:i}},Tn(t,"lg")),Tn(t,"sm")),{"&-disabled, &-readonly":{[`${a}-handler-wrap`]:{display:"none"},[`${a}-input`]:{color:"inherit"}},[`
          ${a}-handler-up-disabled,
          ${a}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${a}-handler-up-disabled:hover &-handler-up-inner,
          ${a}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:A}})}]},Ai=t=>{const{componentCls:a,paddingBlock:r,paddingInline:s,inputAffixPadding:i,controlWidth:o,borderRadiusLG:l,borderRadiusSM:u,paddingInlineLG:p,paddingInlineSM:f,paddingBlockLG:d,paddingBlockSM:j,motionDurationMid:y}=t;return{[`${a}-affix-wrapper`]:Object.assign(Object.assign({[`input${a}-input`]:{padding:`${gt(r)} 0`}},Wn(t)),{position:"relative",display:"inline-flex",alignItems:"center",width:o,padding:0,paddingInlineStart:s,"&-lg":{borderRadius:l,paddingInlineStart:p,[`input${a}-input`]:{padding:`${gt(d)} 0`}},"&-sm":{borderRadius:u,paddingInlineStart:f,[`input${a}-input`]:{padding:`${gt(j)} 0`}},[`&:not(${a}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${a}-disabled`]:{background:"transparent"},[`> div${a}`]:{width:"100%",border:"none",outline:"none",[`&${a}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${a}-handler-wrap`]:{zIndex:2},[a]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:i},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:s,marginInlineStart:i,transition:`margin ${y}`}},[`&:hover ${a}-handler-wrap, &-focused ${a}-handler-wrap`]:{width:t.handleWidth,opacity:1},[`&:not(${a}-affix-wrapper-without-controls):hover ${a}-suffix`]:{marginInlineEnd:t.calc(t.handleWidth).add(s).equal()}}),[`${a}-underlined`]:{borderRadius:0}}},Bi=ts("InputNumber",t=>{const a=as(t,ns(t));return[$i(a),Ai(a),rs(a)]},Ti,{unitless:{handleOpacity:!0}});var Fi=function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)a.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]]);return r};const Er=n.forwardRef((t,a)=>{const{getPrefixCls:r,direction:s}=n.useContext(on),i=n.useRef(null);n.useImperativeHandle(a,()=>i.current);const{className:o,rootClassName:l,size:u,disabled:p,prefixCls:f,addonBefore:d,addonAfter:j,prefix:y,suffix:O,bordered:M,readOnly:b,status:w,controls:h,variant:S}=t,C=Fi(t,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),I=r("input-number",f),$=cn(I),[A,E,P]=Bi(I,$),{compactSize:V,compactItemClassnames:v}=un(I,s);let k=n.createElement(yi,{className:`${I}-handler-up-inner`}),F=n.createElement(Kn,{className:`${I}-handler-down-inner`});const Y=typeof h=="boolean"?h:void 0;typeof h=="object"&&(k=typeof h.upIcon>"u"?k:n.createElement("span",{className:`${I}-handler-up-inner`},h.upIcon),F=typeof h.downIcon>"u"?F:n.createElement("span",{className:`${I}-handler-down-inner`},h.downIcon));const{hasFeedback:T,status:B,isFormItemInput:z,feedbackIcon:K}=n.useContext(dn),G=pn(B,w),ee=mn(R=>{var H;return(H=u??V)!==null&&H!==void 0?H:R}),Q=n.useContext(fn),J=p??Q,[x,N]=hn("inputNumber",S,M),m=T&&n.createElement(n.Fragment,null,K),c=Je({[`${I}-lg`]:ee==="large",[`${I}-sm`]:ee==="small",[`${I}-rtl`]:s==="rtl",[`${I}-in-form-item`]:z},E),g=`${I}-group`,D=n.createElement(Ei,Object.assign({ref:i,disabled:J,className:Je(P,$,o,l,v),upHandler:k,downHandler:F,prefixCls:I,readOnly:b,controls:Y,prefix:y,suffix:m||O,addonBefore:d&&n.createElement(wa,{form:!0,space:!0},d),addonAfter:j&&n.createElement(wa,{form:!0,space:!0},j),classNames:{input:c,variant:Je({[`${I}-${x}`]:N},ja(I,G,T)),affixWrapper:Je({[`${I}-affix-wrapper-sm`]:ee==="small",[`${I}-affix-wrapper-lg`]:ee==="large",[`${I}-affix-wrapper-rtl`]:s==="rtl",[`${I}-affix-wrapper-without-controls`]:h===!1||J},E),wrapper:Je({[`${g}-rtl`]:s==="rtl"},E),groupWrapper:Je({[`${I}-group-wrapper-sm`]:ee==="small",[`${I}-group-wrapper-lg`]:ee==="large",[`${I}-group-wrapper-rtl`]:s==="rtl",[`${I}-group-wrapper-${x}`]:N},ja(`${I}-group-wrapper`,G,T),E)}},C));return A(D)}),Tr=Er,Vi=t=>n.createElement(hs,{theme:{components:{InputNumber:{handleVisible:!0}}}},n.createElement(Er,Object.assign({},t)));Tr._InternalPanelDoNotUseOrYouWillBeFired=Vi;var _i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},qi=function(a,r){return n.createElement(qt,qe({},a,{ref:r,icon:_i}))},$r=n.forwardRef(qi),Hi={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"},zi=function(a,r){return n.createElement(qt,qe({},a,{ref:r,icon:Hi}))},Yi=n.forwardRef(zi);function Li(t,a,r){return r!==void 0?r:a==="year"&&t.lang.yearPlaceholder?t.lang.yearPlaceholder:a==="quarter"&&t.lang.quarterPlaceholder?t.lang.quarterPlaceholder:a==="month"&&t.lang.monthPlaceholder?t.lang.monthPlaceholder:a==="week"&&t.lang.weekPlaceholder?t.lang.weekPlaceholder:a==="time"&&t.timePickerLocale.placeholder?t.timePickerLocale.placeholder:t.lang.placeholder}function Ui(t,a,r){return r!==void 0?r:a==="year"&&t.lang.yearPlaceholder?t.lang.rangeYearPlaceholder:a==="quarter"&&t.lang.quarterPlaceholder?t.lang.rangeQuarterPlaceholder:a==="month"&&t.lang.monthPlaceholder?t.lang.rangeMonthPlaceholder:a==="week"&&t.lang.weekPlaceholder?t.lang.rangeWeekPlaceholder:a==="time"&&t.timePickerLocale.placeholder?t.timePickerLocale.rangePlaceholder:t.lang.rangePlaceholder}function Ar(t,a){const{allowClear:r=!0}=t,{clearIcon:s,removeIcon:i}=ps(Object.assign(Object.assign({},t),{prefixCls:a,componentName:"DatePicker"}));return[n.useMemo(()=>r===!1?!1:Object.assign({clearIcon:s},r===!0?{}:r),[r,s]),i]}const[Gi,Wi]=["week","WeekPicker"],[Ki,Qi]=["month","MonthPicker"],[Xi,Ji]=["year","YearPicker"],[Zi,el]=["quarter","QuarterPicker"],[an,$n]=["time","TimePicker"],tl=t=>n.createElement(Oe,Object.assign({size:"small",type:"primary"},t));function Br(t){return n.useMemo(()=>Object.assign({button:tl},t),[t])}function Fr(t,...a){const r=t||{};return a.reduce((s,i)=>(Object.keys(i||{}).forEach(o=>{const l=r[o],u=i[o];if(l&&typeof l=="object")if(u&&typeof u=="object")s[o]=Fr(l,s[o],u);else{const{_default:p}=l;s[o]=s[o]||{},s[o][p]=Je(s[o][p],u)}else s[o]=Je(s[o],u)}),s),{})}function al(t,...a){return n.useMemo(()=>Fr.apply(void 0,[t].concat(a)),[a])}function nl(...t){return n.useMemo(()=>t.reduce((a,r={})=>(Object.keys(r).forEach(s=>{a[s]=Object.assign(Object.assign({},a[s]),r[s])}),a),{}),[t])}function nn(t,a){const r=Object.assign({},t);return Object.keys(a).forEach(s=>{if(s!=="_default"){const i=a[s],o=r[s]||{};r[s]=i?nn(o,i):o}}),r}function rl(t,a,r){const s=al.apply(void 0,[r].concat(Vt(t))),i=nl.apply(void 0,Vt(a));return n.useMemo(()=>[nn(s,r),nn(i,r)],[s,i])}const Vr=(t,a,r,s,i)=>{const{classNames:o,styles:l}=xs(t),[u,p]=rl([o,a],[l,r],{popup:{_default:"root"}});return n.useMemo(()=>{var f,d;const j=Object.assign(Object.assign({},u),{popup:Object.assign(Object.assign({},u.popup),{root:Je((f=u.popup)===null||f===void 0?void 0:f.root,s)})}),y=Object.assign(Object.assign({},p),{popup:Object.assign(Object.assign({},p.popup),{root:Object.assign(Object.assign({},(d=p.popup)===null||d===void 0?void 0:d.root),i)})});return[j,y]},[u,p,s,i])};var sl=function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)a.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]]);return r};const il=t=>n.forwardRef((r,s)=>{var i;const{prefixCls:o,getPopupContainer:l,components:u,className:p,style:f,placement:d,size:j,disabled:y,bordered:O=!0,placeholder:M,popupStyle:b,popupClassName:w,dropdownClassName:h,status:S,rootClassName:C,variant:I,picker:$,styles:A,classNames:E}=r,P=sl(r,["prefixCls","getPopupContainer","components","className","style","placement","size","disabled","bordered","placeholder","popupStyle","popupClassName","dropdownClassName","status","rootClassName","variant","picker","styles","classNames"]),V=$===an?"timePicker":"datePicker",v=n.useRef(null),{getPrefixCls:k,direction:F,getPopupContainer:Y,rangePicker:T}=n.useContext(on),B=k("picker",o),{compactSize:z,compactItemClassnames:K}=un(B,F),G=k(),[ee,Q]=hn("rangePicker",I,O),J=cn(B),[x,N,m]=cr(B,J),[c,g]=Vr(V,E,A,w||h,b),[D]=Ar(r,B),R=Br(u),H=mn(Ae=>{var Re;return(Re=j??z)!==null&&Re!==void 0?Re:Ae}),_=n.useContext(fn),Z=y??_,Me=n.useContext(dn),{hasFeedback:je,status:Fe,feedbackIcon:Ye}=Me,ve=n.createElement(n.Fragment,null,$===an?n.createElement($r,null):n.createElement(ur,null),je&&Ye);n.useImperativeHandle(s,()=>v.current);const[Ee]=Qn("Calendar",Xn),Ne=Object.assign(Object.assign({},Ee),r.locale),[Ke]=Jn("DatePicker",(i=g.popup.root)===null||i===void 0?void 0:i.zIndex);return x(n.createElement(wa,{space:!0},n.createElement(di,Object.assign({separator:n.createElement("span",{"aria-label":"to",className:`${B}-separator`},n.createElement(Yi,null)),disabled:Z,ref:v,placement:d,placeholder:Ui(Ne,$,M),suffixIcon:ve,prevIcon:n.createElement("span",{className:`${B}-prev-icon`}),nextIcon:n.createElement("span",{className:`${B}-next-icon`}),superPrevIcon:n.createElement("span",{className:`${B}-super-prev-icon`}),superNextIcon:n.createElement("span",{className:`${B}-super-next-icon`}),transitionName:`${G}-slide-up`,picker:$},P,{className:Je({[`${B}-${H}`]:H,[`${B}-${ee}`]:Q},ja(B,pn(Fe,S),je),N,K,p,T==null?void 0:T.className,m,J,C,c.root),style:Object.assign(Object.assign(Object.assign({},T==null?void 0:T.style),f),g.root),locale:Ne.lang,prefixCls:B,getPopupContainer:l||Y,generateConfig:t,components:R,direction:F,classNames:{popup:Je(N,m,J,C,c.popup.root)},styles:{popup:Object.assign(Object.assign({},g.popup.root),{zIndex:Ke})},allowClear:D}))))});var ll=function(t,a){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)a.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]]);return r};const ol=t=>{const a=(p,f)=>{const d=f===$n?"timePicker":"datePicker";return n.forwardRef((y,O)=>{var M;const{prefixCls:b,getPopupContainer:w,components:h,style:S,className:C,rootClassName:I,size:$,bordered:A,placement:E,placeholder:P,popupStyle:V,popupClassName:v,dropdownClassName:k,disabled:F,status:Y,variant:T,onCalendarChange:B,styles:z,classNames:K}=y,G=ll(y,["prefixCls","getPopupContainer","components","style","className","rootClassName","size","bordered","placement","placeholder","popupStyle","popupClassName","dropdownClassName","disabled","status","variant","onCalendarChange","styles","classNames"]),{getPrefixCls:ee,direction:Q,getPopupContainer:J,[d]:x}=n.useContext(on),N=ee("picker",b),{compactSize:m,compactItemClassnames:c}=un(N,Q),g=n.useRef(null),[D,R]=hn("datePicker",T,A),H=cn(N),[_,Z,Me]=cr(N,H);n.useImperativeHandle(O,()=>g.current);const je={showToday:!0},Fe=p||y.picker,Ye=ee(),{onSelect:ve,multiple:Ee}=G,Ne=ve&&p==="time"&&!Ee,Ke=(He,ke,et)=>{B==null||B(He,ke,et),Ne&&ve(He)},[Ae,Re]=Vr(d,K,z,v||k,V),[Le,Qe]=Ar(y,N),We=Br(h),q=mn(He=>{var ke;return(ke=$??m)!==null&&ke!==void 0?ke:He}),W=n.useContext(fn),ce=F??W,ie=n.useContext(dn),{hasFeedback:oe,status:ne,feedbackIcon:ue}=ie,X=n.createElement(n.Fragment,null,Fe==="time"?n.createElement($r,null):n.createElement(ur,null),oe&&ue),[Ie]=Qn("DatePicker",Xn),be=Object.assign(Object.assign({},Ie),y.locale),[Ue]=Jn("DatePicker",(M=Re.popup.root)===null||M===void 0?void 0:M.zIndex);return _(n.createElement(wa,{space:!0},n.createElement(vi,Object.assign({ref:g,placeholder:Li(be,Fe,P),suffixIcon:X,placement:E,prevIcon:n.createElement("span",{className:`${N}-prev-icon`}),nextIcon:n.createElement("span",{className:`${N}-next-icon`}),superPrevIcon:n.createElement("span",{className:`${N}-super-prev-icon`}),superNextIcon:n.createElement("span",{className:`${N}-super-next-icon`}),transitionName:`${Ye}-slide-up`,picker:p,onCalendarChange:Ke},je,G,{locale:be.lang,className:Je({[`${N}-${q}`]:q,[`${N}-${D}`]:R},ja(N,pn(ne,Y),oe),Z,c,x==null?void 0:x.className,C,Me,H,I,Ae.root),style:Object.assign(Object.assign(Object.assign({},x==null?void 0:x.style),S),Re.root),prefixCls:N,getPopupContainer:w||J,generateConfig:t,components:We,direction:Q,disabled:ce,classNames:{popup:Je(Z,Me,H,I,Ae.popup.root)},styles:{popup:Object.assign(Object.assign({},Re.popup.root),{zIndex:Ue})},allowClear:Le,removeIcon:Qe}))))})},r=a(),s=a(Gi,Wi),i=a(Ki,Qi),o=a(Xi,Ji),l=a(Zi,el),u=a(an,$n);return{DatePicker:r,WeekPicker:s,MonthPicker:i,YearPicker:o,TimePicker:u,QuarterPicker:l}},_r=t=>{const{DatePicker:a,WeekPicker:r,MonthPicker:s,YearPicker:i,TimePicker:o,QuarterPicker:l}=ol(t),u=il(t),p=a;return p.WeekPicker=r,p.MonthPicker=s,p.YearPicker=i,p.RangePicker=u,p.TimePicker=o,p.QuarterPicker=l,p},at=_r(Ms),cl=Zn(at,"popupAlign",void 0,"picker");at._InternalPanelDoNotUseOrYouWillBeFired=cl;const ul=Zn(at.RangePicker,"popupAlign",void 0,"picker");at._InternalRangePanelDoNotUseOrYouWillBeFired=ul;at.generatePicker=_r;var dl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM340 683v77c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-77c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198V264c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v221c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5.3-.5.7-.9 1-1.4.1-.1.2-.3.3-.4.5-.6.9-1.1 1.4-1.6l.3-.3 1.2-1.2.4-.4c.5-.5 1-.9 1.6-1.4.6-.5 1.1-.9 1.7-1.3.2-.1.3-.2.5-.3.5-.3.9-.7 1.4-1 .1-.1.3-.2.4-.3.6-.4 1.2-.7 1.9-1.1.1-.1.3-.1.4-.2.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8.7-.3 1.4-.5 2.1-.7.2-.1.4-.1.6-.2.6-.2 1.1-.3 1.7-.4.2 0 .3-.1.5-.1.7-.2 1.5-.3 2.2-.4.2 0 .3 0 .5-.1.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2.2 0 .3 0 .5.1.7.1 1.5.2 2.2.4.2 0 .3.1.5.1.6.1 1.2.3 1.7.4.2.1.4.1.6.2.7.2 1.4.4 2.1.7.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8.1.1.3.1.4.2.6.3 1.3.7 1.9 1.1.1.1.3.2.4.3.5.3 1 .6 1.4 1 .2.1.3.2.5.3.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4 1.2 1.2.3.3c.5.5 1 1.1 1.4 1.6.1.1.2.3.3.4.4.4.7.9 1 1.4.1.2.2.3.3.5l1.2 1.8s0 .1.1.1a36.18 36.18 0 015.1 18.5c0 6-1.5 11.7-4.1 16.7-.3.6-.7 1.2-1 1.8 0 0 0 .1-.1.1l-1.2 1.8c-.1.2-.2.3-.3.5-.3.5-.7.9-1 1.4-.1.1-.2.3-.3.4-.5.6-.9 1.1-1.4 1.6l-.3.3-1.2 1.2-.4.4c-.5.5-1 .9-1.6 1.4-.6.5-1.1.9-1.7 1.3-.2.1-.3.2-.5.3-.5.3-.9.7-1.4 1-.1.1-.3.2-.4.3-.6.4-1.2.7-1.9 1.1-.1.1-.3.1-.4.2-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8-.7.3-1.4.5-2.1.7-.2.1-.4.1-.6.2-.6.2-1.1.3-1.7.4-.2 0-.3.1-.5.1-.7.2-1.5.3-2.2.4-.2 0-.3 0-.5.1-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2-.2 0-.3 0-.5-.1-.7-.1-1.5-.2-2.2-.4-.2 0-.3-.1-.5-.1-.6-.1-1.2-.3-1.7-.4-.2-.1-.4-.1-.6-.2-.7-.2-1.4-.4-2.1-.7-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8-.1-.1-.3-.1-.4-.2-.6-.3-1.3-.7-1.9-1.1-.1-.1-.3-.2-.4-.3-.5-.3-1-.6-1.4-1-.2-.1-.3-.2-.5-.3-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4-1.2-1.2-.3-.3c-.5-.5-1-1.1-1.4-1.6-.1-.1-.2-.3-.3-.4-.4-.4-.7-.9-1-1.4-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7zM620 539v221c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V539c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198v-77c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v77c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5.3-.5.7-.9 1-1.4.1-.1.2-.3.3-.4.5-.6.9-1.1 1.4-1.6l.3-.3 1.2-1.2.4-.4c.5-.5 1-.9 1.6-1.4.6-.5 1.1-.9 1.7-1.3.2-.1.3-.2.5-.3.5-.3.9-.7 1.4-1 .1-.1.3-.2.4-.3.6-.4 1.2-.7 1.9-1.1.1-.1.3-.1.4-.2.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8.7-.3 1.4-.5 2.1-.7.2-.1.4-.1.6-.2.6-.2 1.1-.3 1.7-.4.2 0 .3-.1.5-.1.7-.2 1.5-.3 2.2-.4.2 0 .3 0 .5-.1.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2.2 0 .3 0 .5.1.7.1 1.5.2 2.2.4.2 0 .3.1.5.1.6.1 1.2.3 1.7.4.2.1.4.1.6.2.7.2 1.4.4 2.1.7.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8.1.1.3.1.4.2.6.3 1.3.7 1.9 1.1.1.1.3.2.4.3.5.3 1 .6 1.4 1 .2.1.3.2.5.3.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4 1.2 1.2.3.3c.5.5 1 1.1 1.4 1.6.1.1.2.3.3.4.4.4.7.9 1 1.4.1.2.2.3.3.5l1.2 1.8v.1a36.18 36.18 0 015.1 18.5c0 6-1.5 11.7-4.1 16.7-.3.6-.7 1.2-1 1.8v.1l-1.2 1.8c-.1.2-.2.3-.3.5-.3.5-.7.9-1 1.4-.1.1-.2.3-.3.4-.5.6-.9 1.1-1.4 1.6l-.3.3-1.2 1.2-.4.4c-.5.5-1 .9-1.6 1.4-.6.5-1.1.9-1.7 1.3-.2.1-.3.2-.5.3-.5.3-.9.7-1.4 1-.1.1-.3.2-.4.3-.6.4-1.2.7-1.9 1.1-.1.1-.3.1-.4.2-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8-.7.3-1.4.5-2.1.7-.2.1-.4.1-.6.2-.6.2-1.1.3-1.7.4-.2 0-.3.1-.5.1-.7.2-1.5.3-2.2.4-.2 0-.3 0-.5.1-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2-.2 0-.3 0-.5-.1-.7-.1-1.5-.2-2.2-.4-.2 0-.3-.1-.5-.1-.6-.1-1.2-.3-1.7-.4-.2-.1-.4-.1-.6-.2-.7-.2-1.4-.4-2.1-.7-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8-.1-.1-.3-.1-.4-.2-.6-.3-1.3-.7-1.9-1.1-.1-.1-.3-.2-.4-.3-.5-.3-1-.6-1.4-1-.2-.1-.3-.2-.5-.3-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4-1.2-1.2-.3-.3c-.5-.5-1-1.1-1.4-1.6-.1-.1-.2-.3-.3-.4-.4-.4-.7-.9-1-1.4-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7z"}}]},name:"control",theme:"outlined"},ml=function(a,r){return n.createElement(qt,qe({},a,{ref:r,icon:dl}))},fl=n.forwardRef(ml),hl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM382 896h-.2L232 746.2v-.2h150v150z"}}]},name:"copy",theme:"filled"},pl=function(a,r){return n.createElement(qt,qe({},a,{ref:r,icon:hl}))},Ra=n.forwardRef(pl),xl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"},vl=function(a,r){return n.createElement(qt,qe({},a,{ref:r,icon:xl}))},qr=n.forwardRef(vl),gl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},bl=function(a,r){return n.createElement(qt,qe({},a,{ref:r,icon:gl}))},Hr=n.forwardRef(bl),yl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},Sl=function(a,r){return n.createElement(qt,qe({},a,{ref:r,icon:yl}))},Cl=n.forwardRef(Sl),jl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M723 620.5C666.8 571.6 593.4 542 513 542s-153.8 29.6-210.1 78.6a8.1 8.1 0 00-.8 11.2l36 42.9c2.9 3.4 8 3.8 11.4.9C393.1 637.2 450.3 614 513 614s119.9 23.2 163.5 61.5c3.4 2.9 8.5 2.5 11.4-.9l36-42.9c2.8-3.3 2.4-8.3-.9-11.2zm117.4-140.1C751.7 406.5 637.6 362 513 362s-238.7 44.5-327.5 118.4a8.05 8.05 0 00-1 11.3l36 42.9c2.8 3.4 7.9 3.8 11.2 1C308 472.2 406.1 434 513 434s205 38.2 281.2 101.6c3.4 2.8 8.4 2.4 11.2-1l36-42.9c2.8-3.4 2.4-8.5-1-11.3zm116.7-139C835.7 241.8 680.3 182 511 182c-168.2 0-322.6 59-443.7 157.4a8 8 0 00-1.1 11.4l36 42.9c2.8 3.3 7.8 3.8 11.1 1.1C222 306.7 360.3 254 511 254c151.8 0 291 53.5 400 142.7 3.4 2.8 8.4 2.3 11.2-1.1l36-42.9c2.9-3.4 2.4-8.5-1.1-11.3zM448 778a64 64 0 10128 0 64 64 0 10-128 0z"}}]},name:"wifi",theme:"outlined"},wl=function(a,r){return n.createElement(qt,qe({},a,{ref:r,icon:jl}))},Nl=n.forwardRef(wl);const ze={data:null,lastUpdated:null,version:0,isStale:!1},An=5*60*1e3,Dl=(t,a,r="all")=>{if(!a||a.trim()==="")return t;const i=a.toLowerCase().trim().split(/\s+/).filter(o=>o.length>0);return t.filter(o=>{if(!o)return!1;if(r==="all"){const l=Object.values(o).filter(u=>u!=null&&u!==void 0).map(u=>String(u).toLowerCase()).join(" ");return i.every(u=>l.includes(u))}else{const l=o[r];if(!l)return!1;const u=String(l).toLowerCase();return i.every(p=>u.includes(p))}})},xt=typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"&&window.location.hostname!==""&&!window.location.hostname.startsWith("192.168.")&&!0,Il=(t=[],a=!1,r,s)=>{const{message:i}=Xt.useApp(),[o,l]=n.useState(""),[u,p]=n.useState("Newest"),[f,d]=n.useState({field:"id",order:"descend"}),[j,y]=n.useState(1),[O,M]=n.useState(10),[b,w]=n.useState([]),[h,S]=n.useState(!1),[C,I]=n.useState(!1),[$,A]=n.useState(!1),[E,P]=n.useState(null),[V,v]=n.useState(null),[k,F]=n.useState("default"),[Y,T]=n.useState(!1),[B,z]=n.useState(()=>Array.isArray(t)&&t.length>0?Date.now():null),{logUserActivity:K}=ft(),{logUserNotification:G}=ht(),{userData:ee}=Jt(),{userData:Q}=Zt(),J=n.useRef(null),x=(ee==null?void 0:ee.username)||(Q==null?void 0:Q.username)||"Unknown User",N=!!ee,c=N?"admin":!!Q?"user":"guest",g=n.useMemo(()=>t||[],[t]),{totalEntries:D,paginatedData:R}=n.useMemo(()=>{const q=Dl(g,o),W=[...q].sort((oe,ne)=>{if(f.field&&f.order){const{field:ue,order:X}=f;if(X==="ascend")return oe[ue]>ne[ue]?1:-1;if(X==="descend")return oe[ue]<ne[ue]?1:-1}return 0}),ce=W.length,ie=W.slice((j-1)*O,j*O);return{filteredData:q,sortedData:W,totalEntries:ce,paginatedData:ie}},[g,o,f,j,O]),H=n.useCallback(async(q=!1)=>{var W;try{if(xt&&await Nt()){i.warning("Cannot refresh data while offline");return}T(!0);const ce=Date.now(),ie=ce-(ze.lastUpdated||0);if(!q&&ze.data&&ie<An&&!ze.isStale){const X=r||s;typeof X=="function"&&X(ze.data),z(ze.lastUpdated);return}const ne=await Pt();ze.data=ne,ze.lastUpdated=ce,ze.version++,ze.isStale=!1;const ue=r||s;typeof ue=="function"&&ue(ne),z(ce)}catch(ce){xt&&(ce.isOffline||(W=ce.message)!=null&&W.includes("Offline"))?i.warning("Cannot refresh data while offline"):i.error("Failed to load inventory data.")}finally{T(!1)}},[i,r,s]),_=n.useCallback(()=>{J.current&&clearInterval(J.current),J.current=setInterval(async()=>{try{if(xt&&await Nt())return;const q=await Pt();ze.data=q,ze.lastUpdated=Date.now(),ze.version++;const W=r||s;typeof W=="function"&&W(q),z(Date.now())}catch(q){console.warn("Background sync failed:",q),ze.isStale=!0}},An)},[r,s]),Z=n.useCallback(()=>{J.current&&(clearInterval(J.current),J.current=null)},[]);n.useEffect(()=>(_(),()=>Z()),[_,Z]);const Me=n.useCallback(()=>{ze.isStale=!0},[]),je=n.useCallback((q,W)=>{y(q),M(W)},[]),Fe=n.useCallback(q=>{const W=q==="Oldest"?"Oldest":"Newest";p(W),d({field:"id",order:W==="Newest"?"descend":"ascend"}),y(1)},[]),Ye=n.useCallback(q=>{q.field&&d({field:q.field,order:q.order})},[]),ve=n.useCallback(async q=>{var W;try{if(xt&&await Nt()){i.warning("Cannot add item while offline");return}const ce=await Ss(q);if(ce&&ce.id){const ie=r||s;if(typeof ie=="function"){const oe={...q,id:ce.id,issuedDate:q.issuedDate||null,purchaseDate:q.purchaseDate||null};ie(ne=>[...ne,oe]),ze.data&&(ze.data=[...ze.data,oe],ze.lastUpdated=Date.now(),ze.version++)}i.success(`Item added successfully! ID: ${ce.id}`),await K(x,"Inventory",`Added item with ID: ${ce.id}`),await G("Inventory Update",`You added an item with ID: ${ce.id}`),typeof ie!="function"&&H()}else i.error("Failed to retrieve item ID.")}catch(ce){xt&&(ce.isOffline||(W=ce.message)!=null&&W.includes("Offline"))?i.warning("Cannot add item while offline"):(console.error("Error adding item:",ce),i.error("Failed to add item."))}},[i,K,G,x,H,r,s]),Ee=n.useCallback(q=>{v(q),I(!0)},[]),Ne=n.useCallback(q=>{P(q),A(!0)},[]),Ke=n.useCallback(async q=>{var W,ce,ie;try{if(xt&&await Nt()){i.warning("Cannot redistribute item while offline");return}const oe=await Cs(q),ne=r||s;if(typeof ne=="function"&&(ne(ue=>ue.map(X=>X.id===q.id?{...X,quantity:X.quantity-q.newQuantity}:X)),oe.new_item_id)){const ue=g.find(X=>X.id===q.id);if(ue){const X={id:oe.new_item_id,type:ue.type,brand:ue.brand,quantity:q.newQuantity,serialNumber:ue.serialNumber,issuedDate:q.issuedDate,purchaseDate:ue.purchaseDate,condition:q.condition,location:q.newLocation,status:q.status,remarks:q.remarks};ne(Ie=>[...Ie,X])}}i.success(`Item redistributed successfully! New Item ID: ${oe.new_item_id}`),A(!1),P(null),await K(x,"Inventory",`Redistributed item with ID: ${q.id} to new item ID: ${oe.new_item_id}`),await G("Inventory Update",`You redistributed an item with ID: ${q.id} to new item ID: ${oe.new_item_id}`),typeof ne!="function"&&H()}catch(oe){if(xt&&(oe.isOffline||(W=oe.message)!=null&&W.includes("Offline")))i.warning("Cannot redistribute item while offline");else{const ne=((ie=(ce=oe==null?void 0:oe.response)==null?void 0:ce.data)==null?void 0:ie.message)||oe.message||"";ne.toLowerCase().includes("quantity")&&ne.includes("1")?i.error("You can't redistribute an item with quantity of 1."):i.error("Failed to redistribute item."),console.error(oe)}}},[i,K,G,x,H,r,s,g]),Ae=n.useCallback(async(q,W=null)=>{var oe;const ce=W||V;if(!Object.keys(q).some(ne=>{const ue=q[ne],X=ce[ne];if(ne==="issuedDate"||ne==="purchaseDate"){const Ie=X?Be(X).format("YYYY-MM-DD"):null;return ue!==Ie}if(ne==="quantity"){const Ie=Number(ue),be=Number(X);return Ie!==be}return typeof ue=="string"?ue.trim()!==(X||"").trim():ue!==X})){i.error("No changes detected.");return}try{if(xt&&await Nt()){i.warning("Cannot edit item while offline");return}const ne=await js({...q,id:(q==null?void 0:q.id)||(V==null?void 0:V.id)});if(ne.message==="Item updated successfully"){const ue=r||s;typeof ue=="function"&&(ue(X=>X.map(Ie=>Ie.id===q.id?{...Ie,...q}:Ie)),ze.data&&(ze.data=ze.data.map(X=>X.id===q.id?{...X,...q}:X),ze.lastUpdated=Date.now(),ze.version++)),i.success(`Item with ID ${q.id} updated successfully!`),await K(x,"Inventory",`Updated item with ID: ${q.id}`),await G("Inventory Update",`You edited an item with ID: ${q.id}`),I(!1),typeof ue!="function"&&H()}else i.error(ne.message||"Failed to update item.")}catch(ne){xt&&(ne.isOffline||(oe=ne.message)!=null&&oe.includes("Offline"))?i.warning("Cannot edit item while offline"):(console.error("Error updating item:",ne),ne.response&&ne.response.data&&ne.response.data.message?i.error(`Failed to update item: ${ne.response.data.message}`):i.error("Failed to update item. Please try again."))}},[V,i,K,G,x,H,r,s]),Re=n.useCallback(async()=>{var q;if(!N){i.error("You do not have permission to delete items.");return}if(b.length===0){i.warning("Please select items to delete.");return}try{if(xt&&await Nt()){i.warning("Cannot delete items while offline");return}(await wn(b)).message==="Items deleted successfully"?(await Pt(),H(),w([]),i.success("Items deleted successfully!"),await K(x,"Inventory",`Deleted item(s) with ID(s): ${b.join(", ")}`),await G("Inventory Update",`You deleted item(s) with ID(s): ${b.join(", ")}`)):i.error("Error deleting items.")}catch(W){xt&&(W.isOffline||(q=W.message)!=null&&q.includes("Offline"))?i.warning("Cannot delete items while offline"):(console.error("Error deleting items:",W),i.error("Failed to delete items. Please try again."))}},[N,b,i,H,K,G,x]),Le=n.useCallback(q=>{F(q)},[]),Qe=n.useMemo(()=>({selectedRowKeys:b,onChange:q=>w(q),preserveSelectedRowKeys:!0}),[b]),We=n.useCallback(async()=>{var q,W,ce;if(!N){i.error("You do not have permission to delete items.");return}if(b.length===0){i.warning("Please select items to delete.");return}try{if(xt&&await Nt()){i.warning("Cannot delete items while offline");return}console.log("Deleting IDs:",b);const ie=await wn(b);if(console.log("Delete response:",ie),ie.message==="Items deleted successfully"){const oe=r||s;typeof oe=="function"&&(oe(ne=>ne.filter(ue=>!b.includes(ue.id))),ze.data&&(ze.data=ze.data.filter(ne=>!b.includes(ne.id)),ze.lastUpdated=Date.now(),ze.version++)),w([]),i.success("Items deleted successfully!"),await K(x,"Inventory",`Deleted item(s) with ID(s): ${b.join(", ")}`),await G("Inventory Update",`You deleted item(s) with ID(s): ${b.join(", ")}`)}else i.error(ie.message||"Error deleting items.")}catch(ie){xt&&(ie.isOffline||(q=ie.message)!=null&&q.includes("Offline"))?i.warning("Cannot delete items while offline"):((ce=(W=ie==null?void 0:ie.response)==null?void 0:W.data)!=null&&ce.message?i.error(`Failed to delete items: ${ie.response.data.message}`):ie!=null&&ie.message?i.error(`Failed to delete items: ${ie.message}`):i.error("Failed to delete items. Please try again."),console.error("Error deleting items:",ie))}},[N,b,i,K,G,x,r,s]);return{searchText:o,setSearchText:l,sortOrder:u,currentPage:j,pageSize:O,isModalVisible:h,setIsModalVisible:S,isEditModalVisible:C,setIsEditModalVisible:I,redistributeItemData:E,setRedistributeItemData:P,isRedistributeModalVisible:$,setIsRedistributeModalVisible:A,editingItem:V,isLoading:a,isRefreshing:Y,lastSyncTime:B,activeTab:k,isAdmin:N,userRole:c,paginatedData:R,totalEntries:D,handleRedistribute:Ne,handleRedistributeItem:Ke,handlePageChange:je,handleSortOrderChange:Fe,handleTableChange:Ye,handleAddItem:ve,handleEdit:Ee,handleEditItem:Ae,handleBatchDelete:Re,handleDeleteItems:We,handleTabChange:Le,rowSelection:Qe,dataSource:g,selectedRowKeys:b,setSelectedRowKeys:w,handleRefresh:H,markCacheStale:Me}},Pa=()=>{const t=Jt.getState(),a=Zt.getState();if(t.token&&t.userData)return Cn("data",jn.admin);if(a.token&&a.userData)return Cn("data",jn.user);throw new Error("No valid authentication found")},kl=async t=>{try{return(await Pa().post("/save_template.php",t)).data}catch(a){throw a}},Ol=async()=>{try{return(await Pa().get("/get_templates.php")).data}catch(t){throw t}},Rl=async(t,a)=>{try{return(await Pa().put(`/update_template.php?id=${t}`,a)).data}catch(r){throw r}},Pl=async t=>{try{return(await Pa().delete(`/delete_template.php?id=${t}`)).data}catch(a){throw a}},Ml=t=>{const[a,r]=n.useState(null),[s,i]=n.useState(null),[o,l]=n.useState([]),[u,p]=n.useState(!1),[f,d]=n.useState(null),[j]=L.useForm(),{message:y}=Xt.useApp(),[O,M]=n.useState(0),{logUserActivity:b}=ft(),{logUserNotification:w}=ht(),h=Jt(),S=Zt();n.useEffect(()=>{C()},[O]);const C=async()=>{try{const v=await Ol();v.success&&(l(v.templates),a==="User Templates"&&(r(null),i(null),t(null)))}catch(v){console.error("Error loading templates:",v),y.error("Error loading templates")}};return{selectedCategory:a,selectedType:s,userTemplates:o,isEditModalVisible:u,editingTemplate:f,form:j,refreshTrigger:O,setRefreshTrigger:M,handleCategoryChange:v=>{if(v==="No Template"||!v){r(null),i(null),t(null);return}r(v),i(null)},handleTypeChange:v=>{if(!v||v==="No Template")return r(null),i(null),t(null),{isUserTemplate:!1};if(i(v),a==="User Templates"){const k=o.find(F=>F.template_name===v);if(k){const F={...k,locationType:k.location.includes("Head Office")?"Head Office":"Other",department:k.location.includes("Head Office")?k.location.split(" - ")[1]:null,location:(k.location.includes("Head Office"),k.location)};return t(F),{isUserTemplate:!0}}}else if(a&&Da[a][v])return t(Da[a][v]),{isUserTemplate:!1}},handleEdit:v=>{d(v),j.setFieldsValue({...v,locationType:v.location.includes("Head Office")?"Head Office":"Other",department:v.location.includes("Head Office")?v.location.split(" - ")[1]:null,location:v.location.includes("Head Office")?null:v.location,purchaseDate:v.purchaseDate?Be(v.purchaseDate):void 0,issuedDate:v.issuedDate?Be(v.issuedDate):void 0}),p(!0)},handleDelete:async v=>{try{const k=await Pl(v.id);k.success?(y.success("Template deleted successfully"),l(F=>F.filter(Y=>Y.id!==v.id)),s===v.template_name&&(r(null),i(null),t(null)),M(F=>F+1),await b(h.userData.username,"Template Deleted",`Template "${v.template_name}" has been deleted.`),await w("Template Deleted",`Template "${v.template_name}" has been deleted.`)):y.error(k.message||"Failed to delete template")}catch(k){console.error("Error deleting template:",k),y.error("Error deleting template")}},handleEditSubmit:async v=>{try{const k={...v,location:v.locationType==="Head Office"?`Head Office - ${v.department}`:v.location,purchaseDate:v.purchaseDate?v.purchaseDate.format("YYYY-MM-DD"):null,issuedDate:v.issuedDate?v.issuedDate.format("YYYY-MM-DD"):null};delete k.locationType,delete k.department;const F=await Rl(f.id,k);if(F.success){if(y.success("Template updated successfully"),p(!1),l(Y=>Y.map(T=>T.id===f.id?{...T,...k}:T)),s===f.template_name){const Y={...f,...k,locationType:k.location.includes("Head Office")?"Head Office":"Other",department:k.location.includes("Head Office")?k.location.split(" - ")[1]:null};t(Y)}M(Y=>Y+1),await b(h.userData.username,"Template Updated",`Template "${v.template_name}" has been updated.`),await w("Template Updated",`Template "${v.template_name}" has been updated.`)}else y.error(F.message||"Failed to update template")}catch(k){console.error("Error updating template:",k),y.error("Error updating template")}},setIsEditModalVisible:p,getCurrentUser:()=>h.token&&h.userData?h.userData:S.token&&S.userData?S.userData:null}},{Option:pe}=re,El={SOD:"SOD",CID:"CID",GAD:"GAD",HRD:"HRD",AFD:"AFD",EOD:"EOD",BDO:"BDO"},Da={"IT Equipment":{"System Unit":{type:"System Unit",brand:"Dell",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Standard office computer",serialNumber:"",purchaseDate:"",issuedDate:""},Laptop:{type:"Laptop",brand:"Lenovo",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Business laptop",serialNumber:"",purchaseDate:"",issuedDate:""},Monitor:{type:"Monitor",brand:"Dell",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Office monitor",serialNumber:"",purchaseDate:"",issuedDate:""},Printer:{type:"Printer",brand:"HP",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Office printer",serialNumber:"",purchaseDate:"",issuedDate:""}},"Network Equipment":{Router:{type:"Router",brand:"Cisco",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Network router",serialNumber:"",purchaseDate:"",issuedDate:""},Switch:{type:"Switch",brand:"Cisco",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Network switch",serialNumber:"",purchaseDate:"",issuedDate:""},Modem:{type:"Modem",brand:"TP-Link",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Internet modem",serialNumber:"",purchaseDate:"",issuedDate:""},"WIFI-Mesh":{type:"WIFI-Mesh",brand:"Ubiquiti",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Wireless mesh system",serialNumber:"",purchaseDate:"",issuedDate:""}},"Security Equipment":{CCTV:{type:"CCTV",brand:"Hikvision",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security camera",serialNumber:"",purchaseDate:"",issuedDate:""},Biometrics:{type:"Biometrics",brand:"ZKTeco",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Biometric scanner",serialNumber:"",purchaseDate:"",issuedDate:""},"Metal Detector":{type:"Metal Detector",brand:"Garrett",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security metal detector",serialNumber:"",purchaseDate:"",issuedDate:""},"Guard Tour System":{type:"Guard Tour System",brand:"Detex",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Guard tour monitoring system",serialNumber:"",purchaseDate:"",issuedDate:""}},"Communication Equipment":{Radio:{type:"Radio",brand:"Motorola",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Two-way radio",serialNumber:"",purchaseDate:"",issuedDate:""},Smartphone:{type:"Smartphone",brand:"Samsung",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Office mobile phone",serialNumber:"",purchaseDate:"",issuedDate:""},Headset:{type:"Headset",brand:"Jabra",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Office headset",serialNumber:"",purchaseDate:"",issuedDate:""},Megaphone:{type:"Megaphone",brand:"Pyle",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Public address system",serialNumber:"",purchaseDate:"",issuedDate:""}},"Power Equipment":{UPS:{type:"UPS",brand:"APC",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Uninterruptible power supply",serialNumber:"",purchaseDate:"",issuedDate:""},AVR:{type:"AVR",brand:"Stavol",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Automatic voltage regulator",serialNumber:"",purchaseDate:"",issuedDate:""},Battery:{type:"Battery",brand:"Yuasa",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Backup battery",serialNumber:"",purchaseDate:"",issuedDate:""},Charger:{type:"Charger",brand:"Anker",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Device charger",serialNumber:"",purchaseDate:"",issuedDate:""}},Accessories:{Keyboard:{type:"Keyboard",brand:"Logitech",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Computer keyboard",serialNumber:"",purchaseDate:"",issuedDate:""},Mouse:{type:"Mouse",brand:"Logitech",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Computer mouse",serialNumber:"",purchaseDate:"",issuedDate:""},Speaker:{type:"Speaker",brand:"JBL",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Audio speaker",serialNumber:"",purchaseDate:"",issuedDate:""},Microphone:{type:"Microphone",brand:"Shure",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Audio microphone",serialNumber:"",purchaseDate:"",issuedDate:""}},Others:{Pedestal:{type:"Pedestal",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"General",remarks:"Equipment pedestal",serialNumber:"",purchaseDate:"",issuedDate:""},Podium:{type:"Podium",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"General",remarks:"Presentation podium",serialNumber:"",purchaseDate:"",issuedDate:""},"Search Stick":{type:"Search Stick",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security search tool",serialNumber:"",purchaseDate:"",issuedDate:""},Searchlight:{type:"Searchlight",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security search light",serialNumber:"",purchaseDate:"",issuedDate:""},"Guard Tour Chips":{type:"Guard Tour Chips",brand:"Detex",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Guard tour system chips",serialNumber:"",purchaseDate:"",issuedDate:""},"Under Chassis":{type:"Under Chassis",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Vehicle under chassis scanner",serialNumber:"",purchaseDate:"",issuedDate:""}}},Tl=n.forwardRef(({onTemplateSelect:t},a)=>{const{selectedCategory:r,selectedType:s,userTemplates:i,isEditModalVisible:o,form:l,setRefreshTrigger:u,handleCategoryChange:p,handleTypeChange:f,handleEdit:d,handleDelete:j,handleEditSubmit:y,setIsEditModalVisible:O}=Ml(t),M=Jt(),b=Zt(),{theme:w,currentTheme:h}=er(),C=h==="default"?{textColor:"#072C1C",borderColor:"#f0f0f0",buttonBg:"transparent",buttonText:"#072C1C"}:{textColor:w.text,borderColor:w.text,buttonBg:"transparent",buttonText:w.text},I=()=>{const E=M.token&&M.userData,P=b.token&&b.userData;if(E)return M.userData;if(P)return b.userData;const V=Ut.get("username"),v=Ut.get("user_id");return V&&v?{username:V,id:v}:null},$=E=>{const P=I();return P&&P.username===E.created_by};n.useImperativeHandle(a,()=>({setRefreshTrigger:u,handleTypeChange:f}));const A=Object.keys(Da).sort();return e.jsxs(Na,{direction:"vertical",style:{width:"100%",marginBottom:"16px"},children:[e.jsx(tr,{message:"Quick Templates",description:"Select a category and type to quickly fill item details, or choose No Template to use your own values",type:"info",showIcon:!0,className:"theme-aware-alert text-xs"}),e.jsxs(sa,{gutter:16,children:[e.jsx(St,{span:12,children:e.jsxs(re,{placeholder:"Select Category",style:{width:"100%"},onChange:p,value:r,allowClear:!0,children:[e.jsx(pe,{value:"No Template",children:"No Template"}),A.map(E=>e.jsx(pe,{value:E,children:E},E)),i.length>0&&e.jsx(pe,{value:"User Templates",children:"User Templates"})]})}),e.jsx(St,{span:12,children:e.jsx(re,{placeholder:"Select Type",style:{width:"100%"},onChange:f,disabled:!r,value:s,allowClear:!0,optionLabelProp:"label",children:r==="User Templates"?i.sort((E,P)=>E.template_name.localeCompare(P.template_name)).map(E=>e.jsx(pe,{value:E.template_name,label:E.template_name,children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:E.template_name}),e.jsxs("div",{style:{fontSize:"12px",color:"#8c8c8c",marginTop:"2px"},children:["Created by: ",E.created_by||"System"]})]}),e.jsxs(Na,{children:[e.jsx(Rt,{title:$(E)?"Edit Template":"Only the creator can edit this template",children:e.jsx(Oe,{type:"text",style:{backgroundColor:"transparent",color:C.buttonText},icon:e.jsx(xn,{}),onClick:P=>{P.stopPropagation(),d(E)},disabled:!$(E)})}),e.jsx(Rt,{title:$(E)?"Delete Template":"Only the creator can delete this template",children:e.jsx(Oe,{type:"text",style:{backgroundColor:"transparent",color:C.buttonText},danger:!0,icon:e.jsx(ar,{}),onClick:P=>{P.stopPropagation(),j(E)},disabled:!$(E)})})]})]})},E.template_name)):r&&Object.keys(Da[r]).sort().map(E=>e.jsx(pe,{value:E,children:E},E))})})]}),e.jsx(vs,{style:{margin:"16px 0"}}),e.jsx(ot,{title:e.jsx("span",{style:{color:C.textColor},children:"Edit Template"}),open:o,onCancel:()=>O(!1),footer:null,width:900,styles:{header:{background:h==="default"?"#A8E1C5":w.CardHead||w.sider,borderBottom:`1px solid ${C.borderColor}`,borderRadius:"12px 12px 0 0"},content:{background:h==="default"?"#fff":w.componentBackground,borderRadius:"12px",overflow:"hidden"},body:{padding:"24px"}},children:e.jsx(L,{form:l,onFinish:y,layout:"vertical",children:e.jsxs(sa,{gutter:16,children:[e.jsxs(St,{span:12,children:[e.jsx(L.Item,{name:"template_name",label:"Template Name",rules:[{required:!0,message:"Please enter template name"}],children:e.jsx(ge,{})}),e.jsx(L.Item,{name:"type",label:"Type",rules:[{required:!0,message:"Please select type"}],children:e.jsxs(re,{children:[e.jsx(pe,{value:"AVR",children:"AVR"}),e.jsx(pe,{value:"Battery",children:"Battery"}),e.jsx(pe,{value:"Biometrics",children:"Biometrics"}),e.jsx(pe,{value:"Camera",children:"Camera"}),e.jsx(pe,{value:"CCTV",children:"CCTV"}),e.jsx(pe,{value:"Charger",children:"Charger"}),e.jsx(pe,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(pe,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(pe,{value:"Headset",children:"Headset"}),e.jsx(pe,{value:"Keyboard",children:"Keyboard"}),e.jsx(pe,{value:"Laptop",children:"Laptop"}),e.jsx(pe,{value:"Megaphone",children:"Megaphone"}),e.jsx(pe,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(pe,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(pe,{value:"Microphone",children:"Microphone"}),e.jsx(pe,{value:"Modem",children:"Modem"}),e.jsx(pe,{value:"Monitor",children:"Monitor"}),e.jsx(pe,{value:"Mouse",children:"Mouse"}),e.jsx(pe,{value:"Others",children:"Others"}),e.jsx(pe,{value:"Pedestal",children:"Pedestal"}),e.jsx(pe,{value:"Podium",children:"Podium"}),e.jsx(pe,{value:"Printer",children:"Printer"}),e.jsx(pe,{value:"Radio",children:"Radio"}),e.jsx(pe,{value:"Router",children:"Router"}),e.jsx(pe,{value:"Search Stick",children:"Search Stick"}),e.jsx(pe,{value:"Searchlight",children:"Searchlight"}),e.jsx(pe,{value:"Smartphone",children:"Smartphone"}),e.jsx(pe,{value:"Speaker",children:"Speaker"}),e.jsx(pe,{value:"Switch",children:"Switch"}),e.jsx(pe,{value:"System Unit",children:"System Unit"}),e.jsx(pe,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(pe,{value:"UPS",children:"UPS"})]})}),e.jsx(L.Item,{name:"brand",label:"Brand",rules:[{required:!0,message:"Please enter brand"}],children:e.jsx(ge,{})}),e.jsx(L.Item,{name:"serialNumber",label:"Serial Number",children:e.jsx(ge,{})}),e.jsx(L.Item,{name:"purchaseDate",label:"Purchase Date",rules:[{required:!0,message:"Please select purchase date"}],children:e.jsx(at,{format:"YYYY-MM-DD",style:{width:"100%"}})}),e.jsx(L.Item,{name:"issuedDate",label:"Issued Date",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(at,{format:"YYYY-MM-DD",style:{width:"100%"}})})]}),e.jsxs(St,{span:12,children:[e.jsx(L.Item,{name:"condition",label:"Condition",rules:[{required:!0,message:"Please select condition"}],children:e.jsxs(re,{children:[e.jsx(pe,{value:"Brand New",children:"Brand New"}),e.jsx(pe,{value:"Good Condition",children:"Good Condition"}),e.jsx(pe,{value:"Defective",children:"Defective"})]})}),e.jsx(L.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:e.jsxs(re,{children:[e.jsx(pe,{value:"On Stock",children:"On Stock"}),e.jsx(pe,{value:"Deployed",children:"Deployed"}),e.jsx(pe,{value:"For Repair",children:"For Repair"})]})}),e.jsx(L.Item,{name:"locationType",label:"Detachment/Office",rules:[{required:!0,message:"Please select a location type"}],children:e.jsxs(re,{onChange:E=>{const P=E==="Head Office";l.setFieldsValue({department:P?l.getFieldValue("department"):null,location:P?null:l.getFieldValue("location")})},children:[e.jsx(pe,{value:"Head Office",children:"Head Office"}),e.jsx(pe,{value:"Other",children:"Other (Specify Below)"})]})}),e.jsx(L.Item,{noStyle:!0,shouldUpdate:(E,P)=>E.locationType!==P.locationType,children:({getFieldValue:E})=>E("locationType")==="Head Office"?e.jsx(L.Item,{name:"department",label:"Department (Head Office)",rules:[{required:!0,message:"Please select a department"}],children:e.jsx(re,{children:Object.entries(El).map(([V,v])=>e.jsx(pe,{value:V,children:v},V))})}):e.jsx(L.Item,{name:"location",label:"Specific Location",rules:[{required:!0,message:"Please input a location"}],children:e.jsx(ge,{})})}),e.jsx(L.Item,{name:"remarks",label:"Remarks",children:e.jsx(ge.TextArea,{})}),e.jsx(L.Item,{children:e.jsx(Oe,{size:"small",type:"primary",htmlType:"submit",className:"text-xs",children:"Save Changes"})})]})]})})})]})}),{Option:me}=re,$l=({form:t,onFinish:a,loading:r,templateRef:s,onTemplateSelect:i,isHeadOffice:o,setIsHeadOffice:l,hasSerialNumber:u,handleSerialChange:p,selectedStockItem:f})=>{const[d,j]=n.useState(!1),[y,O]=n.useState(!1),[M,b]=n.useState(""),[w,h]=n.useState(!1),{logUserActivity:S}=ft(),{logUserNotification:C}=ht(),I=P=>{const V=P.target.value;b(V),p&&p(P),V&&!y&&!w&&(j(!0),h(!0)),V===""&&(O(!1),h(!1),t.setFieldsValue({quantity:1}))},$=()=>{O(!0),j(!1)},A=()=>{O(!1),j(!1),t.setFieldsValue({quantity:1})},E=P=>{a(P),S("Add Item",`Added item: ${P.type} (${P.brand}), Qty: ${P.quantity}`),C("Add Item",`Added item: ${P.type} (${P.brand}), Qty: ${P.quantity}`)};return e.jsxs(e.Fragment,{children:[e.jsx(ot,{open:d,onOk:$,onCancel:A,title:"Serial Number Quantity",okText:"Yes",cancelText:"No",centered:!0,children:"Does the item you want to add have only 1 serial number but has many quantities?"}),e.jsxs(L,{form:t,onFinish:E,layout:"vertical",initialValues:{quantity:1},children:[e.jsx(Tl,{ref:s,onTemplateSelect:i}),e.jsxs(sa,{gutter:[32,24],children:[e.jsx(St,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:e.jsxs(re,{size:"medium",placeholder:"Select item type",children:[e.jsx(me,{value:"AVR",children:"AVR"}),e.jsx(me,{value:"Battery",children:"Battery"}),e.jsx(me,{value:"Biometrics",children:"Biometrics"}),e.jsx(me,{value:"Camera",children:"Camera"}),e.jsx(me,{value:"CCTV",children:"CCTV"}),e.jsx(me,{value:"Charger",children:"Charger"}),e.jsx(me,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(me,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(me,{value:"Headset",children:"Headset"}),e.jsx(me,{value:"Keyboard",children:"Keyboard"}),e.jsx(me,{value:"Laptop",children:"Laptop"}),e.jsx(me,{value:"Megaphone",children:"Megaphone"}),e.jsx(me,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(me,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(me,{value:"Microphone",children:"Microphone"}),e.jsx(me,{value:"Modem",children:"Modem"}),e.jsx(me,{value:"Monitor",children:"Monitor"}),e.jsx(me,{value:"Mouse",children:"Mouse"}),e.jsx(me,{value:"Others",children:"Others"}),e.jsx(me,{value:"Pedestal",children:"Pedestal"}),e.jsx(me,{value:"Podium",children:"Podium"}),e.jsx(me,{value:"Printer",children:"Printer"}),e.jsx(me,{value:"Radio",children:"Radio"}),e.jsx(me,{value:"Router",children:"Router"}),e.jsx(me,{value:"Search Stick",children:"Search Stick"}),e.jsx(me,{value:"Searchlight",children:"Searchlight"}),e.jsx(me,{value:"Smartphone",children:"Smartphone"}),e.jsx(me,{value:"Speaker",children:"Speaker"}),e.jsx(me,{value:"Switch",children:"Switch"}),e.jsx(me,{value:"System Unit",children:"System Unit"}),e.jsx(me,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(me,{value:"UPS",children:"UPS"})]})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:e.jsx(ge,{size:"medium",placeholder:"Enter brand name"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",tooltip:"Optional - Leave empty if there no remarks",children:e.jsx(ge.TextArea,{size:"medium",rows:3,placeholder:"Enter any additional remarks"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Serial Number"}),name:"serialNumber",tooltip:"Optional - Leave empty if item has no serial number",children:e.jsx(ge,{size:"medium",onChange:I,placeholder:"Enter serial number (optional)"})}),(f==null?void 0:f.action)==="redistribute"&&e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Original Quantity"}),name:"originalQuantity",rules:[{required:!0,message:"Original quantity is required"}],children:e.jsx(ge,{size:"medium",disabled:!0,min:1})}),(!M||y||(f==null?void 0:f.action)==="redistribute")&&e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:(f==null?void 0:f.action)==="redistribute"?"New Quantity to Redistribute":"Quantity"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity!"},{validator:(P,V)=>!V||V<1?Promise.reject("Quantity must be at least 1"):(f==null?void 0:f.action)==="redistribute"&&(f!=null&&f.quantity)&&V>=f.quantity?Promise.reject(`Quantity must be less than ${f.quantity}`):Promise.resolve()}],children:e.jsx(ge,{size:"medium",type:"number",min:1,max:(f==null?void 0:f.action)==="redistribute"&&(f!=null&&f.quantity)?f.quantity-1:void 0,placeholder:"Enter quantity"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(at,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select issued date"})})]})}),e.jsx(St,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Purchased Date"}),name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:e.jsx(at,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select purchase date"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:e.jsxs(re,{size:"medium",placeholder:"Select condition",children:[e.jsx(me,{value:"Brand New",children:"Brand New"}),e.jsx(me,{value:"Good Condition",children:"Good Condition"}),e.jsx(me,{value:"Defective",children:"Defective"})]})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Detachment/Office"}),name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:e.jsxs(re,{size:"medium",onChange:P=>l(P==="Head Office"),placeholder:"Select location type",children:[e.jsx(me,{value:"Head Office",children:"Head Office"}),e.jsx(me,{value:"Other",children:"Other (Specify Below)"})]})}),o&&e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department!"}],children:e.jsxs(re,{size:"medium",placeholder:"Select department",children:[e.jsx(me,{value:"SOD",children:"SOD"}),e.jsx(me,{value:"CID",children:"CID"}),e.jsx(me,{value:"GAD",children:"GAD"}),e.jsx(me,{value:"HRD",children:"HRD"}),e.jsx(me,{value:"AFD",children:"AFD"}),e.jsx(me,{value:"EOD",children:"EOD"}),e.jsx(me,{value:"BDO",children:"BDO"})]})}),!o&&e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a location!"}],children:e.jsx(ge,{size:"medium",placeholder:"Enter specific location"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status!"}],children:e.jsxs(re,{size:"medium",placeholder:"Select status",children:[e.jsx(me,{value:"On Stock",children:"On Stock"}),e.jsx(me,{value:"Deployed",children:"Deployed"}),e.jsx(me,{value:"For Repair",children:"For Repair"})]})}),e.jsx(L.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(Oe,{type:"primary",htmlType:"submit",icon:e.jsx(Hr,{}),loading:r,size:"small",style:{background:"var(--theme-card-head-bg, #5fe7a7)",border:"none",borderRadius:"6px",padding:"8px",height:"auto",fontSize:"12px",fontWeight:"600",color:"var(--theme-text, #072C1C)"},children:"Add Item"})})})]})})]})]})]})},{Text:Al}=Ht,Bl=({onStockItems:t,searchText:a,setSearchText:r,fetchOnStockItems:s,loading:i,handleStockItemSelect:o})=>{const l=dr({maxWidth:639}),[u,p]=n.useState(1),[f,d]=n.useState(5),{logUserActivity:j}=ft(),{logUserNotification:y}=ht(),O=t.filter(h=>Object.values(h).some(S=>String(S).toLowerCase().includes(a.toLowerCase()))),M=O.slice((u-1)*f,u*f),b=h=>{o(h),j("Edit Item",`Edit Item: ${h.type} (${h.brand}), Qty: ${h.quantity}`),y("Edit Item",`Edit Item: ${h.type} (${h.brand}), Qty: ${h.quantity}`)},w=[{title:"ID",dataIndex:"id",key:"id",width:"15%",className:"text-xs",render:h=>e.jsx("span",{className:"font-medium text-xs",children:h})},{title:"Type",dataIndex:"type",key:"type",width:"20%",className:"text-xs",render:h=>e.jsx("span",{className:"font-medium text-xs",children:h})},{title:"Brand",dataIndex:"brand",key:"brand",width:"20%",className:"text-xs",render:h=>e.jsx("span",{className:"font-medium text-xs",children:h})},{title:"Remarks",dataIndex:"remarks",key:"remarks",width:"15%",className:"text-xs",render:h=>e.jsx("span",{className:"font-medium text-xs",children:h})},{title:"Quantity",dataIndex:"quantity",key:"quantity",width:"15%",className:"text-xs",render:h=>e.jsx(_t,{color:h>5?"green":h>1?"orange":"red",className:"text-xs",children:h})},{title:"Location",dataIndex:"location",key:"location",width:"20%",className:"text-xs",render:h=>e.jsx(Rt,{title:h,children:e.jsx("span",{className:"max-w-[200px] text-xs",children:h})})},{title:"Status",dataIndex:"status",key:"status",width:"20%",className:"text-xs",render:h=>e.jsx(_t,{color:"green",children:e.jsx("span",{className:"font-medium text-xs",children:h})})},{title:"Action",key:"action",width:"10%",className:"text-xs",render:(h,S)=>e.jsxs(Na,{children:[e.jsx(Rt,{title:"Edit",children:e.jsx(Oe,{type:"primary",icon:e.jsx(qr,{}),onClick:()=>b(S),size:"small",style:{backgroundColor:"var(--theme-card-head-bg, #5fe7a7)",color:"black"},className:"text-xs"})}),S.quantity>1&&e.jsx(Rt,{title:"Redistribute",children:e.jsx(Oe,{type:"primary",icon:e.jsx(Ra,{}),onClick:()=>o({...S,action:"redistribute"}),size:"small",style:{backgroundColor:"var(--theme-text-light-custom, #EAF4E2)",color:"black"},className:"text-xs"})})]})}];return e.jsxs(fa,{className:"shadow-lg border-0 mb-2",children:[e.jsxs("div",{className:l?"flex flex-col gap-2 mb-4":"flex justify-between items-center mb-4",children:[e.jsx("div",{className:l?"w-full":"flex items-center gap-4",children:e.jsx(ge,{placeholder:"Search items...",prefix:e.jsx(vn,{}),value:a,onChange:h=>r(h.target.value),style:l?{width:"100%"}:{width:300},allowClear:!0,size:"small",className:"text-xs"})}),e.jsx(Oe,{type:"primary",icon:e.jsx(nr,{}),onClick:s,size:"small",style:l?{width:"100%",marginTop:0,backgroundColor:"var(--theme-card-head-bg, #a7f3d0)",color:"black"}:{backgroundColor:"var(--theme-card-head-bg, #a7f3d0)",color:"black"},className:"text-xs custom-button",children:"Refresh"})]}),e.jsx(Gt,{bordered:!0,dataSource:M,columns:w,rowKey:"id",size:"small",pagination:!1,scroll:l?{x:"max-content",y:400}:{y:400},loading:i,className:"text-xs",expandable:l?{expandedRowRender:h=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",h.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",h.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",h.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",h.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Location:"})," ",h.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",h.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",h.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",h.issuedDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",h.purchaseDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",h.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",h.status]})]}),rowExpandable:()=>!0}:void 0}),e.jsxs("div",{className:"flex flex-col items-center mt-4 space-y-2",children:[e.jsxs(Al,{className:"w-full text-xs text-center",style:{color:"#072C1C"},children:["Showing ",O.length>0?(u-1)*f+1:0," to ",Math.min(u*f,O.length)," of ",O.length," entries"]}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(mr,{current:u,pageSize:f,total:O.length,showSizeChanger:!0,size:"small",responsive:!0,pageSizeOptions:["5","10","15","30","50"],onChange:(h,S)=>{p(h),d(S)},className:"text-xs"})})]})]})},{Option:fe}=re,{Title:Fl}=Ht,Vl=({form:t,onFinish:a,loading:r,selectedStockItem:s,isHeadOffice:i,setIsHeadOffice:o,handleSerialChange:l})=>{const[u,p]=n.useState(!1),[f,d]=n.useState(!1),[j,y]=n.useState(""),[O,M]=n.useState(!1),{logUserActivity:b}=ft(),{logUserNotification:w}=ht();if(!s)return null;const h=$=>{const A=$.target.value;y(A),l&&l($),A&&!f&&!O&&(p(!0),M(!0)),A===""&&(d(!1),M(!1),t.setFieldsValue({quantity:1}))},S=()=>{d(!0),p(!1)},C=()=>{d(!1),p(!1),t.setFieldsValue({quantity:1})},I=$=>{a($);const A=(s==null?void 0:s.action)==="redistribute"?"Redistribute Item":"Edit Item";b(A,`${A}: ${$.type} (${$.brand}), Qty: ${$.quantity}`),w(A,`${A}: ${$.type} (${$.brand}), Qty: ${$.quantity}`)};return e.jsxs(e.Fragment,{children:[e.jsx(ot,{open:u,onOk:S,onCancel:C,title:"Serial Number Quantity",okText:"Yes",cancelText:"No",centered:!0,children:"Does the item you want to add have only 1 serial number but has many quantities?"}),e.jsxs(fa,{className:"shadow-lg custom-card",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(Fl,{level:4,className:"mb-2",children:s.action==="redistribute"?"🔄 Redistribute Item":"✏️ Edit Item"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.action==="redistribute"?"Create a new item from existing stock":"Update item details and information"})]}),e.jsx(L,{form:t,onFinish:I,layout:"vertical",initialValues:{quantity:1},children:e.jsxs(sa,{gutter:[32,24],children:[e.jsx(St,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:e.jsxs(re,{size:"medium",placeholder:"Select item type",children:[e.jsx(fe,{value:"AVR",children:"AVR"}),e.jsx(fe,{value:"Battery",children:"Battery"}),e.jsx(fe,{value:"Biometrics",children:"Biometrics"}),e.jsx(fe,{value:"Camera",children:"Camera"}),e.jsx(fe,{value:"CCTV",children:"CCTV"}),e.jsx(fe,{value:"Charger",children:"Charger"}),e.jsx(fe,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(fe,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(fe,{value:"Headset",children:"Headset"}),e.jsx(fe,{value:"Keyboard",children:"Keyboard"}),e.jsx(fe,{value:"Laptop",children:"Laptop"}),e.jsx(fe,{value:"Megaphone",children:"Megaphone"}),e.jsx(fe,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(fe,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(fe,{value:"Microphone",children:"Microphone"}),e.jsx(fe,{value:"Modem",children:"Modem"}),e.jsx(fe,{value:"Monitor",children:"Monitor"}),e.jsx(fe,{value:"Mouse",children:"Mouse"}),e.jsx(fe,{value:"Others",children:"Others"}),e.jsx(fe,{value:"Pedestal",children:"Pedestal"}),e.jsx(fe,{value:"Podium",children:"Podium"}),e.jsx(fe,{value:"Printer",children:"Printer"}),e.jsx(fe,{value:"Radio",children:"Radio"}),e.jsx(fe,{value:"Router",children:"Router"}),e.jsx(fe,{value:"Search Stick",children:"Search Stick"}),e.jsx(fe,{value:"Searchlight",children:"Searchlight"}),e.jsx(fe,{value:"Smartphone",children:"Smartphone"}),e.jsx(fe,{value:"Speaker",children:"Speaker"}),e.jsx(fe,{value:"Switch",children:"Switch"}),e.jsx(fe,{value:"System Unit",children:"System Unit"}),e.jsx(fe,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(fe,{value:"UPS",children:"UPS"})]})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:e.jsx(ge,{size:"medium",placeholder:"Enter brand name"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",tooltip:"Optional - Leave empty if there no remarks",children:e.jsx(ge.TextArea,{size:"medium",rows:3,placeholder:"Enter any additional remarks"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Serial Number"}),name:"serialNumber",tooltip:"Optional - Leave empty if item has no serial number",children:e.jsx(ge,{size:"medium",onChange:h,placeholder:"Enter serial number (optional)"})}),(!j||f||(s==null?void 0:s.action)==="redistribute")&&e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:(s==null?void 0:s.action)==="redistribute"?"New Quantity to Redistribute":"Quantity"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity!"},{validator:($,A)=>!A||A<1?Promise.reject("Quantity must be at least 1"):(s==null?void 0:s.action)==="redistribute"&&(s!=null&&s.quantity)&&A>=s.quantity?Promise.reject(`Quantity must be less than ${s.quantity}`):Promise.resolve()}],children:e.jsx(ge,{size:"medium",type:"number",min:1,max:(s==null?void 0:s.action)==="redistribute"&&(s!=null&&s.quantity)?s.quantity-1:void 0,placeholder:"Enter quantity"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(at,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select issued date"})})]})}),e.jsx(St,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Purchased Date"}),name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:e.jsx(at,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select purchase date"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:e.jsxs(re,{size:"medium",placeholder:"Select condition",children:[e.jsx(fe,{value:"Brand New",children:"Brand New"}),e.jsx(fe,{value:"Good Condition",children:"Good Condition"}),e.jsx(fe,{value:"Defective",children:"Defective"})]})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Detachment/Office"}),name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:e.jsxs(re,{size:"medium",onChange:$=>o($==="Head Office"),placeholder:"Select location type",children:[e.jsx(fe,{value:"Head Office",children:"Head Office"}),e.jsx(fe,{value:"Other",children:"Other (Specify Below)"})]})}),i&&e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department!"}],children:e.jsxs(re,{size:"medium",placeholder:"Select department",children:[e.jsx(fe,{value:"SOD",children:"SOD"}),e.jsx(fe,{value:"CID",children:"CID"}),e.jsx(fe,{value:"GAD",children:"GAD"}),e.jsx(fe,{value:"HRD",children:"HRD"}),e.jsx(fe,{value:"AFD",children:"AFD"}),e.jsx(fe,{value:"EOD",children:"EOD"}),e.jsx(fe,{value:"BDO",children:"BDO"})]})}),!i&&e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a location!"}],children:e.jsx(ge,{size:"medium",placeholder:"Enter specific location"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status!"}],children:e.jsxs(re,{size:"medium",placeholder:"Select status",children:[e.jsx(fe,{value:"On Stock",children:"On Stock"}),e.jsx(fe,{value:"Deployed",children:"Deployed"}),e.jsx(fe,{value:"For Repair",children:"For Repair"})]})}),e.jsx(L.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(Oe,{type:"primary",htmlType:"submit",icon:s.action==="redistribute"?e.jsx(Ra,{}):e.jsx(xn,{}),loading:r,size:"small",style:{backgroundColor:"var(--theme-card-head-bg, #a7f3d0)",border:"none",borderRadius:"6px",padding:"8px",height:"auto",fontSize:"12px",fontWeight:"600",color:"black"},children:s.action==="redistribute"?"Redistribute":"Update Item"})})})]})})]})})]})]})},{Title:_l}=Ht,ql=({visible:t,onCancel:a,onSave:r,templateName:s,setTemplateName:i})=>{const{theme:o,currentTheme:l}=er(),{logUserActivity:u}=ft(),{logUserNotification:p}=ht(),d=l==="default"?{headerBg:"#A8E1C5",buttonBg:"#A8E1C5",buttonText:"#072C1C",textColor:"#072C1C",borderColor:"#f0f0f0"}:{headerBg:o.CardHead||o.sider,buttonBg:o.CardHead||o.sider,buttonText:o.text,textColor:o.text,borderColor:o.text},j=()=>{r(),u("Save Template",`Saved template: ${s}`),p("Save Template",`Saved template: ${s}`)};return e.jsx(ot,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(_l,{level:4,className:"mb-0 font-semibold",style:{color:d.textColor},children:"Save as Template"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",style:{color:d.textColor},children:"Save this item configuration for future use"})]}),open:t,onCancel:a,footer:[e.jsx(Oe,{onClick:a,size:"small",style:{background:"transparent",border:`1px solid ${d.borderColor}`,color:d.textColor,borderRadius:"6px",padding:"6px",height:"auto",fontSize:"12px",fontWeight:"600"},children:"Cancel"},"cancel"),e.jsx(Oe,{type:"primary",onClick:j,icon:e.jsx(Cl,{}),size:"small",style:{background:d.buttonBg,border:"none",borderRadius:"6px",padding:"6px",height:"auto",fontSize:"12px",fontWeight:"600",color:d.buttonText},children:"Save Template"},"save")],className:"template-modal",styles:{header:{borderBottom:`1px solid ${d.borderColor}`,padding:"24px 24px 16px 24px",background:d.headerBg,borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden",background:l==="default"?"#fff":o.componentBackground},body:{padding:"24px"}},children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-6",style:{color:d.textColor},children:"Would you like to save this item as a template for future use?"}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",style:{color:d.textColor},children:"Template Name"}),required:!0,tooltip:"Enter a unique name for this template",children:e.jsx(ge,{size:"large",value:s,onChange:y=>i(y.target.value),placeholder:"Enter template name",style:{background:l==="default"?"#fff":o.componentBackground,borderColor:d.borderColor,color:d.textColor}})})]})})},{Title:Hl}=Ht,zl=({visible:t,onClose:a,onAdd:r,onRedistribute:s,handleEditItem:i,loading:o})=>{const[l]=L.useForm(),[u,p]=n.useState(!1),[f,d]=n.useState(!1),[j,y]=n.useState(!1),[O,M]=n.useState(""),[b,w]=n.useState(null),[h,S]=n.useState([]),[C,I]=n.useState(null),[$,A]=n.useState("new"),[E,P]=n.useState(""),V=n.useRef(null),{message:v}=Xt.useApp(),{logUserActivity:k}=ft(),{logUserNotification:F}=ht(),Y=Jt(),T=Zt(),B=()=>{const m=Y.token&&Y.userData,c=T.token&&T.userData;if(m)return Y.userData;if(c)return T.userData;const g=Ut.get("username"),D=Ut.get("user_id");return g&&D?{username:g,id:D}:null};n.useEffect(()=>{t&&z()},[t]);const z=async()=>{try{const c=(await Pt()).filter(g=>g.status==="On Stock");S(c)}catch(m){console.error("Error fetching on stock items:",m)}},K=m=>{$!=="stock"&&A("stock"),I(m),m.action==="redistribute"?l.setFieldsValue({type:m.type,brand:m.brand,originalQuantity:m.quantity,quantity:1,condition:m.condition,status:m.status,remarks:m.remarks,locationType:m.location.includes("Head Office")?"Head Office":"Other",department:m.location.includes("Head Office")?m.location.split(" - ")[1]:void 0,location:m.location.includes("Head Office")?void 0:m.location,issuedDate:m.issuedDate?Be(m.issuedDate):void 0,purchaseDate:m.purchaseDate?Be(m.purchaseDate):void 0,serialNumber:m.serialNumber}):l.setFieldsValue({type:m.type,brand:m.brand,quantity:m.quantity,condition:m.condition,status:m.status,remarks:m.remarks,locationType:m.location.includes("Head Office")?"Head Office":"Other",department:m.location.includes("Head Office")?m.location.split(" - ")[1]:void 0,location:m.location.includes("Head Office")?void 0:m.location,issuedDate:m.issuedDate?Be(m.issuedDate):void 0,purchaseDate:m.purchaseDate?Be(m.purchaseDate):void 0,serialNumber:m.serialNumber}),p(m.location.includes("Head Office")),d(!!m.serialNumber)},G=m=>{m?(l.setFieldsValue({...m,locationType:m.locationType||(m.location.includes("Head Office")?"Head Office":"Other"),department:m.department||(m.location.includes("Head Office")?m.location.split(" - ")[1]:null),location:m.location,purchaseDate:m.purchaseDate?Be(m.purchaseDate):void 0,issuedDate:m.issuedDate?Be(m.issuedDate):void 0}),p(m.locationType==="Head Office"||m.location.includes("Head Office"))):(l.resetFields(),p(!1))},ee=async m=>{var c,g,D;try{if(m.purchaseDate&&m.purchaseDate.isAfter(Be())){v.error("Purchase date cannot be in the future.");return}const R=await Pt();if(m.serialNumber&&(!C||m.serialNumber!==C.serialNumber)&&R.some(Z=>Z.serialNumber===m.serialNumber)){v.error("Serial number already exists. Please use a unique serial number.");return}const H=u?`Head Office - ${m.department}`:m.location;if(C)if(C.action==="redistribute"){const _=R.find(Me=>Me.id===C.id);if(!_){v.error("Item not found in inventory.");return}if(_.quantity===1){v.warning("Cannot redistribute item with quantity of 1.");return}if(!m.quantity||m.quantity<=0||m.quantity>=_.quantity){v.error("New quantity must be greater than 0 and less than existing quantity.");return}const Z={id:_.id,newQuantity:m.quantity,newLocation:H,issuedDate:m.issuedDate?m.issuedDate.format("YYYY-MM-DD"):null,condition:m.condition,status:m.status,remarks:((c=m.remarks)==null?void 0:c.trim())||null};await s(Z),await z(),I(null),l.resetFields()}else{const _={id:C.id,type:m.type,brand:m.brand,quantity:m.quantity,serialNumber:m.serialNumber||"",issuedDate:m.issuedDate?m.issuedDate.format("YYYY-MM-DD"):null,purchaseDate:m.purchaseDate?m.purchaseDate.format("YYYY-MM-DD"):null,condition:m.condition,location:H,status:m.status,remarks:m.remarks||""};await i(_,C),await z(),I(null),l.resetFields()}else{const _={type:m.type,brand:m.brand,quantity:m.quantity,serialNumber:m.serialNumber,issuedDate:m.issuedDate?m.issuedDate.format("YYYY-MM-DD"):null,purchaseDate:m.purchaseDate?m.purchaseDate.format("YYYY-MM-DD"):null,condition:m.condition,location:H,status:m.status,remarks:m.remarks||null};await r(_),w(m);const Z=(D=(g=V.current)==null?void 0:g.handleTypeChange)==null?void 0:D.call(g,m.type);Z&&!Z.isUserTemplate&&y(!0),l.resetFields(),a()}}catch(R){console.error(R),v.error("Failed to save item")}},Q=async()=>{if(!O.trim()){v.error("Please enter a template name");return}const m=B();if(!m){v.error("User not authenticated");return}const c=b,g={template_name:O,type:c.type,brand:c.brand,condition:c.condition,status:c.status,quantity:c.quantity||1,location:u?`Head Office - ${c.department}`:c.location,remarks:c.remarks||"",serialNumber:c.serialNumber||null,purchaseDate:c.purchaseDate?c.purchaseDate.format("YYYY-MM-DD"):null,issuedDate:c.issuedDate?c.issuedDate.format("YYYY-MM-DD"):null};try{const D=await kl(g);D.success?(v.success("Template saved successfully!"),y(!1),M(""),V.current&&V.current.setRefreshTrigger(R=>R+1),await k(m.username,"Template Created",`Template "${O}" has been created successfully.`),await F("Template Created",`Template "${O}" has been created successfully.`)):v.error(D.message||"Failed to save template")}catch(D){console.error("Error saving template:",D),v.error("Error saving template")}},J=()=>{l.resetFields(),d(!1),I(null),P(""),A("new"),a()},x=m=>{const c=m.target.value.trim();d(c!==""),c===""&&l.setFieldsValue({quantity:1})},N=m=>{A(m),m==="new"&&(l.resetFields(),I(null),d(!1),p(!1))};return e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"overflow-hidden",title:e.jsxs("div",{className:"text-center",children:[e.jsx(Hl,{level:3,className:"mb-0 font-semibold",children:"Inventory Management"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Add, edit, and manage your inventory items"})]}),open:t,onCancel:J,footer:null,width:1400,styles:{body:{padding:0},header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"var(--theme-card-head-bg, #5fe7a7)",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsx(rr,{className:"custom-tabs",activeKey:$,onChange:N,type:"card",tabBarGutter:1,items:[{key:"new",label:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Hr,{}),e.jsx("span",{className:"font-medium text-xs",children:"New Item"})]}),children:e.jsx($l,{form:l,onFinish:ee,loading:o,templateRef:V,onTemplateSelect:G,isHeadOffice:u,setIsHeadOffice:p,hasSerialNumber:f,handleSerialChange:x,selectedStockItem:C})},{key:"stock",label:e.jsxs("div",{className:"flex items-center",children:[e.jsx(vn,{}),e.jsx("span",{className:"font-medium text-xs",children:"On Stock Items"})]}),children:e.jsxs(e.Fragment,{children:[e.jsx(Bl,{onStockItems:h,searchText:E,setSearchText:P,fetchOnStockItems:z,loading:o,handleStockItemSelect:K}),C&&e.jsx(Vl,{form:l,onFinish:ee,loading:o,selectedStockItem:C,isHeadOffice:u,setIsHeadOffice:p,hasSerialNumber:f,handleSerialChange:x})]})}]})}),e.jsx(ql,{visible:j,onCancel:()=>y(!1),onSave:Q,templateName:O,setTemplateName:M})]})},{Option:he}=re,{Title:Yl}=Ht,Ll=({visible:t,onClose:a,onEdit:r,item:s})=>{const[i]=L.useForm(),[o,l]=n.useState(!1),[u,p]=n.useState(!1),[f,d]=n.useState(!1),[j,y]=n.useState(!1),[O,M]=n.useState(""),[b,w]=n.useState(""),[h,S]=n.useState(!1),{message:C}=Xt.useApp(),{logUserActivity:I}=ft(),{logUserNotification:$}=ht(),A=Jt(),E=Zt(),P=()=>{const T=A.token&&A.userData,B=E.token&&E.userData;if(T)return A.userData;if(B)return E.userData;const z=Ut.get("username"),K=Ut.get("user_id");return z&&K?{username:z,id:K}:null};n.useEffect(()=>{if(t&&s){const T=s.location.includes("Head Office"),B=T?s.location.split(" - ")[1]:null;i.setFieldsValue({...s,locationType:T?"Head Office":"Other",department:B,location:T?null:s.location,purchaseDate:s.purchaseDate&&s.purchaseDate!=="0000-00-00"&&s.purchaseDate!==""?Be(s.purchaseDate):void 0,issuedDate:s.issuedDate&&s.issuedDate!=="0000-00-00"&&s.issuedDate!==""?Be(s.issuedDate):void 0}),l(T),p(!!s.serialNumber),M(s.serialNumber||""),s.serialNumber&&y(!0)}},[t,s,i]);const V=async T=>{try{if(T.purchaseDate&&T.purchaseDate.isAfter(Be())){C.error("Purchase date cannot be in the future.");return}const B=await Pt();if(T.serialNumber&&T.serialNumber!==s.serialNumber&&B.some(Q=>Q.serialNumber===T.serialNumber)){C.error("Serial number already exists. Please use a unique serial number.");return}const z=o?`Head Office - ${T.department}`:T.location,K={...s,type:T.type,brand:T.brand,quantity:Math.max(1,T.quantity||1),serialNumber:T.serialNumber,issuedDate:T.issuedDate?T.issuedDate.format("YYYY-MM-DD"):null,purchaseDate:T.purchaseDate?T.purchaseDate.format("YYYY-MM-DD"):null,condition:T.condition,location:z,status:T.status,remarks:T.remarks||null};r(K);const G=P();G&&(await I(G.username,"Item Updated",`Item "${K.type}" has been updated.`),await $("Item Updated",`Item "${K.type}" has been updated.`))}catch(B){console.error(B)}},v=()=>{i.resetFields(),p(!1),d(!1),y(!1),M(""),w(""),S(!1),a()},k=T=>{const B=T.target.value;M(B),p(B!==""),B&&!j&&!h&&(d(!0),w(B),S(!0)),B===""&&(y(!1),w(""),S(!1),i.setFieldsValue({quantity:1}))},F=()=>{y(!0),d(!1)},Y=()=>{y(!1),d(!1),i.setFieldsValue({quantity:1})};return e.jsxs(e.Fragment,{children:[e.jsx(ot,{open:f,onOk:F,onCancel:Y,title:"Serial Number Quantity",okText:"Yes",cancelText:"No",centered:!0,children:"Does the item you want to edit have only 1 serial number but has many quantities?"}),e.jsx(ot,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(Yl,{level:3,className:"mb-0 font-semibold",children:"Edit Item"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Update item details and information"})]}),open:t,onCancel:v,footer:null,width:1e3,className:"custom-card",styles:{body:{padding:0},header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"var(--theme-card-head-bg, #5fe7a7)",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsx("div",{className:"p-8 bg-gray-50",children:e.jsx(fa,{className:"shadow-lg border-0",children:e.jsx(L,{form:i,onFinish:V,layout:"vertical",initialValues:{quantity:1},children:e.jsxs(sa,{gutter:[32,24],children:[e.jsx(St,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:e.jsxs(re,{size:"medium",placeholder:"Select item type",children:[e.jsx(he,{value:"AVR",children:"AVR"}),e.jsx(he,{value:"Battery",children:"Battery"}),e.jsx(he,{value:"Biometrics",children:"Biometrics"}),e.jsx(he,{value:"Camera",children:"Camera"}),e.jsx(he,{value:"CCTV",children:"CCTV"}),e.jsx(he,{value:"Charger",children:"Charger"}),e.jsx(he,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(he,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(he,{value:"Headset",children:"Headset"}),e.jsx(he,{value:"Keyboard",children:"Keyboard"}),e.jsx(he,{value:"Laptop",children:"Laptop"}),e.jsx(he,{value:"Megaphone",children:"Megaphone"}),e.jsx(he,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(he,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(he,{value:"Microphone",children:"Microphone"}),e.jsx(he,{value:"Modem",children:"Modem"}),e.jsx(he,{value:"Monitor",children:"Monitor"}),e.jsx(he,{value:"Mouse",children:"Mouse"}),e.jsx(he,{value:"Others",children:"Others"}),e.jsx(he,{value:"Pedestal",children:"Pedestal"}),e.jsx(he,{value:"Podium",children:"Podium"}),e.jsx(he,{value:"Printer",children:"Printer"}),e.jsx(he,{value:"Radio",children:"Radio"}),e.jsx(he,{value:"Router",children:"Router"}),e.jsx(he,{value:"Search Stick",children:"Search Stick"}),e.jsx(he,{value:"Searchlight",children:"Searchlight"}),e.jsx(he,{value:"Smartphone",children:"Smartphone"}),e.jsx(he,{value:"Speaker",children:"Speaker"}),e.jsx(he,{value:"Switch",children:"Switch"}),e.jsx(he,{value:"System Unit",children:"System Unit"}),e.jsx(he,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(he,{value:"UPS",children:"UPS"})]})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:e.jsx(ge,{size:"medium",placeholder:"Enter brand name"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",tooltip:"Optional - Leave empty if there no remarks",children:e.jsx(ge.TextArea,{size:"medium",rows:3,placeholder:"Enter any additional remarks"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Serial Number"}),name:"serialNumber",tooltip:"Optional - Leave empty if item has no serial number",children:e.jsx(ge,{size:"medium",onChange:k,placeholder:"Enter serial number (optional)"})}),(!O||j)&&e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Quantity"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity!"},{validator:(T,B)=>!B||B<1?Promise.reject("Quantity must be at least 1"):Promise.resolve()}],children:e.jsx(ge,{size:"medium",type:"number",min:1,placeholder:"Enter quantity"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(at,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select issued date"})})]})}),e.jsx(St,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Purchased Date"}),name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:e.jsx(at,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select purchase date"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:e.jsxs(re,{size:"medium",placeholder:"Select condition",children:[e.jsx(he,{value:"Brand New",children:"Brand New"}),e.jsx(he,{value:"Good Condition",children:"Good Condition"}),e.jsx(he,{value:"Defective",children:"Defective"})]})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Detachment/Office"}),name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:e.jsxs(re,{size:"medium",onChange:T=>l(T==="Head Office"),placeholder:"Select location type",children:[e.jsx(he,{value:"Head Office",children:"Head Office"}),e.jsx(he,{value:"Other",children:"Other (Specify Below)"})]})}),o&&e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department!"}],children:e.jsxs(re,{size:"medium",placeholder:"Select department",children:[e.jsx(he,{value:"SOD",children:"SOD"}),e.jsx(he,{value:"CID",children:"CID"}),e.jsx(he,{value:"GAD",children:"GAD"}),e.jsx(he,{value:"HRD",children:"HRD"}),e.jsx(he,{value:"AFD",children:"AFD"}),e.jsx(he,{value:"EOD",children:"EOD"}),e.jsx(he,{value:"BDO",children:"BDO"})]})}),!o&&e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a location!"}],children:e.jsx(ge,{size:"medium",placeholder:"Enter specific location"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status!"}],children:e.jsxs(re,{size:"medium",placeholder:"Select status",children:[e.jsx(he,{value:"On Stock",children:"On Stock"}),e.jsx(he,{value:"Deployed",children:"Deployed"}),e.jsx(he,{value:"For Repair",children:"For Repair"})]})}),e.jsx(L.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(Oe,{type:"primary",htmlType:"submit",icon:e.jsx(xn,{}),size:"small",style:{background:"var(--theme-card-head-bg, #5fe7a7)",border:"none",borderRadius:"6px",padding:"6px",height:"auto",fontSize:"12px",fontWeight:"600",color:"black"},children:"Update Item"})})})]})})]})})})})})]})},{Option:ct}=re,{Title:Ul}=Ht,Gl=({visible:t,onClose:a,item:r,onEdit:s,isLoading:i})=>{const[o]=L.useForm(),[l,u]=n.useState(!1),{logUserActivity:p}=ft(),{logUserNotification:f}=ht(),d=Jt(),j=Zt(),y=()=>{const b=d.token&&d.userData,w=j.token&&j.userData;if(b)return d.userData;if(w)return j.userData;const h=Ut.get("username"),S=Ut.get("user_id");return h&&S?{username:h,id:S}:null};n.useEffect(()=>{var b;if(t&&r){const w=(b=r.location)==null?void 0:b.includes("Head Office");u(w);let h="Other",S,C;if(w){h="Head Office";const I=r.location.split(" - ");I.length>1&&(S=I[1])}else C=r.location;o.setFieldsValue({type:r.type,brand:r.brand,originalQuantity:r.quantity,quantity:1,condition:r.condition,status:r.status,remarks:r.remarks,locationType:h,department:S,location:C,issuedDate:r.issuedDate?Be(r.issuedDate):void 0})}},[t,r,o]);const O=async b=>{var w;try{if(!r)return;const S=(await Pt()).find(E=>E.id===r.id);if(!S){va.error("Item not found in inventory.");return}if(S.quantity===1){va.warning("Cannot redistribute item with quantity of 1.");return}if(!b.quantity||b.quantity<=0||b.quantity>=S.quantity){va.error("New quantity must be greater than 0 and less than existing quantity.");return}const C=b.locationType==="Head Office"?`Head Office - ${b.department}`:b.location,I=b.issuedDate?Be(b.issuedDate).format("YYYY-MM-DD"):null,$={id:S.id,newQuantity:b.quantity,newLocation:C,issuedDate:I,condition:b.condition,status:b.status,remarks:((w=b.remarks)==null?void 0:w.trim())||null};await s($);const A=y();A&&(await p(A.username,"Item Redistributed",`Item "${S.type}" has been redistributed to ${C} with quantity ${b.quantity}.`),await f("Item Redistributed",`Item "${S.type}" has been redistributed to ${C} with quantity ${b.quantity}.`)),o.resetFields(),a()}catch(h){console.error(h),va.error("Failed to redistribute item.")}},M=()=>{o.resetFields(),u(!1),a()};return e.jsx(ot,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(Ul,{level:3,className:"mb-0 font-semibold",children:"Redistribute Item"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Create a new item from existing stock"})]}),open:t,onCancel:M,footer:null,width:1e3,className:"custom-card",styles:{body:{padding:0},header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"var(--theme-card-head-bg, #5fe7a7)",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsx("div",{className:"p-8 bg-gray-50",children:e.jsx(fa,{className:"shadow-lg border-0",children:e.jsx(L,{form:o,onFinish:O,layout:"vertical",children:e.jsxs(sa,{gutter:[32,24],children:[e.jsx(St,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Type is required"}],children:e.jsx(ge,{disabled:!0,size:"medium"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Brand is required"}],children:e.jsx(ge,{disabled:!0,size:"medium"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Original Quantity"}),name:"originalQuantity",rules:[{required:!0,message:"Original quantity is required"}],children:e.jsx(ge,{disabled:!0,size:"medium"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"New Quantity to Redistribute"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity to redistribute"},{validator:(b,w)=>!w||w<1?Promise.reject("Quantity must be at least 1"):w>=(r==null?void 0:r.quantity)?Promise.reject(`Quantity must be less than ${r==null?void 0:r.quantity}`):Promise.resolve()}],children:e.jsx(ge,{size:"medium",type:"number",min:1,max:r!=null&&r.quantity?r.quantity-1:1,placeholder:"Enter quantity"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",children:e.jsx(ge.TextArea,{size:"medium",rows:3,placeholder:"Enter remarks (optional)"})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",children:e.jsx(at,{size:"medium",format:"YYYY-MM-DD",className:"w-full",placeholder:"Select date"})})]})}),e.jsx(St,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition"}],children:e.jsxs(re,{size:"medium",placeholder:"Select condition",children:[e.jsx(ct,{value:"Brand New",children:"Brand New"}),e.jsx(ct,{value:"Good Condition",children:"Good Condition"}),e.jsx(ct,{value:"Defective",children:"Defective"})]})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status"}],children:e.jsxs(re,{size:"medium",placeholder:"Select status",children:[e.jsx(ct,{value:"On Stock",children:"On Stock"}),e.jsx(ct,{value:"Deployed",children:"Deployed"}),e.jsx(ct,{value:"For Repair",children:"For Repair"})]})}),e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Location Type"}),name:"locationType",rules:[{required:!0,message:"Please select a location type"}],children:e.jsxs(re,{size:"medium",placeholder:"Select location type",onChange:b=>u(b==="Head Office"),children:[e.jsx(ct,{value:"Head Office",children:"Head Office"}),e.jsx(ct,{value:"Other",children:"Other (Specify)"})]})}),l?e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department"}],children:e.jsxs(re,{size:"medium",placeholder:"Select department",children:[e.jsx(ct,{value:"SOD",children:"SOD"}),e.jsx(ct,{value:"CID",children:"CID"}),e.jsx(ct,{value:"GAD",children:"GAD"}),e.jsx(ct,{value:"HRD",children:"HRD"}),e.jsx(ct,{value:"AFD",children:"AFD"}),e.jsx(ct,{value:"EOD",children:"EOD"}),e.jsx(ct,{value:"BDO",children:"BDO"})]})}):e.jsx(L.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a specific location"}],children:e.jsx(ge,{size:"medium",placeholder:"Enter location"})}),e.jsx(L.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(Oe,{type:"primary",htmlType:"submit",icon:e.jsx(Ra,{}),loading:i,disabled:i,size:"small",style:{background:"var(--theme-card-head-bg, #5fe7a7)",border:"none",borderRadius:"6px",padding:"6px",height:"auto",fontSize:"12px",fontWeight:"600",color:"black"},children:"Redistribute"})})})]})})]})})})})})},{Option:yt}=re,Bn=["SOD","CID","GAD","HRD","AFD","EOD","BDO"],Wl=()=>`row-${Date.now()}-${Math.random().toString(36).slice(2,11)}`,Ja=()=>({uid:Wl(),type:"",brand:"",quantity:1,remarks:"",serialNumber:"",issuedDate:"",purchaseDate:"",condition:"",locationType:"Head Office",department:"SOD",location:"",status:"",showQuantityWithSerial:!1}),Fn=["AVR","Battery","Biometrics","Camera","CCTV","Charger","Guard Tour Chips","Guard Tour System","Headset","Keyboard","Laptop","Megaphone","WIFI-Mesh","Metal Detector","Microphone","Modem","Monitor","Mouse","Others","Pedestal","Podium","Printer","Radio","Router","Search Stick","Searchlight","Smartphone","Speaker","Switch","System Unit","Under Chassis","UPS"],Vn=["Brand New","Good Condition","Defective"],_n=["On Stock","For Repair","Deployed"];function Kl({visible:t,onClose:a,onBatchAdd:r,loading:s}){const{message:i}=Xt.useApp(),[o,l]=n.useState([Ja()]),[u,p]=n.useState(1),[f,d]=n.useState(!1),[j,y]=n.useState([]),[O,M]=n.useState(null),[b,w]=n.useState(!1),[h,S]=n.useState([]),[C,I]=n.useState({type:"",condition:"",status:"",locationType:"Head Office",department:"SOD",location:"",purchaseDate:"",issuedDate:""}),{logUserActivity:$}=ft(),{logUserNotification:A}=ht();n.useEffect(()=>{t&&E()},[t]);const E=async()=>{try{const c=await Pt();y(c.map(g=>g.serialNumber).filter(Boolean))}catch{y([])}},P=(c,g,D)=>{l(R=>R.map((H,_)=>_!==c?H:g==="serialNumber"?(D&&!H.showQuantityWithSerial&&H.serialNumber===""&&M(c),D===""?{...H,serialNumber:"",showQuantityWithSerial:!1,quantity:1}:{...H,serialNumber:D}):{...H,[g]:D}))},V=()=>{O!==null&&(l(c=>c.map((g,D)=>D===O?{...g,showQuantityWithSerial:!0}:g)),M(null))},v=()=>{O!==null&&(l(c=>c.map((g,D)=>D===O?{...g,showQuantityWithSerial:!1,quantity:1}:g)),M(null))},k=(c,g,D)=>{l(R=>R.map((H,_)=>_===c?{...H,[g]:D?Be(D).format("YYYY-MM-DD"):""}:H))},F=()=>{l(c=>[...c,...Array.from({length:Math.max(1,Math.min(u,100))},()=>Ja())]),p(1)},Y=c=>l(g=>g.length>1?g.filter((D,R)=>R!==c):g),T=c=>!(!c.type||!c.brand||c.quantity<=0||!c.condition||!c.status||!c.locationType||!c.purchaseDate||c.locationType==="Head Office"&&!c.department||c.locationType==="Other"&&!c.location),B=c=>c.locationType==="Head Office"?`Head Office - ${c.department}`:c.locationType==="Other"?c.location:"",z=()=>l([Ja()]),K=async()=>{d(!0);let c=!0;const g=Be().startOf("day");for(const _ of o){if(!T(_)){c=!1;break}if(_.purchaseDate&&Be(_.purchaseDate).isAfter(g,"day")){i.error("Purchase date cannot be in the future."),d(!1);return}}if(!c){i.error("Please fill all required fields for each item."),d(!1);return}const D=o.map(_=>_.serialNumber).filter(Boolean),R=new Set;for(const _ of D){if(R.has(_)){i.error(`Duplicate serial number in batch: ${_}`),d(!1);return}if(R.add(_),j.includes(_)){i.error(`Serial number already exists: ${_}`),d(!1);return}}const H=o.map(_=>{let Z=_.purchaseDate?Be(_.purchaseDate).format("YYYY-MM-DD"):"",Me=_.issuedDate?Be(_.issuedDate).format("YYYY-MM-DD"):"";return{type:_.type,brand:_.brand,quantity:_.serialNumber&&!_.showQuantityWithSerial?1:Math.max(1,_.quantity||1),serialNumber:_.serialNumber||"",issuedDate:Me,purchaseDate:Z,condition:_.condition,location:B(_),status:_.status,remarks:_.remarks||""}});try{await r(H),i.success(`${H.length} item(s) added successfully!`),$("Batch Add",`Added ${H.length} item(s) to inventory.`),A("Batch Add",`Added ${H.length} item(s) to inventory.`),z(),d(!1),a()}catch{i.error("Failed to add items."),d(!1)}},G=()=>{z(),a()},ee=()=>{if(h.length===0){i.warning("Please select at least one row to apply batch operations.");return}w(!0)},Q=()=>{const c=o.map(g=>{if(h.includes(g.uid)){const D={...g};return C.type&&(D.type=C.type),C.condition&&(D.condition=C.condition),C.status&&(D.status=C.status),C.locationType&&(D.locationType=C.locationType,C.locationType==="Head Office"&&C.department?D.department=C.department:C.locationType==="Other"&&C.location&&(D.location=C.location)),C.purchaseDate&&(D.purchaseDate=C.purchaseDate),C.issuedDate&&(D.issuedDate=C.issuedDate),D}return g});l(c),w(!1),S([]),i.success(`Applied batch values to ${h.length} item(s)`)},J=()=>{h.length===o.length?S([]):S(o.map(c=>c.uid))},x=()=>{l(c=>c.length>1?c.filter(g=>!h.includes(g.uid)):c),S([])},N={selectedRowKeys:h,onChange:c=>S(c),getCheckboxProps:c=>({disabled:!1})},m=[{title:"Type",dataIndex:"type",className:"text-xs",render:(c,g,D)=>e.jsx(re,{value:c,onChange:R=>P(D,"type",R),style:{minWidth:170},size:"small",className:"text-xs",children:Fn.map(R=>e.jsx(yt,{value:R,children:e.jsx("span",{className:"text-xs",children:R})},R))})},{title:"Brand",dataIndex:"brand",className:"text-xs",render:(c,g,D)=>e.jsx(ge,{className:"text-xs",value:c,onChange:R=>P(D,"brand",R.target.value),size:"small",placeholder:"Enter brand name"})},{title:"Serial Number",dataIndex:"serialNumber",className:"text-xs",render:(c,g,D)=>e.jsx(ge,{className:"text-xs",value:c,onChange:R=>P(D,"serialNumber",R.target.value),size:"small",placeholder:"Enter serial number"})},{title:"Qty",dataIndex:"quantity",className:"text-xs",render:(c,g,D)=>e.jsx(ge,{type:"number",min:1,value:g.quantity,onChange:R=>P(D,"quantity",Number(R.target.value)),size:"small",style:{width:60},disabled:g.serialNumber&&!g.showQuantityWithSerial,className:"text-xs"})},{title:"Remarks",dataIndex:"remarks",className:"text-xs",render:(c,g,D)=>e.jsx(ge.TextArea,{value:c,onChange:R=>P(D,"remarks",R.target.value),size:"small",rows:3,placeholder:"Enter any additional remarks",className:"text-xs"})},{title:"Issued Date",dataIndex:"issuedDate",className:"text-xs",render:(c,g,D)=>e.jsx(at,{value:c?Be(c,"YYYY-MM-DD"):null,onChange:R=>k(D,"issuedDate",R),format:"YYYY-MM-DD",size:"small",style:{width:120},allowClear:!0,className:"text-xs"})},{title:"Purchased Date",dataIndex:"purchaseDate",className:"text-xs",render:(c,g,D)=>e.jsx(at,{value:c?Be(c,"YYYY-MM-DD"):null,onChange:R=>k(D,"purchaseDate",R),format:"YYYY-MM-DD",size:"small",style:{width:120},allowClear:!0,className:"text-xs"})},{title:"Condition",dataIndex:"condition",className:"text-xs",render:(c,g,D)=>e.jsx(re,{value:c,onChange:R=>P(D,"condition",R),style:{minWidth:150},size:"small",className:"text-xs",children:Vn.map(R=>e.jsx(yt,{value:R,children:e.jsx("span",{className:"text-xs",children:R})},R))})},{title:"Detachment/Office",dataIndex:"locationType",className:"text-xs",render:(c,g,D)=>e.jsxs("div",{style:{minWidth:200},children:[e.jsxs(re,{value:c,onChange:R=>P(D,"locationType",R),size:"small",placeholder:"Select location type",style:{width:150,marginBottom:4},className:"text-xs",children:[e.jsxs(yt,{value:"Head Office",children:[" ",e.jsx("span",{className:"text-xs",children:"Head Office"})]}),e.jsx(yt,{value:"Other",children:e.jsx("span",{className:"text-xs",children:"Other (Specify Below)"})})]}),g.locationType==="Head Office"&&e.jsx(re,{value:g.department,onChange:R=>P(D,"department",R),size:"small",placeholder:"Select department",style:{width:150,marginTop:4},className:"text-xs",children:Bn.map(R=>e.jsx(yt,{value:R,children:e.jsx("span",{className:"text-xs",children:R})},R))}),g.locationType==="Other"&&e.jsx(ge,{value:g.location,onChange:R=>P(D,"location",R.target.value),size:"small",placeholder:"Enter specific location",style:{width:140,marginTop:4},className:"text-xs"})]})},{title:"Status",dataIndex:"status",className:"text-xs",render:(c,g,D)=>e.jsx(re,{value:c,onChange:R=>P(D,"status",R),style:{minWidth:100},size:"small",className:"text-xs",children:_n.map(R=>e.jsx(yt,{value:R,children:e.jsx("span",{className:"text-xs",children:R})},R))})},{title:"Action",dataIndex:"action",className:"text-xs",render:(c,g,D)=>e.jsx(Oe,{danger:!0,className:"text-xs",size:"small",onClick:()=>Y(D),disabled:o.length===1,children:"Remove"})}];return e.jsxs(e.Fragment,{children:[e.jsx(ot,{open:O!==null,onOk:V,onCancel:v,title:"Serial Number Quantity",okText:"Yes",cancelText:"No",centered:!0,children:"Does the item you want to add have only 1 serial number but has many quantities?"}),e.jsx(ot,{open:b,title:"Batch Apply Values",onCancel:()=>w(!1),onOk:Q,okText:"Apply to Selected",width:600,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:" text-gray-600 mb-4",children:["Apply the following values to ",h.length," selected item(s):"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Type"}),e.jsx(re,{value:C.type,onChange:c=>I(g=>({...g,type:c})),placeholder:"Select type",allowClear:!0,style:{width:"100%"},children:Fn.map(c=>e.jsx(yt,{value:c,children:c},c))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block  font-medium mb-1",children:"Condition"}),e.jsx(re,{value:C.condition,onChange:c=>I(g=>({...g,condition:c})),placeholder:"Select condition",allowClear:!0,style:{width:"100%"},children:Vn.map(c=>e.jsx(yt,{value:c,children:c},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block  font-medium mb-1",children:"Status"}),e.jsx(re,{value:C.status,onChange:c=>I(g=>({...g,status:c})),placeholder:"Select status",allowClear:!0,style:{width:"100%"},children:_n.map(c=>e.jsx(yt,{value:c,children:c},c))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium mb-1",children:"Location Type"}),e.jsxs(re,{value:C.locationType,onChange:c=>I(g=>({...g,locationType:c})),placeholder:"Select location type",style:{width:"100%"},children:[e.jsx(yt,{value:"Head Office",children:"Head Office"}),e.jsx(yt,{value:"Other",children:"Other (Specify Below)"})]})]}),C.locationType==="Head Office"&&e.jsxs("div",{children:[e.jsx("label",{className:"block  font-medium mb-1",children:"Department"}),e.jsx(re,{value:C.department,onChange:c=>I(g=>({...g,department:c})),placeholder:"Select department",style:{width:"100%"},children:Bn.map(c=>e.jsx(yt,{value:c,children:c},c))})]}),C.locationType==="Other"&&e.jsxs("div",{children:[e.jsx("label",{className:"block  font-medium mb-1",children:"Location"}),e.jsx(ge,{value:C.location,onChange:c=>I(g=>({...g,location:c.target.value})),placeholder:"Enter specific location"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block  font-medium mb-1",children:"Purchase Date"}),e.jsx(at,{value:C.purchaseDate?Be(C.purchaseDate):null,onChange:c=>I(g=>({...g,purchaseDate:c?Be(c).format("YYYY-MM-DD"):""})),format:"YYYY-MM-DD",style:{width:"100%"},allowClear:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block  font-medium mb-1",children:"Issued Date"}),e.jsx(at,{value:C.issuedDate?Be(C.issuedDate):null,onChange:c=>I(g=>({...g,issuedDate:c?Be(c).format("YYYY-MM-DD"):""})),format:"YYYY-MM-DD",style:{width:"100%"},allowClear:!0})]})]})]})}),e.jsxs(ot,{open:t,title:"Batch Add Items",onCancel:G,onOk:K,okText:"Submit All",confirmLoading:f||s,width:1500,footer:[e.jsxs("span",{className:"flex flex-col justify-end sm:flex-row gap-2",children:[e.jsx(Tr,{min:1,max:100,value:u,onChange:p,size:"small",style:{width:60},disabled:f||s}),e.jsxs(Oe,{size:"small",onClick:F,className:"custom-button text-xs",disabled:f||s,children:["Add Row",u>1?`s (${u})`:""]}),e.jsxs(Oe,{size:"small",danger:!0,onClick:x,className:"text-xs",disabled:f||s||h.length===0,children:["Remove Selected (",h.length,")"]},"remove-selected"),e.jsxs(Oe,{size:"small",onClick:ee,className:"custom-button text-xs",disabled:f||s||h.length===0,children:["Batch Apply (",h.length,")"]},"batch"),e.jsx(Oe,{size:"small",onClick:G,className:"custom-button-cancel text-xs",disabled:f||s,children:"Cancel"},"cancel"),e.jsx(Oe,{size:"small",type:"primary",className:"custom-button text-xs",onClick:K,loading:f||s,children:"Submit All"},"submit")]},"add-row-group")],children:[e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:" text-blue-800",children:[e.jsx("strong",{children:"Smart Batch Operations:"}),' Select rows and use "Batch Apply" to set common values for multiple items at once.']}),e.jsxs(fr,{checked:h.length===o.length&&o.length>0,indeterminate:h.length>0&&h.length<o.length,onChange:J,className:"text-xs",children:["Select All (",h.length,"/",o.length,")"]})]})}),e.jsx(Gt,{bordered:!0,dataSource:o,columns:m,rowKey:c=>c.uid,pagination:!1,size:"small",scroll:{x:"max-content",y:600},responsive:["sm","md","lg","xl","xxl"],rowSelection:N,rowClassName:c=>h.includes(c.uid)?"bg-blue-50":""}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"* Required fields: Type, Brand, Qty, Purchased Date, Condition, Status, Detachment/Office"})]})]})}const{Option:jt}=re,qn=["SOD","CID","GAD","HRD","AFD","EOD","BDO"],Ql=["AVR","Battery","Biometrics","Camera","CCTV","Charger","Guard Tour Chips","Guard Tour System","Headset","Keyboard","Laptop","Megaphone","WIFI-Mesh","Metal Detector","Microphone","Modem","Monitor","Mouse","Others","Pedestal","Podium","Printer","Radio","Router","Search Stick","Searchlight","Smartphone","Speaker","Switch","System Unit","Under Chassis","UPS"],Hn=["Brand New","Good Condition","Defective"],zn=["On Stock","For Repair","Deployed"];function Xl({visible:t,onClose:a,onBatchEdit:r,loading:s,selectedItems:i}){const{message:o}=Xt.useApp(),[l,u]=n.useState([]),[p,f]=n.useState([]),[d,j]=n.useState(!1),[y,O]=n.useState(null),[M,b]=n.useState(!1),[w,h]=n.useState([]),[S,C]=n.useState({condition:"",status:"",locationType:"Head Office",department:"SOD",location:"",purchaseDate:"",issuedDate:""}),{logUserActivity:I}=ft(),{logUserNotification:$}=ht();n.useEffect(()=>{if(t){const x=i.map(N=>{let m="",c="",g="";return N.location&&N.location.startsWith("Head Office - ")?(m="Head Office",c=N.location.replace("Head Office - ",""),g=""):(m="Other",c="",g=N.location||""),{...N,locationType:m,department:c,location:g,showQuantityWithSerial:!!N.serialNumber,lastSerialModalValue:"",serialModalShownForCurrentInput:!1}});u(x),f(JSON.parse(JSON.stringify(x)))}},[t,i]);const A=(x,N)=>{const m=["type","brand","serialNumber","quantity","remarks","issuedDate","purchaseDate","condition","status","locationType","department","location"];for(const c of m){const g=x[c],D=N[c];if(c==="issuedDate"||c==="purchaseDate"){if((g&&g!=="0000-00-00"?g:"")!==(D&&D!=="0000-00-00"?D:""))return!0}else if(g!==D)return!0}return!1},E=()=>l.filter((x,N)=>A(x,p[N])),P=(x,N,m)=>{u(c=>c.map((g,D)=>D!==x?g:N==="serialNumber"?m&&!g.showQuantityWithSerial&&!g.serialModalShownForCurrentInput?(O(x),{...g,serialNumber:m,lastSerialModalValue:m,serialModalShownForCurrentInput:!0}):m===""?{...g,serialNumber:"",showQuantityWithSerial:!1,quantity:1,lastSerialModalValue:"",serialModalShownForCurrentInput:!1}:{...g,serialNumber:m}:{...g,[N]:m}))},V=()=>{y!==null&&(u(x=>x.map((N,m)=>m===y?{...N,showQuantityWithSerial:!0}:N)),O(null))},v=()=>{y!==null&&(u(x=>x.map((N,m)=>m===y?{...N,showQuantityWithSerial:!1,quantity:1}:N)),O(null))},k=(x,N,m)=>{u(c=>c.map((g,D)=>D===x?{...g,[N]:m?Be(m).format("YYYY-MM-DD"):""}:g))},F=x=>!(!x.type||!x.brand||x.quantity<=0||!x.condition||!x.status||!x.locationType||x.locationType==="Head Office"&&!x.department||x.locationType==="Other"&&!x.location),Y=x=>x.locationType==="Head Office"?`Head Office - ${x.department}`:x.locationType==="Other"?x.location:"",T=async()=>{j(!0);const x=E(),N=l.length-x.length;if(x.length===0){o.warning("No changes detected. All items remain unchanged."),j(!1);return}N>0&&o.info(`${N} item(s) had no changes and were not updated.`);let m=!0;for(const g of x)if(!F(g)){m=!1;break}if(!m){o.error("Please fill all required fields for each changed item."),j(!1);return}const c=x.map(g=>{const D={...g,location:Y(g),quantity:g.serialNumber&&!g.showQuantityWithSerial?1:g.quantity};return delete D.locationType,delete D.department,delete D.showQuantityWithSerial,D});try{await r(c),o.success(`${c.length} item(s) updated successfully!`),I("Batch Edit",`Edited ${c.length} item(s) in inventory.`),$("Batch Edit",`Edited ${c.length} item(s) in inventory.`),a()}catch{o.error("Failed to update some items.")}finally{j(!1)}},B=[{title:"ID",dataIndex:"id",width:120,className:"text-xs",render:(x,N,m)=>e.jsxs("div",{children:[e.jsx("div",{children:x}),A(N,p[m])&&e.jsx(_t,{color:"blue",size:"small",children:"Modified"})]})},{title:"Type",dataIndex:"type",className:"text-xs",render:(x,N,m)=>e.jsx(re,{value:x,onChange:c=>P(m,"type",c),style:{minWidth:170},size:"small",className:"text-xs",children:Ql.map(c=>e.jsx(jt,{value:c,children:e.jsx("span",{className:"text-xs",children:c})},c))})},{title:"Brand",dataIndex:"brand",className:"text-xs",render:(x,N,m)=>e.jsx(ge,{value:x,className:"text-xs",onChange:c=>P(m,"brand",c.target.value),size:"small",placeholder:"Enter brand name"})},{title:"Serial Number",dataIndex:"serialNumber",className:"text-xs",render:(x,N,m)=>e.jsx(ge,{value:x,className:"text-xs",onChange:c=>P(m,"serialNumber",c.target.value),size:"small",placeholder:"Enter serial number"})},{title:"Qty",dataIndex:"quantity",className:"text-xs",render:(x,N,m)=>e.jsx(ge,{type:"number",min:1,value:N.quantity,onChange:c=>P(m,"quantity",Number(c.target.value)),size:"small",style:{width:60},className:"text-xs",disabled:N.serialNumber&&!N.showQuantityWithSerial})},{title:"Remarks",dataIndex:"remarks",className:"text-xs",render:(x,N,m)=>e.jsx(ge.TextArea,{value:x,onChange:c=>P(m,"remarks",c.target.value),size:"small",rows:3,className:"text-xs",placeholder:"Enter any additional remarks"})},{title:"Issued Date",dataIndex:"issuedDate",className:"text-xs",render:(x,N,m)=>e.jsx(at,{value:x&&x!=="0000-00-00"&&x!==""?Be(x,"YYYY-MM-DD"):null,onChange:c=>k(m,"issuedDate",c),format:"YYYY-MM-DD",size:"small",className:"text-xs",style:{width:120},allowClear:!0})},{title:"Purchased Date",dataIndex:"purchaseDate",className:"text-xs",render:(x,N,m)=>e.jsx(at,{value:x&&x!=="0000-00-00"&&x!==""?Be(x,"YYYY-MM-DD"):null,onChange:c=>k(m,"purchaseDate",c),format:"YYYY-MM-DD",size:"small",style:{width:120},allowClear:!0,className:"text-xs"})},{title:"Condition",dataIndex:"condition",className:"text-xs",render:(x,N,m)=>e.jsx(re,{value:x,onChange:c=>P(m,"condition",c),style:{minWidth:150},size:"small",className:"text-xs",children:Hn.map(c=>e.jsx(jt,{value:c,children:e.jsx("span",{className:"text-xs",children:c})},c))})},{title:"Detachment/Office",dataIndex:"locationType",className:"text-xs",render:(x,N,m)=>e.jsxs("div",{style:{minWidth:200},children:[e.jsxs(re,{value:x,onChange:c=>P(m,"locationType",c),size:"small",placeholder:"Select location type",className:"text-xs",style:{width:150,marginBottom:4},children:[e.jsx(jt,{value:"Head Office",children:e.jsx("span",{className:"text-xs",children:"Head Office"})}),e.jsx(jt,{value:"Other",children:e.jsx("span",{className:"text-xs",children:"Other (Specify Below)"})})]}),N.locationType==="Head Office"&&e.jsx(re,{value:N.department,onChange:c=>P(m,"department",c),size:"small",placeholder:"Select department",style:{width:150,marginTop:4},children:qn.map(c=>e.jsx(jt,{value:c,children:e.jsx("span",{className:"text-xs",children:c})},c))}),N.locationType==="Other"&&e.jsx(ge,{value:N.location,onChange:c=>P(m,"location",c.target.value),size:"small",placeholder:"Enter specific location",style:{width:140,marginTop:4},className:"text-xs"})]})},{title:"Status",dataIndex:"status",render:(x,N,m)=>e.jsx(re,{value:x,onChange:c=>P(m,"status",c),style:{minWidth:100},size:"small",children:zn.map(c=>e.jsx(jt,{value:c,children:e.jsx("span",{className:"text-xs",children:c})},c))})}],z=()=>{if(w.length===0){o.warning("Please select at least one row to apply batch operations.");return}b(!0)},K=()=>{const x=l.map(N=>{if(w.includes(N.id)){const m={...N};return S.condition&&(m.condition=S.condition),S.status&&(m.status=S.status),S.locationType&&(m.locationType=S.locationType,S.locationType==="Head Office"&&S.department?m.department=S.department:S.locationType==="Other"&&S.location&&(m.location=S.location)),S.purchaseDate&&(m.purchaseDate=S.purchaseDate),S.issuedDate&&(m.issuedDate=S.issuedDate),m}return N});u(x),b(!1),h([]),o.success(`Applied batch values to ${w.length} item(s)`)},G=()=>{w.length===l.length?h([]):h(l.map(x=>x.id))},ee={selectedRowKeys:w,onChange:x=>h(x),getCheckboxProps:x=>({disabled:!1})},Q=E().length,J=l.length;return e.jsxs(e.Fragment,{children:[e.jsx(ot,{open:y!==null,onOk:V,onCancel:v,title:"Serial Number Quantity",okText:"Yes",cancelText:"No",centered:!0,children:"Does the item you want to edit have only 1 serial number but has many quantities?"}),e.jsx(ot,{open:M,title:"Batch Apply Values",onCancel:()=>b(!1),onOk:K,okText:"Apply to Selected",width:600,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Apply the following values to ",w.length," selected item(s):"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Condition"}),e.jsx(re,{value:S.condition,onChange:x=>C(N=>({...N,condition:x})),placeholder:"Select condition",allowClear:!0,style:{width:"100%"},children:Hn.map(x=>e.jsx(jt,{value:x,children:x},x))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),e.jsx(re,{value:S.status,onChange:x=>C(N=>({...N,status:x})),placeholder:"Select status",allowClear:!0,style:{width:"100%"},children:zn.map(x=>e.jsx(jt,{value:x,children:x},x))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location Type"}),e.jsxs(re,{value:S.locationType,onChange:x=>C(N=>({...N,locationType:x})),placeholder:"Select location type",style:{width:"100%"},children:[e.jsx(jt,{value:"Head Office",children:"Head Office"}),e.jsx(jt,{value:"Other",children:"Other (Specify Below)"})]})]}),S.locationType==="Head Office"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Department"}),e.jsx(re,{value:S.department,onChange:x=>C(N=>({...N,department:x})),placeholder:"Select department",style:{width:"100%"},children:qn.map(x=>e.jsx(jt,{value:x,children:x},x))})]}),S.locationType==="Other"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),e.jsx(ge,{value:S.location,onChange:x=>C(N=>({...N,location:x.target.value})),placeholder:"Enter specific location"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Purchase Date"}),e.jsx(at,{value:S.purchaseDate?Be(S.purchaseDate):null,onChange:x=>C(N=>({...N,purchaseDate:x?Be(x).format("YYYY-MM-DD"):""})),format:"YYYY-MM-DD",style:{width:"100%"},allowClear:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Issued Date"}),e.jsx(at,{value:S.issuedDate?Be(S.issuedDate):null,onChange:x=>C(N=>({...N,issuedDate:x?Be(x).format("YYYY-MM-DD"):""})),format:"YYYY-MM-DD",style:{width:"100%"},allowClear:!0})]})]})]})}),e.jsxs(ot,{open:t,title:"Batch Edit Items",onCancel:a,onOk:T,okText:"Submit All",confirmLoading:d||s,width:1500,footer:[e.jsxs(Oe,{size:"small",onClick:z,className:"custom-button text-xs",disabled:d||s||w.length===0,children:["Batch Apply (",w.length,")"]},"batch"),e.jsx(Oe,{size:"small",onClick:a,className:"custom-button-cancel text-xs",disabled:d||s,children:"Cancel"},"cancel"),e.jsxs(Oe,{size:"small",type:"primary",className:"custom-button text-xs",onClick:T,loading:d||s,children:["Submit ",Q>0?`(${Q}/${J})`:""]},"submit")],children:[e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Change Detection:"})," ",Q," of ",J," items have changes.",Q===0&&" No changes detected - only modified items will be submitted."]}),e.jsxs(fr,{checked:w.length===l.length&&l.length>0,indeterminate:w.length>0&&w.length<l.length,onChange:G,className:"text-xs",children:["Select All (",w.length,"/",l.length,")"]})]})}),e.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded",children:e.jsxs("div",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Smart Batch Operations:"}),' Select rows and use "Batch Apply" to set common values for multiple items at once.']})}),e.jsx(Gt,{bordered:!0,dataSource:l,columns:B,rowKey:x=>x.id,pagination:!1,size:"small",scroll:{x:"max-content",y:600},responsive:["sm","md","lg","xl","xxl"],rowSelection:ee,rowClassName:(x,N)=>{const m=A(x,p[N])?"bg-blue-50":"",c=w.includes(x.id)?"bg-green-50":"";return`${m} ${c}`.trim()}}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"* Required fields: Type, Brand, Qty, Purchased Date, Condition, Status, Detachment/Office"})]})]})}const{Text:Jl}=Ht;function Zl({visible:t,onClose:a,onConfirm:r,loading:s,status:i}){const[o,l]=n.useState([]),[u,p]=n.useState(""),[f,d]=n.useState([]),[j,y]=n.useState([]),[O,M]=n.useState(1),[b,w]=n.useState(10),[h,S]=n.useState(!1),{logUserActivity:C}=ft(),{logUserNotification:I}=ht();n.useEffect(()=>{t&&(S(!0),Pt().then(k=>{l(k),S(!1)}),p(""),d([]),y([]),M(1))},[t]);const $=n.useMemo(()=>u?o.filter(k=>Object.values(k).some(F=>String(F).toLowerCase().includes(u.toLowerCase()))):o,[o,u]),A=n.useMemo(()=>{const k=(O-1)*b;return $.slice(k,k+b)},[$,O,b]);n.useEffect(()=>{y(o.filter(k=>f.includes(k.id)))},[f,o]);const E=[{title:"ID",dataIndex:"id",key:"id",width:80,className:"text-xs"},{title:"Type",dataIndex:"type",key:"type",className:"text-xs",width:120},{title:"Brand",dataIndex:"brand",key:"brand",className:"text-xs",width:120},{title:"Qty",dataIndex:"quantity",key:"quantity",className:"text-xs",width:70},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",className:"text-xs",width:150},{title:"Remarks",dataIndex:"remarks",key:"remarks",className:"text-xs",width:150},{title:"Location",dataIndex:"location",key:"location",className:"text-xs",width:150},{title:"Status",dataIndex:"status",key:"status",width:100,className:"text-xs",render:k=>{let F;switch(k){case"On Stock":F="green";break;case"For Repair":F="volcano";break;case"Deployed":F="blue";break;default:F="gray"}return e.jsx(_t,{color:F,children:k})}}],P=[{title:"ID",dataIndex:"id",key:"id",className:"text-xs",width:80},{title:"Type",dataIndex:"type",key:"type",className:"text-xs",width:120},{title:"Brand",dataIndex:"brand",key:"brand",className:"text-xs",width:120},{title:"Qty",dataIndex:"quantity",key:"quantity",className:"text-xs",width:70},{title:"Remarks",dataIndex:"remarks",key:"remarks",className:"text-xs",width:150},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",className:"text-xs",width:150},{title:"Location",dataIndex:"location",key:"location",className:"text-xs",width:150},{title:"Status",dataIndex:"status",key:"status",width:100,className:"text-xs",render:k=>{let F;switch(k){case"On Stock":F="green";break;case"For Repair":F="volcano";break;case"Deployed":F="blue";break;default:F="gray"}return e.jsx(_t,{color:F,children:k})}},{title:"Remove",key:"remove",width:80,className:"text-xs",render:(k,F)=>e.jsx(Oe,{size:"small",danger:!0,onClick:()=>V(F.id),className:"text-xs",children:"Remove"})}],V=k=>{d(F=>F.filter(Y=>Y!==k))},v=()=>{j.length>=2&&(r(j),C("Batch Item Pick",`Picked ${j.length} item(s) for batch edit.`),I("Batch Item Pick",`Picked ${j.length} item(s) for batch edit.`))};return e.jsx(ot,{open:t,title:"Advanced Batch Item Selection",onCancel:a,width:1200,footer:[e.jsx(Oe,{size:"small",className:"custom-button-cancel text-xs",onClick:a,disabled:s||h,children:"Cancel"},"cancel"),e.jsxs(Oe,{size:"small",className:"custom-button text-xs",type:"primary",onClick:v,disabled:j.length<2||s||h,loading:s,children:["Proceed to Batch Edit (",j.length,")"]},"confirm")],children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(ge.Search,{placeholder:"Search items...",value:u,onChange:k=>p(k.target.value),allowClear:!0,style:{width:300},size:"small"}),e.jsx(Jl,{type:"secondary",className:"text-xs",children:"Select at least 2 items for batch edit."})]}),e.jsx(Gt,{bordered:!0,dataSource:A,columns:E,rowKey:"id",size:"small",loading:h,pagination:{current:O,pageSize:b,total:$.length,showSizeChanger:!0,pageSizeOptions:["10","20","30","50","100"],onChange:(k,F)=>{M(k),w(F)},className:"text-xs"},rowSelection:{selectedRowKeys:f,onChange:d,preserveSelectedRowKeys:!0},scroll:{x:"max-content",y:400},className:"text-xs"})]}),e.jsxs("div",{className:"w-full md:w-1/3 bg-gray-50 border border-gray-200 rounded p-3 overflow-auto",style:{maxHeight:500},children:[e.jsxs("div",{className:"mb-2 font-semibold text-base",children:["Selected Items Preview (",j.length,")"]}),e.jsx(Gt,{bordered:!0,dataSource:j,columns:P,rowKey:"id",size:"small",pagination:!1,scroll:{y:350},className:"text-xs",locale:{emptyText:"No items selected."}})]})]})})}const{Text:eo}=Ht;function to({visible:t,onClose:a,onConfirm:r,loading:s}){const[i,o]=n.useState([]),[l,u]=n.useState(""),[p,f]=n.useState([]),[d,j]=n.useState([]),[y,O]=n.useState(1),[M,b]=n.useState(10),[w,h]=n.useState(!1),{logUserActivity:S}=ft(),{logUserNotification:C}=ht();n.useEffect(()=>{t&&(h(!0),Pt().then(v=>{o(v),h(!1)}),u(""),f([]),j([]),O(1))},[t]);const I=n.useMemo(()=>l?i.filter(v=>Object.values(v).some(k=>String(k).toLowerCase().includes(l.toLowerCase()))):i,[i,l]),$=n.useMemo(()=>{const v=(y-1)*M;return I.slice(v,v+M)},[I,y,M]);n.useEffect(()=>{j(i.filter(v=>p.includes(v.id)))},[p,i]);const A=[{title:"ID",dataIndex:"id",key:"id",width:80,className:"text-xs"},{title:"Type",dataIndex:"type",key:"type",width:120,className:"text-xs"},{title:"Brand",dataIndex:"brand",key:"brand",width:120,className:"text-xs"},{title:"Qty",dataIndex:"quantity",key:"quantity",width:70,className:"text-xs"},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",width:150,className:"text-xs"},{title:"Remarks",dataIndex:"remarks",key:"remarks",width:150,className:"text-xs"},{title:"Location",dataIndex:"location",key:"location",width:150,className:"text-xs"},{title:"Status",dataIndex:"status",key:"status",width:100,className:"text-xs",render:v=>{let k;switch(v){case"On Stock":k="green";break;case"For Repair":k="volcano";break;case"Deployed":k="blue";break;default:k="gray"}return e.jsx(_t,{color:k,children:v})}}],E=[{title:"ID",dataIndex:"id",key:"id",width:80,className:"text-xs"},{title:"Type",dataIndex:"type",key:"type",width:120,className:"text-xs"},{title:"Brand",dataIndex:"brand",key:"brand",width:120,className:"text-xs"},{title:"Qty",dataIndex:"quantity",key:"quantity",width:70,className:"text-xs"},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",width:150,className:"text-xs"},{title:"Remarks",dataIndex:"remarks",key:"remarks",width:150,className:"text-xs"},{title:"Location",dataIndex:"location",key:"location",width:150,className:"text-xs"},{title:"Status",dataIndex:"status",key:"status",width:100,className:"text-xs",render:v=>{let k;switch(v){case"On Stock":k="green";break;case"For Repair":k="volcano";break;case"Deployed":k="blue";break;default:k="gray"}return e.jsx(_t,{color:k,children:v})}},{title:"Remove",key:"remove",width:80,className:"text-xs",render:(v,k)=>e.jsx(Oe,{size:"small",danger:!0,onClick:()=>P(k.id),className:"text-xs",children:"Remove"})}],P=v=>{f(k=>k.filter(F=>F!==v))},V=()=>{d.length>=1&&(r(d),S("Batch Delete",`Deleted ${d.length} item(s) from inventory.`),C("Batch Delete",`Deleted ${d.length} item(s) from inventory.`))};return e.jsx(ot,{open:t,title:"Batch Delete Items",onCancel:a,width:1200,footer:[e.jsx(Oe,{size:"small",className:"custom-button-cancel text-xs",onClick:a,disabled:s||w,children:"Cancel"},"cancel"),e.jsxs(Oe,{size:"small",className:"custom-button text-xs",type:"primary",onClick:V,disabled:d.length<1||s||w,loading:s,danger:!0,children:["Delete Selected (",d.length,")"]},"confirm")],children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(ge.Search,{placeholder:"Search items...",value:l,onChange:v=>u(v.target.value),allowClear:!0,style:{width:300},size:"small"}),e.jsx(eo,{type:"secondary",className:"text-xs",children:"Select at least 1 item to delete."})]}),e.jsx(Gt,{bordered:!0,dataSource:$,columns:A,rowKey:"id",size:"small",loading:w,pagination:{current:y,pageSize:M,total:I.length,showSizeChanger:!0,pageSizeOptions:["10","20","30","50","100"],onChange:(v,k)=>{O(v),b(k)},className:"text-xs"},rowSelection:{selectedRowKeys:p,onChange:f,preserveSelectedRowKeys:!0},scroll:{x:"max-content",y:400},className:"text-xs"})]}),e.jsxs("div",{className:"w-full md:w-1/3 bg-gray-50 border border-gray-200 rounded p-3 overflow-auto",style:{maxHeight:500},children:[e.jsxs("div",{className:"mb-2 font-semibold text-base",children:["Selected Items Preview (",d.length,")"]}),e.jsx(Gt,{bordered:!0,dataSource:d,columns:E,rowKey:"id",size:"small",pagination:!1,scroll:{y:350},className:"text-xs",locale:{emptyText:"No items selected."}})]})]})})}const ao=t=>{let a;switch(t){case"On Stock":a="green";break;case"For Repair":a="volcano";break;case"Deployed":a="blue";break;default:a="gray"}return e.jsx(_t,{color:a,className:"text-wrap text-center",children:e.jsx(vt,{text:t})})},no=t=>{let a;switch(t){case"Brand New":a="gold";break;case"Good Condition":a="green";break;case"Defective":a="red";break;default:a="gray"}return e.jsx(_t,{color:a,className:"text-wrap text-center",children:e.jsx(vt,{text:t})})},ro=(t,a,r,s,i)=>{const o=[{title:"ID",dataIndex:"id",key:"id",align:"center",width:"120px",fixed:"left",className:"text-xs",sorter:(l,u)=>l.id.localeCompare(u.id),render:l=>e.jsx(vt,{text:l})},{title:"Type",dataIndex:"type",key:"type",align:"center",width:"100px",className:"text-xs overflow-auto",responsive:["sm"],render:l=>e.jsx(vt,{text:l}),filters:[{text:"AVR",value:"AVR"},{text:"Battery",value:"Battery"},{text:"Biometrics",value:"Biometrics"},{text:"Camera",value:"Camera"},{text:"CCTV",value:"CCTV"},{text:"Charger",value:"Charger"},{text:"Guard Tour Chips",value:"Guard Tour Chips"},{text:"Guard Tour System",value:"Guard Tour System"},{text:"Headset",value:"Headset"},{text:"Keyboard",value:"Keyboard"},{text:"Laptop",value:"Laptop"},{text:"Megaphone",value:"Megaphone"},{text:"WIFI-Mesh",value:"WIFI-Mesh"},{text:"Metal Detector",value:"Metal Detector"},{text:"Microphone",value:"Microphone"},{text:"Modem",value:"Modem"},{text:"Monitor",value:"Monitor"},{text:"Mouse",value:"Mouse"},{text:"Others",value:"Others"},{text:"Pedestal",value:"Pedestal"},{text:"Podium",value:"Podium"},{text:"Printer",value:"Printer"},{text:"Radio",value:"Radio"},{text:"Router",value:"Router"},{text:"Search Stick",value:"Search Stick"},{text:"Searchlight",value:"Searchlight"},{text:"Smartphone",value:"Smartphone"},{text:"Speaker",value:"Speaker"},{text:"Switch",value:"Switch"},{text:"System Unit",value:"System Unit"},{text:"Under Chassis",value:"Under Chassis"},{text:"UPS",value:"UPS"}],onFilter:(l,u)=>u.type.includes(l)},{title:"Brand",dataIndex:"brand",key:"brand",align:"center",width:"100px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,u)=>l.brand.localeCompare(u.brand),render:l=>e.jsx(vt,{text:l})},{title:"Qty",dataIndex:"quantity",key:"quantity",align:"center",width:"80px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],sorter:(l,u)=>l.quantity-u.quantity,render:l=>e.jsx(vt,{text:l})},{title:"Remarks",dataIndex:"remarks",key:"remarks",align:"center",width:"200px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],render:l=>e.jsx(vt,{text:l&&l.trim()!==""?l:"-"})},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",align:"center",width:"150px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],sorter:(l,u)=>{var p;return(p=l.serialNumber)==null?void 0:p.localeCompare(u.serialNumber||"")},render:l=>e.jsx(vt,{text:l&&l.trim()!==""?l:"-"})},...i==="default"?[{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,u)=>{const p=new Date(l.issuedDate),f=new Date(u.issuedDate);return r==="Newest"?f-p:p-f},render:l=>e.jsx(vt,{text:!l||l==="0000-00-00"?"NO DATE":l})},{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,u)=>{const p=new Date(l.purchaseDate),f=new Date(u.purchaseDate);return r==="Newest"?f-p:p-f},render:l=>e.jsx(vt,{text:l})}]:i==="issuedDate"?[{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,u)=>{const p=new Date(l.issuedDate),f=new Date(u.issuedDate);return r==="Newest"?f-p:p-f},render:l=>e.jsx(vt,{text:!l||l==="0000-00-00"?"NO DATE":l})}]:[{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(l,u)=>{const p=new Date(l.purchaseDate),f=new Date(u.purchaseDate);return r==="Newest"?f-p:p-f},render:l=>e.jsx(vt,{text:l})}],{title:"Condition",dataIndex:"condition",key:"condition",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],render:l=>no(l),filters:[{text:"Brand New",value:"Brand New"},{text:"Good Condition",value:"Good Condition"},{text:"Defective",value:"Defective"}],onFilter:(l,u)=>u.condition.includes(l)},{title:"Detachment/Office",dataIndex:"location",key:"location",align:"center",width:"150px",className:"text-xs overflow-auto",responsive:["sm"],render:l=>e.jsx(vt,{text:l})},{title:"Status",dataIndex:"status",key:"status",align:"center",width:"110px",className:"text-xs overflow-auto",responsive:["sm"],render:l=>ao(l),filters:[{text:"On Stock",value:"On Stock"},{text:"For Repair",value:"For Repair"},{text:"Deployed",value:"Deployed"}],onFilter:(l,u)=>u.status.includes(l)}];return s!=="guest"&&o.push({title:"Action",key:"action",align:"center",width:"80px",className:"text-xs overflow-auto",render:l=>e.jsxs(e.Fragment,{children:[e.jsx(Rt,{title:"Edit",children:e.jsx(Oe,{type:"text",icon:e.jsx(qr,{}),onClick:()=>t(l),size:"small"})}),l.quantity>1&&e.jsx(Rt,{title:"Redistribute",children:e.jsx(Oe,{type:"text",icon:e.jsx(Ra,{}),onClick:()=>a(l),size:"small"})})]})}),o},so=async t=>{var a;try{return(await gn.post("/batch_edit_items.php",{items:t})).data}catch(r){throw((a=r.response)==null?void 0:a.data)||r}},io=async t=>{var a;try{return(await gn.post("/batch_add_items.php",{items:t})).data}catch(r){throw((a=r.response)==null?void 0:a.data)||r}},lo=async t=>{var a;try{return(await gn.post("/batch_delete_items.php",{itemIds:t})).data}catch(r){throw((a=r.response)==null?void 0:a.data)||r}},Bt=typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"&&window.location.hostname!==""&&!window.location.hostname.startsWith("192.168.")&&!0,{Option:Yn}=re,oo=ya.memo(({isMobile:t,searchColumn:a,isAdmin:r,userRole:s,setIsModalVisible:i,batchMenuItems:o,handleBatchMenuClick:l,commonButtonProps:u,selectedRowKeys:p,handleDeleteItems:f,sortOrder:d,handleSortOrderChange:j,handleFullRefresh:y,handlePrint:O,handleExportOpen:M,searchableColumnsForTab:b,getColumnMenu:w,tableKey:h,rowSelection:S,filteredData:C,tableColumns:I,handleTableChange:$,loading:A,isRefreshing:E,mobileExpandableConfig:P,searchInputProps:V})=>{var v;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4",children:e.jsxs("div",{className:t?"flex flex-row flex-wrap gap-1 mb-2":"flex items-center gap-2",children:[e.jsx(Dn,{menu:w,trigger:["click"],className:t?"border-black text-xs block theme-aware-dropdown-btn":"border-black text-xs sm:block hidden theme-aware-dropdown-btn",children:e.jsxs(Oe,{type:"text",className:t?"flex items-center p-1 h-7 text-xs w-full":"flex items-center",size:"small",children:[e.jsx(Bs,{className:"text-xs"}),e.jsx(Na,{children:((v=b.find(k=>k.key===a))==null?void 0:v.label)||"All Columns"}),e.jsx(Kn,{className:"align-middle ml-1"})]})}),e.jsx(ge,{...V,prefix:e.jsx(vn,{})}),e.jsx(Rt,{title:"Actions",children:(r||s==="user")&&e.jsx(Oe,{type:"text",icon:e.jsx(fl,{}),onClick:()=>i(!0),...u})}),e.jsx(Dn,{menu:{items:o,onClick:l},trigger:["click"],children:(r||s==="user")&&e.jsx(Rt,{title:"Batch Actions",children:e.jsx(Oe,{type:"text",icon:e.jsx(Fs,{}),...u})})}),r&&e.jsx(Rt,{title:"Delete",children:e.jsx(Oe,{type:"link",icon:e.jsx(ar,{}),danger:!0,disabled:p.length===0,onClick:f,...u})}),e.jsxs(re,{value:d,className:t?"w-auto text-xs transparent-select h-7":"w-auto text-xs transparent-select",onChange:j,size:"small",children:[e.jsx(Yn,{value:"Newest",children:e.jsx("span",{className:"text-xs",children:"Newest"})}),e.jsx(Yn,{value:"Oldest",children:e.jsx("span",{className:"text-xs",children:"Oldest"})})]}),e.jsx(Oe,{onClick:y,className:t?"w-auto custom-button text-xs":"custom-button w-auto text-xs",type:"default",size:"small",icon:e.jsx(nr,{}),loading:E,children:e.jsx("span",{className:"text-xs",children:E?"Refreshing...":"Refresh"})}),e.jsx(Oe,{onClick:O,icon:e.jsx(Vs,{}),size:"small",className:"custom-button w-auto text-xs",disabled:!p||p.length===0,children:e.jsx("span",{className:"text-xs",children:"Print"})}),e.jsx(Oe,{onClick:M,icon:e.jsx(ys,{}),size:"small",className:"custom-button w-auto text-xs",children:e.jsx("span",{className:"text-xs",children:"Export"})})]})}),e.jsx("div",{className:"w-auto overflow-x-auto",children:e.jsx(Gt,{rowSelection:S,rowKey:"id",dataSource:C,columns:I,pagination:!1,bordered:!0,onChange:$,scroll:{x:"max-content",y:600},loading:A,responsive:["sm","md","lg","xl","xxl"],expandable:P,className:"text-xs"},`table-${h}`)})]})}),Oo=({inventoryData:t,setInventoryData:a,loading:r})=>{const{message:s}=Xt.useApp(),{isOffline:i}=gs(),[o,l]=n.useState(0),[u,p]=n.useState("all"),[f,d]=n.useState([]),[j,y]=n.useState(!1),[O]=n.useState("default"),M=dr({maxWidth:639}),[b,w]=n.useState(!1),[h,S]=n.useState(!1),[C,I]=n.useState(!1),[$,A]=n.useState(!1),[E,P]=n.useState([]),[V,v]=n.useState(!1),[k,F]=n.useState(!1),[Y,T]=n.useState(!1),[B,z]=n.useState(!1),[K,G]=n.useState(!1),{logUserActivity:ee}=ft(),{logUserNotification:Q}=ht(),[J,x]=n.useState(t||[]),N=n.useRef(new Map),m=n.useRef(new Map);n.useEffect(()=>{x(t||[])},[t]);const c=a||x,g=a?t:J,{searchText:D,setSearchText:R,sortOrder:H,currentPage:_,pageSize:Z,isModalVisible:Me,setIsModalVisible:je,isEditModalVisible:Fe,setIsEditModalVisible:Ye,redistributeItemData:ve,setRedistributeItemData:Ee,isRedistributeModalVisible:Ne,setIsRedistributeModalVisible:Ke,editingItem:Ae,isRefreshing:Re,lastSyncTime:Le,activeTab:Qe,isAdmin:We,userRole:q,totalEntries:W,handleRedistribute:ce,handleRedistributeItem:ie,handlePageChange:oe,handleSortOrderChange:ne,handleTableChange:ue,handleAddItem:X,handleEdit:Ie,handleEditItem:be,handleTabChange:Ue,rowSelection:He,selectedRowKeys:ke,setSelectedRowKeys:et,handleRefresh:pt}=Il(g,r,a,x),lt=n.useCallback(async()=>{var U,we,Se;if(!We){s.error("You do not have permission to delete items.");return}if(ke.length===0){s.warning("Please select items to delete.");return}try{if(Bt&&await Nt()){s.warning("Cannot delete items while offline");return}const{deleteItems:Te}=await bs(async()=>{const{deleteItems:tt}=await import("./addItemToInventory-Bv13ONqm.js");return{deleteItems:tt}},__vite__mapDeps([0,1,2,3])),Xe=await Te(ke);Xe.message==="Items deleted successfully"?(c(tt=>tt.filter(st=>!ke.includes(st.id))),et([]),s.success("Items deleted successfully!"),ee("Inventory",`Deleted item(s) with ID(s): ${ke.join(", ")}`),Q("Inventory Update",`You deleted item(s) with ID(s): ${ke.join(", ")}`)):s.error(Xe.message||"Error deleting items.")}catch(Te){Bt&&(Te.isOffline||(U=Te.message)!=null&&U.includes("Offline"))?s.warning("Cannot delete items while offline"):((Se=(we=Te==null?void 0:Te.response)==null?void 0:we.data)!=null&&Se.message?s.error(`Failed to delete items: ${Te.response.data.message}`):Te!=null&&Te.message?s.error(`Failed to delete items: ${Te.message}`):s.error("Failed to delete items. Please try again."),console.error("Error deleting items:",Te))}},[We,ke,s,c,et,ee,Q]),Ge=n.useMemo(()=>g||[],[g]);n.useEffect(()=>{if(!Ge||Ge.length===0){m.current.clear();return}setTimeout(()=>{const we=new Map;Ge.slice(0,2e3).forEach((Te,Xe)=>{if(!Te)return;Object.values(Te).filter(rt=>rt!=null&&rt!==void 0).map(rt=>String(rt).toLowerCase()).join(" ").split(/\s+/).filter(rt=>rt.length>0).slice(0,10).forEach(rt=>{we.has(rt)||we.set(rt,new Set),we.get(rt).add(Xe)})}),m.current=we},0)},[Ge]);const le=n.useMemo(()=>{if(!Ge||Ge.length===0)return[];let U=Ge;return D&&!j&&(U=Ge.slice(0,1e3).filter(Te=>Object.values(Te).join(" ").toLowerCase().includes(D.toLowerCase()))),[...U].sort((Se,Te)=>{const Xe="id",tt=H==="Newest"?"descend":"ascend";return tt==="ascend"?Se[Xe]>Te[Xe]?1:-1:tt==="descend"?Se[Xe]<Te[Xe]?1:-1:0}).slice((_-1)*Z,_*Z)},[Ge,D,H,_,Z,j]);n.useEffect(()=>{h||et([])},[h,et]),n.useEffect(()=>{N.current.clear(),m.current.clear()},[Ge]);const ae=n.useCallback(()=>{const U=Ge.filter(we=>ke.includes(we.id));U.length>0?(In(U),ee("Printed inventory items",`Printed ${U.length} item(s)`),Q("Print Action",`Printed ${U.length} inventory item(s)`),et([])):s.info("Please select items to print.")},[ke,Ge,ee,Q,et,s]),Ce=n.useMemo(()=>j?f:le,[j,f,le]),se=n.useMemo(()=>As(U=>{if(U===""){y(!1);return}y(!0);const we=`${U}-${u}`;if(N.current.has(we)){d(N.current.get(we));return}const Se=U.toLowerCase().trim();let Te;if(u==="all"&&m.current.size>0){const tt=m.current.get(Se);tt?Te=Array.from(tt).map(st=>Ge[st]):Te=Ge.filter(st=>st?Object.values(st).filter(kt=>kt!=null&&kt!==void 0).map(kt=>String(kt).toLowerCase()).join(" ").includes(Se):!1)}else Te=Ge.filter(tt=>{if(!tt)return!1;if(u==="all")return Object.values(tt).filter(rt=>rt!=null&&rt!==void 0).map(rt=>String(rt).toLowerCase()).join(" ").includes(Se);{const st=tt[u];return st&&String(st).toLowerCase().includes(Se)}});const Xe=Te.slice(0,1e3);if(N.current.set(we,Xe),N.current.size>50){const tt=N.current.keys().next().value;N.current.delete(tt)}d(Xe)},250),[Ge,u]),_e=n.useCallback(U=>{const we=U.target.value;if(R(we),we===""){y(!1),d([]),N.current.clear();return}se(we)},[se,R]),nt=n.useMemo(()=>{const U=[{key:"all",label:"All Columns"},{key:"id",label:"ID"},{key:"type",label:"Type"},{key:"brand",label:"Brand"},{key:"serialNumber",label:"Serial Number"},{key:"remarks",label:"Remarks"},{key:"quantity",label:"Quantity"},{key:"location",label:"Location"},{key:"status",label:"Status"},{key:"condition",label:"Condition"},{key:"issuedDate",label:"Issued Date"},{key:"purchaseDate",label:"Purchased Date"}],we=M?O:Qe;return U.filter(Se=>we==="issuedDate"?Se.key!=="purchaseDate":we==="purchaseDate"?Se.key!=="issuedDate":!0)},[Qe,O,M]),bt=n.useMemo(()=>({items:nt.map(U=>({key:U.key,label:e.jsx("span",{className:"break-words whitespace-normal text-xs",children:U.label})})),onClick:({key:U})=>p(U),selectedKeys:[u]}),[nt,u]),ut=n.useCallback(()=>{p("all"),y(!1),d([]),N.current.clear(),l(U=>U+1),ne("Newest"),pt(!0)},[ne,pt]),Dt=n.useCallback(async U=>{var we;I(!0);try{if(Bt&&await Nt()){s.warning("Cannot perform batch edit while offline");return}await so(U),S(!1),P([]),ut()}catch(Se){Bt&&(Se.isOffline||(we=Se.message)!=null&&we.includes("Offline"))?s.warning("Cannot perform batch edit while offline"):s.error("Batch edit failed")}finally{I(!1)}},[ut,s]),Tt=n.useCallback(async U=>{var we;try{if(Bt&&await Nt()){s.warning("Cannot perform batch add while offline");return}const Se=await io(U);Se&&Se.results&&Se.results.filter(Xe=>Xe.success).length>0?s.success("Batch add completed successfully!"):s.error("Batch add failed."),w(!1),ut()}catch(Se){Bt&&(Se.isOffline||(we=Se.message)!=null&&we.includes("Offline"))?s.warning("Cannot perform batch add while offline"):s.error("Batch add failed.")}},[ut,s]),It=n.useCallback(async U=>{var we;F(!0);try{if(Bt&&await Nt()){s.warning("Cannot perform batch delete while offline");return}const Se=U.map(Xe=>Xe.id),Te=await lo(Se);if(Te&&Te.results){const Xe=Te.results.filter(tt=>tt.success).length;Xe>0?s.success(`${Xe} item(s) deleted successfully!`):s.error("Batch delete failed.")}else s.error("Batch delete failed.");v(!1),ut()}catch(Se){Bt&&(Se.isOffline||(we=Se.message)!=null&&we.includes("Offline"))?s.warning("Cannot perform batch delete while offline"):s.error("Batch delete failed.")}finally{F(!1)}},[ut,s]),$t=n.useCallback(async U=>{z(!0);try{In(U),ee("Batch Print",`Batch printed ${U.length} inventory item(s)`),Q("Batch Print",`Batch printed ${U.length} inventory item(s)`),T(!1),et([])}catch{s.error("Batch print failed.")}finally{z(!1)}},[ee,Q,et,s]),ia=n.useCallback(({key:U})=>{U==="batchAdd"?w(!0):U==="batchEdit"?A(!0):U==="batchDelete"?v(!0):U==="batchPrint"&&T(!0)},[]),ea=n.useMemo(()=>[{key:"batchAdd",label:"Batch Add"},{key:"batchEdit",label:e.jsx("span",{style:{color:"blue"},children:"Batch Edit"})},...We?[{key:"batchDelete",label:e.jsx("span",{style:{color:"red"},children:"Batch Delete"}),danger:!0}]:[],{key:"batchPrint",label:e.jsx("span",{style:{color:"green"},children:"Batch Print"})}],[We]),la=n.useCallback(()=>{G(!0),ee("Export","Opened export modal for Inventory"),Q("Export Action","Opened export modal for Inventory")},[ee,Q]),oa=n.useMemo(()=>({size:"small",className:M?"text-xs p-1 h-7":"text-xs"}),[M]),Wt=n.useMemo(()=>M?{expandedRowRender:U=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",U.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",U.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",U.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",U.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",U.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",U.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",U.issuedDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",U.purchaseDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",U.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",U.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",U.status]})]}),rowExpandable:()=>!0}:void 0,[M]),zt=n.useMemo(()=>ro(Ie,ce,H,q,Qe),[Ie,ce,H,q,Qe]),Ct=n.useMemo(()=>({filteredData:Ce,tableColumns:zt,loading:r,rowSelection:He,selectedRowKeys:ke,handleTableChange:ue,mobileExpandableConfig:Wt}),[Ce,zt,r,He,ke,ue,Wt]),ta=n.useMemo(()=>{var U;return{placeholder:`Search in ${u==="all"?"all columns":(U=nt.find(we=>we.key===u))==null?void 0:U.label}`,value:D,onChange:_e,className:M?"w-auto border-black text-xs h-7":"ml-1 w-auto sm:w-auto border-black text-xs h-6",size:"small",allowClear:!0,maxLength:100,showCount:!1,autoComplete:"off",spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",onCompositionStart:()=>{},onCompositionEnd:()=>{}}},[u,nt,D,_e,M]);return e.jsxs(fa,{title:e.jsx("span",{className:"font-bold flex justify-center text-lgi md:text-base lg:text-lgi xl:text-xl",children:"INVENTORY"}),className:"flex flex-col w-full mx-auto bg-[#A8E1C5] rounded-xl shadow border-none",children:[Bt&&i&&e.jsx(tr,{message:"You are currently offline",description:"Some features may be limited. Please check your internet connection.",type:"warning",showIcon:!0,icon:e.jsx(Nl,{}),style:{marginBottom:"16px"}}),e.jsxs("div",{className:"overflow-auto",children:[e.jsx(rr,{className:"custom-tabs",defaultActiveKey:"default",activeKey:Qe,onChange:Ue,type:"card",tabBarGutter:1,items:[{key:"default",label:e.jsx("span",{className:"text-xs",children:"Default"})},{key:"issuedDate",label:e.jsx("span",{className:"text-xs",children:"Issued Date"})},{key:"purchaseDate",label:e.jsx("span",{className:"text-xs",children:"Purchased Date"})}]}),e.jsx($s.Provider,{value:D,children:e.jsx(oo,{isMobile:M,searchColumn:u,searchText:D,setSearchText:R,handleSearch:_e,setFilterActive:y,isAdmin:We,userRole:q,setIsModalVisible:je,batchMenuItems:ea,handleBatchMenuClick:ia,commonButtonProps:oa,selectedRowKeys:Ct.selectedRowKeys,handleBatchDelete:It,handleDeleteItems:lt,sortOrder:H,handleSortOrderChange:ne,handleFullRefresh:ut,handlePrint:ae,handleExportOpen:la,searchableColumnsForTab:nt,getColumnMenu:bt,tableKey:o,rowSelection:Ct.rowSelection,filteredData:Ct.filteredData,tableColumns:Ct.tableColumns,handleTableChange:Ct.handleTableChange,loading:Ct.loading,isRefreshing:Re,mobileExpandableConfig:Ct.mobileExpandableConfig,searchInputProps:ta})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mt-5 space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"w-full flex flex-col items-center sm:items-start",children:[e.jsxs(Ht.Text,{className:"w-full text-xs text-nowrap text-center sm:text-left overflow-auto",style:{color:"#072C1C"},children:["Showing data of ",W>0?(_-1)*Z+1:0," to ",Math.min(_*Z,W)," of ",W," entries"]}),Le&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-center sm:text-left",children:["Last synced: ",new Date(Le).toLocaleTimeString()]})]}),e.jsx("div",{className:"w-full flex justify-center sm:justify-end",children:e.jsx(mr,{current:_,pageSize:Z,total:W,showSizeChanger:!0,pageSizeOptions:["10","20","30","50","100","200","500","1000","2000"],onChange:oe,className:"text-xs",responsive:!0})})]}),e.jsx(zl,{visible:Me,onClose:()=>je(!1),onAdd:X,onRedistribute:ie,handleEditItem:be,loading:r}),e.jsx(Ll,{visible:Fe,onClose:()=>Ye(!1),onEdit:be,item:Ae,loading:r}),e.jsx(Gl,{visible:Ne,onClose:()=>{Ke(!1),Ee(null)},onEdit:ie,item:ve,loading:r}),e.jsx(Kl,{visible:b,onClose:()=>w(!1),onBatchAdd:Tt,loading:r}),e.jsx(Zl,{visible:$,onClose:()=>A(!1),onConfirm:U=>{P(U),A(!1),S(!0)},loading:C}),e.jsx(Xl,{visible:h,onClose:()=>{S(!1),P([])},onBatchEdit:Dt,loading:C,selectedItems:E}),We&&e.jsx(to,{visible:V,onClose:()=>v(!1),onConfirm:It,loading:k}),e.jsx(Es,{visible:Y,onClose:()=>T(!1),onConfirm:$t,loading:B}),e.jsx(Ts,{visible:K,onClose:()=>G(!1),data:Ge,filteredData:j?f:null,selectedData:ke.length>0?Ge.filter(U=>ke.includes(U.id)):null,dataType:"inventory",title:"Export Inventory Data",columns:zt.map(U=>({key:U.dataIndex||U.key,label:U.title}))})]})};export{Oo as default};
