import{E as yr,J as br,N as mn,r as a,a7 as hn,Q as Ye,aE as fa,V as jr,W as Cr,aF as Sr,aG as Dr,aH as wr,aI as Nr,aJ as Ir,aK as kr,ap as Or,aq as fn,as as pn,aL as Pr,au as _e,at as z,aM as tn,aN as tt,ar as je,a8 as Ft,a as $a,aO as Bt,aP as Rr,aQ as Mr,aR as Dt,ah as gt,t as Ee,a0 as xn,aw as At,aS as vn,aT as Tr,q as wt,aU as Er,B as ee,O as gn,aV as yn,aW as bn,$ as jn,X as Cn,aX as Sn,ac as Dn,ad as wn,ae as Nn,aY as In,aZ as kn,a_ as On,a$ as Pn,b0 as Rn,b1 as Nt,d as Qt,e as Xt,k as $t,i as qt,af as It,F as B,j as e,b as Vt,C as it,h as se,T as We,b2 as an,f as da,D as Fr,M as at,I as oe,b3 as bt,n as Jt,R as Kt,ak as ma,l as yt,b4 as Mn,s as ia,b5 as qa}from"./index-CD2515kj.js";import{g as lt,d as Br,u as Ar,a as Vr,r as $r}from"./addItemToInventory-C9oj-7GI.js";import{P as ht,p as Tn,f as Wt,e as vt,h as qr,t as Zt,j as _r,u as Hr,k as zr,l as En,m as rn,n as Fn,o as Yr,q as Lr,s as _a,R as Ha,v as Ur,w as Bn,x as Gr,y as An,c as Kr,d as Me}from"./index-TdczG5PU.js";import{S as Et}from"./index-smfr0Mjk.js";import{_ as Wr}from"./callSuper-CcKUuBAV.js";import{R as Vn}from"./CalendarOutlined-Bixwtirv.js";import{u as $n,F as mt}from"./index-DMt-9uzF.js";import{P as qn}from"./Pagination-pig84kSF.js";import{T as _t}from"./index-8lnpP56V.js";import{R as za,B as Qr,h as sn}from"./BatchPrintItemModal-WLOx70uY.js";import{H as rt}from"./HighlightText-joRODCOg.js";import{d as Xr}from"./debounce-QjT_1IrO.js";import{D as Pt}from"./index-vTVWtL-y.js";import{R as Ya}from"./FilterOutlined-DMZgr-kR.js";import{R as La}from"./ToolOutlined-BYw-1w8m.js";import"./index-95JSFp8s.js";const oa=(t,s,r,n,l)=>({background:t,border:`${mn(n.lineWidth)} ${n.lineType} ${s}`,[`${l}-icon`]:{color:r}}),Jr=t=>{const{componentCls:s,motionDurationSlow:r,marginXS:n,marginSM:l,fontSize:u,fontSizeLG:d,lineHeight:c,borderRadiusLG:h,motionEaseInOutCirc:f,withDescriptionIconSize:o,colorText:D,colorTextHeading:S,withDescriptionPadding:k,defaultPadding:p}=t;return{[s]:Object.assign(Object.assign({},br(t)),{position:"relative",display:"flex",alignItems:"center",padding:p,wordWrap:"break-word",borderRadius:h,[`&${s}-rtl`]:{direction:"rtl"},[`${s}-content`]:{flex:1,minWidth:0},[`${s}-icon`]:{marginInlineEnd:n,lineHeight:0},"&-description":{display:"none",fontSize:u,lineHeight:c},"&-message":{color:S},[`&${s}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${r} ${f}, opacity ${r} ${f},
        padding-top ${r} ${f}, padding-bottom ${r} ${f},
        margin-bottom ${r} ${f}`},[`&${s}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${s}-with-description`]:{alignItems:"flex-start",padding:k,[`${s}-icon`]:{marginInlineEnd:l,fontSize:o,lineHeight:0},[`${s}-message`]:{display:"block",marginBottom:n,color:S,fontSize:d},[`${s}-description`]:{display:"block",color:D}},[`${s}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Zr=t=>{const{componentCls:s,colorSuccess:r,colorSuccessBorder:n,colorSuccessBg:l,colorWarning:u,colorWarningBorder:d,colorWarningBg:c,colorError:h,colorErrorBorder:f,colorErrorBg:o,colorInfo:D,colorInfoBorder:S,colorInfoBg:k}=t;return{[s]:{"&-success":oa(l,n,r,t,s),"&-info":oa(k,S,D,t,s),"&-warning":oa(c,d,u,t,s),"&-error":Object.assign(Object.assign({},oa(o,f,h,t,s)),{[`${s}-description > pre`]:{margin:0,padding:0}})}}},es=t=>{const{componentCls:s,iconCls:r,motionDurationMid:n,marginXS:l,fontSizeIcon:u,colorIcon:d,colorIconHover:c}=t;return{[s]:{"&-action":{marginInlineStart:l},[`${s}-close-icon`]:{marginInlineStart:l,padding:0,overflow:"hidden",fontSize:u,lineHeight:mn(u),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${r}-close`]:{color:d,transition:`color ${n}`,"&:hover":{color:c}}},"&-close-text":{color:d,transition:`color ${n}`,"&:hover":{color:c}}}}},ts=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`}),as=yr("Alert",t=>[Jr(t),Zr(t),es(t)],ts);var ln=function(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(t);l<n.length;l++)s.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(t,n[l])&&(r[n[l]]=t[n[l]]);return r};const ns={success:Ir,info:Nr,error:wr,warning:Dr},rs=t=>{const{icon:s,prefixCls:r,type:n}=t,l=ns[n]||null;return s?Sr(s,a.createElement("span",{className:`${r}-icon`},s),()=>({className:Ye(`${r}-icon`,s.props.className)})):a.createElement(l,{className:`${r}-icon`})},ss=t=>{const{isClosable:s,prefixCls:r,closeIcon:n,handleClose:l,ariaProps:u}=t,d=n===!0||n===void 0?a.createElement(kr,null):n;return s?a.createElement("button",Object.assign({type:"button",onClick:l,className:`${r}-close-icon`,tabIndex:0},u),d):null},_n=a.forwardRef((t,s)=>{const{description:r,prefixCls:n,message:l,banner:u,className:d,rootClassName:c,style:h,onMouseEnter:f,onMouseLeave:o,onClick:D,afterClose:S,showIcon:k,closable:p,closeText:j,closeIcon:w,action:I,id:O}=t,C=ln(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[N,E]=a.useState(!1),M=a.useRef(null);a.useImperativeHandle(s,()=>({nativeElement:M.current}));const{getPrefixCls:q,direction:P,closable:T,closeIcon:i,className:x,style:y}=hn("alert"),m=q("alert",n),[v,b,F]=as(m),H=A=>{var _;E(!0),(_=t.onClose)===null||_===void 0||_.call(t,A)},W=a.useMemo(()=>t.type!==void 0?t.type:u?"warning":"info",[t.type,u]),Z=a.useMemo(()=>typeof p=="object"&&p.closeIcon||j?!0:typeof p=="boolean"?p:w!==!1&&w!==null&&w!==void 0?!0:!!T,[j,w,p,T]),J=u&&k===void 0?!0:k,Q=Ye(m,`${m}-${W}`,{[`${m}-with-description`]:!!r,[`${m}-no-icon`]:!J,[`${m}-banner`]:!!u,[`${m}-rtl`]:P==="rtl"},x,d,c,F,b),Y=fa(C,{aria:!0,data:!0}),G=a.useMemo(()=>typeof p=="object"&&p.closeIcon?p.closeIcon:j||(w!==void 0?w:typeof T=="object"&&T.closeIcon?T.closeIcon:i),[w,p,j,i]),g=a.useMemo(()=>{const A=p??T;if(typeof A=="object"){const{closeIcon:_}=A;return ln(A,["closeIcon"])}return{}},[p,T]);return v(a.createElement(jr,{visible:!N,motionName:`${m}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:A=>({maxHeight:A.offsetHeight}),onLeaveEnd:S},({className:A,style:_},V)=>a.createElement("div",Object.assign({id:O,ref:Cr(M,V),"data-show":!N,className:Ye(Q,A),style:Object.assign(Object.assign(Object.assign({},y),h),_),onMouseEnter:f,onMouseLeave:o,onClick:D,role:"alert"},Y),J?a.createElement(rs,{description:r,icon:t.icon,prefixCls:m,type:W}):null,a.createElement("div",{className:`${m}-content`},l?a.createElement("div",{className:`${m}-message`},l):null,r?a.createElement("div",{className:`${m}-description`},r):null),I?a.createElement("div",{className:`${m}-action`},I):null,a.createElement(ss,{isClosable:Z,prefixCls:m,closeIcon:G,handleClose:H,ariaProps:g}))))});let ls=function(t){function s(){var r;return pn(this,s),r=Wr(this,s,arguments),r.state={error:void 0,info:{componentStack:""}},r}return Or(s,t),fn(s,[{key:"componentDidCatch",value:function(n,l){this.setState({error:n,info:l})}},{key:"render",value:function(){const{message:n,description:l,id:u,children:d}=this.props,{error:c,info:h}=this.state,f=(h==null?void 0:h.componentStack)||null,o=typeof n>"u"?(c||"").toString():n,D=typeof l>"u"?f:l;return c?a.createElement(_n,{id:u,type:"error",message:o,description:a.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},D)}):d}}])}(a.Component);const Hn=_n;Hn.ErrorBoundary=ls;function is(t,s){return t!==void 0?t:s?"bottomRight":"bottomLeft"}var os={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};function zn(t){var s=t.popupElement,r=t.popupStyle,n=t.popupClassName,l=t.popupAlign,u=t.transitionName,d=t.getPopupContainer,c=t.children,h=t.range,f=t.placement,o=t.builtinPlacements,D=o===void 0?os:o,S=t.direction,k=t.visible,p=t.onClose,j=a.useContext(ht),w=j.prefixCls,I="".concat(w,"-dropdown"),O=is(f,S==="rtl");return a.createElement(Pr,{showAction:[],hideAction:["click"],popupPlacement:O,builtinPlacements:D,prefixCls:I,popupTransitionName:u,popup:s,popupAlign:l,popupVisible:k,popupClassName:Ye(n,_e(_e({},"".concat(I,"-range"),h),"".concat(I,"-rtl"),S==="rtl")),popupStyle:r,stretch:"minWidth",getPopupContainer:d,onPopupVisibleChange:function(N){N||p()}},c)}function Yn(t){return Tn(t,["placement","builtinPlacements","popupAlign","getPopupContainer","transitionName","direction"])}function Ln(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=a.useState([!1,!1]),l=z(n,2),u=l[0],d=l[1],c=function(o,D){d(function(S){return Wt(S,D,o)})},h=a.useMemo(function(){return u.map(function(f,o){if(f)return!0;var D=t[o];return D?!!(!r[o]&&!D||D&&s(D,{activeIndex:o})):!1})},[t,u,s,r]);return[h,c]}function cs(t,s,r){if(s===!1)return null;var n=s&&tn(s)==="object"?s:{};return n.clearIcon||r||a.createElement("span",{className:"".concat(t,"-clear-btn")})}function us(t,s,r,n,l){var u=tt(function(d,c){return!!(r&&r(d,c)||n&&t.isAfter(n,d)&&!vt(t,s,n,d,c.type)||l&&t.isAfter(d,l)&&!vt(t,s,l,d,c.type))});return u}function ds(t,s,r){return a.useMemo(function(){var n=qr(t,s,r),l=Zt(n),u=l[0],d=tn(u)==="object"&&u.type==="mask"?u.format:null;return[l.map(function(c){return typeof c=="string"||typeof c=="function"?c:c.format}),d]},[t,s,r])}function ms(t,s,r){return typeof t[0]=="function"||r?!0:s}function hs(t,s,r,n){var l=tt(function(u,d){var c=je({type:s},d);if(delete c.activeIndex,!t.isValidate(u)||r&&r(u,c))return!0;if((s==="date"||s==="time")&&n){var h,f=d&&d.activeIndex===1?"end":"start",o=((h=n.disabledTime)===null||h===void 0?void 0:h.call(n,u,f,{from:c.from}))||{},D=o.disabledHours,S=o.disabledMinutes,k=o.disabledSeconds,p=o.disabledMilliseconds,j=n.disabledHours,w=n.disabledMinutes,I=n.disabledSeconds,O=D||j,C=S||w,N=k||I,E=t.getHour(u),M=t.getMinute(u),q=t.getSecond(u),P=t.getMillisecond(u);if(O&&O().includes(E)||C&&C(E).includes(M)||N&&N(E,M).includes(q)||p&&p(E,M,q).includes(P))return!0}return!1});return l}function ca(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=a.useMemo(function(){var n=t&&Zt(t);return s&&n&&(n[1]=n[1]||n[0]),n},[t,s]);return r}function Un(t,s){var r=t.generateConfig,n=t.locale,l=t.picker,u=l===void 0?"date":l,d=t.prefixCls,c=d===void 0?"rc-picker":d,h=t.styles,f=h===void 0?{}:h,o=t.classNames,D=o===void 0?{}:o,S=t.order,k=S===void 0?!0:S,p=t.components,j=p===void 0?{}:p,w=t.inputRender,I=t.allowClear,O=t.clearIcon,C=t.needConfirm,N=t.multiple,E=t.format,M=t.inputReadOnly,q=t.disabledDate,P=t.minDate,T=t.maxDate,i=t.showTime,x=t.value,y=t.defaultValue,m=t.pickerValue,v=t.defaultPickerValue,b=ca(x),F=ca(y),H=ca(m),W=ca(v),Z=u==="date"&&i?"datetime":u,J=Z==="time"||Z==="datetime",Q=J||N,Y=C??J,G=_r(t),g=z(G,4),A=g[0],_=g[1],V=g[2],X=g[3],K=Hr(n,_),L=a.useMemo(function(){return zr(Z,V,X,A,K)},[Z,V,X,A,K]),U=a.useMemo(function(){return je(je({},t),{},{prefixCls:c,locale:K,picker:u,styles:f,classNames:D,order:k,components:je({input:w},j),clearIcon:cs(c,I,O),showTime:L,value:b,defaultValue:F,pickerValue:H,defaultPickerValue:W},s==null?void 0:s())},[t]),Ce=ds(Z,K,E),ye=z(Ce,2),we=ye[0],Te=ye[1],ce=ms(we,M,N),De=us(r,n,q,P,T),$=hs(r,u,De,L),me=a.useMemo(function(){return je(je({},U),{},{needConfirm:Y,inputReadOnly:ce,disabledDate:De})},[U,Y,ce,De]);return[me,Z,Q,we,Te,$]}function fs(t,s,r){var n=Ft(s,{value:t}),l=z(n,2),u=l[0],d=l[1],c=$a.useRef(t),h=$a.useRef(),f=function(){Bt.cancel(h.current)},o=tt(function(){d(c.current),r&&u!==c.current&&r(c.current)}),D=tt(function(S,k){f(),c.current=S,S||k?o():h.current=Bt(o)});return $a.useEffect(function(){return f},[]),[u,D]}function Gn(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,l=r.every(function(o){return o})?!1:t,u=fs(l,s||!1,n),d=z(u,2),c=d[0],h=d[1];function f(o){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!D.inherit||c)&&h(o,D.force)}return[c,f]}function Kn(t){var s=a.useRef();return a.useImperativeHandle(t,function(){var r;return{nativeElement:(r=s.current)===null||r===void 0?void 0:r.nativeElement,focus:function(l){var u;(u=s.current)===null||u===void 0||u.focus(l)},blur:function(){var l;(l=s.current)===null||l===void 0||l.blur()}}}),s}function Wn(t,s){return a.useMemo(function(){return t||(s?(Rr(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.entries(s).map(function(r){var n=z(r,2),l=n[0],u=n[1];return{label:l,value:u}})):[])},[t,s])}function nn(t,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=a.useRef(s);n.current=s,Mr(function(){if(t)n.current(t);else{var l=Bt(function(){n.current(t)},r);return function(){Bt.cancel(l)}}},[t])}function Qn(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=a.useState(0),l=z(n,2),u=l[0],d=l[1],c=a.useState(!1),h=z(c,2),f=h[0],o=h[1],D=a.useRef([]),S=a.useRef(null),k=a.useRef(null),p=function(N){S.current=N},j=function(N){return S.current===N},w=function(N){o(N)},I=function(N){return N&&(k.current=N),k.current},O=function(N){var E=D.current,M=new Set(E.filter(function(P){return N[P]||s[P]})),q=E[E.length-1]===0?1:0;return M.size>=2||t[q]?null:q};return nn(f||r,function(){f||(D.current=[],p(null))}),a.useEffect(function(){f&&D.current.push(u)},[f,u]),[f,w,I,u,d,O,D.current,p,j]}function ps(t,s,r,n,l,u){var d=r[r.length-1],c=function(f,o){var D=z(t,2),S=D[0],k=D[1],p=je(je({},o),{},{from:En(t,r)});return d===1&&s[0]&&S&&!vt(n,l,S,f,p.type)&&n.isAfter(S,f)||d===0&&s[1]&&k&&!vt(n,l,k,f,p.type)&&n.isAfter(f,k)?!0:u==null?void 0:u(f,p)};return c}function Gt(t,s,r,n){switch(s){case"date":case"week":return t.addMonth(r,n);case"month":case"quarter":return t.addYear(r,n);case"year":return t.addYear(r,n*10);case"decade":return t.addYear(r,n*100);default:return r}}var Ua=[];function Xn(t,s,r,n,l,u,d,c){var h=arguments.length>8&&arguments[8]!==void 0?arguments[8]:Ua,f=arguments.length>9&&arguments[9]!==void 0?arguments[9]:Ua,o=arguments.length>10&&arguments[10]!==void 0?arguments[10]:Ua,D=arguments.length>11?arguments[11]:void 0,S=arguments.length>12?arguments[12]:void 0,k=arguments.length>13?arguments[13]:void 0,p=d==="time",j=u||0,w=function(H){var W=t.getNow();return p&&(W=rn(t,W)),h[H]||r[H]||W},I=z(f,2),O=I[0],C=I[1],N=Ft(function(){return w(0)},{value:O}),E=z(N,2),M=E[0],q=E[1],P=Ft(function(){return w(1)},{value:C}),T=z(P,2),i=T[0],x=T[1],y=a.useMemo(function(){var F=[M,i][j];return p?F:rn(t,F,o[j])},[p,M,i,j,t,o]),m=function(H){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"panel",Z=[q,x][j];Z(H);var J=[M,i];J[j]=H,D&&(!vt(t,s,M,J[0],d)||!vt(t,s,i,J[1],d))&&D(J,{source:W,range:j===1?"end":"start",mode:n})},v=function(H,W){if(c){var Z={date:"month",week:"month",month:"year",quarter:"year"},J=Z[d];if(J&&!vt(t,s,H,W,J))return Gt(t,d,W,-1);if(d==="year"&&H){var Q=Math.floor(t.getYear(H)/10),Y=Math.floor(t.getYear(W)/10);if(Q!==Y)return Gt(t,d,W,-1)}}return W},b=a.useRef(null);return Dt(function(){if(l&&!h[j]){var F=p?null:t.getNow();if(b.current!==null&&b.current!==j?F=[M,i][j^1]:r[j]?F=j===0?r[0]:v(r[0],r[1]):r[j^1]&&(F=r[j^1]),F){S&&t.isAfter(S,F)&&(F=S);var H=c?Gt(t,d,F,1):F;k&&t.isAfter(H,k)&&(F=c?Gt(t,d,k,-1):k),m(F,"reset")}}},[l,j,r[j]]),a.useEffect(function(){l?b.current=j:b.current=null},[l,j]),Dt(function(){l&&h&&h[j]&&m(h[j],"reset")},[l,j]),[y,m]}function Jn(t,s){var r=a.useRef(t),n=a.useState({}),l=z(n,2),u=l[1],d=function(f){return f&&s!==void 0?s:r.current},c=function(f){r.current=f,u({})};return[d,c,d(!0)]}var xs=[];function Zn(t,s,r){var n=function(d){return d.map(function(c){return Fn(c,{generateConfig:t,locale:s,format:r[0]})})},l=function(d,c){for(var h=Math.max(d.length,c.length),f=-1,o=0;o<h;o+=1){var D=d[o]||null,S=c[o]||null;if(D!==S&&!Yr(t,D,S)){f=o;break}}return[f<0,f!==0]};return[n,l]}function er(t,s){return gt(t).sort(function(r,n){return s.isAfter(r,n)?1:-1})}function vs(t){var s=Jn(t),r=z(s,2),n=r[0],l=r[1],u=tt(function(){l(t)});return a.useEffect(function(){u()},[t]),[n,l]}function tr(t,s,r,n,l,u,d,c,h){var f=Ft(u,{value:d}),o=z(f,2),D=o[0],S=o[1],k=D||xs,p=vs(k),j=z(p,2),w=j[0],I=j[1],O=Zn(t,s,r),C=z(O,2),N=C[0],E=C[1],M=tt(function(P){var T=gt(P);if(n)for(var i=0;i<2;i+=1)T[i]=T[i]||null;else l&&(T=er(T.filter(function(F){return F}),t));var x=E(w(),T),y=z(x,2),m=y[0],v=y[1];if(!m&&(I(T),c)){var b=N(T);c(T,b,{range:v?"end":"start"})}}),q=function(){h&&h(w())};return[k,S,w,M,q]}function ar(t,s,r,n,l,u,d,c,h,f){var o=t.generateConfig,D=t.locale,S=t.picker,k=t.onChange,p=t.allowEmpty,j=t.order,w=u.some(function(m){return m})?!1:j,I=Zn(o,D,d),O=z(I,2),C=O[0],N=O[1],E=Jn(s),M=z(E,2),q=M[0],P=M[1],T=tt(function(){P(s)});a.useEffect(function(){T()},[s]);var i=tt(function(m){var v=m===null,b=gt(m||q());if(v)for(var F=Math.max(u.length,b.length),H=0;H<F;H+=1)u[H]||(b[H]=null);w&&b[0]&&b[1]&&(b=er(b,o)),l(b);var W=b,Z=z(W,2),J=Z[0],Q=Z[1],Y=!J,G=!Q,g=p?(!Y||p[0])&&(!G||p[1]):!0,A=!j||Y||G||vt(o,D,J,Q,S)||o.isAfter(Q,J),_=(u[0]||!J||!f(J,{activeIndex:0}))&&(u[1]||!Q||!f(Q,{from:J,activeIndex:1})),V=v||g&&A&&_;if(V){r(b);var X=N(b,s),K=z(X,1),L=K[0];k&&!L&&k(v&&b.every(function(U){return!U})?null:b,C(b))}return V}),x=tt(function(m,v){var b=Wt(q(),m,n()[m]);P(b),v&&i()}),y=!c&&!h;return nn(!y,function(){y&&(i(),l(s),T())},2),[x,i]}function nr(t,s,r,n,l){return s!=="date"&&s!=="time"?!1:r!==void 0?r:n!==void 0?n:!l&&(t==="date"||t==="time")}function gs(t){var s=t.mode,r=t.internalMode,n=t.renderExtraFooter,l=t.showNow,u=t.showTime,d=t.onSubmit,c=t.onNow,h=t.invalid,f=t.needConfirm,o=t.generateConfig,D=t.disabledDate,S=a.useContext(ht),k=S.prefixCls,p=S.locale,j=S.button,w=j===void 0?"button":j,I=o.getNow(),O=Lr(o,u,I),C=z(O,1),N=C[0],E=n==null?void 0:n(s),M=D(I,{type:s}),q=function(){if(!M){var v=N(I);c(v)}},P="".concat(k,"-now"),T="".concat(P,"-btn"),i=l&&a.createElement("li",{className:P},a.createElement("a",{className:Ye(T,M&&"".concat(T,"-disabled")),"aria-disabled":M,onClick:q},r==="date"?p.today:p.now)),x=f&&a.createElement("li",{className:"".concat(k,"-ok")},a.createElement(w,{disabled:h,onClick:d},p.ok)),y=(i||x)&&a.createElement("ul",{className:"".concat(k,"-ranges")},i,x);return!E&&!y?null:a.createElement("div",{className:"".concat(k,"-footer")},E&&a.createElement("div",{className:"".concat(k,"-footer-extra")},E),y)}function ys(t){var s=t.picker,r=t.multiplePanel,n=t.pickerValue,l=t.onPickerValueChange,u=t.needConfirm,d=t.onSubmit,c=t.range,h=t.hoverValue,f=a.useContext(ht),o=f.prefixCls,D=f.generateConfig,S=a.useCallback(function(O,C){return Gt(D,s,O,C)},[D,s]),k=a.useMemo(function(){return S(n,1)},[n,S]),p=function(C){l(S(C,-1))},j={onCellDblClick:function(){u&&d()}},w=s==="time",I=je(je({},t),{},{hoverValue:null,hoverRangeValue:null,hideHeader:w});return c?I.hoverRangeValue=h:I.hoverValue=h,r?a.createElement("div",{className:"".concat(o,"-panels")},a.createElement(_a.Provider,{value:je(je({},j),{},{hideNext:!0})},a.createElement(Ha,I)),a.createElement(_a.Provider,{value:je(je({},j),{},{hidePrev:!0})},a.createElement(Ha,Ee({},I,{pickerValue:k,onPickerValueChange:p})))):a.createElement(_a.Provider,{value:je({},j)},a.createElement(Ha,I))}function on(t){return typeof t=="function"?t():t}function bs(t){var s=t.prefixCls,r=t.presets,n=t.onClick,l=t.onHover;return r.length?a.createElement("div",{className:"".concat(s,"-presets")},a.createElement("ul",null,r.map(function(u,d){var c=u.label,h=u.value;return a.createElement("li",{key:d,onClick:function(){n(on(h))},onMouseEnter:function(){l(on(h))},onMouseLeave:function(){l(null)}},c)}))):null}function rr(t){var s=t.panelRender,r=t.internalMode,n=t.picker,l=t.showNow,u=t.range,d=t.multiple,c=t.activeInfo,h=c===void 0?[0,0,0]:c,f=t.presets,o=t.onPresetHover,D=t.onPresetSubmit,S=t.onFocus,k=t.onBlur,p=t.onPanelMouseDown,j=t.direction,w=t.value,I=t.onSelect,O=t.isInvalid,C=t.defaultOpenValue,N=t.onOk,E=t.onSubmit,M=a.useContext(ht),q=M.prefixCls,P="".concat(q,"-panel"),T=j==="rtl",i=a.useRef(null),x=a.useRef(null),y=a.useState(0),m=z(y,2),v=m[0],b=m[1],F=a.useState(0),H=z(F,2),W=H[0],Z=H[1],J=a.useState(0),Q=z(J,2),Y=Q[0],G=Q[1],g=function(ve){ve.width&&b(ve.width)},A=z(h,3),_=A[0],V=A[1],X=A[2],K=a.useState(0),L=z(K,2),U=L[0],Ce=L[1];a.useEffect(function(){Ce(10)},[_]),a.useEffect(function(){if(u&&x.current){var Oe,ve=((Oe=i.current)===null||Oe===void 0?void 0:Oe.offsetWidth)||0,He=x.current.getBoundingClientRect();if(!He.height||He.right<0){Ce(function(Ae){return Math.max(0,Ae-1)});return}var Ve=(T?V-ve:_)-He.left;if(G(Ve),v&&v<X){var $e=T?He.right-(V-ve+v):_+ve-He.left-v,Ge=Math.max(0,$e);Z(Ge)}else Z(0)}},[U,T,v,_,V,X,u]);function ye(Oe){return Oe.filter(function(ve){return ve})}var we=a.useMemo(function(){return ye(Zt(w))},[w]),Te=n==="time"&&!we.length,ce=a.useMemo(function(){return Te?ye([C]):we},[Te,we,C]),De=Te?C:we,$=a.useMemo(function(){return ce.length?ce.some(function(Oe){return O(Oe)}):!0},[ce,O]),me=function(){Te&&I(C),N(),E()},pe=a.createElement("div",{className:"".concat(q,"-panel-layout")},a.createElement(bs,{prefixCls:q,presets:f,onClick:D,onHover:o}),a.createElement("div",null,a.createElement(ys,Ee({},t,{value:De})),a.createElement(gs,Ee({},t,{showNow:d?!1:l,invalid:$,onSubmit:me}))));s&&(pe=s(pe));var he="".concat(P,"-container"),ue="marginLeft",Pe="marginRight",Se=a.createElement("div",{onMouseDown:p,tabIndex:-1,className:Ye(he,"".concat(q,"-").concat(r,"-panel-container")),style:_e(_e({},T?Pe:ue,W),T?ue:Pe,"auto"),onFocus:S,onBlur:k},pe);return u&&(Se=a.createElement("div",{onMouseDown:p,ref:x,className:Ye("".concat(q,"-range-wrapper"),"".concat(q,"-").concat(n,"-range-wrapper"))},a.createElement("div",{ref:i,className:"".concat(q,"-range-arrow"),style:{left:Y}}),a.createElement(xn,{onResize:g},Se))),Se}function sr(t,s){var r=t.format,n=t.maskFormat,l=t.generateConfig,u=t.locale,d=t.preserveInvalidOnBlur,c=t.inputReadOnly,h=t.required,f=t["aria-required"],o=t.onSubmit,D=t.onFocus,S=t.onBlur,k=t.onInputChange,p=t.onInvalid,j=t.open,w=t.onOpenChange,I=t.onKeyDown,O=t.onChange,C=t.activeHelp,N=t.name,E=t.autoComplete,M=t.id,q=t.value,P=t.invalid,T=t.placeholder,i=t.disabled,x=t.activeIndex,y=t.allHelp,m=t.picker,v=function(Y,G){var g=l.locale.parse(u.locale,Y,[G]);return g&&l.isValidate(g)?g:null},b=r[0],F=a.useCallback(function(Q){return Fn(Q,{locale:u,format:b,generateConfig:l})},[u,l,b]),H=a.useMemo(function(){return q.map(F)},[q,F]),W=a.useMemo(function(){var Q=m==="time"?8:10,Y=typeof b=="function"?b(l.getNow()).length:b.length;return Math.max(Q,Y)+2},[b,m,l]),Z=function(Y){for(var G=0;G<r.length;G+=1){var g=r[G];if(typeof g=="string"){var A=v(Y,g);if(A)return A}}return!1},J=function(Y){function G(_){return Y!==void 0?_[Y]:_}var g=fa(t,{aria:!0,data:!0}),A=je(je({},g),{},{format:n,validateFormat:function(V){return!!Z(V)},preserveInvalidOnBlur:d,readOnly:c,required:h,"aria-required":f,name:N,autoComplete:E,size:W,id:G(M),value:G(H)||"",invalid:G(P),placeholder:G(T),active:x===Y,helped:y||C&&x===Y,disabled:G(i),onFocus:function(V){D(V,Y)},onBlur:function(V){S(V,Y)},onSubmit:o,onChange:function(V){k();var X=Z(V);if(X){p(!1,Y),O(X,Y);return}p(!!V,Y)},onHelp:function(){w(!0,{index:Y})},onKeyDown:function(V){var X=!1;if(I==null||I(V,function(){X=!0}),!V.defaultPrevented&&!X)switch(V.key){case"Escape":w(!1,{index:Y});break;case"Enter":j||w(!0);break}}},s==null?void 0:s({valueTexts:H}));return Object.keys(A).forEach(function(_){A[_]===void 0&&delete A[_]}),A};return[J,F]}var js=["onMouseEnter","onMouseLeave"];function lr(t){return a.useMemo(function(){return Tn(t,js)},[t])}var Cs=["icon","type"],Ss=["onClear"];function pa(t){var s=t.icon,r=t.type,n=At(t,Cs),l=a.useContext(ht),u=l.prefixCls;return s?a.createElement("span",Ee({className:"".concat(u,"-").concat(r)},n),s):null}function Xa(t){var s=t.onClear,r=At(t,Ss);return a.createElement(pa,Ee({},r,{type:"clear",role:"button",onMouseDown:function(l){l.preventDefault()},onClick:function(l){l.stopPropagation(),s()}}))}var Ga=["YYYY","MM","DD","HH","mm","ss","SSS"],cn="顧",Ds=function(){function t(s){pn(this,t),_e(this,"format",void 0),_e(this,"maskFormat",void 0),_e(this,"cells",void 0),_e(this,"maskCells",void 0),this.format=s;var r=Ga.map(function(c){return"(".concat(c,")")}).join("|"),n=new RegExp(r,"g");this.maskFormat=s.replace(n,function(c){return cn.repeat(c.length)});var l=new RegExp("(".concat(Ga.join("|"),")")),u=(s.split(l)||[]).filter(function(c){return c}),d=0;this.cells=u.map(function(c){var h=Ga.includes(c),f=d,o=d+c.length;return d=o,{text:c,mask:h,start:f,end:o}}),this.maskCells=this.cells.filter(function(c){return c.mask})}return fn(t,[{key:"getSelection",value:function(r){var n=this.maskCells[r]||{},l=n.start,u=n.end;return[l||0,u||0]}},{key:"match",value:function(r){for(var n=0;n<this.maskFormat.length;n+=1){var l=this.maskFormat[n],u=r[n];if(!u||l!==cn&&l!==u)return!1}return!0}},{key:"size",value:function(){return this.maskCells.length}},{key:"getMaskCellIndex",value:function(r){for(var n=Number.MAX_SAFE_INTEGER,l=0,u=0;u<this.maskCells.length;u+=1){var d=this.maskCells[u],c=d.start,h=d.end;if(r>=c&&r<=h)return u;var f=Math.min(Math.abs(r-c),Math.abs(r-h));f<n&&(n=f,l=u)}return l}}]),t}();function ws(t){var s={YYYY:[0,9999,new Date().getFullYear()],MM:[1,12],DD:[1,31],HH:[0,23],mm:[0,59],ss:[0,59],SSS:[0,999]};return s[t]}var Ns=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"],Ja=a.forwardRef(function(t,s){var r=t.active,n=t.showActiveCls,l=n===void 0?!0:n,u=t.suffixIcon,d=t.format,c=t.validateFormat,h=t.onChange;t.onInput;var f=t.helped,o=t.onHelp,D=t.onSubmit,S=t.onKeyDown,k=t.preserveInvalidOnBlur,p=k===void 0?!1:k,j=t.invalid,w=t.clearIcon,I=At(t,Ns),O=t.value,C=t.onFocus,N=t.onBlur,E=t.onMouseUp,M=a.useContext(ht),q=M.prefixCls,P=M.input,T=P===void 0?"input":P,i="".concat(q,"-input"),x=a.useState(!1),y=z(x,2),m=y[0],v=y[1],b=a.useState(O),F=z(b,2),H=F[0],W=F[1],Z=a.useState(""),J=z(Z,2),Q=J[0],Y=J[1],G=a.useState(null),g=z(G,2),A=g[0],_=g[1],V=a.useState(null),X=z(V,2),K=X[0],L=X[1],U=H||"";a.useEffect(function(){W(O)},[O]);var Ce=a.useRef(),ye=a.useRef();a.useImperativeHandle(s,function(){return{nativeElement:Ce.current,inputElement:ye.current,focus:function(ge){ye.current.focus(ge)},blur:function(){ye.current.blur()}}});var we=a.useMemo(function(){return new Ds(d||"")},[d]),Te=a.useMemo(function(){return f?[0,0]:we.getSelection(A)},[we,A,f]),ce=z(Te,2),De=ce[0],$=ce[1],me=function(ge){ge&&ge!==d&&ge!==O&&o()},pe=tt(function(Ne){c(Ne)&&h(Ne),W(Ne),me(Ne)}),he=function(ge){if(!d){var Re=ge.target.value;me(Re),W(Re),h(Re)}},ue=function(ge){var Re=ge.clipboardData.getData("text");c(Re)&&pe(Re)},Pe=a.useRef(!1),Se=function(){Pe.current=!0},Oe=function(ge){var Re=ge.target,ke=Re.selectionStart,Fe=we.getMaskCellIndex(ke);_(Fe),L({}),E==null||E(ge),Pe.current=!1},ve=function(ge){v(!0),_(0),Y(""),C(ge)},He=function(ge){N(ge)},Ve=function(ge){v(!1),He(ge)};nn(r,function(){!r&&!p&&W(O)});var $e=function(ge){ge.key==="Enter"&&c(U)&&D(),S==null||S(ge)},Ge=function(ge){$e(ge);var Re=ge.key,ke=null,Fe=null,Qe=$-De,st=d.slice(De,$),Xe=function(ot){_(function(Je){var R=Je+ot;return R=Math.max(R,0),R=Math.min(R,we.size()-1),R})},ft=function(ot){var Je=ws(st),R=z(Je,3),Ie=R[0],qe=R[1],ze=R[2],nt=U.slice(De,$),jt=Number(nt);if(isNaN(jt))return String(ze||(ot>0?Ie:qe));var Ct=jt+ot,St=qe-Ie+1;return String(Ie+(St+Ct-Ie)%St)};switch(Re){case"Backspace":case"Delete":ke="",Fe=st;break;case"ArrowLeft":ke="",Xe(-1);break;case"ArrowRight":ke="",Xe(1);break;case"ArrowUp":ke="",Fe=ft(1);break;case"ArrowDown":ke="",Fe=ft(-1);break;default:isNaN(Number(Re))||(ke=Q+Re,Fe=ke);break}if(ke!==null&&(Y(ke),ke.length>=Qe&&(Xe(1),Y(""))),Fe!==null){var ct=U.slice(0,De)+Ur(Fe,Qe)+U.slice($);pe(ct.slice(0,d.length))}L({})},Ae=a.useRef();Dt(function(){if(!(!m||!d||Pe.current)){if(!we.match(U)){pe(d);return}return ye.current.setSelectionRange(De,$),Ae.current=Bt(function(){ye.current.setSelectionRange(De,$)}),function(){Bt.cancel(Ae.current)}}},[we,d,m,U,A,De,$,K,pe]);var fe=d?{onFocus:ve,onBlur:Ve,onKeyDown:Ge,onMouseDown:Se,onMouseUp:Oe,onPaste:ue}:{};return a.createElement("div",{ref:Ce,className:Ye(i,_e(_e({},"".concat(i,"-active"),r&&l),"".concat(i,"-placeholder"),f))},a.createElement(T,Ee({ref:ye,"aria-invalid":j,autoComplete:"off"},I,{onKeyDown:$e,onBlur:He},fe,{value:U,onChange:he})),a.createElement(pa,{type:"suffix",icon:u}),w)}),Is=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveInfo","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],ks=["index"];function Os(t,s){var r=t.id,n=t.prefix,l=t.clearIcon,u=t.suffixIcon,d=t.separator,c=d===void 0?"~":d,h=t.activeIndex;t.activeHelp,t.allHelp;var f=t.focused;t.onFocus,t.onBlur,t.onKeyDown,t.locale,t.generateConfig;var o=t.placeholder,D=t.className,S=t.style,k=t.onClick,p=t.onClear,j=t.value;t.onChange,t.onSubmit,t.onInputChange,t.format,t.maskFormat,t.preserveInvalidOnBlur,t.onInvalid;var w=t.disabled,I=t.invalid;t.inputReadOnly;var O=t.direction;t.onOpenChange;var C=t.onActiveInfo;t.placement;var N=t.onMouseDown;t.required,t["aria-required"];var E=t.autoFocus,M=t.tabIndex,q=At(t,Is),P=O==="rtl",T=a.useContext(ht),i=T.prefixCls,x=a.useMemo(function(){if(typeof r=="string")return[r];var K=r||{};return[K.start,K.end]},[r]),y=a.useRef(),m=a.useRef(),v=a.useRef(),b=function(L){var U;return(U=[m,v][L])===null||U===void 0?void 0:U.current};a.useImperativeHandle(s,function(){return{nativeElement:y.current,focus:function(L){if(tn(L)==="object"){var U,Ce=L||{},ye=Ce.index,we=ye===void 0?0:ye,Te=At(Ce,ks);(U=b(we))===null||U===void 0||U.focus(Te)}else{var ce;(ce=b(L??0))===null||ce===void 0||ce.focus()}},blur:function(){var L,U;(L=b(0))===null||L===void 0||L.blur(),(U=b(1))===null||U===void 0||U.blur()}}});var F=lr(q),H=a.useMemo(function(){return Array.isArray(o)?o:[o,o]},[o]),W=sr(je(je({},t),{},{id:x,placeholder:H})),Z=z(W,1),J=Z[0],Q=a.useState({position:"absolute",width:0}),Y=z(Q,2),G=Y[0],g=Y[1],A=tt(function(){var K=b(h);if(K){var L=K.nativeElement.getBoundingClientRect(),U=y.current.getBoundingClientRect(),Ce=L.left-U.left;g(function(ye){return je(je({},ye),{},{width:L.width,left:Ce})}),C([L.left,L.right,U.width])}});a.useEffect(function(){A()},[h]);var _=l&&(j[0]&&!w[0]||j[1]&&!w[1]),V=E&&!w[0],X=E&&!V&&!w[1];return a.createElement(xn,{onResize:A},a.createElement("div",Ee({},F,{className:Ye(i,"".concat(i,"-range"),_e(_e(_e(_e({},"".concat(i,"-focused"),f),"".concat(i,"-disabled"),w.every(function(K){return K})),"".concat(i,"-invalid"),I.some(function(K){return K})),"".concat(i,"-rtl"),P),D),style:S,ref:y,onClick:k,onMouseDown:function(L){var U=L.target;U!==m.current.inputElement&&U!==v.current.inputElement&&L.preventDefault(),N==null||N(L)}}),n&&a.createElement("div",{className:"".concat(i,"-prefix")},n),a.createElement(Ja,Ee({ref:m},J(0),{autoFocus:V,tabIndex:M,"date-range":"start"})),a.createElement("div",{className:"".concat(i,"-range-separator")},c),a.createElement(Ja,Ee({ref:v},J(1),{autoFocus:X,tabIndex:M,"date-range":"end"})),a.createElement("div",{className:"".concat(i,"-active-bar"),style:G}),a.createElement(pa,{type:"suffix",icon:u}),_&&a.createElement(Xa,{icon:l,onClear:p})))}var Ps=a.forwardRef(Os);function un(t,s){var r=t??s;return Array.isArray(r)?r:[r,r]}function ua(t){return t===1?"end":"start"}function Rs(t,s){var r=Un(t,function(){var be=t.disabled,ie=t.allowEmpty,xe=un(be,!1),Be=un(ie,!1);return{disabled:xe,allowEmpty:Be}}),n=z(r,6),l=n[0],u=n[1],d=n[2],c=n[3],h=n[4],f=n[5],o=l.prefixCls,D=l.styles,S=l.classNames,k=l.defaultValue,p=l.value,j=l.needConfirm,w=l.onKeyDown,I=l.disabled,O=l.allowEmpty,C=l.disabledDate,N=l.minDate,E=l.maxDate,M=l.defaultOpen,q=l.open,P=l.onOpenChange,T=l.locale,i=l.generateConfig,x=l.picker,y=l.showNow,m=l.showToday,v=l.showTime,b=l.mode,F=l.onPanelChange,H=l.onCalendarChange,W=l.onOk,Z=l.defaultPickerValue,J=l.pickerValue,Q=l.onPickerValueChange,Y=l.inputReadOnly,G=l.suffixIcon,g=l.onFocus,A=l.onBlur,_=l.presets,V=l.ranges,X=l.components,K=l.cellRender,L=l.dateRender,U=l.monthCellRender,Ce=l.onClick,ye=Kn(s),we=Gn(q,M,I,P),Te=z(we,2),ce=Te[0],De=Te[1],$=function(ie,xe){(I.some(function(Be){return!Be})||!ie)&&De(ie,xe)},me=tr(i,T,c,!0,!1,k,p,H,W),pe=z(me,5),he=pe[0],ue=pe[1],Pe=pe[2],Se=pe[3],Oe=pe[4],ve=Pe(),He=Qn(I,O,ce),Ve=z(He,9),$e=Ve[0],Ge=Ve[1],Ae=Ve[2],fe=Ve[3],Ne=Ve[4],ge=Ve[5],Re=Ve[6],ke=Ve[7],Fe=Ve[8],Qe=function(ie,xe){Ge(!0),g==null||g(ie,{range:ua(xe??fe)})},st=function(ie,xe){Ge(!1),A==null||A(ie,{range:ua(xe??fe)})},Xe=a.useMemo(function(){if(!v)return null;var be=v.disabledTime,ie=be?function(xe){var Be=ua(fe),Ue=En(ve,Re,fe);return be(xe,Be,{from:Ue})}:void 0;return je(je({},v),{},{disabledTime:ie})},[v,fe,ve,Re]),ft=Ft([x,x],{value:b}),ct=z(ft,2),Ke=ct[0],ot=ct[1],Je=Ke[fe]||x,R=Je==="date"&&Xe?"datetime":Je,Ie=R===x&&R!=="time",qe=nr(x,Je,y,m,!0),ze=ar(l,he,ue,Pe,Se,I,c,$e,ce,f),nt=z(ze,2),jt=nt[0],Ct=nt[1],St=ps(ve,I,Re,i,T,C),va=Ln(ve,f,O),ea=z(va,2),ga=ea[0],ya=ea[1],ta=Xn(i,T,ve,Ke,ce,fe,u,Ie,Z,J,Xe==null?void 0:Xe.defaultOpenValue,Q,N,E),aa=z(ta,2),ba=aa[0],na=aa[1],pt=tt(function(be,ie,xe){var Be=Wt(Ke,fe,ie);if((Be[0]!==Ke[0]||Be[1]!==Ke[1])&&ot(Be),F&&xe!==!1){var Ue=gt(ve);be&&(Ue[fe]=be),F(Ue,Be)}}),Ht=function(ie,xe){return Wt(ve,xe,ie)},ut=function(ie,xe){var Be=ve;ie&&(Be=Ht(ie,fe)),ke(fe);var Ue=ge(Be);Se(Be),jt(fe,Ue===null),Ue===null?$(!1,{force:!0}):xe||ye.current.focus({index:Ue})},ja=function(ie){var xe,Be=ie.target.getRootNode();if(!ye.current.nativeElement.contains((xe=Be.activeElement)!==null&&xe!==void 0?xe:document.activeElement)){var Ue=I.findIndex(function(gr){return!gr});Ue>=0&&ye.current.focus({index:Ue})}$(!0),Ce==null||Ce(ie)},ra=function(){Ct(null),$(!1,{force:!0})},Ca=a.useState(null),zt=z(Ca,2),Sa=zt[0],Yt=zt[1],xt=a.useState(null),kt=z(xt,2),Ot=kt[0],Lt=kt[1],sa=a.useMemo(function(){return Ot||ve},[ve,Ot]);a.useEffect(function(){ce||Lt(null)},[ce]);var Da=a.useState([0,0,0]),Ut=z(Da,2),wa=Ut[0],Na=Ut[1],Ia=Wn(_,V),ka=function(ie){Lt(ie),Yt("preset")},Oa=function(ie){var xe=Ct(ie);xe&&$(!1,{force:!0})},Pa=function(ie){ut(ie)},Ra=function(ie){Lt(ie?Ht(ie,fe):null),Yt("cell")},Ma=function(ie){$(!0),Qe(ie)},Ta=function(){Ae("panel")},Ea=function(ie){var xe=Wt(ve,fe,ie);Se(xe),!j&&!d&&u===R&&ut(ie)},Fa=function(){$(!1)},Ba=Bn(K,L,U,ua(fe)),Aa=ve[fe]||null,Va=tt(function(be){return f(be,{activeIndex:fe})}),de=a.useMemo(function(){var be=fa(l,!1),ie=vn(l,[].concat(gt(Object.keys(be)),["onChange","onCalendarChange","style","className","onPanelChange","disabledTime"]));return ie},[l]),te=a.createElement(rr,Ee({},de,{showNow:qe,showTime:Xe,range:!0,multiplePanel:Ie,activeInfo:wa,disabledDate:St,onFocus:Ma,onBlur:st,onPanelMouseDown:Ta,picker:x,mode:Je,internalMode:R,onPanelChange:pt,format:h,value:Aa,isInvalid:Va,onChange:null,onSelect:Ea,pickerValue:ba,defaultOpenValue:Zt(v==null?void 0:v.defaultOpenValue)[fe],onPickerValueChange:na,hoverValue:sa,onHover:Ra,needConfirm:j,onSubmit:ut,onOk:Oe,presets:Ia,onPresetHover:ka,onPresetSubmit:Oa,onNow:Pa,cellRender:Ba})),et=function(ie,xe){var Be=Ht(ie,xe);Se(Be)},dt=function(){Ae("input")},la=function(ie,xe){var Be=Re.length,Ue=Re[Be-1];if(Be&&Ue!==xe&&j&&!O[Ue]&&!Fe(Ue)&&ve[Ue]){ye.current.focus({index:Ue});return}Ae("input"),$(!0,{inherit:!0}),fe!==xe&&ce&&!j&&d&&ut(null,!0),Ne(xe),Qe(ie,xe)},pr=function(ie,xe){if($(!1),!j&&Ae()==="input"){var Be=ge(ve);jt(fe,Be===null)}st(ie,xe)},xr=function(ie,xe){ie.key==="Tab"&&ut(null,!0),w==null||w(ie,xe)},vr=a.useMemo(function(){return{prefixCls:o,locale:T,generateConfig:i,button:X.button,input:X.input}},[o,T,i,X.button,X.input]);return Dt(function(){ce&&fe!==void 0&&pt(null,x,!1)},[ce,fe,x]),Dt(function(){var be=Ae();!ce&&be==="input"&&($(!1),ut(null,!0)),!ce&&d&&!j&&be==="panel"&&($(!0),ut())},[ce]),a.createElement(ht.Provider,{value:vr},a.createElement(zn,Ee({},Yn(l),{popupElement:te,popupStyle:D.popup,popupClassName:S.popup,visible:ce,onClose:Fa,range:!0}),a.createElement(Ps,Ee({},l,{ref:ye,suffixIcon:G,activeIndex:$e||ce?fe:null,activeHelp:!!Ot,allHelp:!!Ot&&Sa==="preset",focused:$e,onFocus:la,onBlur:pr,onKeyDown:xr,onSubmit:ut,value:sa,maskFormat:h,onChange:et,onInputChange:dt,format:c,inputReadOnly:Y,disabled:I,open:ce,onOpenChange:$,onClick:ja,onClear:ra,invalid:ga,onInvalid:ya,onActiveInfo:Na}))))}var Ms=a.forwardRef(Rs);function Ts(t){var s=t.prefixCls,r=t.value,n=t.onRemove,l=t.removeIcon,u=l===void 0?"×":l,d=t.formatDate,c=t.disabled,h=t.maxTagCount,f=t.placeholder,o="".concat(s,"-selector"),D="".concat(s,"-selection"),S="".concat(D,"-overflow");function k(w,I){return a.createElement("span",{className:Ye("".concat(D,"-item")),title:typeof w=="string"?w:null},a.createElement("span",{className:"".concat(D,"-item-content")},w),!c&&I&&a.createElement("span",{onMouseDown:function(C){C.preventDefault()},onClick:I,className:"".concat(D,"-item-remove")},u))}function p(w){var I=d(w),O=function(N){N&&N.stopPropagation(),n(w)};return k(I,O)}function j(w){var I="+ ".concat(w.length," ...");return k(I)}return a.createElement("div",{className:o},a.createElement(Tr,{prefixCls:S,data:r,renderItem:p,renderRest:j,itemKey:function(I){return d(I)},maxCount:h}),!r.length&&a.createElement("span",{className:"".concat(s,"-selection-placeholder")},f))}var Es=["id","open","prefix","clearIcon","suffixIcon","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","internalPicker","value","onChange","onSubmit","onInputChange","multiple","maxTagCount","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onMouseDown","required","aria-required","autoFocus","tabIndex","removeIcon"];function Fs(t,s){t.id;var r=t.open,n=t.prefix,l=t.clearIcon,u=t.suffixIcon;t.activeHelp,t.allHelp;var d=t.focused;t.onFocus,t.onBlur,t.onKeyDown;var c=t.locale,h=t.generateConfig,f=t.placeholder,o=t.className,D=t.style,S=t.onClick,k=t.onClear,p=t.internalPicker,j=t.value,w=t.onChange,I=t.onSubmit;t.onInputChange;var O=t.multiple,C=t.maxTagCount;t.format,t.maskFormat,t.preserveInvalidOnBlur,t.onInvalid;var N=t.disabled,E=t.invalid;t.inputReadOnly;var M=t.direction;t.onOpenChange;var q=t.onMouseDown;t.required,t["aria-required"];var P=t.autoFocus,T=t.tabIndex,i=t.removeIcon,x=At(t,Es),y=M==="rtl",m=a.useContext(ht),v=m.prefixCls,b=a.useRef(),F=a.useRef();a.useImperativeHandle(s,function(){return{nativeElement:b.current,focus:function(V){var X;(X=F.current)===null||X===void 0||X.focus(V)},blur:function(){var V;(V=F.current)===null||V===void 0||V.blur()}}});var H=lr(x),W=function(V){w([V])},Z=function(V){var X=j.filter(function(K){return K&&!vt(h,c,K,V,p)});w(X),r||I()},J=sr(je(je({},t),{},{onChange:W}),function(_){var V=_.valueTexts;return{value:V[0]||"",active:d}}),Q=z(J,2),Y=Q[0],G=Q[1],g=!!(l&&j.length&&!N),A=O?a.createElement(a.Fragment,null,a.createElement(Ts,{prefixCls:v,value:j,onRemove:Z,formatDate:G,maxTagCount:C,disabled:N,removeIcon:i,placeholder:f}),a.createElement("input",{className:"".concat(v,"-multiple-input"),value:j.map(G).join(","),ref:F,readOnly:!0,autoFocus:P,tabIndex:T}),a.createElement(pa,{type:"suffix",icon:u}),g&&a.createElement(Xa,{icon:l,onClear:k})):a.createElement(Ja,Ee({ref:F},Y(),{autoFocus:P,tabIndex:T,suffixIcon:u,clearIcon:g&&a.createElement(Xa,{icon:l,onClear:k}),showActiveCls:!1}));return a.createElement("div",Ee({},H,{className:Ye(v,_e(_e(_e(_e(_e({},"".concat(v,"-multiple"),O),"".concat(v,"-focused"),d),"".concat(v,"-disabled"),N),"".concat(v,"-invalid"),E),"".concat(v,"-rtl"),y),o),style:D,ref:b,onClick:S,onMouseDown:function(V){var X,K=V.target;K!==((X=F.current)===null||X===void 0?void 0:X.inputElement)&&V.preventDefault(),q==null||q(V)}}),n&&a.createElement("div",{className:"".concat(v,"-prefix")},n),A)}var Bs=a.forwardRef(Fs);function As(t,s){var r=Un(t),n=z(r,6),l=n[0],u=n[1],d=n[2],c=n[3],h=n[4],f=n[5],o=l,D=o.prefixCls,S=o.styles,k=o.classNames,p=o.order,j=o.defaultValue,w=o.value,I=o.needConfirm,O=o.onChange,C=o.onKeyDown,N=o.disabled,E=o.disabledDate,M=o.minDate,q=o.maxDate,P=o.defaultOpen,T=o.open,i=o.onOpenChange,x=o.locale,y=o.generateConfig,m=o.picker,v=o.showNow,b=o.showToday,F=o.showTime,H=o.mode,W=o.onPanelChange,Z=o.onCalendarChange,J=o.onOk,Q=o.multiple,Y=o.defaultPickerValue,G=o.pickerValue,g=o.onPickerValueChange,A=o.inputReadOnly,_=o.suffixIcon,V=o.removeIcon,X=o.onFocus,K=o.onBlur,L=o.presets,U=o.components,Ce=o.cellRender,ye=o.dateRender,we=o.monthCellRender,Te=o.onClick,ce=Kn(s);function De(de){return de===null?null:Q?de:de[0]}var $=Gr(y,x,u),me=Gn(T,P,[N],i),pe=z(me,2),he=pe[0],ue=pe[1],Pe=function(te,et,dt){if(Z){var la=je({},dt);delete la.range,Z(De(te),De(et),la)}},Se=function(te){J==null||J(De(te))},Oe=tr(y,x,c,!1,p,j,w,Pe,Se),ve=z(Oe,5),He=ve[0],Ve=ve[1],$e=ve[2],Ge=ve[3],Ae=ve[4],fe=$e(),Ne=Qn([N]),ge=z(Ne,4),Re=ge[0],ke=ge[1],Fe=ge[2],Qe=ge[3],st=function(te){ke(!0),X==null||X(te,{})},Xe=function(te){ke(!1),K==null||K(te,{})},ft=Ft(m,{value:H}),ct=z(ft,2),Ke=ct[0],ot=ct[1],Je=Ke==="date"&&F?"datetime":Ke,R=nr(m,Ke,v,b),Ie=O&&function(de,te){O(De(de),De(te))},qe=ar(je(je({},l),{},{onChange:Ie}),He,Ve,$e,Ge,[],c,Re,he,f),ze=z(qe,2),nt=ze[1],jt=Ln(fe,f),Ct=z(jt,2),St=Ct[0],va=Ct[1],ea=a.useMemo(function(){return St.some(function(de){return de})},[St]),ga=function(te,et){if(g){var dt=je(je({},et),{},{mode:et.mode[0]});delete dt.range,g(te[0],dt)}},ya=Xn(y,x,fe,[Ke],he,Qe,u,!1,Y,G,Zt(F==null?void 0:F.defaultOpenValue),ga,M,q),ta=z(ya,2),aa=ta[0],ba=ta[1],na=tt(function(de,te,et){if(ot(te),W&&et!==!1){var dt=de||fe[fe.length-1];W(dt,te)}}),pt=function(){nt($e()),ue(!1,{force:!0})},Ht=function(te){!N&&!ce.current.nativeElement.contains(document.activeElement)&&ce.current.focus(),ue(!0),Te==null||Te(te)},ut=function(){nt(null),ue(!1,{force:!0})},ja=a.useState(null),ra=z(ja,2),Ca=ra[0],zt=ra[1],Sa=a.useState(null),Yt=z(Sa,2),xt=Yt[0],kt=Yt[1],Ot=a.useMemo(function(){var de=[xt].concat(gt(fe)).filter(function(te){return te});return Q?de:de.slice(0,1)},[fe,xt,Q]),Lt=a.useMemo(function(){return!Q&&xt?[xt]:fe.filter(function(de){return de})},[fe,xt,Q]);a.useEffect(function(){he||kt(null)},[he]);var sa=Wn(L),Da=function(te){kt(te),zt("preset")},Ut=function(te){var et=Q?$($e(),te):[te],dt=nt(et);dt&&!Q&&ue(!1,{force:!0})},wa=function(te){Ut(te)},Na=function(te){kt(te),zt("cell")},Ia=function(te){ue(!0),st(te)},ka=function(te){if(Fe("panel"),!(Q&&Je!==m)){var et=Q?$($e(),te):[te];Ge(et),!I&&!d&&u===Je&&pt()}},Oa=function(){ue(!1)},Pa=Bn(Ce,ye,we),Ra=a.useMemo(function(){var de=fa(l,!1),te=vn(l,[].concat(gt(Object.keys(de)),["onChange","onCalendarChange","style","className","onPanelChange"]));return je(je({},te),{},{multiple:l.multiple})},[l]),Ma=a.createElement(rr,Ee({},Ra,{showNow:R,showTime:F,disabledDate:E,onFocus:Ia,onBlur:Xe,picker:m,mode:Ke,internalMode:Je,onPanelChange:na,format:h,value:fe,isInvalid:f,onChange:null,onSelect:ka,pickerValue:aa,defaultOpenValue:F==null?void 0:F.defaultOpenValue,onPickerValueChange:ba,hoverValue:Ot,onHover:Na,needConfirm:I,onSubmit:pt,onOk:Ae,presets:sa,onPresetHover:Da,onPresetSubmit:Ut,onNow:wa,cellRender:Pa})),Ta=function(te){Ge(te)},Ea=function(){Fe("input")},Fa=function(te){Fe("input"),ue(!0,{inherit:!0}),st(te)},Ba=function(te){ue(!1),Xe(te)},Aa=function(te,et){te.key==="Tab"&&pt(),C==null||C(te,et)},Va=a.useMemo(function(){return{prefixCls:D,locale:x,generateConfig:y,button:U.button,input:U.input}},[D,x,y,U.button,U.input]);return Dt(function(){he&&Qe!==void 0&&na(null,m,!1)},[he,Qe,m]),Dt(function(){var de=Fe();!he&&de==="input"&&(ue(!1),pt()),!he&&d&&!I&&de==="panel"&&pt()},[he]),a.createElement(ht.Provider,{value:Va},a.createElement(zn,Ee({},Yn(l),{popupElement:Ma,popupStyle:S.popup,popupClassName:k.popup,visible:he,onClose:Oa}),a.createElement(Bs,Ee({},l,{ref:ce,suffixIcon:_,removeIcon:V,activeHelp:!!xt,allHelp:!!xt&&Ca==="preset",focused:Re,onFocus:Fa,onBlur:Ba,onKeyDown:Aa,onSubmit:pt,value:Lt,maskFormat:h,onChange:Ta,onInputChange:Ea,internalPicker:u,format:c,inputReadOnly:A,disabled:N,open:he,onOpenChange:ue,onClick:Ht,onClear:ut,invalid:ea,onInvalid:function(te){va(te,0)}}))))}var Vs=a.forwardRef(As),$s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},qs=function(s,r){return a.createElement(wt,Ee({},s,{ref:r,icon:$s}))},ir=a.forwardRef(qs),_s={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"},Hs=function(s,r){return a.createElement(wt,Ee({},s,{ref:r,icon:_s}))},zs=a.forwardRef(Hs);function Ys(t,s,r){return r!==void 0?r:s==="year"&&t.lang.yearPlaceholder?t.lang.yearPlaceholder:s==="quarter"&&t.lang.quarterPlaceholder?t.lang.quarterPlaceholder:s==="month"&&t.lang.monthPlaceholder?t.lang.monthPlaceholder:s==="week"&&t.lang.weekPlaceholder?t.lang.weekPlaceholder:s==="time"&&t.timePickerLocale.placeholder?t.timePickerLocale.placeholder:t.lang.placeholder}function Ls(t,s,r){return r!==void 0?r:s==="year"&&t.lang.yearPlaceholder?t.lang.rangeYearPlaceholder:s==="quarter"&&t.lang.quarterPlaceholder?t.lang.rangeQuarterPlaceholder:s==="month"&&t.lang.monthPlaceholder?t.lang.rangeMonthPlaceholder:s==="week"&&t.lang.weekPlaceholder?t.lang.rangeWeekPlaceholder:s==="time"&&t.timePickerLocale.placeholder?t.timePickerLocale.rangePlaceholder:t.lang.rangePlaceholder}function or(t,s){const{allowClear:r=!0}=t,{clearIcon:n,removeIcon:l}=Er(Object.assign(Object.assign({},t),{prefixCls:s,componentName:"DatePicker"}));return[a.useMemo(()=>r===!1?!1:Object.assign({clearIcon:n},r===!0?{}:r),[r,n]),l]}const[Us,Gs]=["week","WeekPicker"],[Ks,Ws]=["month","MonthPicker"],[Qs,Xs]=["year","YearPicker"],[Js,Zs]=["quarter","QuarterPicker"],[Za,dn]=["time","TimePicker"],el=t=>a.createElement(ee,Object.assign({size:"small",type:"primary"},t));function cr(t){return a.useMemo(()=>Object.assign({button:el},t),[t])}function ur(t,...s){const r=t||{};return s.reduce((n,l)=>(Object.keys(l||{}).forEach(u=>{const d=r[u],c=l[u];if(d&&typeof d=="object")if(c&&typeof c=="object")n[u]=ur(d,n[u],c);else{const{_default:h}=d;n[u]=n[u]||{},n[u][h]=Ye(n[u][h],c)}else n[u]=Ye(n[u],c)}),n),{})}function tl(t,...s){return a.useMemo(()=>ur.apply(void 0,[t].concat(s)),[s])}function al(...t){return a.useMemo(()=>t.reduce((s,r={})=>(Object.keys(r).forEach(n=>{s[n]=Object.assign(Object.assign({},s[n]),r[n])}),s),{}),[t])}function en(t,s){const r=Object.assign({},t);return Object.keys(s).forEach(n=>{if(n!=="_default"){const l=s[n],u=r[n]||{};r[n]=l?en(u,l):u}}),r}function nl(t,s,r){const n=tl.apply(void 0,[r].concat(gt(t))),l=al.apply(void 0,gt(s));return a.useMemo(()=>[en(n,r),en(l,r)],[n,l])}const dr=(t,s,r,n,l)=>{const{classNames:u,styles:d}=hn(t),[c,h]=nl([u,s],[d,r],{popup:{_default:"root"}});return a.useMemo(()=>{var f,o;const D=Object.assign(Object.assign({},c),{popup:Object.assign(Object.assign({},c.popup),{root:Ye((f=c.popup)===null||f===void 0?void 0:f.root,n)})}),S=Object.assign(Object.assign({},h),{popup:Object.assign(Object.assign({},h.popup),{root:Object.assign(Object.assign({},(o=h.popup)===null||o===void 0?void 0:o.root),l)})});return[D,S]},[c,h,n,l])};var rl=function(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(t);l<n.length;l++)s.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(t,n[l])&&(r[n[l]]=t[n[l]]);return r};const sl=t=>a.forwardRef((r,n)=>{var l;const{prefixCls:u,getPopupContainer:d,components:c,className:h,style:f,placement:o,size:D,disabled:S,bordered:k=!0,placeholder:p,popupStyle:j,popupClassName:w,dropdownClassName:I,status:O,rootClassName:C,variant:N,picker:E,styles:M,classNames:q}=r,P=rl(r,["prefixCls","getPopupContainer","components","className","style","placement","size","disabled","bordered","placeholder","popupStyle","popupClassName","dropdownClassName","status","rootClassName","variant","picker","styles","classNames"]),T=E===Za?"timePicker":"datePicker",i=a.useRef(null),{getPrefixCls:x,direction:y,getPopupContainer:m,rangePicker:v}=a.useContext(gn),b=x("picker",u),{compactSize:F,compactItemClassnames:H}=yn(b,y),W=x(),[Z,J]=bn("rangePicker",N,k),Q=jn(b),[Y,G,g]=An(b,Q),[A,_]=dr(T,q,M,w||I,j),[V]=or(r,b),X=cr(c),K=Cn(pe=>{var he;return(he=D??F)!==null&&he!==void 0?he:pe}),L=a.useContext(Sn),U=S??L,Ce=a.useContext(Dn),{hasFeedback:ye,status:we,feedbackIcon:Te}=Ce,ce=a.createElement(a.Fragment,null,E===Za?a.createElement(ir,null):a.createElement(Vn,null),ye&&Te);a.useImperativeHandle(n,()=>i.current);const[De]=wn("Calendar",Nn),$=Object.assign(Object.assign({},De),r.locale),[me]=In("DatePicker",(l=_.popup.root)===null||l===void 0?void 0:l.zIndex);return Y(a.createElement(kn,{space:!0},a.createElement(Ms,Object.assign({separator:a.createElement("span",{"aria-label":"to",className:`${b}-separator`},a.createElement(zs,null)),disabled:U,ref:i,placement:o,placeholder:Ls($,E,p),suffixIcon:ce,prevIcon:a.createElement("span",{className:`${b}-prev-icon`}),nextIcon:a.createElement("span",{className:`${b}-next-icon`}),superPrevIcon:a.createElement("span",{className:`${b}-super-prev-icon`}),superNextIcon:a.createElement("span",{className:`${b}-super-next-icon`}),transitionName:`${W}-slide-up`,picker:E},P,{className:Ye({[`${b}-${K}`]:K,[`${b}-${Z}`]:J},On(b,Pn(we,O),ye),G,H,h,v==null?void 0:v.className,g,Q,C,A.root),style:Object.assign(Object.assign(Object.assign({},v==null?void 0:v.style),f),_.root),locale:$.lang,prefixCls:b,getPopupContainer:d||m,generateConfig:t,components:X,direction:y,classNames:{popup:Ye(G,g,Q,C,A.popup.root)},styles:{popup:Object.assign(Object.assign({},_.popup.root),{zIndex:me})},allowClear:V}))))});var ll=function(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(t);l<n.length;l++)s.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(t,n[l])&&(r[n[l]]=t[n[l]]);return r};const il=t=>{const s=(h,f)=>{const o=f===dn?"timePicker":"datePicker";return a.forwardRef((S,k)=>{var p;const{prefixCls:j,getPopupContainer:w,components:I,style:O,className:C,rootClassName:N,size:E,bordered:M,placement:q,placeholder:P,popupStyle:T,popupClassName:i,dropdownClassName:x,disabled:y,status:m,variant:v,onCalendarChange:b,styles:F,classNames:H}=S,W=ll(S,["prefixCls","getPopupContainer","components","style","className","rootClassName","size","bordered","placement","placeholder","popupStyle","popupClassName","dropdownClassName","disabled","status","variant","onCalendarChange","styles","classNames"]),{getPrefixCls:Z,direction:J,getPopupContainer:Q,[o]:Y}=a.useContext(gn),G=Z("picker",j),{compactSize:g,compactItemClassnames:A}=yn(G,J),_=a.useRef(null),[V,X]=bn("datePicker",v,M),K=jn(G),[L,U,Ce]=An(G,K);a.useImperativeHandle(k,()=>_.current);const ye={showToday:!0},we=h||S.picker,Te=Z(),{onSelect:ce,multiple:De}=W,$=ce&&h==="time"&&!De,me=(ke,Fe,Qe)=>{b==null||b(ke,Fe,Qe),$&&ce(ke)},[pe,he]=dr(o,H,F,i||x,T),[ue,Pe]=or(S,G),Se=cr(I),Oe=Cn(ke=>{var Fe;return(Fe=E??g)!==null&&Fe!==void 0?Fe:ke}),ve=a.useContext(Sn),He=y??ve,Ve=a.useContext(Dn),{hasFeedback:$e,status:Ge,feedbackIcon:Ae}=Ve,fe=a.createElement(a.Fragment,null,we==="time"?a.createElement(ir,null):a.createElement(Vn,null),$e&&Ae),[Ne]=wn("DatePicker",Nn),ge=Object.assign(Object.assign({},Ne),S.locale),[Re]=In("DatePicker",(p=he.popup.root)===null||p===void 0?void 0:p.zIndex);return L(a.createElement(kn,{space:!0},a.createElement(Vs,Object.assign({ref:_,placeholder:Ys(ge,we,P),suffixIcon:fe,placement:q,prevIcon:a.createElement("span",{className:`${G}-prev-icon`}),nextIcon:a.createElement("span",{className:`${G}-next-icon`}),superPrevIcon:a.createElement("span",{className:`${G}-super-prev-icon`}),superNextIcon:a.createElement("span",{className:`${G}-super-next-icon`}),transitionName:`${Te}-slide-up`,picker:h,onCalendarChange:me},ye,W,{locale:ge.lang,className:Ye({[`${G}-${Oe}`]:Oe,[`${G}-${V}`]:X},On(G,Pn(Ge,m),$e),U,A,Y==null?void 0:Y.className,C,Ce,K,N,pe.root),style:Object.assign(Object.assign(Object.assign({},Y==null?void 0:Y.style),O),he.root),prefixCls:G,getPopupContainer:w||Q,generateConfig:t,components:Se,direction:J,disabled:He,classNames:{popup:Ye(U,Ce,K,N,pe.popup.root)},styles:{popup:Object.assign(Object.assign({},he.popup.root),{zIndex:Re})},allowClear:ue,removeIcon:Pe}))))})},r=s(),n=s(Us,Gs),l=s(Ks,Ws),u=s(Qs,Xs),d=s(Js,Zs),c=s(Za,dn);return{DatePicker:r,WeekPicker:n,MonthPicker:l,YearPicker:u,TimePicker:c,QuarterPicker:d}},mr=t=>{const{DatePicker:s,WeekPicker:r,MonthPicker:n,YearPicker:l,TimePicker:u,QuarterPicker:d}=il(t),c=sl(t),h=s;return h.WeekPicker=r,h.MonthPicker=n,h.YearPicker=l,h.RangePicker=c,h.TimePicker=u,h.QuarterPicker=d,h},Le=mr(Kr),ol=Rn(Le,"popupAlign",void 0,"picker");Le._InternalPanelDoNotUseOrYouWillBeFired=ol;const cl=Rn(Le.RangePicker,"popupAlign",void 0,"picker");Le._InternalRangePanelDoNotUseOrYouWillBeFired=cl;Le.generatePicker=mr;var ul={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM340 683v77c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-77c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198V264c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v221c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5.3-.5.7-.9 1-1.4.1-.1.2-.3.3-.4.5-.6.9-1.1 1.4-1.6l.3-.3 1.2-1.2.4-.4c.5-.5 1-.9 1.6-1.4.6-.5 1.1-.9 1.7-1.3.2-.1.3-.2.5-.3.5-.3.9-.7 1.4-1 .1-.1.3-.2.4-.3.6-.4 1.2-.7 1.9-1.1.1-.1.3-.1.4-.2.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8.7-.3 1.4-.5 2.1-.7.2-.1.4-.1.6-.2.6-.2 1.1-.3 1.7-.4.2 0 .3-.1.5-.1.7-.2 1.5-.3 2.2-.4.2 0 .3 0 .5-.1.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2.2 0 .3 0 .5.1.7.1 1.5.2 2.2.4.2 0 .3.1.5.1.6.1 1.2.3 1.7.4.2.1.4.1.6.2.7.2 1.4.4 2.1.7.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8.1.1.3.1.4.2.6.3 1.3.7 1.9 1.1.1.1.3.2.4.3.5.3 1 .6 1.4 1 .2.1.3.2.5.3.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4 1.2 1.2.3.3c.5.5 1 1.1 1.4 1.6.1.1.2.3.3.4.4.4.7.9 1 1.4.1.2.2.3.3.5l1.2 1.8s0 .1.1.1a36.18 36.18 0 015.1 18.5c0 6-1.5 11.7-4.1 16.7-.3.6-.7 1.2-1 1.8 0 0 0 .1-.1.1l-1.2 1.8c-.1.2-.2.3-.3.5-.3.5-.7.9-1 1.4-.1.1-.2.3-.3.4-.5.6-.9 1.1-1.4 1.6l-.3.3-1.2 1.2-.4.4c-.5.5-1 .9-1.6 1.4-.6.5-1.1.9-1.7 1.3-.2.1-.3.2-.5.3-.5.3-.9.7-1.4 1-.1.1-.3.2-.4.3-.6.4-1.2.7-1.9 1.1-.1.1-.3.1-.4.2-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8-.7.3-1.4.5-2.1.7-.2.1-.4.1-.6.2-.6.2-1.1.3-1.7.4-.2 0-.3.1-.5.1-.7.2-1.5.3-2.2.4-.2 0-.3 0-.5.1-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2-.2 0-.3 0-.5-.1-.7-.1-1.5-.2-2.2-.4-.2 0-.3-.1-.5-.1-.6-.1-1.2-.3-1.7-.4-.2-.1-.4-.1-.6-.2-.7-.2-1.4-.4-2.1-.7-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8-.1-.1-.3-.1-.4-.2-.6-.3-1.3-.7-1.9-1.1-.1-.1-.3-.2-.4-.3-.5-.3-1-.6-1.4-1-.2-.1-.3-.2-.5-.3-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4-1.2-1.2-.3-.3c-.5-.5-1-1.1-1.4-1.6-.1-.1-.2-.3-.3-.4-.4-.4-.7-.9-1-1.4-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7zM620 539v221c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V539c-10.1 3.3-20.8 5-32 5s-21.9-1.8-32-5zm64-198v-77c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v77c10.1-3.3 20.8-5 32-5s21.9 1.8 32 5zm-64 198c10.1 3.3 20.8 5 32 5s21.9-1.8 32-5c41.8-13.5 72-52.7 72-99s-30.2-85.5-72-99c-10.1-3.3-20.8-5-32-5s-21.9 1.8-32 5c-41.8 13.5-72 52.7-72 99s30.2 85.5 72 99zm.1-115.7c.3-.6.7-1.2 1-1.8v-.1l1.2-1.8c.1-.2.2-.3.3-.5.3-.5.7-.9 1-1.4.1-.1.2-.3.3-.4.5-.6.9-1.1 1.4-1.6l.3-.3 1.2-1.2.4-.4c.5-.5 1-.9 1.6-1.4.6-.5 1.1-.9 1.7-1.3.2-.1.3-.2.5-.3.5-.3.9-.7 1.4-1 .1-.1.3-.2.4-.3.6-.4 1.2-.7 1.9-1.1.1-.1.3-.1.4-.2.5-.3 1-.5 1.6-.8l.6-.3c.7-.3 1.3-.6 2-.8.7-.3 1.4-.5 2.1-.7.2-.1.4-.1.6-.2.6-.2 1.1-.3 1.7-.4.2 0 .3-.1.5-.1.7-.2 1.5-.3 2.2-.4.2 0 .3 0 .5-.1.6-.1 1.2-.1 1.8-.2h.6c.8 0 1.5-.1 2.3-.1s1.5 0 2.3.1h.6c.6 0 1.2.1 1.8.2.2 0 .3 0 .5.1.7.1 1.5.2 2.2.4.2 0 .3.1.5.1.6.1 1.2.3 1.7.4.2.1.4.1.6.2.7.2 1.4.4 2.1.7.7.2 1.3.5 2 .8l.6.3c.5.2 1.1.5 1.6.8.1.1.3.1.4.2.6.3 1.3.7 1.9 1.1.1.1.3.2.4.3.5.3 1 .6 1.4 1 .2.1.3.2.5.3.6.4 1.2.9 1.7 1.3s1.1.9 1.6 1.4l.4.4 1.2 1.2.3.3c.5.5 1 1.1 1.4 1.6.1.1.2.3.3.4.4.4.7.9 1 1.4.1.2.2.3.3.5l1.2 1.8v.1a36.18 36.18 0 015.1 18.5c0 6-1.5 11.7-4.1 16.7-.3.6-.7 1.2-1 1.8v.1l-1.2 1.8c-.1.2-.2.3-.3.5-.3.5-.7.9-1 1.4-.1.1-.2.3-.3.4-.5.6-.9 1.1-1.4 1.6l-.3.3-1.2 1.2-.4.4c-.5.5-1 .9-1.6 1.4-.6.5-1.1.9-1.7 1.3-.2.1-.3.2-.5.3-.5.3-.9.7-1.4 1-.1.1-.3.2-.4.3-.6.4-1.2.7-1.9 1.1-.1.1-.3.1-.4.2-.5.3-1 .5-1.6.8l-.6.3c-.7.3-1.3.6-2 .8-.7.3-1.4.5-2.1.7-.2.1-.4.1-.6.2-.6.2-1.1.3-1.7.4-.2 0-.3.1-.5.1-.7.2-1.5.3-2.2.4-.2 0-.3 0-.5.1-.6.1-1.2.1-1.8.2h-.6c-.8 0-1.5.1-2.3.1s-1.5 0-2.3-.1h-.6c-.6 0-1.2-.1-1.8-.2-.2 0-.3 0-.5-.1-.7-.1-1.5-.2-2.2-.4-.2 0-.3-.1-.5-.1-.6-.1-1.2-.3-1.7-.4-.2-.1-.4-.1-.6-.2-.7-.2-1.4-.4-2.1-.7-.7-.2-1.3-.5-2-.8l-.6-.3c-.5-.2-1.1-.5-1.6-.8-.1-.1-.3-.1-.4-.2-.6-.3-1.3-.7-1.9-1.1-.1-.1-.3-.2-.4-.3-.5-.3-1-.6-1.4-1-.2-.1-.3-.2-.5-.3-.6-.4-1.2-.9-1.7-1.3s-1.1-.9-1.6-1.4l-.4-.4-1.2-1.2-.3-.3c-.5-.5-1-1.1-1.4-1.6-.1-.1-.2-.3-.3-.4-.4-.4-.7-.9-1-1.4-.1-.2-.2-.3-.3-.5l-1.2-1.8v-.1c-.4-.6-.7-1.2-1-1.8-2.6-5-4.1-10.7-4.1-16.7s1.5-11.7 4.1-16.7z"}}]},name:"control",theme:"outlined"},dl=function(s,r){return a.createElement(wt,Ee({},s,{ref:r,icon:ul}))},Ka=a.forwardRef(dl),ml={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM382 896h-.2L232 746.2v-.2h150v150z"}}]},name:"copy",theme:"filled"},hl=function(s,r){return a.createElement(wt,Ee({},s,{ref:r,icon:ml}))},xa=a.forwardRef(hl),fl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"},pl=function(s,r){return a.createElement(wt,Ee({},s,{ref:r,icon:fl}))},hr=a.forwardRef(pl),xl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},vl=function(s,r){return a.createElement(wt,Ee({},s,{ref:r,icon:xl}))},fr=a.forwardRef(vl),gl={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},yl=function(s,r){return a.createElement(wt,Ee({},s,{ref:r,icon:gl}))},bl=a.forwardRef(yl);const jl=()=>{const{message:t}=Nt.useApp(),[s,r]=a.useState(""),[n,l]=a.useState("Newest"),[u,d]=a.useState({field:"id",order:"descend"}),[c,h]=a.useState(1),[f,o]=a.useState(10),[D,S]=a.useState([]),[k,p]=a.useState([]),[j,w]=a.useState(!1),[I,O]=a.useState(!1),[C,N]=a.useState(!1),[E,M]=a.useState(null),[q,P]=a.useState(null),[T,i]=a.useState(!1),[x,y]=a.useState("default"),{logUserActivity:m}=Qt(),{logUserNotification:v}=Xt(),{userData:b}=$t(),{userData:F}=qt(),H=(b==null?void 0:b.username)||(F==null?void 0:F.username)||"Unknown User",W=!!b,Z=!!F,J=W?"admin":Z?"user":"guest",Q=async()=>{i(!0),r(""),l("Newest"),d({field:"id",order:"descend"}),h(1),o(10),S([]);try{const $=await lt();p($)}catch{t.error("Failed to load inventory data.")}finally{i(!1)}};a.useEffect(()=>{Q()},[]);const Y=Q,G=Array.isArray(k)?k.filter($=>Object.values($).join(" ").toLowerCase().includes(s.toLowerCase())):[],g=[...G].sort(($,me)=>{if(u.field&&u.order){const{field:pe,order:he}=u;if(he==="ascend")return $[pe]>me[pe]?1:-1;if(he==="descend")return $[pe]<me[pe]?1:-1}return 0}),A=g.length,_=g.slice((c-1)*f,c*f);return{searchText:s,setSearchText:r,sortOrder:n,setSortOrder:l,sorterConfig:u,setSorterConfig:d,currentPage:c,setCurrentPage:h,pageSize:f,setPageSize:o,selectedRowKeys:D,setSelectedRowKeys:S,dataSource:k,setDataSource:p,isModalVisible:j,setIsModalVisible:w,isEditModalVisible:I,setIsEditModalVisible:O,redistributeItemData:E,setRedistributeItemData:M,isRedistributeModalVisible:C,setIsRedistributeModalVisible:N,editingItem:q,setEditingItem:P,isLoading:T,setIsLoading:i,activeTab:x,setActiveTab:y,username:H,isAdmin:W,isUser:Z,userRole:J,filteredData:G,sortedData:g,paginatedData:_,totalEntries:A,handleRedistribute:$=>{M($),N(!0)},handleRedistributeItem:async $=>{var me,pe;i(!0);try{const he=await $r($);t.success(`Item redistributed successfully! New Item ID: ${he.new_item_id}`);const ue=await lt();p(ue),N(!1),M(null),await m(H,"Inventory",`Redistributed item with ID: ${$.id} to new item ID: ${he.new_item_id}`),await v("Inventory Update",`You redistributed an item with ID: ${$.id} to new item ID: ${he.new_item_id}`)}catch(he){const ue=((pe=(me=he==null?void 0:he.response)==null?void 0:me.data)==null?void 0:pe.message)||he.message||"";ue.toLowerCase().includes("quantity")&&ue.includes("1")?t.error("You can't redistribute an item with quantity of 1."):t.error("Failed to redistribute item."),console.error(he)}finally{i(!1)}},handlePageChange:($,me)=>{h($),o(me)},handleSortOrderChange:$=>{const me=$==="Oldest"?"Oldest":"Newest";l(me),d({field:"id",order:me==="Newest"?"descend":"ascend"}),h(1)},handleTableChange:$=>{$.field&&d({field:$.field,order:$.order})},handleAddItem:async $=>{try{i(!0);const me=await Vr($);if(me&&me.id){t.success(`Item added successfully! ID: ${me.id}`),await m(H,"Inventory",`Added item with ID: ${me.id}`),await v("Inventory Update",`You added an item with ID: ${me.id}`);const pe=await lt();p(pe)}else t.error("Failed to retrieve item ID.")}catch(me){console.error("Error adding item:",me),t.error("Failed to add item.")}finally{i(!1)}},handleEdit:$=>{P($),O(!0)},handleEditItem:async($,me=null)=>{const pe=me||q;if(!Object.keys($).some(ue=>{const Pe=$[ue],Se=pe[ue];if(ue==="issuedDate"||ue==="purchaseDate"){const Oe=Se?Me(Se).format("YYYY-MM-DD"):null;return Pe!==Oe}if(ue==="quantity"){const Oe=Number(Pe),ve=Number(Se);return Oe!==ve}return typeof Pe=="string"?Pe.trim()!==(Se||"").trim():Pe!==Se})){t.error("No changes detected.");return}i(!0);try{const ue=await Ar({...$,id:($==null?void 0:$.id)||(q==null?void 0:q.id)});if(ue.message==="Item updated successfully"){const Pe=await lt();p(Pe),t.success(`Item with ID ${$.id} updated successfully!`),await m(H,"Inventory",`Updated item with ID: ${$.id}`),await v("Inventory Update",`You edited an item with ID: ${$.id}`),O(!1)}else t.error(ue.message||"Failed to update item.")}catch(ue){console.error("Error updating item:",ue),ue.response&&ue.response.data&&ue.response.data.message?t.error(`Failed to update item: ${ue.response.data.message}`):t.error("Failed to update item. Please try again.")}finally{i(!1)}},handleBatchDelete:async()=>{if(!W){t.error("You do not have permission to delete items.");return}if(D.length===0){t.warning("Please select items to delete.");return}try{if((await Br(D)).message==="Items deleted successfully"){const me=await lt();p(me),S([]),t.success("Items deleted successfully!"),await m(H,"Inventory",`Deleted item(s) with ID(s): ${D.join(", ")}`),await v("Inventory Update",`You deleted item(s) with ID(s): ${D.join(", ")}`)}else t.error("Error deleting items.")}catch($){console.error("Error deleting items:",$),t.error("Failed to delete items. Please try again.")}finally{i(!1)}},handleTabChange:$=>{document.activeElement&&document.activeElement.blur(),y($)},handleRefresh:Y,rowSelection:W||J==="user"?{selectedRowKeys:D,onChange:S}:null}},Cl=async t=>{try{return(await It.post("/save_template.php",t)).data}catch(s){throw s}},Sl=async()=>{try{return(await It.get("/get_templates.php")).data}catch(t){throw t}},Dl=async(t,s)=>{try{return(await It.put(`/update_template.php?id=${t}`,s)).data}catch(r){throw r}},wl=async t=>{try{return(await It.delete(`/delete_template.php?id=${t}`)).data}catch(s){throw s}},Nl=t=>{const[s,r]=a.useState(null),[n,l]=a.useState(null),[u,d]=a.useState([]),[c,h]=a.useState(!1),[f,o]=a.useState(null),[D]=B.useForm(),{message:S}=Nt.useApp(),[k,p]=a.useState(0),{logUserActivity:j}=Qt(),{logUserNotification:w}=Xt(),I=$t(),O=qt();a.useEffect(()=>{C()},[k]);const C=async()=>{try{const i=await Sl();i.success&&(d(i.templates),s==="User Templates"&&(r(null),l(null),t(null)))}catch(i){console.error("Error loading templates:",i),S.error("Error loading templates")}};return{selectedCategory:s,selectedType:n,userTemplates:u,isEditModalVisible:c,editingTemplate:f,form:D,refreshTrigger:k,setRefreshTrigger:p,handleCategoryChange:i=>{if(i==="No Template"||!i){r(null),l(null),t(null);return}r(i),l(null)},handleTypeChange:i=>{if(!i||i==="No Template")return r(null),l(null),t(null),{isUserTemplate:!1};if(l(i),s==="User Templates"){const x=u.find(y=>y.template_name===i);if(x){const y={...x,locationType:x.location.includes("Head Office")?"Head Office":"Other",department:x.location.includes("Head Office")?x.location.split(" - ")[1]:null,location:(x.location.includes("Head Office"),x.location)};return t(y),{isUserTemplate:!0}}}else if(s&&ha[s][i])return t(ha[s][i]),{isUserTemplate:!1}},handleEdit:i=>{o(i),D.setFieldsValue({...i,locationType:i.location.includes("Head Office")?"Head Office":"Other",department:i.location.includes("Head Office")?i.location.split(" - ")[1]:null,location:i.location.includes("Head Office")?null:i.location,purchaseDate:i.purchaseDate?Me(i.purchaseDate):void 0,issuedDate:i.issuedDate?Me(i.issuedDate):void 0}),h(!0)},handleDelete:async i=>{try{const x=await wl(i.id);x.success?(S.success("Template deleted successfully"),d(y=>y.filter(m=>m.id!==i.id)),n===i.template_name&&(r(null),l(null),t(null)),p(y=>y+1),await j(I.userData.username,"Template Deleted",`Template "${i.template_name}" has been deleted.`),await w("Template Deleted",`Template "${i.template_name}" has been deleted.`)):S.error(x.message||"Failed to delete template")}catch(x){console.error("Error deleting template:",x),S.error("Error deleting template")}},handleEditSubmit:async i=>{try{const x={...i,location:i.locationType==="Head Office"?`Head Office - ${i.department}`:i.location,purchaseDate:i.purchaseDate?i.purchaseDate.format("YYYY-MM-DD"):null,issuedDate:i.issuedDate?i.issuedDate.format("YYYY-MM-DD"):null};delete x.locationType,delete x.department;const y=await Dl(f.id,x);if(y.success){if(S.success("Template updated successfully"),h(!1),d(m=>m.map(v=>v.id===f.id?{...v,...x}:v)),n===f.template_name){const m={...f,...x,locationType:x.location.includes("Head Office")?"Head Office":"Other",department:x.location.includes("Head Office")?x.location.split(" - ")[1]:null};t(m)}p(m=>m+1),await j(I.userData.username,"Template Updated",`Template "${i.template_name}" has been updated.`),await w("Template Updated",`Template "${i.template_name}" has been updated.`)}else S.error(y.message||"Failed to update template")}catch(x){console.error("Error updating template:",x),S.error("Error updating template")}},setIsEditModalVisible:h,getCurrentUser:()=>I.token&&I.userData?I.userData:O.token&&O.userData?O.userData:null}},{Option:le}=se,Il={SOD:"SOD",CID:"CID",GAD:"GAD",HRD:"HRD",AFD:"AFD",EOD:"EOD",BDO:"BDO"},ha={"IT Equipment":{"System Unit":{type:"System Unit",brand:"Dell",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Standard office computer",serialNumber:"",purchaseDate:"",issuedDate:""},Laptop:{type:"Laptop",brand:"Lenovo",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Business laptop",serialNumber:"",purchaseDate:"",issuedDate:""},Monitor:{type:"Monitor",brand:"Dell",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Office monitor",serialNumber:"",purchaseDate:"",issuedDate:""},Printer:{type:"Printer",brand:"HP",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Office printer",serialNumber:"",purchaseDate:"",issuedDate:""}},"Network Equipment":{Router:{type:"Router",brand:"Cisco",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Network router",serialNumber:"",purchaseDate:"",issuedDate:""},Switch:{type:"Switch",brand:"Cisco",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Network switch",serialNumber:"",purchaseDate:"",issuedDate:""},Modem:{type:"Modem",brand:"TP-Link",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Internet modem",serialNumber:"",purchaseDate:"",issuedDate:""},"WIFI-Mesh":{type:"WIFI-Mesh",brand:"Ubiquiti",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"Network Department",remarks:"Wireless mesh system",serialNumber:"",purchaseDate:"",issuedDate:""}},"Security Equipment":{CCTV:{type:"CCTV",brand:"Hikvision",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security camera",serialNumber:"",purchaseDate:"",issuedDate:""},Biometrics:{type:"Biometrics",brand:"ZKTeco",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Biometric scanner",serialNumber:"",purchaseDate:"",issuedDate:""},"Metal Detector":{type:"Metal Detector",brand:"Garrett",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security metal detector",serialNumber:"",purchaseDate:"",issuedDate:""},"Guard Tour System":{type:"Guard Tour System",brand:"Detex",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Guard tour monitoring system",serialNumber:"",purchaseDate:"",issuedDate:""}},"Communication Equipment":{Radio:{type:"Radio",brand:"Motorola",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Two-way radio",serialNumber:"",purchaseDate:"",issuedDate:""},Smartphone:{type:"Smartphone",brand:"Samsung",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Office mobile phone",serialNumber:"",purchaseDate:"",issuedDate:""},Headset:{type:"Headset",brand:"Jabra",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Office headset",serialNumber:"",purchaseDate:"",issuedDate:""},Megaphone:{type:"Megaphone",brand:"Pyle",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Communication Department",remarks:"Public address system",serialNumber:"",purchaseDate:"",issuedDate:""}},"Power Equipment":{UPS:{type:"UPS",brand:"APC",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Uninterruptible power supply",serialNumber:"",purchaseDate:"",issuedDate:""},AVR:{type:"AVR",brand:"Stavol",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Automatic voltage regulator",serialNumber:"",purchaseDate:"",issuedDate:""},Battery:{type:"Battery",brand:"Yuasa",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Backup battery",serialNumber:"",purchaseDate:"",issuedDate:""},Charger:{type:"Charger",brand:"Anker",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Device charger",serialNumber:"",purchaseDate:"",issuedDate:""}},Accessories:{Keyboard:{type:"Keyboard",brand:"Logitech",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Computer keyboard",serialNumber:"",purchaseDate:"",issuedDate:""},Mouse:{type:"Mouse",brand:"Logitech",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Computer mouse",serialNumber:"",purchaseDate:"",issuedDate:""},Speaker:{type:"Speaker",brand:"JBL",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Audio speaker",serialNumber:"",purchaseDate:"",issuedDate:""},Microphone:{type:"Microphone",brand:"Shure",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"IT Department",remarks:"Audio microphone",serialNumber:"",purchaseDate:"",issuedDate:""}},Others:{Pedestal:{type:"Pedestal",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"General",remarks:"Equipment pedestal",serialNumber:"",purchaseDate:"",issuedDate:""},Podium:{type:"Podium",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"GAD",location:"General",remarks:"Presentation podium",serialNumber:"",purchaseDate:"",issuedDate:""},"Search Stick":{type:"Search Stick",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security search tool",serialNumber:"",purchaseDate:"",issuedDate:""},Searchlight:{type:"Searchlight",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Security search light",serialNumber:"",purchaseDate:"",issuedDate:""},"Guard Tour Chips":{type:"Guard Tour Chips",brand:"Detex",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Guard tour system chips",serialNumber:"",purchaseDate:"",issuedDate:""},"Under Chassis":{type:"Under Chassis",brand:"Generic",condition:"Brand New",status:"On Stock",quantity:1,locationType:"Head Office",department:"SOD",location:"Security Department",remarks:"Vehicle under chassis scanner",serialNumber:"",purchaseDate:"",issuedDate:""}}},kl=a.forwardRef(({onTemplateSelect:t},s)=>{const{selectedCategory:r,selectedType:n,userTemplates:l,isEditModalVisible:u,form:d,setRefreshTrigger:c,handleCategoryChange:h,handleTypeChange:f,handleEdit:o,handleDelete:D,handleEditSubmit:S,setIsEditModalVisible:k}=Nl(t),p=$t(),j=qt(),w=()=>{const C=p.token&&p.userData,N=j.token&&j.userData;if(C)return p.userData;if(N)return j.userData;const E=bt.get("username"),M=bt.get("user_id");return E&&M?{username:E,id:M}:null},I=C=>{const N=w();return N&&N.username===C.created_by};a.useImperativeHandle(s,()=>({setRefreshTrigger:c,handleTypeChange:f}));const O=Object.keys(ha).sort();return e.jsxs(Et,{direction:"vertical",style:{width:"100%",marginBottom:"16px"},children:[e.jsx(Hn,{message:"Quick Templates",description:"Select a category and type to quickly fill item details, or choose No Template to use your own values",type:"info",showIcon:!0,className:"theme-aware-alert text-xs"}),e.jsxs(Vt,{gutter:16,children:[e.jsx(it,{span:12,children:e.jsxs(se,{placeholder:"Select Category",style:{width:"100%"},onChange:h,value:r,allowClear:!0,children:[e.jsx(le,{value:"No Template",children:"No Template"}),O.map(C=>e.jsx(le,{value:C,children:C},C)),l.length>0&&e.jsx(le,{value:"User Templates",children:"User Templates"})]})}),e.jsx(it,{span:12,children:e.jsx(se,{placeholder:"Select Type",style:{width:"100%"},onChange:f,disabled:!r,value:n,allowClear:!0,optionLabelProp:"label",children:r==="User Templates"?l.sort((C,N)=>C.template_name.localeCompare(N.template_name)).map(C=>e.jsx(le,{value:C.template_name,label:C.template_name,children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500},children:C.template_name}),e.jsxs("div",{style:{fontSize:"12px",color:"#8c8c8c",marginTop:"2px"},children:["Created by: ",C.created_by||"System"]})]}),e.jsxs(Et,{children:[e.jsx(We,{title:I(C)?"Edit Template":"Only the creator can edit this template",children:e.jsx(ee,{type:"text",style:{backgroundColor:"transparent"},icon:e.jsx(an,{}),onClick:N=>{N.stopPropagation(),o(C)},disabled:!I(C)})}),e.jsx(We,{title:I(C)?"Delete Template":"Only the creator can delete this template",children:e.jsx(ee,{type:"text",style:{backgroundColor:"transparent"},danger:!0,icon:e.jsx(da,{}),onClick:N=>{N.stopPropagation(),D(C)},disabled:!I(C)})})]})]})},C.template_name)):r&&Object.keys(ha[r]).sort().map(C=>e.jsx(le,{value:C,children:C},C))})})]}),e.jsx(Fr,{style:{margin:"16px 0"}}),e.jsx(at,{title:"Edit Template",open:u,onCancel:()=>k(!1),footer:null,width:900,children:e.jsx(B,{form:d,onFinish:S,layout:"vertical",children:e.jsxs(Vt,{gutter:16,children:[e.jsxs(it,{span:12,children:[e.jsx(B.Item,{name:"template_name",label:"Template Name",rules:[{required:!0,message:"Please enter template name"}],children:e.jsx(oe,{})}),e.jsx(B.Item,{name:"type",label:"Type",rules:[{required:!0,message:"Please select type"}],children:e.jsxs(se,{children:[e.jsx(le,{value:"AVR",children:"AVR"}),e.jsx(le,{value:"Battery",children:"Battery"}),e.jsx(le,{value:"Biometrics",children:"Biometrics"}),e.jsx(le,{value:"Camera",children:"Camera"}),e.jsx(le,{value:"CCTV",children:"CCTV"}),e.jsx(le,{value:"Charger",children:"Charger"}),e.jsx(le,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(le,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(le,{value:"Headset",children:"Headset"}),e.jsx(le,{value:"Keyboard",children:"Keyboard"}),e.jsx(le,{value:"Laptop",children:"Laptop"}),e.jsx(le,{value:"Megaphone",children:"Megaphone"}),e.jsx(le,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(le,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(le,{value:"Microphone",children:"Microphone"}),e.jsx(le,{value:"Modem",children:"Modem"}),e.jsx(le,{value:"Monitor",children:"Monitor"}),e.jsx(le,{value:"Mouse",children:"Mouse"}),e.jsx(le,{value:"Others",children:"Others"}),e.jsx(le,{value:"Pedestal",children:"Pedestal"}),e.jsx(le,{value:"Podium",children:"Podium"}),e.jsx(le,{value:"Printer",children:"Printer"}),e.jsx(le,{value:"Radio",children:"Radio"}),e.jsx(le,{value:"Router",children:"Router"}),e.jsx(le,{value:"Search Stick",children:"Search Stick"}),e.jsx(le,{value:"Searchlight",children:"Searchlight"}),e.jsx(le,{value:"Smartphone",children:"Smartphone"}),e.jsx(le,{value:"Speaker",children:"Speaker"}),e.jsx(le,{value:"Switch",children:"Switch"}),e.jsx(le,{value:"System Unit",children:"System Unit"}),e.jsx(le,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(le,{value:"UPS",children:"UPS"})]})}),e.jsx(B.Item,{name:"brand",label:"Brand",rules:[{required:!0,message:"Please enter brand"}],children:e.jsx(oe,{})}),e.jsx(B.Item,{name:"serialNumber",label:"Serial Number",children:e.jsx(oe,{})}),e.jsx(B.Item,{name:"purchaseDate",label:"Purchase Date",rules:[{required:!0,message:"Please select purchase date"}],children:e.jsx(Le,{format:"YYYY-MM-DD",style:{width:"100%"}})}),e.jsx(B.Item,{name:"issuedDate",label:"Issued Date",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(Le,{format:"YYYY-MM-DD",style:{width:"100%"}})})]}),e.jsxs(it,{span:12,children:[e.jsx(B.Item,{name:"condition",label:"Condition",rules:[{required:!0,message:"Please select condition"}],children:e.jsxs(se,{children:[e.jsx(le,{value:"Brand New",children:"Brand New"}),e.jsx(le,{value:"Good Condition",children:"Good Condition"}),e.jsx(le,{value:"Defective",children:"Defective"})]})}),e.jsx(B.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:e.jsxs(se,{children:[e.jsx(le,{value:"On Stock",children:"On Stock"}),e.jsx(le,{value:"Deployed",children:"Deployed"}),e.jsx(le,{value:"For Repair",children:"For Repair"})]})}),e.jsx(B.Item,{name:"locationType",label:"Detachment/Office",rules:[{required:!0,message:"Please select a location type"}],children:e.jsxs(se,{onChange:C=>{const N=C==="Head Office";d.setFieldsValue({department:N?d.getFieldValue("department"):null,location:N?null:d.getFieldValue("location")})},children:[e.jsx(le,{value:"Head Office",children:"Head Office"}),e.jsx(le,{value:"Other",children:"Other (Specify Below)"})]})}),e.jsx(B.Item,{noStyle:!0,shouldUpdate:(C,N)=>C.locationType!==N.locationType,children:({getFieldValue:C})=>C("locationType")==="Head Office"?e.jsx(B.Item,{name:"department",label:"Department (Head Office)",rules:[{required:!0,message:"Please select a department"}],children:e.jsx(se,{children:Object.entries(Il).map(([E,M])=>e.jsx(le,{value:E,children:M},E))})}):e.jsx(B.Item,{name:"location",label:"Specific Location",rules:[{required:!0,message:"Please input a location"}],children:e.jsx(oe,{})})}),e.jsx(B.Item,{name:"remarks",label:"Remarks",children:e.jsx(oe.TextArea,{})}),e.jsx(B.Item,{children:e.jsx(ee,{type:"primary",htmlType:"submit",children:"Save Changes"})})]})]})})})]})}),{Option:ae}=se,Ol=({form:t,onFinish:s,loading:r,templateRef:n,onTemplateSelect:l,isHeadOffice:u,setIsHeadOffice:d,hasSerialNumber:c,handleSerialChange:h,selectedStockItem:f})=>{const[o,D]=a.useState(!1),[S,k]=a.useState(!1),[p,j]=a.useState(""),[w,I]=a.useState(!1),O=E=>{const M=E.target.value;j(M),h&&h(E),M&&!S&&!w&&(D(!0),I(!0)),M===""&&(k(!1),I(!1),t.setFieldsValue({quantity:1}))},C=()=>{k(!0),D(!1)},N=()=>{k(!1),D(!1),t.setFieldsValue({quantity:1})};return e.jsxs(e.Fragment,{children:[e.jsx(at,{open:o,onOk:C,onCancel:N,title:"Serial Number Quantity",okText:"Yes",cancelText:"No",centered:!0,children:"Does the item you want to add have only 1 serial number but has many quantities?"}),e.jsxs(B,{form:t,onFinish:s,layout:"vertical",initialValues:{quantity:1},children:[e.jsx(kl,{ref:n,onTemplateSelect:l}),e.jsxs(Vt,{gutter:[32,24],children:[e.jsx(it,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:e.jsxs(se,{size:"medium",placeholder:"Select item type",children:[e.jsx(ae,{value:"AVR",children:"AVR"}),e.jsx(ae,{value:"Battery",children:"Battery"}),e.jsx(ae,{value:"Biometrics",children:"Biometrics"}),e.jsx(ae,{value:"Camera",children:"Camera"}),e.jsx(ae,{value:"CCTV",children:"CCTV"}),e.jsx(ae,{value:"Charger",children:"Charger"}),e.jsx(ae,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(ae,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(ae,{value:"Headset",children:"Headset"}),e.jsx(ae,{value:"Keyboard",children:"Keyboard"}),e.jsx(ae,{value:"Laptop",children:"Laptop"}),e.jsx(ae,{value:"Megaphone",children:"Megaphone"}),e.jsx(ae,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(ae,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(ae,{value:"Microphone",children:"Microphone"}),e.jsx(ae,{value:"Modem",children:"Modem"}),e.jsx(ae,{value:"Monitor",children:"Monitor"}),e.jsx(ae,{value:"Mouse",children:"Mouse"}),e.jsx(ae,{value:"Others",children:"Others"}),e.jsx(ae,{value:"Pedestal",children:"Pedestal"}),e.jsx(ae,{value:"Podium",children:"Podium"}),e.jsx(ae,{value:"Printer",children:"Printer"}),e.jsx(ae,{value:"Radio",children:"Radio"}),e.jsx(ae,{value:"Router",children:"Router"}),e.jsx(ae,{value:"Search Stick",children:"Search Stick"}),e.jsx(ae,{value:"Searchlight",children:"Searchlight"}),e.jsx(ae,{value:"Smartphone",children:"Smartphone"}),e.jsx(ae,{value:"Speaker",children:"Speaker"}),e.jsx(ae,{value:"Switch",children:"Switch"}),e.jsx(ae,{value:"System Unit",children:"System Unit"}),e.jsx(ae,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(ae,{value:"UPS",children:"UPS"})]})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:e.jsx(oe,{size:"medium",placeholder:"Enter brand name"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",tooltip:"Optional - Leave empty if there no remarks",children:e.jsx(oe.TextArea,{size:"medium",rows:3,placeholder:"Enter any additional remarks"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Serial Number"}),name:"serialNumber",tooltip:"Optional - Leave empty if item has no serial number",children:e.jsx(oe,{size:"medium",onChange:O,placeholder:"Enter serial number (optional)"})}),(f==null?void 0:f.action)==="redistribute"&&e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Original Quantity"}),name:"originalQuantity",rules:[{required:!0,message:"Original quantity is required"}],children:e.jsx(oe,{size:"medium",disabled:!0,min:1})}),(!p||S||(f==null?void 0:f.action)==="redistribute")&&e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:(f==null?void 0:f.action)==="redistribute"?"New Quantity to Redistribute":"Quantity"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity!"},{validator:(E,M)=>!M||M<1?Promise.reject("Quantity must be at least 1"):(f==null?void 0:f.action)==="redistribute"&&(f!=null&&f.quantity)&&M>=f.quantity?Promise.reject(`Quantity must be less than ${f.quantity}`):Promise.resolve()}],children:e.jsx(oe,{size:"medium",type:"number",min:1,max:(f==null?void 0:f.action)==="redistribute"&&(f!=null&&f.quantity)?f.quantity-1:void 0,placeholder:"Enter quantity"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(Le,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select issued date"})})]})}),e.jsx(it,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Purchased Date"}),name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:e.jsx(Le,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select purchase date"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:e.jsxs(se,{size:"medium",placeholder:"Select condition",children:[e.jsx(ae,{value:"Brand New",children:"Brand New"}),e.jsx(ae,{value:"Good Condition",children:"Good Condition"}),e.jsx(ae,{value:"Defective",children:"Defective"})]})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Detachment/Office"}),name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:e.jsxs(se,{size:"medium",onChange:E=>d(E==="Head Office"),placeholder:"Select location type",children:[e.jsx(ae,{value:"Head Office",children:"Head Office"}),e.jsx(ae,{value:"Other",children:"Other (Specify Below)"})]})}),u&&e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department!"}],children:e.jsxs(se,{size:"medium",placeholder:"Select department",children:[e.jsx(ae,{value:"SOD",children:"SOD"}),e.jsx(ae,{value:"CID",children:"CID"}),e.jsx(ae,{value:"GAD",children:"GAD"}),e.jsx(ae,{value:"HRD",children:"HRD"}),e.jsx(ae,{value:"AFD",children:"AFD"}),e.jsx(ae,{value:"EOD",children:"EOD"}),e.jsx(ae,{value:"BDO",children:"BDO"})]})}),!u&&e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a location!"}],children:e.jsx(oe,{size:"medium",placeholder:"Enter specific location"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status!"}],children:e.jsxs(se,{size:"medium",placeholder:"Select status",children:[e.jsx(ae,{value:"On Stock",children:"On Stock"}),e.jsx(ae,{value:"Deployed",children:"Deployed"}),e.jsx(ae,{value:"For Repair",children:"For Repair"})]})}),e.jsx(B.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(ee,{type:"primary",htmlType:"submit",icon:e.jsx(fr,{}),loading:r,size:"small",style:{background:"var(--theme-card-head-bg, #5fe7a7)",border:"none",borderRadius:"8px",padding:"10px",height:"auto",fontSize:"14px",fontWeight:"600",color:"var(--theme-text, #072C1C)"},children:"Add Item"})})})]})})]})]})]})},{Text:Pl}=yt,Rl=({onStockItems:t,searchText:s,setSearchText:r,fetchOnStockItems:n,loading:l,handleStockItemSelect:u})=>{const d=$n({maxWidth:639}),[c,h]=a.useState(1),[f,o]=a.useState(5),D=t.filter(p=>Object.values(p).some(j=>String(j).toLowerCase().includes(s.toLowerCase()))),S=D.slice((c-1)*f,c*f),k=[{title:"ID",dataIndex:"id",key:"id",width:"15%",render:p=>e.jsx("span",{className:"font-medium text-xs",children:p})},{title:"Type",dataIndex:"type",key:"type",width:"20%",render:p=>e.jsx("span",{className:"font-medium text-xs",children:p})},{title:"Brand",dataIndex:"brand",key:"brand",width:"20%",render:p=>e.jsx("span",{className:"font-medium text-xs",children:p})},{title:"Quantity",dataIndex:"quantity",key:"quantity",width:"15%",render:p=>e.jsx(_t,{color:p>5?"green":p>1?"orange":"red",className:"text-xs",children:p})},{title:"Location",dataIndex:"location",key:"location",width:"20%",render:p=>e.jsx(We,{title:p,children:e.jsx("span",{className:"truncate block max-w-[200px] text-xs",children:p})})},{title:"Action",key:"action",width:"10%",render:(p,j)=>e.jsxs(Et,{children:[e.jsx(We,{title:"Edit",children:e.jsx(ee,{type:"primary",icon:e.jsx(hr,{}),onClick:()=>u(j),size:"small",style:{backgroundColor:"var(--theme-card-head-bg, #5fe7a7)",color:"black"}})}),j.quantity>1&&e.jsx(We,{title:"Redistribute",children:e.jsx(ee,{type:"primary",icon:e.jsx(xa,{}),onClick:()=>u({...j,action:"redistribute"}),size:"small",style:{backgroundColor:"var(--theme-text-light-custom, #EAF4E2)",color:"black"}})})]})}];return e.jsxs(Jt,{className:"shadow-lg border-0 mb-2",children:[e.jsxs("div",{className:d?"flex flex-col gap-2 mb-4":"flex justify-between items-center mb-4",children:[e.jsx("div",{className:d?"w-full":"flex items-center gap-4",children:e.jsx(oe,{placeholder:"Search items...",prefix:e.jsx(Kt,{}),value:s,onChange:p=>r(p.target.value),style:d?{width:"100%"}:{width:300},allowClear:!0,size:"small",className:"text-xs"})}),e.jsx(ee,{type:"primary",icon:e.jsx(ma,{}),onClick:n,size:"small",style:d?{width:"100%",marginTop:0,backgroundColor:"var(--theme-card-head-bg, #a7f3d0)",color:"black"}:{backgroundColor:"var(--theme-card-head-bg, #a7f3d0)",color:"black"},className:"text-xs custom-button",children:"Refresh"})]}),e.jsx(mt,{bordered:!0,dataSource:S,columns:k,rowKey:"id",size:"small",pagination:!1,scroll:d?{x:"max-content",y:400}:{y:400},loading:l,className:"text-xs",expandable:d?{expandedRowRender:p=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",p.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",p.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",p.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",p.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Location:"})," ",p.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",p.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",p.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",p.issuedDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",p.purchaseDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",p.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",p.status]})]}),rowExpandable:()=>!0}:void 0}),e.jsxs("div",{className:"flex flex-col items-center mt-4 space-y-2",children:[e.jsxs(Pl,{className:"w-full text-xs text-center",style:{color:"#072C1C"},children:["Showing ",D.length>0?(c-1)*f+1:0," to ",Math.min(c*f,D.length)," of ",D.length," entries"]}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(qn,{current:c,pageSize:f,total:D.length,showSizeChanger:!0,size:"small",responsive:!0,pageSizeOptions:["5","10","15"],onChange:(p,j)=>{h(p),o(j)},className:"text-xs"})})]})]})},{Option:ne}=se,{Title:Ml}=yt,Tl=({form:t,onFinish:s,loading:r,selectedStockItem:n,isHeadOffice:l,setIsHeadOffice:u,handleSerialChange:d})=>{const[c,h]=a.useState(!1),[f,o]=a.useState(!1),[D,S]=a.useState(""),[k,p]=a.useState(!1);if(!n)return null;const j=C=>{const N=C.target.value;S(N),d&&d(C),N&&!f&&!k&&(h(!0),p(!0)),N===""&&(o(!1),p(!1),t.setFieldsValue({quantity:1}))},w=()=>{o(!0),h(!1)},I=()=>{o(!1),h(!1),t.setFieldsValue({quantity:1})},O=C=>{let N=D&&!f&&(n==null?void 0:n.action)!=="redistribute"?1:C.quantity;const E={...C,quantity:N,serialNumber:C.serialNumber};s(E)};return e.jsxs(e.Fragment,{children:[e.jsx(at,{open:c,onOk:w,onCancel:I,title:"Serial Number Quantity",okText:"Yes",cancelText:"No",centered:!0,children:"Does the item you want to add have only 1 serial number but has many quantities?"}),e.jsxs(Jt,{className:"shadow-lg custom-card",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(Ml,{level:4,className:"mb-2",children:n.action==="redistribute"?"🔄 Redistribute Item":"✏️ Edit Item"}),e.jsx("p",{className:"text-gray-600 text-sm",children:n.action==="redistribute"?"Create a new item from existing stock":"Update item details and information"})]}),e.jsx(B,{form:t,onFinish:O,layout:"vertical",initialValues:{quantity:1},children:e.jsxs(Vt,{gutter:[32,24],children:[e.jsx(it,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:e.jsxs(se,{size:"medium",placeholder:"Select item type",children:[e.jsx(ne,{value:"AVR",children:"AVR"}),e.jsx(ne,{value:"Battery",children:"Battery"}),e.jsx(ne,{value:"Biometrics",children:"Biometrics"}),e.jsx(ne,{value:"Camera",children:"Camera"}),e.jsx(ne,{value:"CCTV",children:"CCTV"}),e.jsx(ne,{value:"Charger",children:"Charger"}),e.jsx(ne,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(ne,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(ne,{value:"Headset",children:"Headset"}),e.jsx(ne,{value:"Keyboard",children:"Keyboard"}),e.jsx(ne,{value:"Laptop",children:"Laptop"}),e.jsx(ne,{value:"Megaphone",children:"Megaphone"}),e.jsx(ne,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(ne,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(ne,{value:"Microphone",children:"Microphone"}),e.jsx(ne,{value:"Modem",children:"Modem"}),e.jsx(ne,{value:"Monitor",children:"Monitor"}),e.jsx(ne,{value:"Mouse",children:"Mouse"}),e.jsx(ne,{value:"Others",children:"Others"}),e.jsx(ne,{value:"Pedestal",children:"Pedestal"}),e.jsx(ne,{value:"Podium",children:"Podium"}),e.jsx(ne,{value:"Printer",children:"Printer"}),e.jsx(ne,{value:"Radio",children:"Radio"}),e.jsx(ne,{value:"Router",children:"Router"}),e.jsx(ne,{value:"Search Stick",children:"Search Stick"}),e.jsx(ne,{value:"Searchlight",children:"Searchlight"}),e.jsx(ne,{value:"Smartphone",children:"Smartphone"}),e.jsx(ne,{value:"Speaker",children:"Speaker"}),e.jsx(ne,{value:"Switch",children:"Switch"}),e.jsx(ne,{value:"System Unit",children:"System Unit"}),e.jsx(ne,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(ne,{value:"UPS",children:"UPS"})]})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:e.jsx(oe,{size:"medium",placeholder:"Enter brand name"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",tooltip:"Optional - Leave empty if there no remarks",children:e.jsx(oe.TextArea,{size:"medium",rows:3,placeholder:"Enter any additional remarks"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Serial Number"}),name:"serialNumber",tooltip:"Optional - Leave empty if item has no serial number",children:e.jsx(oe,{size:"medium",onChange:j,placeholder:"Enter serial number (optional)"})}),(!D||f||(n==null?void 0:n.action)==="redistribute")&&e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:(n==null?void 0:n.action)==="redistribute"?"New Quantity to Redistribute":"Quantity"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity!"},{validator:(C,N)=>!N||N<1?Promise.reject("Quantity must be at least 1"):(n==null?void 0:n.action)==="redistribute"&&(n!=null&&n.quantity)&&N>=n.quantity?Promise.reject(`Quantity must be less than ${n.quantity}`):Promise.resolve()}],children:e.jsx(oe,{size:"medium",type:"number",min:1,max:(n==null?void 0:n.action)==="redistribute"&&(n!=null&&n.quantity)?n.quantity-1:void 0,placeholder:"Enter quantity"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(Le,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select issued date"})})]})}),e.jsx(it,{span:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Purchased Date"}),name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:e.jsx(Le,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select purchase date"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:e.jsxs(se,{size:"medium",placeholder:"Select condition",children:[e.jsx(ne,{value:"Brand New",children:"Brand New"}),e.jsx(ne,{value:"Good Condition",children:"Good Condition"}),e.jsx(ne,{value:"Defective",children:"Defective"})]})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Detachment/Office"}),name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:e.jsxs(se,{size:"medium",onChange:C=>u(C==="Head Office"),placeholder:"Select location type",children:[e.jsx(ne,{value:"Head Office",children:"Head Office"}),e.jsx(ne,{value:"Other",children:"Other (Specify Below)"})]})}),l&&e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department!"}],children:e.jsxs(se,{size:"medium",placeholder:"Select department",children:[e.jsx(ne,{value:"SOD",children:"SOD"}),e.jsx(ne,{value:"CID",children:"CID"}),e.jsx(ne,{value:"GAD",children:"GAD"}),e.jsx(ne,{value:"HRD",children:"HRD"}),e.jsx(ne,{value:"AFD",children:"AFD"}),e.jsx(ne,{value:"EOD",children:"EOD"}),e.jsx(ne,{value:"BDO",children:"BDO"})]})}),!l&&e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a location!"}],children:e.jsx(oe,{size:"medium",placeholder:"Enter specific location"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status!"}],children:e.jsxs(se,{size:"medium",placeholder:"Select status",children:[e.jsx(ne,{value:"On Stock",children:"On Stock"}),e.jsx(ne,{value:"Deployed",children:"Deployed"}),e.jsx(ne,{value:"For Repair",children:"For Repair"})]})}),e.jsx(B.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(ee,{type:"primary",htmlType:"submit",icon:n.action==="redistribute"?e.jsx(xa,{}):e.jsx(an,{}),loading:r,size:"small",style:{backgroundColor:"var(--theme-card-head-bg, #a7f3d0)",border:"none",borderRadius:"8px",padding:"10px",height:"auto",fontSize:"14px",fontWeight:"600",color:"black"},children:n.action==="redistribute"?"Redistribute":"Update Item"})})})]})})]})})]})]})},{Title:El}=yt,Fl=({visible:t,onCancel:s,onSave:r,templateName:n,setTemplateName:l})=>e.jsx(at,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(El,{level:4,className:"mb-0 font-semibold",children:"Save as Template"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Save this item configuration for future use"})]}),open:t,onCancel:s,footer:[e.jsx(ee,{onClick:s,size:"large",children:"Cancel"},"cancel"),e.jsx(ee,{type:"primary",onClick:r,icon:e.jsx(bl,{}),size:"large",style:{background:"#A8E1C5",border:"none",borderRadius:"8px",padding:"8px 24px",height:"auto",fontSize:"14px",fontWeight:"600",color:"#072C1C"},children:"Save Template"},"save")],className:"template-modal",styles:{header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"#A8E1C5",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"Would you like to save this item as a template for future use?"}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Template Name"}),required:!0,tooltip:"Enter a unique name for this template",children:e.jsx(oe,{size:"large",value:n,onChange:u=>l(u.target.value),placeholder:"Enter template name"})})]})}),{Title:Bl}=yt,Al=({visible:t,onClose:s,onAdd:r,onRedistribute:n,handleEditItem:l,loading:u})=>{const[d]=B.useForm(),[c,h]=a.useState(!1),[f,o]=a.useState(!1),[D,S]=a.useState(!1),[k,p]=a.useState(""),[j,w]=a.useState(null),[I,O]=a.useState([]),[C,N]=a.useState(null),[E,M]=a.useState("new"),[q,P]=a.useState(""),T=a.useRef(null),{message:i}=Nt.useApp(),{logUserActivity:x}=Qt(),{logUserNotification:y}=Xt(),m=$t(),v=qt(),b=()=>{const g=m.token&&m.userData,A=v.token&&v.userData;if(g)return m.userData;if(A)return v.userData;const _=bt.get("username"),V=bt.get("user_id");return _&&V?{username:_,id:V}:null};a.useEffect(()=>{t&&F()},[t]);const F=async()=>{try{const A=(await lt()).filter(_=>_.status==="On Stock");O(A)}catch(g){console.error("Error fetching on stock items:",g)}},H=g=>{E!=="stock"&&M("stock"),N(g),g.action==="redistribute"?d.setFieldsValue({type:g.type,brand:g.brand,originalQuantity:g.quantity,quantity:1,condition:g.condition,status:g.status,remarks:g.remarks,locationType:g.location.includes("Head Office")?"Head Office":"Other",department:g.location.includes("Head Office")?g.location.split(" - ")[1]:void 0,location:g.location.includes("Head Office")?void 0:g.location,issuedDate:g.issuedDate?Me(g.issuedDate):void 0,purchaseDate:g.purchaseDate?Me(g.purchaseDate):void 0,serialNumber:g.serialNumber}):d.setFieldsValue({type:g.type,brand:g.brand,quantity:g.quantity,condition:g.condition,status:g.status,remarks:g.remarks,locationType:g.location.includes("Head Office")?"Head Office":"Other",department:g.location.includes("Head Office")?g.location.split(" - ")[1]:void 0,location:g.location.includes("Head Office")?void 0:g.location,issuedDate:g.issuedDate?Me(g.issuedDate):void 0,purchaseDate:g.purchaseDate?Me(g.purchaseDate):void 0,serialNumber:g.serialNumber}),h(g.location.includes("Head Office")),o(!!g.serialNumber)},W=g=>{g?(d.setFieldsValue({...g,locationType:g.locationType||(g.location.includes("Head Office")?"Head Office":"Other"),department:g.department||(g.location.includes("Head Office")?g.location.split(" - ")[1]:null),location:g.location,purchaseDate:g.purchaseDate?Me(g.purchaseDate):void 0,issuedDate:g.issuedDate?Me(g.issuedDate):void 0}),h(g.locationType==="Head Office"||g.location.includes("Head Office"))):(d.resetFields(),h(!1))},Z=async g=>{var A,_,V;try{if(g.purchaseDate&&g.purchaseDate.isAfter(Me())){i.error("Purchase date cannot be in the future.");return}const X=await lt();if(g.serialNumber&&(!C||g.serialNumber!==C.serialNumber)&&X.some(U=>U.serialNumber===g.serialNumber)){i.error("Serial number already exists. Please use a unique serial number.");return}const K=c?`Head Office - ${g.department}`:g.location;if(C)if(C.action==="redistribute"){const L=X.find(Ce=>Ce.id===C.id);if(!L){i.error("Item not found in inventory.");return}if(L.quantity===1){i.warning("Cannot redistribute item with quantity of 1.");return}if(!g.quantity||g.quantity<=0||g.quantity>=L.quantity){i.error("New quantity must be greater than 0 and less than existing quantity.");return}const U={id:L.id,newQuantity:g.quantity,newLocation:K,issuedDate:g.issuedDate?g.issuedDate.format("YYYY-MM-DD"):null,condition:g.condition,status:g.status,remarks:((A=g.remarks)==null?void 0:A.trim())||null};await n(U),await F(),N(null),d.resetFields()}else{const L={id:C.id,type:g.type,brand:g.brand,quantity:g.quantity,serialNumber:g.serialNumber||"",issuedDate:g.issuedDate?g.issuedDate.format("YYYY-MM-DD"):null,purchaseDate:g.purchaseDate?g.purchaseDate.format("YYYY-MM-DD"):null,condition:g.condition,location:K,status:g.status,remarks:g.remarks||""};await l(L,C),await F(),N(null),d.resetFields()}else{const L={type:g.type,brand:g.brand,quantity:g.quantity,serialNumber:g.serialNumber,issuedDate:g.issuedDate?g.issuedDate.format("YYYY-MM-DD"):null,purchaseDate:g.purchaseDate?g.purchaseDate.format("YYYY-MM-DD"):null,condition:g.condition,location:K,status:g.status,remarks:g.remarks||null};await r(L),w(g);const U=(V=(_=T.current)==null?void 0:_.handleTypeChange)==null?void 0:V.call(_,g.type);U&&!U.isUserTemplate&&S(!0),d.resetFields(),s()}}catch(X){console.error(X),i.error("Failed to save item")}},J=async()=>{if(!k.trim()){i.error("Please enter a template name");return}const g=b();if(!g){i.error("User not authenticated");return}const A=j,_={template_name:k,type:A.type,brand:A.brand,condition:A.condition,status:A.status,quantity:A.quantity||1,location:c?`Head Office - ${A.department}`:A.location,remarks:A.remarks||"",serialNumber:A.serialNumber||null,purchaseDate:A.purchaseDate?A.purchaseDate.format("YYYY-MM-DD"):null,issuedDate:A.issuedDate?A.issuedDate.format("YYYY-MM-DD"):null};try{const V=await Cl(_);V.success?(i.success("Template saved successfully!"),S(!1),p(""),T.current&&T.current.setRefreshTrigger(X=>X+1),await x(g.username,"Template Created",`Template "${k}" has been created successfully.`),await y("Template Created",`Template "${k}" has been created successfully.`)):i.error(V.message||"Failed to save template")}catch(V){console.error("Error saving template:",V),i.error("Error saving template")}},Q=()=>{d.resetFields(),o(!1),N(null),P(""),M("new"),s()},Y=g=>{const A=g.target.value.trim();o(A!==""),A===""&&d.setFieldsValue({quantity:1})},G=g=>{M(g),g==="new"&&(d.resetFields(),N(null),o(!1),h(!1))};return e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"overflow-hidden",title:e.jsxs("div",{className:"text-center",children:[e.jsx(Bl,{level:3,className:"mb-0 font-semibold",children:"Inventory Management"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Add, edit, and manage your inventory items"})]}),open:t,onCancel:Q,footer:null,width:1400,styles:{body:{padding:0},header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"var(--theme-card-head-bg, #5fe7a7)",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsx(Mn,{activeKey:E,onChange:G,type:"card",tabBarGutter:1,items:[{key:"new",label:e.jsxs("div",{className:"flex items-center",children:[e.jsx(fr,{}),e.jsx("span",{className:"font-medium text-xs",children:"New Item"})]}),children:e.jsx(Ol,{form:d,onFinish:Z,loading:u,templateRef:T,onTemplateSelect:W,isHeadOffice:c,setIsHeadOffice:h,hasSerialNumber:f,handleSerialChange:Y,selectedStockItem:C})},{key:"stock",label:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Kt,{}),e.jsx("span",{className:"font-medium text-xs",children:"On Stock Items"})]}),children:e.jsxs(e.Fragment,{children:[e.jsx(Rl,{onStockItems:I,searchText:q,setSearchText:P,fetchOnStockItems:F,loading:u,handleStockItemSelect:H}),C&&e.jsx(Tl,{form:d,onFinish:Z,loading:u,selectedStockItem:C,isHeadOffice:c,setIsHeadOffice:h,hasSerialNumber:f,handleSerialChange:Y})]})}]})}),e.jsx(Fl,{visible:D,onCancel:()=>S(!1),onSave:J,templateName:k,setTemplateName:p})]})},{Option:re}=se,{Title:Vl}=yt,$l=({visible:t,onClose:s,onEdit:r,item:n})=>{const[l]=B.useForm(),[u,d]=a.useState(!1),[c,h]=a.useState(!1),[f,o]=a.useState(!1),[D,S]=a.useState(!1),[k,p]=a.useState(""),[j,w]=a.useState(""),[I,O]=a.useState(!1),{message:C}=Nt.useApp(),{logUserActivity:N}=Qt(),{logUserNotification:E}=Xt(),M=$t(),q=qt(),P=()=>{const v=M.token&&M.userData,b=q.token&&q.userData;if(v)return M.userData;if(b)return q.userData;const F=bt.get("username"),H=bt.get("user_id");return F&&H?{username:F,id:H}:null};a.useEffect(()=>{if(t&&n){const v=n.location.includes("Head Office"),b=v?n.location.split(" - ")[1]:null;l.setFieldsValue({...n,locationType:v?"Head Office":"Other",department:b,location:v?null:n.location,purchaseDate:n.purchaseDate&&n.purchaseDate!=="0000-00-00"&&n.purchaseDate!==""?Me(n.purchaseDate):void 0,issuedDate:n.issuedDate&&n.issuedDate!=="0000-00-00"&&n.issuedDate!==""?Me(n.issuedDate):void 0}),d(v),h(!!n.serialNumber),p(n.serialNumber||""),n.serialNumber&&S(!0)}},[t,n,l]);const T=async v=>{try{if(v.purchaseDate&&v.purchaseDate.isAfter(Me())){C.error("Purchase date cannot be in the future.");return}const b=await lt();if(v.serialNumber&&v.serialNumber!==n.serialNumber&&b.some(J=>J.serialNumber===v.serialNumber)){C.error("Serial number already exists. Please use a unique serial number.");return}const F=u?`Head Office - ${v.department}`:v.location,H={...n,type:v.type,brand:v.brand,quantity:Math.max(1,v.quantity||1),serialNumber:v.serialNumber,issuedDate:v.issuedDate?v.issuedDate.format("YYYY-MM-DD"):null,purchaseDate:v.purchaseDate?v.purchaseDate.format("YYYY-MM-DD"):null,condition:v.condition,location:F,status:v.status,remarks:v.remarks||null};r(H);const W=P();W&&(await N(W.username,"Item Updated",`Item "${H.type}" has been updated.`),await E("Item Updated",`Item "${H.type}" has been updated.`))}catch(b){console.error(b)}},i=()=>{l.resetFields(),h(!1),o(!1),S(!1),p(""),w(""),O(!1),s()},x=v=>{const b=v.target.value;p(b),h(b!==""),b&&!D&&!I&&(o(!0),w(b),O(!0)),b===""&&(S(!1),w(""),O(!1),l.setFieldsValue({quantity:1}))},y=()=>{S(!0),o(!1)},m=()=>{S(!1),o(!1),l.setFieldsValue({quantity:1})};return e.jsxs(e.Fragment,{children:[e.jsx(at,{open:f,onOk:y,onCancel:m,title:"Serial Number Quantity",okText:"Yes",cancelText:"No",centered:!0,children:"Does the item you want to edit have only 1 serial number but has many quantities?"}),e.jsx(at,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(Vl,{level:3,className:"mb-0 font-semibold",children:"Edit Item"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Update item details and information"})]}),open:t,onCancel:i,footer:null,width:1e3,className:"custom-card",styles:{body:{padding:0},header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"var(--theme-card-head-bg, #5fe7a7)",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsx("div",{className:"p-8 bg-gray-50",children:e.jsx(Jt,{className:"shadow-lg border-0",children:e.jsx(B,{form:l,onFinish:T,layout:"vertical",initialValues:{quantity:1},children:e.jsxs(Vt,{gutter:[32,24],children:[e.jsx(it,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Please select the item type!"}],children:e.jsxs(se,{size:"medium",placeholder:"Select item type",children:[e.jsx(re,{value:"AVR",children:"AVR"}),e.jsx(re,{value:"Battery",children:"Battery"}),e.jsx(re,{value:"Biometrics",children:"Biometrics"}),e.jsx(re,{value:"Camera",children:"Camera"}),e.jsx(re,{value:"CCTV",children:"CCTV"}),e.jsx(re,{value:"Charger",children:"Charger"}),e.jsx(re,{value:"Guard Tour Chips",children:"Guard Tour Chips"}),e.jsx(re,{value:"Guard Tour System",children:"Guard Tour System"}),e.jsx(re,{value:"Headset",children:"Headset"}),e.jsx(re,{value:"Keyboard",children:"Keyboard"}),e.jsx(re,{value:"Laptop",children:"Laptop"}),e.jsx(re,{value:"Megaphone",children:"Megaphone"}),e.jsx(re,{value:"WIFI-Mesh",children:"WIFI-Mesh"}),e.jsx(re,{value:"Metal Detector",children:"Metal Detector"}),e.jsx(re,{value:"Microphone",children:"Microphone"}),e.jsx(re,{value:"Modem",children:"Modem"}),e.jsx(re,{value:"Monitor",children:"Monitor"}),e.jsx(re,{value:"Mouse",children:"Mouse"}),e.jsx(re,{value:"Others",children:"Others"}),e.jsx(re,{value:"Pedestal",children:"Pedestal"}),e.jsx(re,{value:"Podium",children:"Podium"}),e.jsx(re,{value:"Printer",children:"Printer"}),e.jsx(re,{value:"Radio",children:"Radio"}),e.jsx(re,{value:"Router",children:"Router"}),e.jsx(re,{value:"Search Stick",children:"Search Stick"}),e.jsx(re,{value:"Searchlight",children:"Searchlight"}),e.jsx(re,{value:"Smartphone",children:"Smartphone"}),e.jsx(re,{value:"Speaker",children:"Speaker"}),e.jsx(re,{value:"Switch",children:"Switch"}),e.jsx(re,{value:"System Unit",children:"System Unit"}),e.jsx(re,{value:"Under Chassis",children:"Under Chassis"}),e.jsx(re,{value:"UPS",children:"UPS"})]})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Please input the brand!"}],children:e.jsx(oe,{size:"medium",placeholder:"Enter brand name"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",tooltip:"Optional - Leave empty if there no remarks",children:e.jsx(oe.TextArea,{size:"medium",rows:3,placeholder:"Enter any additional remarks"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Serial Number"}),name:"serialNumber",tooltip:"Optional - Leave empty if item has no serial number",children:e.jsx(oe,{size:"medium",onChange:x,placeholder:"Enter serial number (optional)"})}),(!k||D)&&e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Quantity"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity!"},{validator:(v,b)=>!b||b<1?Promise.reject("Quantity must be at least 1"):Promise.resolve()}],children:e.jsx(oe,{size:"medium",type:"number",min:1,placeholder:"Enter quantity"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",tooltip:"Optional - Leave empty if not issued yet",children:e.jsx(Le,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select issued date"})})]})}),e.jsx(it,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Purchased Date"}),name:"purchaseDate",rules:[{required:!0,message:"Please select the purchase date!"}],children:e.jsx(Le,{size:"medium",className:"w-full",format:"YYYY-MM-DD",placeholder:"Select purchase date"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition!"}],children:e.jsxs(se,{size:"medium",placeholder:"Select condition",children:[e.jsx(re,{value:"Brand New",children:"Brand New"}),e.jsx(re,{value:"Good Condition",children:"Good Condition"}),e.jsx(re,{value:"Defective",children:"Defective"})]})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Detachment/Office"}),name:"locationType",rules:[{required:!0,message:"Please select a location!"}],children:e.jsxs(se,{size:"medium",onChange:v=>d(v==="Head Office"),placeholder:"Select location type",children:[e.jsx(re,{value:"Head Office",children:"Head Office"}),e.jsx(re,{value:"Other",children:"Other (Specify Below)"})]})}),u&&e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department!"}],children:e.jsxs(se,{size:"medium",placeholder:"Select department",children:[e.jsx(re,{value:"SOD",children:"SOD"}),e.jsx(re,{value:"CID",children:"CID"}),e.jsx(re,{value:"GAD",children:"GAD"}),e.jsx(re,{value:"HRD",children:"HRD"}),e.jsx(re,{value:"AFD",children:"AFD"}),e.jsx(re,{value:"EOD",children:"EOD"}),e.jsx(re,{value:"BDO",children:"BDO"})]})}),!u&&e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a location!"}],children:e.jsx(oe,{size:"medium",placeholder:"Enter specific location"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status!"}],children:e.jsxs(se,{size:"medium",placeholder:"Select status",children:[e.jsx(re,{value:"On Stock",children:"On Stock"}),e.jsx(re,{value:"Deployed",children:"Deployed"}),e.jsx(re,{value:"For Repair",children:"For Repair"})]})}),e.jsx(B.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(ee,{type:"primary",htmlType:"submit",icon:e.jsx(an,{}),size:"small",style:{background:"var(--theme-card-head-bg, #5fe7a7)",border:"none",borderRadius:"8px",padding:"10px",height:"auto",fontSize:"14px",fontWeight:"600",color:"black"},children:"Update Item"})})})]})})]})})})})})]})},{Option:Ze}=se,{Title:ql}=yt,_l=({visible:t,onClose:s,item:r,onEdit:n,isLoading:l})=>{const[u]=B.useForm(),[d,c]=a.useState(!1),{logUserActivity:h}=Qt(),{logUserNotification:f}=Xt(),o=$t(),D=qt(),S=()=>{const j=o.token&&o.userData,w=D.token&&D.userData;if(j)return o.userData;if(w)return D.userData;const I=bt.get("username"),O=bt.get("user_id");return I&&O?{username:I,id:O}:null};a.useEffect(()=>{var j;if(t&&r){const w=(j=r.location)==null?void 0:j.includes("Head Office");c(w);let I="Other",O,C;if(w){I="Head Office";const N=r.location.split(" - ");N.length>1&&(O=N[1])}else C=r.location;u.setFieldsValue({type:r.type,brand:r.brand,originalQuantity:r.quantity,quantity:1,condition:r.condition,status:r.status,remarks:r.remarks,locationType:I,department:O,location:C,issuedDate:r.issuedDate?Me(r.issuedDate):void 0})}},[t,r,u]);const k=async j=>{var w;try{if(!r)return;const O=(await lt()).find(q=>q.id===r.id);if(!O){ia.error("Item not found in inventory.");return}if(O.quantity===1){ia.warning("Cannot redistribute item with quantity of 1.");return}if(!j.quantity||j.quantity<=0||j.quantity>=O.quantity){ia.error("New quantity must be greater than 0 and less than existing quantity.");return}const C=j.locationType==="Head Office"?`Head Office - ${j.department}`:j.location,N=j.issuedDate?Me(j.issuedDate).format("YYYY-MM-DD"):null,E={id:O.id,newQuantity:j.quantity,newLocation:C,issuedDate:N,condition:j.condition,status:j.status,remarks:((w=j.remarks)==null?void 0:w.trim())||null};await n(E);const M=S();M&&(await h(M.username,"Item Redistributed",`Item "${O.type}" has been redistributed to ${C} with quantity ${j.quantity}.`),await f("Item Redistributed",`Item "${O.type}" has been redistributed to ${C} with quantity ${j.quantity}.`)),u.resetFields(),s()}catch(I){console.error(I),ia.error("Failed to redistribute item.")}},p=()=>{u.resetFields(),c(!1),s()};return e.jsx(at,{title:e.jsxs("div",{className:"text-center",children:[e.jsx(ql,{level:3,className:"mb-0 font-semibold",children:"Redistribute Item"}),e.jsx("p",{className:"text-sm mt-1 opacity-75",children:"Create a new item from existing stock"})]}),open:t,onCancel:p,footer:null,width:1e3,className:"custom-card",styles:{body:{padding:0},header:{borderBottom:"1px solid #f0f0f0",padding:"24px 24px 16px 24px",background:"var(--theme-card-head-bg, #5fe7a7)",borderRadius:"12px 12px 0 0"},content:{borderRadius:"12px",overflow:"hidden"}},children:e.jsx("div",{className:"p-8 bg-gray-50",children:e.jsx(Jt,{className:"shadow-lg border-0",children:e.jsx(B,{form:u,onFinish:k,layout:"vertical",children:e.jsxs(Vt,{gutter:[32,24],children:[e.jsx(it,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Type"}),name:"type",rules:[{required:!0,message:"Type is required"}],children:e.jsx(oe,{disabled:!0,size:"medium"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Brand"}),name:"brand",rules:[{required:!0,message:"Brand is required"}],children:e.jsx(oe,{disabled:!0,size:"medium"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Original Quantity"}),name:"originalQuantity",rules:[{required:!0,message:"Original quantity is required"}],children:e.jsx(oe,{disabled:!0,size:"medium"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"New Quantity to Redistribute"}),name:"quantity",rules:[{required:!0,message:"Please input the quantity to redistribute"},{validator:(j,w)=>!w||w<1?Promise.reject("Quantity must be at least 1"):w>=(r==null?void 0:r.quantity)?Promise.reject(`Quantity must be less than ${r==null?void 0:r.quantity}`):Promise.resolve()}],children:e.jsx(oe,{size:"medium",type:"number",min:1,max:r!=null&&r.quantity?r.quantity-1:1,placeholder:"Enter quantity"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Remarks"}),name:"remarks",children:e.jsx(oe.TextArea,{size:"medium",rows:3,placeholder:"Enter remarks (optional)"})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Issued Date"}),name:"issuedDate",children:e.jsx(Le,{size:"medium",format:"YYYY-MM-DD",className:"w-full",placeholder:"Select date"})})]})}),e.jsx(it,{xs:24,md:12,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Condition"}),name:"condition",rules:[{required:!0,message:"Please select the condition"}],children:e.jsxs(se,{size:"medium",placeholder:"Select condition",children:[e.jsx(Ze,{value:"Brand New",children:"Brand New"}),e.jsx(Ze,{value:"Good Condition",children:"Good Condition"}),e.jsx(Ze,{value:"Defective",children:"Defective"})]})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Status"}),name:"status",rules:[{required:!0,message:"Please select the status"}],children:e.jsxs(se,{size:"medium",placeholder:"Select status",children:[e.jsx(Ze,{value:"On Stock",children:"On Stock"}),e.jsx(Ze,{value:"Deployed",children:"Deployed"}),e.jsx(Ze,{value:"For Repair",children:"For Repair"})]})}),e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Location Type"}),name:"locationType",rules:[{required:!0,message:"Please select a location type"}],children:e.jsxs(se,{size:"medium",placeholder:"Select location type",onChange:j=>c(j==="Head Office"),children:[e.jsx(Ze,{value:"Head Office",children:"Head Office"}),e.jsx(Ze,{value:"Other",children:"Other (Specify)"})]})}),d?e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Department (Head Office)"}),name:"department",rules:[{required:!0,message:"Please select a department"}],children:e.jsxs(se,{size:"medium",placeholder:"Select department",children:[e.jsx(Ze,{value:"SOD",children:"SOD"}),e.jsx(Ze,{value:"CID",children:"CID"}),e.jsx(Ze,{value:"GAD",children:"GAD"}),e.jsx(Ze,{value:"HRD",children:"HRD"}),e.jsx(Ze,{value:"AFD",children:"AFD"}),e.jsx(Ze,{value:"EOD",children:"EOD"}),e.jsx(Ze,{value:"BDO",children:"BDO"})]})}):e.jsx(B.Item,{label:e.jsx("span",{className:"font-semibold",children:"Specific Location"}),name:"location",rules:[{required:!0,message:"Please input a specific location"}],children:e.jsx(oe,{size:"medium",placeholder:"Enter location"})}),e.jsx(B.Item,{className:"mb-0",children:e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(ee,{type:"primary",htmlType:"submit",icon:e.jsx(xa,{}),loading:l,disabled:l,size:"small",style:{background:"var(--theme-card-head-bg, #5fe7a7)",border:"none",borderRadius:"8px",padding:"10px",height:"auto",fontSize:"14px",fontWeight:"600",color:"black"},children:"Redistribute"})})})]})})]})})})})})},{Option:Rt}=se,Hl=["SOD","CID","GAD","HRD","AFD","EOD","BDO"],zl=()=>`row-${Date.now()}-${Math.random().toString(36).slice(2,11)}`,Wa=()=>({uid:zl(),type:"",brand:"",quantity:1,remarks:"",serialNumber:"",issuedDate:"",purchaseDate:"",condition:"",locationType:"Head Office",department:"SOD",location:"",status:"",showQuantityWithSerial:!1}),Yl=["AVR","Battery","Biometrics","Camera","CCTV","Charger","Guard Tour Chips","Guard Tour System","Headset","Keyboard","Laptop","Megaphone","WIFI-Mesh","Metal Detector","Microphone","Modem","Monitor","Mouse","Others","Pedestal","Podium","Printer","Radio","Router","Search Stick","Searchlight","Smartphone","Speaker","Switch","System Unit","Under Chassis","UPS"],Ll=["Brand New","Good Condition","Defective"],Ul=["On Stock","For Repair","Deployed"];function Gl({visible:t,onClose:s,onBatchAdd:r,loading:n}){const{message:l}=Nt.useApp(),[u,d]=a.useState([Wa()]),[c,h]=a.useState(!1),[f,o]=a.useState([]),[D,S]=a.useState(null);a.useEffect(()=>{t&&k()},[t]);const k=async()=>{try{const i=await lt();o(i.map(x=>x.serialNumber).filter(Boolean))}catch{o([])}},p=(i,x,y)=>{d(m=>m.map((v,b)=>b!==i?v:x==="serialNumber"?(y&&!v.showQuantityWithSerial&&v.serialNumber===""&&S(i),y===""?{...v,serialNumber:"",showQuantityWithSerial:!1,quantity:1}:{...v,serialNumber:y}):{...v,[x]:y}))},j=()=>{D!==null&&(d(i=>i.map((x,y)=>y===D?{...x,showQuantityWithSerial:!0}:x)),S(null))},w=()=>{D!==null&&(d(i=>i.map((x,y)=>y===D?{...x,showQuantityWithSerial:!1,quantity:1}:x)),S(null))},I=(i,x,y)=>{d(m=>m.map((v,b)=>b===i?{...v,[x]:y?Me(y).format("YYYY-MM-DD"):""}:v))},O=()=>d(i=>[...i,Wa()]),C=i=>d(x=>x.length>1?x.filter((y,m)=>m!==i):x),N=i=>!(!i.type||!i.brand||i.quantity<=0||!i.condition||!i.status||!i.locationType||!i.purchaseDate||i.locationType==="Head Office"&&!i.department||i.locationType==="Other"&&!i.location),E=i=>i.locationType==="Head Office"?`Head Office - ${i.department}`:i.locationType==="Other"?i.location:"",M=()=>d([Wa()]),q=async()=>{h(!0);let i=!0;const x=Me().startOf("day");for(const b of u){if(!N(b)){i=!1;break}if(b.purchaseDate&&Me(b.purchaseDate).isAfter(x,"day")){l.error("Purchase date cannot be in the future."),h(!1);return}}if(!i){l.error("Please fill all required fields for each item."),h(!1);return}const y=u.map(b=>b.serialNumber).filter(Boolean),m=new Set;for(const b of y){if(m.has(b)){l.error(`Duplicate serial number in batch: ${b}`),h(!1);return}if(m.add(b),f.includes(b)){l.error(`Serial number already exists: ${b}`),h(!1);return}}const v=u.map(b=>{let F=b.purchaseDate?Me(b.purchaseDate).format("YYYY-MM-DD"):"",H=b.issuedDate?Me(b.issuedDate).format("YYYY-MM-DD"):"";return{type:b.type,brand:b.brand,quantity:b.serialNumber&&!b.showQuantityWithSerial?1:Math.max(1,b.quantity||1),serialNumber:b.serialNumber||"",issuedDate:H,purchaseDate:F,condition:b.condition,location:E(b),status:b.status,remarks:b.remarks||""}});try{await r(v),l.success(`${v.length} item(s) added successfully!`),M(),h(!1),s()}catch{l.error("Failed to add items."),h(!1)}},P=()=>{M(),s()},T=[{title:"Type",dataIndex:"type",render:(i,x,y)=>e.jsx(se,{value:i,onChange:m=>p(y,"type",m),style:{minWidth:170},size:"small",children:Yl.map(m=>e.jsx(Rt,{value:m,children:m},m))})},{title:"Brand",dataIndex:"brand",render:(i,x,y)=>e.jsx(oe,{value:i,onChange:m=>p(y,"brand",m.target.value),size:"small",placeholder:"Enter brand name"})},{title:"Serial Number",dataIndex:"serialNumber",render:(i,x,y)=>e.jsx(oe,{value:i,onChange:m=>p(y,"serialNumber",m.target.value),size:"small",placeholder:"Enter serial number"})},{title:"Qty",dataIndex:"quantity",render:(i,x,y)=>e.jsx(oe,{type:"number",min:1,value:x.quantity,onChange:m=>p(y,"quantity",Number(m.target.value)),size:"small",style:{width:60},disabled:x.serialNumber&&!x.showQuantityWithSerial})},{title:"Remarks",dataIndex:"remarks",render:(i,x,y)=>e.jsx(oe.TextArea,{value:i,onChange:m=>p(y,"remarks",m.target.value),size:"small",rows:3,placeholder:"Enter any additional remarks"})},{title:"Issued Date",dataIndex:"issuedDate",render:(i,x,y)=>e.jsx(Le,{value:i?Me(i,"YYYY-MM-DD"):null,onChange:m=>I(y,"issuedDate",m),format:"YYYY-MM-DD",size:"small",style:{width:120},allowClear:!0})},{title:"Purchased Date",dataIndex:"purchaseDate",render:(i,x,y)=>e.jsx(Le,{value:i?Me(i,"YYYY-MM-DD"):null,onChange:m=>I(y,"purchaseDate",m),format:"YYYY-MM-DD",size:"small",style:{width:120},allowClear:!0})},{title:"Condition",dataIndex:"condition",render:(i,x,y)=>e.jsx(se,{value:i,onChange:m=>p(y,"condition",m),style:{minWidth:150},size:"small",children:Ll.map(m=>e.jsx(Rt,{value:m,children:m},m))})},{title:"Detachment/Office",dataIndex:"locationType",render:(i,x,y)=>e.jsxs("div",{style:{minWidth:200},children:[e.jsxs(se,{value:i,onChange:m=>p(y,"locationType",m),size:"small",placeholder:"Select location type",style:{width:150,marginBottom:4},children:[e.jsx(Rt,{value:"Head Office",children:"Head Office"}),e.jsx(Rt,{value:"Other",children:"Other (Specify Below)"})]}),x.locationType==="Head Office"&&e.jsx(se,{value:x.department,onChange:m=>p(y,"department",m),size:"small",placeholder:"Select department",style:{width:150,marginTop:4},children:Hl.map(m=>e.jsx(Rt,{value:m,children:m},m))}),x.locationType==="Other"&&e.jsx(oe,{value:x.location,onChange:m=>p(y,"location",m.target.value),size:"small",placeholder:"Enter specific location",style:{width:140,marginTop:4}})]})},{title:"Status",dataIndex:"status",render:(i,x,y)=>e.jsx(se,{value:i,onChange:m=>p(y,"status",m),style:{minWidth:100},size:"small",children:Ul.map(m=>e.jsx(Rt,{value:m,children:m},m))})},{title:"Action",dataIndex:"action",render:(i,x,y)=>e.jsx(ee,{danger:!0,size:"small",onClick:()=>C(y),disabled:u.length===1,children:"Remove"})}];return e.jsxs(e.Fragment,{children:[e.jsx(at,{open:D!==null,onOk:j,onCancel:w,title:"Serial Number Quantity",okText:"Yes",cancelText:"No",centered:!0,children:"Does the item you want to add have only 1 serial number but has many quantities?"}),e.jsxs(at,{open:t,title:"Batch Add Items",onCancel:P,onOk:q,okText:"Submit All",confirmLoading:c||n,width:1500,footer:[e.jsx(ee,{onClick:O,className:"custom-button",disabled:c||n,children:"Add Row"},"add"),e.jsx(ee,{onClick:P,className:"custom-button-cancel",disabled:c||n,children:"Cancel"},"cancel"),e.jsx(ee,{type:"primary",className:"custom-button",onClick:q,loading:c||n,children:"Submit All"},"submit")],children:[e.jsx(mt,{bordered:!0,dataSource:u,columns:T,rowKey:i=>i.uid,pagination:!1,size:"small",scroll:{x:"max-content",y:600},responsive:["sm","md","lg","xl","xxl"]}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"* Required fields: Type, Brand, Qty, Purchased Date, Condition, Status, Detachment/Office"})]})]})}const{Option:Mt}=se,Kl=["SOD","CID","GAD","HRD","AFD","EOD","BDO"],Wl=["AVR","Battery","Biometrics","Camera","CCTV","Charger","Guard Tour Chips","Guard Tour System","Headset","Keyboard","Laptop","Megaphone","WIFI-Mesh","Metal Detector","Microphone","Modem","Monitor","Mouse","Others","Pedestal","Podium","Printer","Radio","Router","Search Stick","Searchlight","Smartphone","Speaker","Switch","System Unit","Under Chassis","UPS"],Ql=["Brand New","Good Condition","Defective"],Xl=["On Stock","For Repair","Deployed"];function Jl({visible:t,onClose:s,onBatchEdit:r,loading:n,selectedItems:l}){const{message:u}=Nt.useApp(),[d,c]=a.useState([]),[h,f]=a.useState([]),[o,D]=a.useState(!1),[S,k]=a.useState(null);a.useEffect(()=>{if(t){const i=l.map(x=>{let y="",m="",v="";return x.location&&x.location.startsWith("Head Office - ")?(y="Head Office",m=x.location.replace("Head Office - ",""),v=""):(y="Other",m="",v=x.location||""),{...x,locationType:y,department:m,location:v,showQuantityWithSerial:!!x.serialNumber,lastSerialModalValue:"",serialModalShownForCurrentInput:!1}});c(i),f(JSON.parse(JSON.stringify(i)))}},[t,l]);const p=(i,x)=>{const y=["type","brand","serialNumber","quantity","remarks","issuedDate","purchaseDate","condition","status","locationType","department","location"];for(const m of y){const v=i[m],b=x[m];if(m==="issuedDate"||m==="purchaseDate"){if((v&&v!=="0000-00-00"?v:"")!==(b&&b!=="0000-00-00"?b:""))return!0}else if(v!==b)return!0}return!1},j=()=>d.filter((i,x)=>p(i,h[x])),w=(i,x,y)=>{c(m=>m.map((v,b)=>b!==i?v:x==="serialNumber"?y&&!v.showQuantityWithSerial&&!v.serialModalShownForCurrentInput?(k(i),{...v,serialNumber:y,lastSerialModalValue:y,serialModalShownForCurrentInput:!0}):y===""?{...v,serialNumber:"",showQuantityWithSerial:!1,quantity:1,lastSerialModalValue:"",serialModalShownForCurrentInput:!1}:{...v,serialNumber:y}:{...v,[x]:y}))},I=()=>{S!==null&&(c(i=>i.map((x,y)=>y===S?{...x,showQuantityWithSerial:!0}:x)),k(null))},O=()=>{S!==null&&(c(i=>i.map((x,y)=>y===S?{...x,showQuantityWithSerial:!1,quantity:1}:x)),k(null))},C=(i,x,y)=>{c(m=>m.map((v,b)=>b===i?{...v,[x]:y?Me(y).format("YYYY-MM-DD"):""}:v))},N=i=>!(!i.type||!i.brand||i.quantity<=0||!i.condition||!i.status||!i.locationType||i.locationType==="Head Office"&&!i.department||i.locationType==="Other"&&!i.location),E=i=>i.locationType==="Head Office"?`Head Office - ${i.department}`:i.locationType==="Other"?i.location:"",M=async()=>{D(!0);const i=j(),x=d.length-i.length;if(i.length===0){u.warning("No changes detected. All items remain unchanged."),D(!1);return}x>0&&u.info(`${x} item(s) had no changes and were not updated.`);let y=!0;for(const v of i)if(!N(v)){y=!1;break}if(!y){u.error("Please fill all required fields for each changed item."),D(!1);return}const m=i.map(v=>{const b={...v,location:E(v),quantity:v.serialNumber&&!v.showQuantityWithSerial?1:Math.max(1,v.quantity||1)};return delete b.locationType,delete b.department,delete b.showQuantityWithSerial,b});try{await r(m),u.success(`${m.length} item(s) updated successfully!`),s()}catch{u.error("Failed to update some items.")}finally{D(!1)}},q=[{title:"ID",dataIndex:"id",width:120,render:(i,x,y)=>e.jsxs("div",{children:[e.jsx("div",{children:i}),p(x,h[y])&&e.jsx(_t,{color:"blue",size:"small",children:"Modified"})]})},{title:"Type",dataIndex:"type",render:(i,x,y)=>e.jsx(se,{value:i,onChange:m=>w(y,"type",m),style:{minWidth:170},size:"small",children:Wl.map(m=>e.jsx(Mt,{value:m,children:m},m))})},{title:"Brand",dataIndex:"brand",render:(i,x,y)=>e.jsx(oe,{value:i,onChange:m=>w(y,"brand",m.target.value),size:"small",placeholder:"Enter brand name"})},{title:"Serial Number",dataIndex:"serialNumber",render:(i,x,y)=>e.jsx(oe,{value:i,onChange:m=>w(y,"serialNumber",m.target.value),size:"small",placeholder:"Enter serial number"})},{title:"Qty",dataIndex:"quantity",render:(i,x,y)=>e.jsx(oe,{type:"number",min:1,value:x.quantity,onChange:m=>w(y,"quantity",Number(m.target.value)),size:"small",style:{width:60},disabled:x.serialNumber&&!x.showQuantityWithSerial})},{title:"Remarks",dataIndex:"remarks",render:(i,x,y)=>e.jsx(oe.TextArea,{value:i,onChange:m=>w(y,"remarks",m.target.value),size:"small",rows:3,placeholder:"Enter any additional remarks"})},{title:"Issued Date",dataIndex:"issuedDate",render:(i,x,y)=>e.jsx(Le,{value:i&&i!=="0000-00-00"&&i!==""?Me(i,"YYYY-MM-DD"):null,onChange:m=>C(y,"issuedDate",m),format:"YYYY-MM-DD",size:"small",style:{width:120},allowClear:!0})},{title:"Purchased Date",dataIndex:"purchaseDate",render:(i,x,y)=>e.jsx(Le,{value:i&&i!=="0000-00-00"&&i!==""?Me(i,"YYYY-MM-DD"):null,onChange:m=>C(y,"purchaseDate",m),format:"YYYY-MM-DD",size:"small",style:{width:120},allowClear:!0})},{title:"Condition",dataIndex:"condition",render:(i,x,y)=>e.jsx(se,{value:i,onChange:m=>w(y,"condition",m),style:{minWidth:150},size:"small",children:Ql.map(m=>e.jsx(Mt,{value:m,children:m},m))})},{title:"Detachment/Office",dataIndex:"locationType",render:(i,x,y)=>e.jsxs("div",{style:{minWidth:200},children:[e.jsxs(se,{value:i,onChange:m=>w(y,"locationType",m),size:"small",placeholder:"Select location type",style:{width:150,marginBottom:4},children:[e.jsx(Mt,{value:"Head Office",children:"Head Office"}),e.jsx(Mt,{value:"Other",children:"Other (Specify Below)"})]}),x.locationType==="Head Office"&&e.jsx(se,{value:x.department,onChange:m=>w(y,"department",m),size:"small",placeholder:"Select department",style:{width:150,marginTop:4},children:Kl.map(m=>e.jsx(Mt,{value:m,children:m},m))}),x.locationType==="Other"&&e.jsx(oe,{value:x.location,onChange:m=>w(y,"location",m.target.value),size:"small",placeholder:"Enter specific location",style:{width:140,marginTop:4}})]})},{title:"Status",dataIndex:"status",render:(i,x,y)=>e.jsx(se,{value:i,onChange:m=>w(y,"status",m),style:{minWidth:100},size:"small",children:Xl.map(m=>e.jsx(Mt,{value:m,children:m},m))})}],P=j().length,T=d.length;return e.jsxs(e.Fragment,{children:[e.jsx(at,{open:S!==null,onOk:I,onCancel:O,title:"Serial Number Quantity",okText:"Yes",cancelText:"No",centered:!0,children:"Does the item you want to edit have only 1 serial number but has many quantities?"}),e.jsxs(at,{open:t,title:"Batch Edit Items",onCancel:s,onOk:M,okText:"Submit All",confirmLoading:o||n,width:1500,footer:[e.jsx(ee,{onClick:s,className:"custom-button-cancel",disabled:o||n,children:"Cancel"},"cancel"),e.jsxs(ee,{type:"primary",className:"custom-button",onClick:M,loading:o||n,children:["Submit ",P>0?`(${P}/${T})`:""]},"submit")],children:[e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded",children:e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Change Detection:"})," ",P," of ",T," items have changes.",P===0&&" No changes detected - only modified items will be submitted."]})}),e.jsx(mt,{bordered:!0,dataSource:d,columns:q,rowKey:i=>i.id,pagination:!1,size:"small",scroll:{x:"max-content",y:600},responsive:["sm","md","lg","xl","xxl"],rowClassName:(i,x)=>p(i,h[x])?"bg-blue-50":""}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"* Required fields: Type, Brand, Qty, Condition, Status, Detachment/Office"})]})]})}const{Text:Zl}=yt;function ei({visible:t,onClose:s,onConfirm:r,loading:n}){const[l,u]=a.useState([]),[d,c]=a.useState(""),[h,f]=a.useState([]),[o,D]=a.useState([]),[S,k]=a.useState(1),[p,j]=a.useState(10),[w,I]=a.useState(!1);a.useEffect(()=>{t&&(I(!0),lt().then(P=>{u(P),I(!1)}),c(""),f([]),D([]),k(1))},[t]);const O=a.useMemo(()=>d?l.filter(P=>Object.values(P).some(T=>String(T).toLowerCase().includes(d.toLowerCase()))):l,[l,d]),C=a.useMemo(()=>{const P=(S-1)*p;return O.slice(P,P+p)},[O,S,p]);a.useEffect(()=>{D(l.filter(P=>h.includes(P.id)))},[h,l]);const N=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"Type",dataIndex:"type",key:"type",width:120},{title:"Brand",dataIndex:"brand",key:"brand",width:120},{title:"Qty",dataIndex:"quantity",key:"quantity",width:70},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",width:150},{title:"Location",dataIndex:"location",key:"location",width:150},{title:"Status",dataIndex:"status",key:"status",width:100,render:P=>e.jsx(_t,{children:P})}],E=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"Type",dataIndex:"type",key:"type",width:120},{title:"Brand",dataIndex:"brand",key:"brand",width:120},{title:"Qty",dataIndex:"quantity",key:"quantity",width:70},{title:"Remove",key:"remove",width:80,render:(P,T)=>e.jsx(ee,{size:"small",danger:!0,onClick:()=>M(T.id),children:"Remove"})}],M=P=>{f(T=>T.filter(i=>i!==P))},q=()=>{o.length>=2&&r(o)};return e.jsx(at,{open:t,title:"Advanced Batch Item Selection",onCancel:s,width:1200,footer:[e.jsx(ee,{className:"custom-button-cancel",onClick:s,disabled:n||w,children:"Cancel"},"cancel"),e.jsxs(ee,{className:"custom-button",type:"primary",onClick:q,disabled:o.length<2||n||w,loading:n,children:["Proceed to Batch Edit (",o.length,")"]},"confirm")],children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(oe.Search,{placeholder:"Search items...",value:d,onChange:P=>c(P.target.value),allowClear:!0,style:{width:300},size:"small"}),e.jsx(Zl,{type:"secondary",className:"text-xs",children:"Select at least 2 items for batch edit."})]}),e.jsx(mt,{bordered:!0,dataSource:C,columns:N,rowKey:"id",size:"small",loading:w,pagination:{current:S,pageSize:p,total:O.length,showSizeChanger:!0,pageSizeOptions:["10","20","30","50","100"],onChange:(P,T)=>{k(P),j(T)},className:"text-xs"},rowSelection:{selectedRowKeys:h,onChange:f,preserveSelectedRowKeys:!0},scroll:{x:"max-content",y:400},className:"text-xs"})]}),e.jsxs("div",{className:"w-full md:w-1/3 bg-gray-50 border border-gray-200 rounded p-3 overflow-auto",style:{maxHeight:500},children:[e.jsxs("div",{className:"mb-2 font-semibold text-base",children:["Selected Items Preview (",o.length,")"]}),e.jsx(mt,{bordered:!0,dataSource:o,columns:E,rowKey:"id",size:"small",pagination:!1,scroll:{y:350},className:"text-xs",locale:{emptyText:"No items selected."}})]})]})})}const{Text:ti}=yt;function ai({visible:t,onClose:s,onConfirm:r,loading:n}){const[l,u]=a.useState([]),[d,c]=a.useState(""),[h,f]=a.useState([]),[o,D]=a.useState([]),[S,k]=a.useState(1),[p,j]=a.useState(10),[w,I]=a.useState(!1);a.useEffect(()=>{t&&(I(!0),lt().then(P=>{u(P),I(!1)}),c(""),f([]),D([]),k(1))},[t]);const O=a.useMemo(()=>d?l.filter(P=>Object.values(P).some(T=>String(T).toLowerCase().includes(d.toLowerCase()))):l,[l,d]),C=a.useMemo(()=>{const P=(S-1)*p;return O.slice(P,P+p)},[O,S,p]);a.useEffect(()=>{D(l.filter(P=>h.includes(P.id)))},[h,l]);const N=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"Type",dataIndex:"type",key:"type",width:120},{title:"Brand",dataIndex:"brand",key:"brand",width:120},{title:"Qty",dataIndex:"quantity",key:"quantity",width:70},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",width:150},{title:"Location",dataIndex:"location",key:"location",width:150},{title:"Status",dataIndex:"status",key:"status",width:100,render:P=>e.jsx(_t,{children:P})}],E=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"Type",dataIndex:"type",key:"type",width:120},{title:"Brand",dataIndex:"brand",key:"brand",width:120},{title:"Qty",dataIndex:"quantity",key:"quantity",width:70},{title:"Remove",key:"remove",width:80,render:(P,T)=>e.jsx(ee,{size:"small",danger:!0,onClick:()=>M(T.id),children:"Remove"})}],M=P=>{f(T=>T.filter(i=>i!==P))},q=()=>{o.length>=1&&r(o)};return e.jsx(at,{open:t,title:"Batch Delete Items",onCancel:s,width:1200,footer:[e.jsx(ee,{className:"custom-button-cancel",onClick:s,disabled:n||w,children:"Cancel"},"cancel"),e.jsxs(ee,{className:"custom-button",type:"primary",onClick:q,disabled:o.length<1||n||w,loading:n,danger:!0,children:["Delete Selected (",o.length,")"]},"confirm")],children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(oe.Search,{placeholder:"Search items...",value:d,onChange:P=>c(P.target.value),allowClear:!0,style:{width:300},size:"small"}),e.jsx(ti,{type:"secondary",className:"text-xs",children:"Select at least 1 item to delete."})]}),e.jsx(mt,{bordered:!0,dataSource:C,columns:N,rowKey:"id",size:"small",loading:w,pagination:{current:S,pageSize:p,total:O.length,showSizeChanger:!0,pageSizeOptions:["10","20","30","50","100"],onChange:(P,T)=>{k(P),j(T)},className:"text-xs"},rowSelection:{selectedRowKeys:h,onChange:f,preserveSelectedRowKeys:!0},scroll:{x:"max-content",y:400},className:"text-xs"})]}),e.jsxs("div",{className:"w-full md:w-1/3 bg-gray-50 border border-gray-200 rounded p-3 overflow-auto",style:{maxHeight:500},children:[e.jsxs("div",{className:"mb-2 font-semibold text-base",children:["Selected Items Preview (",o.length,")"]}),e.jsx(mt,{bordered:!0,dataSource:o,columns:E,rowKey:"id",size:"small",pagination:!1,scroll:{y:350},className:"text-xs",locale:{emptyText:"No items selected."}})]})]})})}const ni=(t,s="")=>{let r;switch(t){case"On Stock":r="green";break;case"For Repair":r="volcano";break;case"Deployed":r="blue";break;default:r="gray"}return e.jsx(_t,{color:r,className:"text-wrap text-center",children:e.jsx(rt,{text:t,searchTerm:s})})},ri=(t,s="")=>{let r;switch(t){case"Brand New":r="gold";break;case"Good Condition":r="green";break;case"Defective":r="red";break;default:r="gray"}return e.jsx(_t,{color:r,className:"text-wrap text-center",children:e.jsx(rt,{text:t,searchTerm:s})})},Qa=(t,s,r,n,l,u="")=>{const d=[{title:"ID",dataIndex:"id",key:"id",align:"center",width:"120px",className:"text-xs overflow-auto",sorter:(c,h)=>c.id.localeCompare(h.id),render:c=>e.jsx(rt,{text:c,searchTerm:u})},{title:"Type",dataIndex:"type",key:"type",align:"center",width:"100px",className:"text-xs overflow-auto",responsive:["sm"],render:c=>e.jsx(rt,{text:c,searchTerm:u}),filters:[{text:"AVR",value:"AVR"},{text:"Battery",value:"Battery"},{text:"Biometrics",value:"Biometrics"},{text:"Camera",value:"Camera"},{text:"CCTV",value:"CCTV"},{text:"Charger",value:"Charger"},{text:"Guard Tour Chips",value:"Guard Tour Chips"},{text:"Guard Tour System",value:"Guard Tour System"},{text:"Headset",value:"Headset"},{text:"Keyboard",value:"Keyboard"},{text:"Laptop",value:"Laptop"},{text:"Megaphone",value:"Megaphone"},{text:"WIFI-Mesh",value:"WIFI-Mesh"},{text:"Metal Detector",value:"Metal Detector"},{text:"Microphone",value:"Microphone"},{text:"Modem",value:"Modem"},{text:"Monitor",value:"Monitor"},{text:"Mouse",value:"Mouse"},{text:"Others",value:"Others"},{text:"Pedestal",value:"Pedestal"},{text:"Podium",value:"Podium"},{text:"Printer",value:"Printer"},{text:"Radio",value:"Radio"},{text:"Router",value:"Router"},{text:"Search Stick",value:"Search Stick"},{text:"Searchlight",value:"Searchlight"},{text:"Smartphone",value:"Smartphone"},{text:"Speaker",value:"Speaker"},{text:"Switch",value:"Switch"},{text:"System Unit",value:"System Unit"},{text:"Under Chassis",value:"Under Chassis"},{text:"UPS",value:"UPS"}],onFilter:(c,h)=>h.type.includes(c)},{title:"Brand",dataIndex:"brand",key:"brand",align:"center",width:"100px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(c,h)=>c.brand.localeCompare(h.brand),render:c=>e.jsx(rt,{text:c,searchTerm:u})},{title:"Qty",dataIndex:"quantity",key:"quantity",align:"center",width:"80px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],sorter:(c,h)=>c.quantity-h.quantity,render:c=>e.jsx(rt,{text:c,searchTerm:u})},{title:"Remarks",dataIndex:"remarks",key:"remarks",align:"center",width:"200px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],render:c=>e.jsx(rt,{text:c&&c.trim()!==""?c:"-",searchTerm:u})},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",align:"center",width:"150px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],sorter:(c,h)=>{var f;return(f=c.serialNumber)==null?void 0:f.localeCompare(h.serialNumber||"")},render:c=>e.jsx(rt,{text:c&&c.trim()!==""?c:"-",searchTerm:u})},...l==="default"?[{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(c,h)=>{const f=new Date(c.issuedDate),o=new Date(h.issuedDate);return r==="Newest"?o-f:f-o},render:c=>e.jsx(rt,{text:!c||c==="0000-00-00"?"NO DATE":c,searchTerm:u})},{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(c,h)=>{const f=new Date(c.purchaseDate),o=new Date(h.purchaseDate);return r==="Newest"?o-f:f-o},render:c=>e.jsx(rt,{text:c,searchTerm:u})}]:l==="issuedDate"?[{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(c,h)=>{const f=new Date(c.issuedDate),o=new Date(h.issuedDate);return r==="Newest"?o-f:f-o},render:c=>e.jsx(rt,{text:!c||c==="0000-00-00"?"NO DATE":c,searchTerm:u})}]:[{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(c,h)=>{const f=new Date(c.purchaseDate),o=new Date(h.purchaseDate);return r==="Newest"?o-f:f-o},render:c=>e.jsx(rt,{text:c,searchTerm:u})}],{title:"Condition",dataIndex:"condition",key:"condition",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],render:c=>ri(c,u),filters:[{text:"Brand New",value:"Brand New"},{text:"Good Condition",value:"Good Condition"},{text:"Defective",value:"Defective"}],onFilter:(c,h)=>h.condition.includes(c)},{title:"Detachment/Office",dataIndex:"location",key:"location",align:"center",width:"150px",className:"text-xs overflow-auto",responsive:["sm"],render:c=>e.jsx(rt,{text:c,searchTerm:u})},{title:"Status",dataIndex:"status",key:"status",align:"center",width:"110px",className:"text-xs overflow-auto",responsive:["sm"],render:c=>ni(c,u),filters:[{text:"On Stock",value:"On Stock"},{text:"For Repair",value:"For Repair"},{text:"Deployed",value:"Deployed"}],onFilter:(c,h)=>h.status.includes(c)}];return n!=="guest"&&d.push({title:"Action",key:"action",align:"center",width:"80px",className:"text-xs overflow-auto",render:c=>e.jsxs(e.Fragment,{children:[e.jsx(We,{title:"Edit",children:e.jsx(ee,{type:"text",icon:e.jsx(hr,{}),onClick:()=>t(c),size:"small"})}),c.quantity>1&&e.jsx(We,{title:"Redistribute",children:e.jsx(ee,{type:"text",icon:e.jsx(xa,{}),onClick:()=>s(c),size:"small"})})]})}),d},si=async t=>{var s;try{return(await It.post("/batch_edit_items.php",{items:t})).data}catch(r){throw((s=r.response)==null?void 0:s.data)||r}},li=async t=>{var s;try{return(await It.post("/batch_add_items.php",{items:t})).data}catch(r){throw((s=r.response)==null?void 0:s.data)||r}},ii=async t=>{var s;try{return(await It.post("/batch_delete_items.php",{itemIds:t})).data}catch(r){throw((s=r.response)==null?void 0:s.data)||r}},{Option:Tt}=se,Di=()=>{var Xe,ft,ct,Ke,ot,Je;const{message:t}=Nt.useApp(),[s,r]=a.useState(0),[n,l]=a.useState("all"),[u,d]=a.useState([]),[c,h]=a.useState(!1),[f]=a.useState("default"),o=$n({maxWidth:639}),[D,S]=a.useState(!1),[k,p]=a.useState(!1),[j,w]=a.useState(!1),[I,O]=a.useState(!1),[C,N]=a.useState([]),[E,M]=a.useState(!1),[q,P]=a.useState(!1),[T,i]=a.useState(!1),[x,y]=a.useState(!1),{searchText:m,setSearchText:v,sortOrder:b,currentPage:F,pageSize:H,isModalVisible:W,setIsModalVisible:Z,isEditModalVisible:J,setIsEditModalVisible:Q,redistributeItemData:Y,setRedistributeItemData:G,isRedistributeModalVisible:g,setIsRedistributeModalVisible:A,editingItem:_,isLoading:V,activeTab:X,isAdmin:K,userRole:L,paginatedData:U,totalEntries:Ce,handleRedistribute:ye,handleRedistributeItem:we,handlePageChange:Te,handleSortOrderChange:ce,handleTableChange:De,handleAddItem:$,handleEdit:me,handleEditItem:pe,handleTabChange:he,rowSelection:ue,dataSource:Pe,selectedRowKeys:Se,setSelectedRowKeys:Oe,handleRefresh:ve}=jl();a.useEffect(()=>{k||Oe([])},[k,Oe]);const He=()=>{const R=Pe.filter(Ie=>Se.includes(Ie.id));R.length>0&&(sn(R),Oe([]))},Ve=a.useMemo(()=>c?u:U,[c,u,U]),$e=a.useCallback(Xr(R=>{if(R===""){h(!1);return}h(!0);const Ie=Pe.filter(qe=>{if(!qe)return!1;if(n==="all"){for(const ze in qe){const nt=qe[ze];if(nt&&String(nt).toLowerCase().includes(R.toLowerCase()))return!0}return!1}else{const ze=qe[n];return ze&&String(ze).toLowerCase().includes(R.toLowerCase())}});d(Ie)},300),[Pe,n]),Ge=a.useCallback(R=>{const Ie=R.target.value;v(Ie),$e(Ie)},[$e,v]),Ae=a.useMemo(()=>{const R=[{key:"all",label:"All Columns"},{key:"id",label:"ID"},{key:"type",label:"Type"},{key:"brand",label:"Brand"},{key:"serialNumber",label:"Serial Number"},{key:"remarks",label:"Remarks"},{key:"quantity",label:"Quantity"},{key:"location",label:"Location"},{key:"status",label:"Status"},{key:"condition",label:"Condition"},{key:"issuedDate",label:"Issued Date"},{key:"purchaseDate",label:"Purchased Date"}],Ie=o?f:X;return R.filter(qe=>Ie==="issuedDate"?qe.key!=="purchaseDate":Ie==="purchaseDate"?qe.key!=="issuedDate":!0)},[X,f,o]),fe=()=>({items:Ae.map(R=>({key:R.key,label:e.jsx("span",{className:"break-words whitespace-normal text-xs",children:R.label})})),onClick:({key:R})=>l(R),selectedKeys:[n]}),Ne=()=>{l("all"),h(!1),d([]),r(R=>R+1),ce("Newest"),ve()},ge=async R=>{w(!0);try{await si(R),p(!1),N([]),Ne()}catch{}finally{w(!1)}},Re=async R=>{try{const Ie=await li(R);Ie&&Ie.results&&Ie.results.filter(ze=>ze.success).length>0?t.success("Batch add completed successfully!"):t.error("Batch add failed."),S(!1),Ne()}catch{t.error("Batch add failed.")}finally{}},ke=async R=>{P(!0);try{const Ie=R.map(ze=>ze.id),qe=await ii(Ie);if(qe&&qe.results){const ze=qe.results.filter(nt=>nt.success).length;ze>0?t.success(`${ze} item(s) deleted successfully!`):t.error("Batch delete failed.")}else t.error("Batch delete failed.");M(!1),Ne()}catch{t.error("Batch delete failed.")}finally{P(!1)}},Fe=async R=>{y(!0);try{sn(R),i(!1)}catch{t.error("Batch print failed.")}finally{y(!1)}},Qe=({key:R})=>{R==="batchAdd"?S(!0):R==="batchEdit"?O(!0):R==="batchDelete"?M(!0):R==="batchPrint"&&i(!0)},st=[{key:"batchAdd",label:"Batch Add"},{key:"batchEdit",label:e.jsx("span",{style:{color:"blue"},children:"Batch Edit"})},{key:"batchDelete",label:e.jsx("span",{style:{color:"red"},children:"Batch Delete"}),danger:!0},{key:"batchPrint",label:e.jsx("span",{style:{color:"green"},children:"Batch Print"})}];return e.jsxs(Jt,{title:e.jsx("span",{className:"font-bold flex justify-center text-lgi md:text-base lg:text-lgi xl:text-xl",children:"INVENTORY"}),className:"flex flex-col w-full mx-auto bg-[#A8E1C5] rounded-xl shadow border-none",children:[e.jsx("div",{className:"overflow-auto",children:e.jsx(Mn,{defaultActiveKey:"default",activeKey:X,onChange:he,type:"card",tabBarGutter:1,moreIcon:null,items:[{key:"default",label:e.jsx("span",{className:"text-xs",children:"Default"}),children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4",children:e.jsxs("div",{className:o?"flex flex-row flex-wrap gap-1 mb-2":"flex items-center gap-2",children:[e.jsx(Pt,{menu:fe(),trigger:["click"],className:o?"border-black text-xs block theme-aware-dropdown-btn":"border-black text-xs sm:block hidden theme-aware-dropdown-btn",children:e.jsxs(ee,{type:"text",className:o?"flex items-center p-1 h-7 text-xs":"flex items-center",size:"small",children:[e.jsx(Ya,{className:"text-xs"}),e.jsx(Et,{children:((Xe=Ae.find(R=>R.key===n))==null?void 0:Xe.label)||"All Columns"}),e.jsx(qa,{className:"align-middle ml-1"})]})}),e.jsx(oe,{placeholder:`Search in ${n==="all"?"all columns":(ft=Ae.find(R=>R.key===n))==null?void 0:ft.label}`,prefix:e.jsx(Kt,{}),value:m,onChange:Ge,className:o?"ml-1 w-24 border-black text-xs h-7":"ml-1 w-auto sm:w-auto border-black text-xs",size:"small",suffix:m?e.jsx(ee,{type:"text",size:"small",onClick:()=>{v(""),h(!1)},className:"text-xs p-0",children:"×"}):null}),e.jsx(We,{title:"Actions",children:(K||L==="user")&&e.jsx(ee,{type:"text",icon:e.jsx(Ka,{}),onClick:()=>Z(!0),className:o?"text-xs p-1 h-7":"text-xs",size:"small"})}),e.jsx(Pt,{menu:{items:st,onClick:Qe},trigger:["click"],children:e.jsx(We,{title:"Batch Actions",children:e.jsx(ee,{type:"text",icon:e.jsx(La,{}),className:o?"text-xs p-1 h-7":"text-xs",size:"small"})})}),K&&e.jsx(We,{title:"Delete",children:e.jsx(ee,{type:"link",icon:e.jsx(da,{}),danger:!0,disabled:Se.length===0,onClick:ke,className:o?"text-xs p-1 h-7":"text-xs",size:"small"})}),e.jsxs(se,{value:b,className:o?"w-20 text-xs transparent-select h-7":"w-auto text-xs transparent-select",onChange:ce,size:"small",children:[e.jsx(Tt,{value:"Newest",children:e.jsx("span",{className:"text-xs",children:"Newest"})}),e.jsx(Tt,{value:"Oldest",children:e.jsx("span",{className:"text-xs",children:"Oldest"})})]}),e.jsx(ee,{onClick:Ne,className:o?"custom-button w-16 text-xs p-1 h-7":"custom-button w-auto text-xs",type:"default",size:"small",icon:e.jsx(ma,{}),children:e.jsx("span",{className:"text-xs",children:"Refresh"})}),e.jsx(ee,{onClick:He,icon:e.jsx(za,{}),size:"small",className:o?"custom-button w-16 text-xs p-1 h-7":"custom-button w-auto text-xs",disabled:!Se||Se.length===0,children:e.jsx("span",{className:"text-xs",children:"Print"})})]})}),e.jsx("div",{className:"w-auto overflow-x-auto",children:e.jsx(mt,{rowSelection:ue,rowKey:"id",dataSource:Ve,columns:Qa(me,ye,b,L,"default",m),pagination:!1,bordered:!0,onChange:De,scroll:{x:"max-content",y:600},loading:V,responsive:["sm","md","lg","xl","xxl"],expandable:o?{expandedRowRender:R=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",R.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",R.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",R.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",R.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",R.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",R.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",R.issuedDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",R.purchaseDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",R.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",R.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",R.status]})]}),rowExpandable:()=>!0}:void 0,className:"text-xs"},s)})]})},{key:"issuedDate",label:e.jsx("span",{className:"text-xs",children:"Issued Date"}),children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4",children:e.jsxs("div",{className:o?"flex flex-row flex-wrap gap-1 mb-2":"flex items-center gap-2",children:[e.jsx(Pt,{menu:fe(),trigger:["click"],className:o?"border-black text-xs block theme-aware-dropdown-btn":"border-black text-xs sm:block hidden theme-aware-dropdown-btn",children:e.jsxs(ee,{type:"text",className:o?"flex items-center p-1 h-7 text-xs":"flex items-center",size:"small",children:[e.jsx(Ya,{className:"text-xs"}),e.jsx(Et,{children:((ct=Ae.find(R=>R.key===n))==null?void 0:ct.label)||"All Columns"}),e.jsx(qa,{className:"align-middle ml-1"})]})}),e.jsx(oe,{placeholder:`Search in ${n==="all"?"all columns":(Ke=Ae.find(R=>R.key===n))==null?void 0:Ke.label}`,prefix:e.jsx(Kt,{}),value:m,onChange:Ge,className:o?"ml-1 w-24 border-black text-xs h-7":"ml-1 w-auto sm:w-auto border-black text-xs",size:"small",suffix:m?e.jsx(ee,{type:"text",size:"small",onClick:()=>{v(""),h(!1)},className:"text-xs p-0",children:"×"}):null}),e.jsx(We,{title:"Actions",children:(K||L==="user")&&e.jsx(ee,{type:"text",icon:e.jsx(Ka,{}),onClick:()=>Z(!0),className:o?"text-xs p-1 h-7":"text-xs",size:"small"})}),e.jsx(Pt,{menu:{items:st,onClick:Qe},trigger:["click"],children:e.jsx(We,{title:"Batch Actions",children:e.jsx(ee,{type:"text",icon:e.jsx(La,{}),className:o?"text-xs p-1 h-7":"text-xs",size:"small"})})}),K&&e.jsx(We,{title:"Delete",children:e.jsx(ee,{type:"link",icon:e.jsx(da,{}),danger:!0,disabled:Se.length===0,onClick:ke,className:o?"text-xs p-1 h-7":"text-xs",size:"small"})}),e.jsxs(se,{defaultValue:"Newest",className:o?"w-20 text-xs transparent-select h-7":"w-auto text-xs transparent-select",onChange:ce,size:"small",children:[e.jsx(Tt,{value:"Newest",children:e.jsx("span",{className:"text-xs",children:"Newest"})}),e.jsx(Tt,{value:"Oldest",children:e.jsx("span",{className:"text-xs",children:"Oldest"})})]}),e.jsx(ee,{onClick:Ne,className:o?"custom-button w-16 text-xs p-1 h-7":"custom-button w-auto text-xs",type:"default",size:"small",icon:e.jsx(ma,{}),children:e.jsx("span",{className:"text-xs",children:"Refresh"})}),e.jsx(ee,{onClick:He,icon:e.jsx(za,{}),size:"small",className:o?"custom-button w-16 text-xs p-1 h-7":"custom-button w-auto text-xs",disabled:!Se||Se.length===0,children:e.jsx("span",{className:"text-xs",children:"Print"})})]})}),e.jsx("div",{className:"w-auto overflow-x-auto",children:e.jsx(mt,{rowSelection:ue,rowKey:"id",dataSource:Ve,columns:Qa(me,ye,b,L,"issuedDate",m),pagination:!1,bordered:!0,onChange:De,scroll:{x:"max-content",y:600},loading:V,responsive:["sm","md","lg","xl","xxl"],expandable:o?{expandedRowRender:R=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",R.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",R.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",R.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",R.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",R.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",R.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Issued Date:"})," ",R.issuedDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",R.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",R.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",R.status]})]}),rowExpandable:()=>!0}:void 0,className:"text-xs"},s)})]})},{key:"purchaseDate",label:e.jsx("span",{className:"text-xs",children:"Purchased Date"}),children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4",children:e.jsxs("div",{className:o?"flex flex-row flex-wrap gap-1 mb-2":"flex items-center gap-2",children:[e.jsx(Pt,{menu:fe(),trigger:["click"],className:o?"border-black text-xs block theme-aware-dropdown-btn":"border-black text-xs sm:block hidden theme-aware-dropdown-btn",children:e.jsxs(ee,{type:"text",className:o?"flex items-center p-1 h-7 text-xs":"flex items-center",size:"small",children:[e.jsx(Ya,{className:"text-xs"}),e.jsx(Et,{children:((ot=Ae.find(R=>R.key===n))==null?void 0:ot.label)||"All Columns"}),e.jsx(qa,{className:"align-middle ml-1"})]})}),e.jsx(oe,{placeholder:`Search in ${n==="all"?"all columns":(Je=Ae.find(R=>R.key===n))==null?void 0:Je.label}`,prefix:e.jsx(Kt,{}),value:m,onChange:Ge,className:o?"ml-1 w-24 border-black text-xs h-7":"ml-1 w-auto sm:w-auto border-black text-xs",size:"small",suffix:m?e.jsx(ee,{type:"text",size:"small",onClick:()=>{v(""),h(!1)},className:"text-xs p-0",children:"×"}):null}),e.jsx(We,{title:"Actions",children:(K||L==="user")&&e.jsx(ee,{type:"text",icon:e.jsx(Ka,{}),onClick:()=>Z(!0),className:o?"text-xs p-1 h-7":"text-xs",size:"small"})}),e.jsx(Pt,{menu:{items:st,onClick:Qe},trigger:["click"],children:e.jsx(We,{title:"Batch Actions",children:e.jsx(ee,{type:"text",icon:e.jsx(La,{}),className:o?"text-xs p-1 h-7":"text-xs",size:"small"})})}),K&&e.jsx(We,{title:"Delete",children:e.jsx(ee,{type:"link",icon:e.jsx(da,{}),danger:!0,disabled:Se.length===0,onClick:ke,className:o?"text-xs p-1 h-7":"text-xs",size:"small"})}),e.jsxs(se,{defaultValue:"Newest",className:o?"w-20 text-xs transparent-select h-7":"w-auto text-xs transparent-select",onChange:ce,size:"small",children:[e.jsx(Tt,{value:"Newest",children:e.jsx("span",{className:"text-xs",children:"Newest"})}),e.jsx(Tt,{value:"Oldest",children:e.jsx("span",{className:"text-xs",children:"Oldest"})})]}),e.jsx(ee,{onClick:Ne,className:o?"custom-button w-16 text-xs p-1 h-7":"custom-button w-auto text-xs",type:"default",size:"small",icon:e.jsx(ma,{}),children:e.jsx("span",{className:"text-xs",children:"Refresh"})}),e.jsx(ee,{onClick:He,icon:e.jsx(za,{}),size:"small",className:o?"custom-button w-16 text-xs p-1 h-7":"custom-button w-auto text-xs",disabled:!Se||Se.length===0,children:e.jsx("span",{className:"text-xs",children:"Print"})})]})}),e.jsx("div",{className:"w-auto overflow-x-auto",children:e.jsx(mt,{rowSelection:ue,rowKey:"id",dataSource:Ve,columns:Qa(me,ye,b,L,"purchaseDate",m),pagination:!1,bordered:!0,onChange:De,scroll:{x:"max-content",y:600},loading:V,responsive:["sm","md","lg","xl","xxl"],expandable:o?{expandedRowRender:R=>e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("b",{children:"ID:"})," ",R.id]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",R.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Brand:"})," ",R.brand]}),e.jsxs("div",{children:[e.jsx("b",{children:"Quantity:"})," ",R.quantity]}),e.jsxs("div",{children:[e.jsx("b",{children:"Remarks:"})," ",R.remarks]}),e.jsxs("div",{children:[e.jsx("b",{children:"Serial Number:"})," ",R.serialNumber]}),e.jsxs("div",{children:[e.jsx("b",{children:"Purchased Date:"})," ",R.purchaseDate||"NO DATE"]}),e.jsxs("div",{children:[e.jsx("b",{children:"Condition:"})," ",R.condition]}),e.jsxs("div",{children:[e.jsx("b",{children:"Detachment/Office:"})," ",R.location]}),e.jsxs("div",{children:[e.jsx("b",{children:"Status:"})," ",R.status]})]}),rowExpandable:()=>!0}:void 0,className:"text-xs"},s)})]})}]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mt-5 space-y-2 sm:space-y-0",children:[e.jsxs(yt.Text,{className:"w-full text-xs text-nowrap text-center sm:text-left overflow-auto",style:{color:"#072C1C"},children:["Showing data of ",Ce>0?(F-1)*H+1:0," to ",Math.min(F*H,Ce)," of ",Ce," entries"]}),e.jsx("div",{className:"w-full flex justify-center sm:justify-end",children:e.jsx(qn,{current:F,pageSize:H,total:Ce,showSizeChanger:!0,pageSizeOptions:["10","20","30","50","100","200","500","1000","2000"],onChange:Te,className:"text-xs",responsive:!0})})]}),e.jsx(Al,{visible:W,onClose:()=>Z(!1),onAdd:$,onRedistribute:we,handleEditItem:pe,loading:V}),e.jsx($l,{visible:J,onClose:()=>Q(!1),onEdit:pe,item:_,loading:V}),e.jsx(_l,{visible:g,onClose:()=>{A(!1),G(null)},onEdit:we,item:Y,loading:V}),e.jsx(Gl,{visible:D,onClose:()=>S(!1),onBatchAdd:Re,loading:V}),e.jsx(ei,{visible:I,onClose:()=>O(!1),onConfirm:R=>{N(R),O(!1),p(!0)},loading:j}),e.jsx(Jl,{visible:k,onClose:()=>{p(!1),N([])},onBatchEdit:ge,loading:j,selectedItems:C}),e.jsx(ai,{visible:E,onClose:()=>M(!1),onConfirm:ke,loading:q}),e.jsx(Qr,{visible:T,onClose:()=>i(!1),onConfirm:Fe,loading:x})]})};export{Di as default};
