import{j as t,a3 as Y,r as a,B as Q,a4 as Z}from"./index-CoTjVTXu.js";import{g as ee}from"./addItemToInventory-UNG0Q4vs.js";import{Q as te}from"./QrCodeModal-VNjfzLfB.js";import{H as o}from"./HighlightText-2pS5ok3g.js";import{T as A}from"./index-DX3u3_2E.js";import{d as se}from"./debounce-CjVtstZ6.js";import{u as ae,F as le}from"./index-cS6mKtwe.js";import{C as re}from"./index-Ch4o3jr1.js";import{D as ne,S as oe}from"./index-Bd7YzGv1.js";import{R as ie,S as E}from"./index-FFLaIl49.js";import{R as ce}from"./FilterOutlined-Cy75TwN2.js";import{I as de}from"./index-GjVEIOir.js";import{R as xe}from"./SearchOutlined-oi5dMXdq.js";import{T as ue}from"./index-r6vKt3ij.js";import{P as me}from"./Pagination-BTBkJFo1.js";import"./index-C1uGnGf1.js";import"./createForOfIteratorHelper-_GrxZFqs.js";import"./addEventListener-C2_QGBxY.js";import"./index-DS9BMYTm.js";import"./useBreakpoint-BTN1QGJk.js";import"./useForceUpdate-qFMU9LT5.js";import"./responsiveObserver-B_NheYvK.js";import"./PlusOutlined-DXG9lXkJ.js";import"./Dropdown-IxbQZqzH.js";import"./move-CeDiqiSl.js";import"./TextArea-C-Yc_kQs.js";import"./CheckOutlined-7lQp5xtI.js";import"./EyeOutlined-CY0v74EL.js";const pe=(i,r="")=>{let e;switch(i){case"On Stock":e="green";break;case"For Repair":e="volcano";break;case"Deployed":e="blue";break;default:e="gray"}return t.jsx(A,{color:e,className:"text-wrap text-center",children:t.jsx(o,{text:i,searchTerm:r})})},fe=(i,r="")=>{let e;switch(i){case"Brand New":e="gold";break;case"Good Condition":e="green";break;case"Defective":e="red";break;default:e="gray"}return t.jsx(A,{color:e,className:"text-wrap text-center",children:t.jsx(o,{text:i,searchTerm:r})})},he=(i,r="")=>[{title:"QR Code",dataIndex:"qrCode",key:"qrCode",align:"center",width:"70px",className:"text-xs overflow-auto",render:(e,l)=>t.jsx(Y,{style:{fontSize:"24px",cursor:"pointer"},onClick:()=>i(l),title:"Generate QR Code"})},{title:"ID",dataIndex:"id",key:"id",align:"center",className:"text-xs overflow-auto",width:"120px",sorter:(e,l)=>e.id.localeCompare(l.id),render:e=>t.jsx(o,{text:e,searchTerm:r})},{title:"Type",dataIndex:"type",key:"type",align:"center",className:"text-xs overflow-auto",responsive:["sm"],width:"120px",sorter:(e,l)=>e.type.localeCompare(l.type),render:e=>t.jsx(o,{text:e,searchTerm:r})},{title:"Brand",dataIndex:"brand",key:"brand",align:"center",className:"text-xs overflow-auto",width:"120px",responsive:["sm"],sorter:(e,l)=>e.brand.localeCompare(l.brand),render:e=>t.jsx(o,{text:e,searchTerm:r})},{title:"Qty",dataIndex:"quantity",key:"quantity",align:"center",className:"text-xs overflow-auto text-wrap",responsive:["sm"],width:"70px",sorter:(e,l)=>e.quantity-l.quantity,render:e=>t.jsx(o,{text:e,searchTerm:r})},{title:"Remarks",dataIndex:"remarks",key:"remarks",align:"center",className:"text-xs overflow-auto text-wrap",responsive:["sm"],width:"200px",render:e=>t.jsx(o,{text:e&&e.trim()!==""?e:"-",searchTerm:r})},{title:"Serial Number",dataIndex:"serialNumber",key:"serialNumber",align:"center",width:"170px",className:"text-xs overflow-auto text-wrap",responsive:["sm"],sorter:(e,l)=>e.serialNumber.localeCompare(l.serialNumber),render:e=>t.jsx(o,{text:e&&e.trim()!==""?e:"-",searchTerm:r})},{title:"Issued Date",dataIndex:"issuedDate",key:"issuedDate",align:"center",className:"text-xs overflow-auto",width:"110px",responsive:["sm"],sorter:(e,l)=>e.issuedDate.localeCompare(l.issuedDate),render:e=>!e||e==="0000-00-00"||e===""?t.jsx(o,{text:"NO DATE",searchTerm:r}):t.jsx(o,{text:e,searchTerm:r})},{title:"Purchased Date",dataIndex:"purchaseDate",key:"purchaseDate",align:"center",width:"110px",className:"text-xs overflow-auto",responsive:["sm"],sorter:(e,l)=>e.purchaseDate.localeCompare(l.purchaseDate),render:e=>!e||e==="0000-00-00"||e===""?t.jsx(o,{text:"NO DATE",searchTerm:r}):t.jsx(o,{text:e,searchTerm:r})},{title:"Condition",dataIndex:"condition",key:"condition",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],render:e=>fe(e,r),filters:[{text:"Brand New",value:"Brand New"},{text:"Good Condition",value:"Good Condition"},{text:"Defective",value:"Defective"}],onFilter:(e,l)=>l.condition.includes(e)},{title:"Detachment/Office",dataIndex:"location",key:"location",align:"center",width:"150px",className:"text-xs overflow-auto",responsive:["sm"],render:e=>t.jsx(o,{text:e,searchTerm:r})},{title:"Status",dataIndex:"status",key:"status",align:"center",width:"120px",className:"text-xs overflow-auto",responsive:["sm"],render:e=>pe(e,r),filters:[{text:"On Stock",value:"On Stock"},{text:"For Repair",value:"For Repair"},{text:"Deployed",value:"Deployed"}],onFilter:(e,l)=>l.status.includes(e)}],{Option:q}=E,He=({onItemSelect:i})=>{var O,F;const[r,e]=a.useState(""),[l,j]=a.useState("newest"),[u,p]=a.useState(1),[m,L]=a.useState(10),[f,P]=a.useState([]),[B,N]=a.useState(!1),[w,k]=a.useState(null),[z,D]=a.useState(!0),[c,v]=a.useState("all"),[S,T]=a.useState([]),[I,h]=a.useState(!1),V=ae({maxWidth:639}),g=a.useCallback(async()=>{D(!0);try{const s=await ee();if(Array.isArray(s)){const n=[...s].sort((d,x)=>x.id-d.id);P(n),n.length>0&&!w&&(i(n[0]),k(n[0]))}else console.error("Received invalid data:",s)}catch(s){console.error("Failed to load inventory data:",s)}finally{D(!1)}},[i,w]);a.useEffect(()=>{g()},[g]);const b=a.useMemo(()=>[{key:"all",label:"All Columns"},{key:"id",label:"ID"},{key:"type",label:"Type"},{key:"brand",label:"Brand"},{key:"quantity",label:"Quantity"},{key:"remarks",label:"Remarks"},{key:"serialNumber",label:"Serial Number"},{key:"issuedDate",label:"Issued Date"},{key:"purchaseDate",label:"Purchase Date"},{key:"location",label:"Location"},{key:"status",label:"Status"},{key:"condition",label:"Condition"}],[]),C=a.useMemo(()=>I?S:f,[I,S,f]),$=a.useMemo(()=>[...C].sort((s,n)=>l==="newest"?n.id-s.id:l==="oldest"?s.id-n.id:0),[C,l]),R=a.useCallback(se(s=>{if(s===""){h(!1);return}h(!0);const n=f.filter(d=>{if(!d)return!1;if(c==="all"){for(const x in d){const M=d[x];if(M&&String(M).toLowerCase().includes(s.toLowerCase()))return!0}return!1}else{const x=d[c];return x&&String(x).toLowerCase().includes(s.toLowerCase())}});T(n)},300),[f,c]),G=a.useCallback(s=>{const n=s.target.value;e(n),R(n)},[R]),H=a.useCallback(s=>{v(s)},[]);a.useCallback(()=>{e(""),j("newest"),p(1),v("all"),h(!1)},[]);const K=()=>{e(""),j("newest"),p(1),v("all"),h(!1),g()},W=a.useCallback(s=>{j(s.toLowerCase()),p(1)},[]),_=a.useCallback((s,n)=>{p(s),L(n)},[]),J=a.useCallback(s=>{k(s),N(!0)},[]),U=a.useCallback(s=>{i(s),k(s)},[i]),y=C.length,X=a.useMemo(()=>b.map(s=>({key:s.key,label:s.label})),[b]);return t.jsxs(re,{title:t.jsx("span",{className:"text-lgi sm:text-sm md:text-base lg:text-lgi xl:text-xl font-bold flex justify-center",children:"ITEMS"}),className:"flex flex-col w-full mx-auto bg-[#A8E1C5] rounded-xl shadow border-none",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 space-y-2 sm:space-y-0",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-2 sm:mb-0",children:[t.jsx(ne,{className:"theme-aware-dropdown-btn border border-black sm:block hidden",menu:{items:X,onClick:({key:s})=>H(s),selectedKeys:[c]},trigger:["click"],children:t.jsx(Q,{type:"text",icon:t.jsx(ce,{className:"text-xs"}),children:t.jsxs(oe,{className:"text-xs w-auto align-middle",children:[((O=b.find(s=>s.key===c))==null?void 0:O.label)||"All Columns",t.jsx(ie,{})]})})}),t.jsx(de,{placeholder:`Search in ${c==="all"?"all columns":(F=b.find(s=>s.key===c))==null?void 0:F.label}`,prefix:t.jsx(xe,{}),className:"border border-black w-auto ml-1 text-xs",value:r,onChange:G})]}),t.jsxs("div",{className:"flex gap-2 w-auto justify-center",children:[t.jsxs(E,{defaultValue:"Newest",className:"w-auto text-xs transparent-select mt-1",size:"small",onChange:W,children:[t.jsx(q,{value:"Newest",children:t.jsx("span",{className:"text-xs",children:"Newest"})}),t.jsx(q,{value:"Oldest",children:t.jsx("span",{className:"text-xs",children:"Oldest"})})]}),t.jsx(Q,{onClick:K,className:"custom-button mt-1 text-xs",type:"default",size:"small",icon:t.jsx(Z,{}),children:t.jsx("span",{className:"text-xs",children:"Refresh"})})]})]}),t.jsx("div",{className:"w-auto overflow-x-auto",children:t.jsx(le,{rowKey:"id",columns:he(J,r),dataSource:$.slice((u-1)*m,u*m),pagination:!1,bordered:!0,onRow:s=>({onClick:()=>U(s)}),scroll:{x:"max-content",y:600},loading:z,responsive:["sm","md","lg","xl","xxl"],expandable:V?{expandedRowRender:s=>t.jsxs("div",{className:"text-xs space-y-1",children:[t.jsxs("div",{children:[t.jsx("b",{children:"ID:"})," ",s.id]}),t.jsxs("div",{children:[t.jsx("b",{children:"Type:"})," ",s.type]}),t.jsxs("div",{children:[t.jsx("b",{children:"Brand:"})," ",s.brand]}),t.jsxs("div",{children:[t.jsx("b",{children:"Quantity:"})," ",s.quantity]}),t.jsxs("div",{children:[t.jsx("b",{children:"Remarks:"})," ",s.remarks]}),t.jsxs("div",{children:[t.jsx("b",{children:"Serial Number:"})," ",s.serialNumber]}),t.jsxs("div",{children:[t.jsx("b",{children:"Issued Date:"})," ",s.issuedDate]}),t.jsxs("div",{children:[t.jsx("b",{children:"Purchased Date:"})," ",s.purchaseDate]}),t.jsxs("div",{children:[t.jsx("b",{children:"Condition:"})," ",s.condition]}),t.jsxs("div",{children:[t.jsx("b",{children:"Location:"})," ",s.location]}),t.jsxs("div",{children:[t.jsx("b",{children:"Status:"})," ",s.status]})]}),rowExpandable:()=>!0}:void 0})}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mt-5 space-y-2 sm:space-y-0",children:[t.jsxs(ue.Text,{style:{color:"#072C1C"},className:"w-full text-xs text-wrap text-center sm:text-left",children:["Showing data of ",y>0?(u-1)*m+1:0," to"," ",Math.min(u*m,y)," of ",y," entries"]}),t.jsx("div",{className:"w-full flex justify-center sm:justify-end",children:t.jsx(me,{current:u,pageSize:m,total:y,showSizeChanger:!0,pageSizeOptions:["10","20","30","50","100","200","500","1000","2000"],onChange:_,className:"text-xs",responsive:!0})})]}),t.jsx(te,{isVisible:B,onClose:()=>N(!1),qrDetails:w})]})};export{He as default};
